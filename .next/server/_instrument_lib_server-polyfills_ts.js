"use strict";exports.id="_instrument_lib_server-polyfills_ts",exports.ids=["_instrument_lib_server-polyfills_ts"],exports.modules={"(instrument)/./lib/server-polyfills.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n// Minimal server-side polyfills for Web APIs that may be missing in older Node runtimes\n// Local minimal types to avoid depending on DOM lib typings\n// Only define polyfills if we're in a Node.js environment (not browser)\nif (typeof process !== 'undefined' && process.versions && process.versions.node) {\n    // Polyfill global File if not present (Node < 20)\n    if (typeof globalThis.File === \"undefined\") {\n        // Simple File-like class for server-side use\n        class PolyfillFile {\n            constructor(fileBits = [], fileName = \"unknown\", options = {}){\n                this.name = String(fileName);\n                this.lastModified = typeof options.lastModified === \"number\" ? options.lastModified : Date.now();\n                this.type = options.type || '';\n                // Convert file bits to buffer\n                const buffers = [];\n                for (const bit of fileBits){\n                    if (typeof bit === 'string') {\n                        buffers.push(Buffer.from(bit, 'utf-8'));\n                    } else if (bit instanceof ArrayBuffer) {\n                        buffers.push(Buffer.from(bit));\n                    } else if (bit instanceof Uint8Array) {\n                        buffers.push(Buffer.from(bit));\n                    } else if (Buffer.isBuffer(bit)) {\n                        buffers.push(bit);\n                    }\n                }\n                this._buffer = Buffer.concat(buffers);\n                this.size = this._buffer.length;\n            }\n            arrayBuffer() {\n                return Promise.resolve(this._buffer.buffer.slice(this._buffer.byteOffset, this._buffer.byteOffset + this._buffer.byteLength));\n            }\n            text() {\n                return Promise.resolve(this._buffer.toString('utf-8'));\n            }\n            stream() {\n                // Simple implementation for compatibility\n                throw new Error('stream() not implemented in polyfill');\n            }\n        }\n        ;\n        globalThis.File = PolyfillFile;\n    }\n    // Polyfill global FormData if not present\n    if (typeof globalThis.FormData === \"undefined\") {\n        class PolyfillFormData {\n            append(name, value, fileName) {\n                this._data.set(name, value);\n            }\n            get(name) {\n                return this._data.get(name) || null;\n            }\n            has(name) {\n                return this._data.has(name);\n            }\n            set(name, value, fileName) {\n                this._data.set(name, value);\n            }\n            delete(name) {\n                this._data.delete(name);\n            }\n            *entries() {\n                for (const [key, value] of this._data){\n                    yield [\n                        key,\n                        value\n                    ];\n                }\n            }\n            *keys() {\n                for (const key of this._data.keys()){\n                    yield key;\n                }\n            }\n            *values() {\n                for (const value of this._data.values()){\n                    yield value;\n                }\n            }\n            [Symbol.iterator]() {\n                return this.entries();\n            }\n            constructor(){\n                this._data = new Map();\n            }\n        }\n        ;\n        globalThis.FormData = PolyfillFormData;\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1lBQ3BCO1lBRUEsQ0FBQ3NDLFVBQWtFO2dCQUNqRSxLQUFLLE1BQU0sQ0FBQ0MsS0FBS1AsTUFBTSxJQUFJLElBQUksQ0FBQ0MsS0FBSyxDQUFFO29CQUNyQyxNQUFNO3dCQUFDTTt3QkFBS1A7cUJBQU07Z0JBQ3BCO1lBQ0Y7WUFFQSxDQUFDUSxPQUFpQztnQkFDaEMsS0FBSyxNQUFNRCxPQUFPLElBQUksQ0FBQ04sS0FBSyxDQUFDTyxJQUFJLEdBQUk7b0JBQ25DLE1BQU1EO2dCQUNSO1lBQ0Y7WUFFQSxDQUFDRSxTQUF1RDtnQkFDdEQsS0FBSyxNQUFNVCxTQUFTLElBQUksQ0FBQ0MsS0FBSyxDQUFDUSxNQUFNLEdBQUk7b0JBQ3ZDLE1BQU1UO2dCQUNSO1lBQ0Y7WUFFQSxDQUFDVSxPQUFPQyxRQUFRLENBQUMsR0FBMkQ7Z0JBQzFFLE9BQU8sSUFBSSxDQUFDTCxPQUFPO1lBQ3JCOztxQkExQ1FMLFFBQW1DLElBQUlXOztRQTJDakQ7O1FBQ0VsRCxXQUFtQm1DLFFBQVEsR0FBR0M7SUFDbEM7QUFDRjtBQUdTIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHByZXR0XFxPbmVEcml2ZVxcRGVza3RvcFxccHJvamVjdHNcXFNvbG9TdWNjZXNzLUFJXFxsaWJcXHNlcnZlci1wb2x5ZmlsbHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTWluaW1hbCBzZXJ2ZXItc2lkZSBwb2x5ZmlsbHMgZm9yIFdlYiBBUElzIHRoYXQgbWF5IGJlIG1pc3NpbmcgaW4gb2xkZXIgTm9kZSBydW50aW1lc1xyXG5cclxuLy8gTG9jYWwgbWluaW1hbCB0eXBlcyB0byBhdm9pZCBkZXBlbmRpbmcgb24gRE9NIGxpYiB0eXBpbmdzXHJcbnR5cGUgUG9seWZpbGxCbG9iUGFydCA9IHN0cmluZyB8IEFycmF5QnVmZmVyIHwgVWludDhBcnJheSB8IGFueVxyXG5pbnRlcmZhY2UgUG9seWZpbGxGaWxlT3B0aW9ucyB7IHR5cGU/OiBzdHJpbmc7IGxhc3RNb2RpZmllZD86IG51bWJlciB9XHJcbnR5cGUgUG9seWZpbGxGb3JtRGF0YUVudHJ5VmFsdWUgPSBzdHJpbmcgfCBhbnlcclxuXHJcbi8vIE9ubHkgZGVmaW5lIHBvbHlmaWxscyBpZiB3ZSdyZSBpbiBhIE5vZGUuanMgZW52aXJvbm1lbnQgKG5vdCBicm93c2VyKVxyXG5pZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MudmVyc2lvbnMgJiYgcHJvY2Vzcy52ZXJzaW9ucy5ub2RlKSB7XHJcbiAgLy8gUG9seWZpbGwgZ2xvYmFsIEZpbGUgaWYgbm90IHByZXNlbnQgKE5vZGUgPCAyMClcclxuICBpZiAodHlwZW9mIChnbG9iYWxUaGlzIGFzIGFueSkuRmlsZSA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgLy8gU2ltcGxlIEZpbGUtbGlrZSBjbGFzcyBmb3Igc2VydmVyLXNpZGUgdXNlXHJcbiAgICBjbGFzcyBQb2x5ZmlsbEZpbGUge1xyXG4gICAgICBwdWJsaWMgcmVhZG9ubHkgbmFtZTogc3RyaW5nXHJcbiAgICAgIHB1YmxpYyByZWFkb25seSBsYXN0TW9kaWZpZWQ6IG51bWJlclxyXG4gICAgICBwdWJsaWMgcmVhZG9ubHkgc2l6ZTogbnVtYmVyXHJcbiAgICAgIHB1YmxpYyByZWFkb25seSB0eXBlOiBzdHJpbmdcclxuICAgICAgcHJpdmF0ZSBfYnVmZmVyOiBhbnlcclxuXHJcbiAgICAgIGNvbnN0cnVjdG9yKGZpbGVCaXRzOiBQb2x5ZmlsbEJsb2JQYXJ0W10gPSBbXSwgZmlsZU5hbWU6IHN0cmluZyA9IFwidW5rbm93blwiLCBvcHRpb25zOiBQb2x5ZmlsbEZpbGVPcHRpb25zID0ge30pIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBTdHJpbmcoZmlsZU5hbWUpXHJcbiAgICAgICAgdGhpcy5sYXN0TW9kaWZpZWQgPSB0eXBlb2Ygb3B0aW9ucy5sYXN0TW9kaWZpZWQgPT09IFwibnVtYmVyXCIgPyBvcHRpb25zLmxhc3RNb2RpZmllZCA6IERhdGUubm93KClcclxuICAgICAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGUgfHwgJydcclxuICAgICAgICBcclxuICAgICAgICAvLyBDb252ZXJ0IGZpbGUgYml0cyB0byBidWZmZXJcclxuICAgICAgICBjb25zdCBidWZmZXJzOiBhbnlbXSA9IFtdXHJcbiAgICAgICAgZm9yIChjb25zdCBiaXQgb2YgZmlsZUJpdHMpIHtcclxuICAgICAgICAgIGlmICh0eXBlb2YgYml0ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBidWZmZXJzLnB1c2goQnVmZmVyLmZyb20oYml0LCAndXRmLTgnKSlcclxuICAgICAgICAgIH0gZWxzZSBpZiAoYml0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcclxuICAgICAgICAgICAgYnVmZmVycy5wdXNoKEJ1ZmZlci5mcm9tKGJpdCkpXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGJpdCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcclxuICAgICAgICAgICAgYnVmZmVycy5wdXNoKEJ1ZmZlci5mcm9tKGJpdCkpXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKEJ1ZmZlci5pc0J1ZmZlcihiaXQpKSB7XHJcbiAgICAgICAgICAgIGJ1ZmZlcnMucHVzaChiaXQpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2J1ZmZlciA9IEJ1ZmZlci5jb25jYXQoYnVmZmVycylcclxuICAgICAgICB0aGlzLnNpemUgPSB0aGlzLl9idWZmZXIubGVuZ3RoXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGFycmF5QnVmZmVyKCk6IFByb21pc2U8QXJyYXlCdWZmZXI+IHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2J1ZmZlci5idWZmZXIuc2xpY2UodGhpcy5fYnVmZmVyLmJ5dGVPZmZzZXQsIHRoaXMuX2J1ZmZlci5ieXRlT2Zmc2V0ICsgdGhpcy5fYnVmZmVyLmJ5dGVMZW5ndGgpKVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0ZXh0KCk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9idWZmZXIudG9TdHJpbmcoJ3V0Zi04JykpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHN0cmVhbSgpOiBhbnkge1xyXG4gICAgICAgIC8vIFNpbXBsZSBpbXBsZW1lbnRhdGlvbiBmb3IgY29tcGF0aWJpbGl0eVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignc3RyZWFtKCkgbm90IGltcGxlbWVudGVkIGluIHBvbHlmaWxsJylcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgOyhnbG9iYWxUaGlzIGFzIGFueSkuRmlsZSA9IFBvbHlmaWxsRmlsZVxyXG4gIH1cclxuXHJcbiAgLy8gUG9seWZpbGwgZ2xvYmFsIEZvcm1EYXRhIGlmIG5vdCBwcmVzZW50XHJcbiAgaWYgKHR5cGVvZiAoZ2xvYmFsVGhpcyBhcyBhbnkpLkZvcm1EYXRhID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICBjbGFzcyBQb2x5ZmlsbEZvcm1EYXRhIHtcclxuICAgICAgcHJpdmF0ZSBfZGF0YTogTWFwPHN0cmluZywgc3RyaW5nIHwgYW55PiA9IG5ldyBNYXAoKVxyXG5cclxuICAgICAgYXBwZW5kKG5hbWU6IHN0cmluZywgdmFsdWU6IGFueSwgZmlsZU5hbWU/OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9kYXRhLnNldChuYW1lLCB2YWx1ZSBhcyBzdHJpbmcgfCBhbnkpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGdldChuYW1lOiBzdHJpbmcpOiBQb2x5ZmlsbEZvcm1EYXRhRW50cnlWYWx1ZSB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhLmdldChuYW1lKSB8fCBudWxsXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGhhcyhuYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YS5oYXMobmFtZSlcclxuICAgICAgfVxyXG5cclxuICAgICAgc2V0KG5hbWU6IHN0cmluZywgdmFsdWU6IGFueSwgZmlsZU5hbWU/OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9kYXRhLnNldChuYW1lLCB2YWx1ZSBhcyBzdHJpbmcgfCBhbnkpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGRlbGV0ZShuYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9kYXRhLmRlbGV0ZShuYW1lKVxyXG4gICAgICB9XHJcblxyXG4gICAgICAqZW50cmllcygpOiBJdGVyYWJsZUl0ZXJhdG9yPFtzdHJpbmcsIFBvbHlmaWxsRm9ybURhdGFFbnRyeVZhbHVlXT4ge1xyXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIHRoaXMuX2RhdGEpIHtcclxuICAgICAgICAgIHlpZWxkIFtrZXksIHZhbHVlXVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgKmtleXMoKTogSXRlcmFibGVJdGVyYXRvcjxzdHJpbmc+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB0aGlzLl9kYXRhLmtleXMoKSkge1xyXG4gICAgICAgICAgeWllbGQga2V5XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAqdmFsdWVzKCk6IEl0ZXJhYmxlSXRlcmF0b3I8UG9seWZpbGxGb3JtRGF0YUVudHJ5VmFsdWU+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuX2RhdGEudmFsdWVzKCkpIHtcclxuICAgICAgICAgIHlpZWxkIHZhbHVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpOiBJdGVyYWJsZUl0ZXJhdG9yPFtzdHJpbmcsIFBvbHlmaWxsRm9ybURhdGFFbnRyeVZhbHVlXT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVudHJpZXMoKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICA7KGdsb2JhbFRoaXMgYXMgYW55KS5Gb3JtRGF0YSA9IFBvbHlmaWxsRm9ybURhdGFcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQge31cclxuIl0sIm5hbWVzIjpbInByb2Nlc3MiLCJ2ZXJzaW9ucyIsIm5vZGUiLCJnbG9iYWxUaGlzIiwiRmlsZSIsIlBvbHlmaWxsRmlsZSIsImZpbGVCaXRzIiwiZmlsZU5hbWUiLCJvcHRpb25zIiwibmFtZSIsIlN0cmluZyIsImxhc3RNb2RpZmllZCIsIkRhdGUiLCJub3ciLCJ0eXBlIiwiYnVmZmVycyIsImJpdCIsInB1c2giLCJCdWZmZXIiLCJmcm9tIiwiQXJyYXlCdWZmZXIiLCJVaW50OEFycmF5IiwiaXNCdWZmZXIiLCJfYnVmZmVyIiwiY29uY2F0Iiwic2l6ZSIsImxlbmd0aCIsImFycmF5QnVmZmVyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJidWZmZXIiLCJzbGljZSIsImJ5dGVPZmZzZXQiLCJieXRlTGVuZ3RoIiwidGV4dCIsInRvU3RyaW5nIiwic3RyZWFtIiwiRXJyb3IiLCJGb3JtRGF0YSIsIlBvbHlmaWxsRm9ybURhdGEiLCJhcHBlbmQiLCJ2YWx1ZSIsIl9kYXRhIiwic2V0IiwiZ2V0IiwiaGFzIiwiZGVsZXRlIiwiZW50cmllcyIsImtleSIsImtleXMiLCJ2YWx1ZXMiLCJTeW1ib2wiLCJpdGVyYXRvciIsIk1hcCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(instrument)/./lib/server-polyfills.ts\n")}};