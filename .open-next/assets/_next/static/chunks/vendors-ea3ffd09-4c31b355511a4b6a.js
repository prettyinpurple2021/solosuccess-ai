"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27],{12507:(e,t,r)=>{r.d(t,{Df:()=>eq});var o,a,n,i,s,l,u,p,c,d=r(92395),m=r(70284),g=r(64876),f=r(72253),y=r(16773),z=Object.defineProperty,v="AI_NoOutputSpecifiedError",h=`vercel.ai.error.${v}`,b=Symbol.for(h),I=class extends g.bD{constructor({message:e="No output specified."}={}){super({name:v,message:e}),this[o]=!0}static isInstance(e){return g.bD.hasMarker(e,h)}};o=b;var E=!1,T=e=>{if(0===e.length)return;let t=globalThis.AI_SDK_LOG_WARNINGS;if(!1!==t){if("function"==typeof t)return void t(e);for(let t of(E||(E=!0,console.info("AI SDK Warning System: To turn off warning logging, set the AI_SDK_LOG_WARNINGS global to false.")),e))console.warn(function(e){let t="AI SDK Warning:";switch(e.type){case"unsupported-setting":{let r=`${t} The "${e.setting}" setting is not supported by this model`;return e.details&&(r+=` - ${e.details}`),r}case"unsupported-tool":{let r="name"in e.tool?e.tool.name:"unknown tool",o=`${t} The tool "${r}" is not supported by this model`;return e.details&&(o+=` - ${e.details}`),o}case"other":return`${t} ${e.message}`;default:return`${t} ${JSON.stringify(e,null,2)}`}}(t))}},x="AI_InvalidArgumentError",w=`vercel.ai.error.${x}`,_=Symbol.for(w),N=class extends g.bD{constructor({parameter:e,value:t,message:r}){super({name:x,message:`Invalid argument for parameter ${e}: ${r}`}),this[a]=!0,this.parameter=e,this.value=t}static isInstance(e){return g.bD.hasMarker(e,w)}};a=_;Symbol.for("vercel.ai.error.AI_InvalidStreamPartError");g.bD;var O="AI_InvalidToolInputError",S=`vercel.ai.error.${O}`,A=Symbol.for(S),R=class extends g.bD{constructor({toolInput:e,toolName:t,cause:r,message:o=`Invalid input for tool ${t}: ${(0,g.u1)(r)}`}){super({name:O,message:o,cause:r}),this[n]=!0,this.toolInput=e,this.toolName=t}static isInstance(e){return g.bD.hasMarker(e,S)}};n=A;Symbol.for("vercel.ai.error.AI_MCPClientError");g.bD;Symbol.for("vercel.ai.error.AI_NoImageGeneratedError");g.bD;var C="AI_NoObjectGeneratedError",j=`vercel.ai.error.${C}`,k=Symbol.for(j),D=class extends g.bD{constructor({message:e="No object generated.",cause:t,text:r,response:o,usage:a,finishReason:n}){super({name:C,message:e,cause:t}),this[i]=!0,this.text=r,this.response=o,this.usage=a,this.finishReason=n}static isInstance(e){return g.bD.hasMarker(e,j)}};i=k;Symbol.for("vercel.ai.error.AI_NoOutputGeneratedError");g.bD;var M="AI_NoSuchToolError",$=`vercel.ai.error.${M}`,U=Symbol.for($),P=class extends g.bD{constructor({toolName:e,availableTools:t,message:r=`Model tried to call unavailable tool '${e}'. ${void 0===t?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:M,message:r}),this[s]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return g.bD.hasMarker(e,$)}};s=U;var F="AI_ToolCallRepairError",B=`vercel.ai.error.${F}`,L=Symbol.for(B),J=class extends g.bD{constructor({cause:e,originalError:t,message:r=`Error repairing tool call: ${(0,g.u1)(e)}`}){super({name:F,message:r,cause:e}),this[l]=!0,this.originalError=t}static isInstance(e){return g.bD.hasMarker(e,B)}};l=L;var Y=class extends g.bD{constructor(e){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${e.version} for provider "${e.provider}" and model "${e.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=e.version,this.provider=e.provider,this.modelId=e.modelId}},V=Symbol.for("vercel.ai.error.AI_InvalidDataContentError");g.bD;var q="AI_InvalidMessageRoleError",K=`vercel.ai.error.${q}`,W=Symbol.for(K),G=class extends g.bD{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:q,message:t}),this[u]=!0,this.role=e}static isInstance(e){return g.bD.hasMarker(e,K)}};u=W;Symbol.for("vercel.ai.error.AI_MessageConversionError");g.bD;var Z="AI_DownloadError",H=`vercel.ai.error.${Z}`,Q=Symbol.for(H),X=class extends g.bD{constructor({url:e,statusCode:t,statusText:r,cause:o,message:a=null==o?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${o}`}){super({name:Z,message:a,cause:o}),this[p]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return g.bD.hasMarker(e,H)}};p=Q;var ee="AI_RetryError",et=`vercel.ai.error.${ee}`,er=Symbol.for(et),eo=class extends g.bD{constructor({message:e,reason:t,errors:r}){super({name:ee,message:e}),this[c]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return g.bD.hasMarker(e,et)}};function ea(e){var t;if("string"!=typeof e){if("v2"!==e.specificationVersion)throw new Y({version:e.specificationVersion,provider:e.provider,modelId:e.modelId});return e}return(null!=(t=globalThis.AI_SDK_DEFAULT_PROVIDER)?t:d.JS).languageModel(e)}c=er;var en=[{mediaType:"image/gif",bytesPrefix:[71,73,70]},{mediaType:"image/png",bytesPrefix:[137,80,78,71]},{mediaType:"image/jpeg",bytesPrefix:[255,216]},{mediaType:"image/webp",bytesPrefix:[82,73,70,70,null,null,null,null,87,69,66,80]},{mediaType:"image/bmp",bytesPrefix:[66,77]},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0]},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42]},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102]},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99]}],ei="5.0.54",es=async({url:e})=>{var t;let r=e.toString();try{let e=await fetch(r,{headers:(0,m.WZ)({},`ai-sdk/${ei}`,(0,m.G1)())});if(!e.ok)throw new X({url:r,statusCode:e.status,statusText:e.statusText});return{data:new Uint8Array(await e.arrayBuffer()),mediaType:null!=(t=e.headers.get("content-type"))?t:void 0}}catch(e){if(X.isInstance(e))throw e;throw new X({url:r,cause:e})}},el=f.z.union([f.z.string(),f.z.instanceof(Uint8Array),f.z.instanceof(ArrayBuffer),f.z.custom(e=>{var t,r;return null!=(r=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&r},{message:"Must be a Buffer"})]);function eu(e){if(e instanceof Uint8Array)return{data:e,mediaType:void 0};if(e instanceof ArrayBuffer)return{data:new Uint8Array(e),mediaType:void 0};if("string"==typeof e)try{e=new URL(e)}catch(e){}if(e instanceof URL&&"data:"===e.protocol){let{mediaType:t,base64Content:r}=function(e){try{let[t,r]=e.split(",");return{mediaType:t.split(";")[0].split(":")[1],base64Content:r}}catch(e){return{mediaType:void 0,base64Content:void 0}}}(e.toString());if(null==t||null==r)throw new g.bD({name:"InvalidDataContentError",message:`Invalid data URL format in content ${e.toString()}`});return{data:r,mediaType:t}}return{data:e,mediaType:void 0}}async function ep({prompt:e,supportedUrls:t,download:r=((e=es)=>t=>Promise.all(t.map(async t=>t.isUrlSupportedByModel?null:e(t))))()}){let o=await ec(e.messages,r,t);return[...null!=e.system?[{role:"system",content:e.system}]:[],...e.messages.map(e=>(function({message:e,downloadedAssets:t}){let r=e.role;switch(r){case"system":return{role:"system",content:e.content,providerOptions:e.providerOptions};case"user":if("string"==typeof e.content)return{role:"user",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions};return{role:"user",content:e.content.map(e=>(function(e,t){var r;let o;if("text"===e.type)return{type:"text",text:e.text,providerOptions:e.providerOptions};let a=e.type;switch(a){case"image":o=e.image;break;case"file":o=e.data;break;default:throw Error(`Unsupported part type: ${a}`)}let{data:n,mediaType:i}=eu(o),s=null!=i?i:e.mediaType,l=n;if(l instanceof URL){let e=t[l.toString()];e&&(l=e.data,null!=s||(s=e.mediaType))}switch(a){case"image":return(l instanceof Uint8Array||"string"==typeof l)&&(s=null!=(r=function({data:e,signatures:t}){let r="string"==typeof e&&e.startsWith("SUQz")||"string"!=typeof e&&e.length>10&&73===e[0]&&68===e[1]&&51===e[2]?(e=>{let t="string"==typeof e?(0,m.Z9)(e):e,r=(127&t[6])<<21|(127&t[7])<<14|(127&t[8])<<7|127&t[9];return t.slice(r+10)})(e):e,o="string"==typeof r?(0,m.Z9)(r.substring(0,Math.min(r.length,24))):r;for(let e of t)if(o.length>=e.bytesPrefix.length&&e.bytesPrefix.every((e,t)=>null===e||o[t]===e))return e.mediaType}({data:l,signatures:en}))?r:s),{type:"file",mediaType:null!=s?s:"image/*",filename:void 0,data:l,providerOptions:e.providerOptions};case"file":if(null==s)throw Error("Media type is missing for file part");return{type:"file",mediaType:s,filename:e.filename,data:l,providerOptions:e.providerOptions}}})(e,t)).filter(e=>"text"!==e.type||""!==e.text),providerOptions:e.providerOptions};case"assistant":if("string"==typeof e.content)return{role:"assistant",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions};return{role:"assistant",content:e.content.filter(e=>"text"!==e.type||""!==e.text||null!=e.providerOptions).map(e=>{let t=e.providerOptions;switch(e.type){case"file":{let{data:r,mediaType:o}=eu(e.data);return{type:"file",data:r,filename:e.filename,mediaType:null!=o?o:e.mediaType,providerOptions:t}}case"reasoning":return{type:"reasoning",text:e.text,providerOptions:t};case"text":return{type:"text",text:e.text,providerOptions:t};case"tool-call":return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,providerExecuted:e.providerExecuted,providerOptions:t};case"tool-result":return{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,output:e.output,providerOptions:t}}}),providerOptions:e.providerOptions};case"tool":return{role:"tool",content:e.content.map(e=>({type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,output:e.output,providerOptions:e.providerOptions})),providerOptions:e.providerOptions};default:throw new G({role:r})}})({message:e,downloadedAssets:o}))]}async function ec(e,t,r){let o=e.filter(e=>"user"===e.role).map(e=>e.content).filter(e=>Array.isArray(e)).flat().filter(e=>"image"===e.type||"file"===e.type).map(e=>{var t;let r=null!=(t=e.mediaType)?t:"image"===e.type?"image/*":void 0,o="image"===e.type?e.image:e.data;if("string"==typeof o)try{o=new URL(o)}catch(e){}return{mediaType:r,data:o}}).filter(e=>e.data instanceof URL).map(e=>({url:e.data,isUrlSupportedByModel:null!=e.mediaType&&(0,m.qs)({url:e.data.toString(),mediaType:e.mediaType,supportedUrls:r})}));return Object.fromEntries((await t(o)).map((e,t)=>null==e?null:[o[t].url.toString(),{data:e.data,mediaType:e.mediaType}]).filter(e=>null!=e))}function ed({maxOutputTokens:e,temperature:t,topP:r,topK:o,presencePenalty:a,frequencyPenalty:n,seed:i,stopSequences:s}){if(null!=e){if(!Number.isInteger(e))throw new N({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be an integer"});if(e<1)throw new N({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be >= 1"})}if(null!=t&&"number"!=typeof t)throw new N({parameter:"temperature",value:t,message:"temperature must be a number"});if(null!=r&&"number"!=typeof r)throw new N({parameter:"topP",value:r,message:"topP must be a number"});if(null!=o&&"number"!=typeof o)throw new N({parameter:"topK",value:o,message:"topK must be a number"});if(null!=a&&"number"!=typeof a)throw new N({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(null!=n&&"number"!=typeof n)throw new N({parameter:"frequencyPenalty",value:n,message:"frequencyPenalty must be a number"});if(null!=i&&!Number.isInteger(i))throw new N({parameter:"seed",value:i,message:"seed must be an integer"});return{maxOutputTokens:e,temperature:t,topP:r,topK:o,presencePenalty:a,frequencyPenalty:n,stopSequences:s,seed:i}}var em=f.z.lazy(()=>f.z.union([f.z.null(),f.z.string(),f.z.number(),f.z.boolean(),f.z.record(f.z.string(),em),f.z.array(em)])),eg=f.z.record(f.z.string(),f.z.record(f.z.string(),em)),ef=f.z.object({type:f.z.literal("text"),text:f.z.string(),providerOptions:eg.optional()}),ey=f.z.object({type:f.z.literal("image"),image:f.z.union([el,f.z.instanceof(URL)]),mediaType:f.z.string().optional(),providerOptions:eg.optional()}),ez=f.z.object({type:f.z.literal("file"),data:f.z.union([el,f.z.instanceof(URL)]),filename:f.z.string().optional(),mediaType:f.z.string(),providerOptions:eg.optional()}),ev=f.z.object({type:f.z.literal("reasoning"),text:f.z.string(),providerOptions:eg.optional()}),eh=f.z.object({type:f.z.literal("tool-call"),toolCallId:f.z.string(),toolName:f.z.string(),input:f.z.unknown(),providerOptions:eg.optional(),providerExecuted:f.z.boolean().optional()}),eb=f.z.discriminatedUnion("type",[f.z.object({type:f.z.literal("text"),value:f.z.string()}),f.z.object({type:f.z.literal("json"),value:em}),f.z.object({type:f.z.literal("error-text"),value:f.z.string()}),f.z.object({type:f.z.literal("error-json"),value:em}),f.z.object({type:f.z.literal("content"),value:f.z.array(f.z.union([f.z.object({type:f.z.literal("text"),text:f.z.string()}),f.z.object({type:f.z.literal("media"),data:f.z.string(),mediaType:f.z.string()})]))})]),eI=f.z.object({type:f.z.literal("tool-result"),toolCallId:f.z.string(),toolName:f.z.string(),output:eb,providerOptions:eg.optional()}),eE=f.z.object({role:f.z.literal("system"),content:f.z.string(),providerOptions:eg.optional()}),eT=f.z.object({role:f.z.literal("user"),content:f.z.union([f.z.string(),f.z.array(f.z.union([ef,ey,ez]))]),providerOptions:eg.optional()}),ex=f.z.object({role:f.z.literal("assistant"),content:f.z.union([f.z.string(),f.z.array(f.z.union([ef,ez,ev,eh,eI]))]),providerOptions:eg.optional()}),ew=f.z.object({role:f.z.literal("tool"),content:f.z.array(eI),providerOptions:eg.optional()}),e_=f.z.union([eE,eT,ex,ew]);async function eN(e){let t;if(null==e.prompt&&null==e.messages)throw new g.M3({prompt:e,message:"prompt or messages must be defined"});if(null!=e.prompt&&null!=e.messages)throw new g.M3({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(null!=e.system&&"string"!=typeof e.system)throw new g.M3({prompt:e,message:"system must be a string"});if(null!=e.prompt&&"string"==typeof e.prompt)t=[{role:"user",content:e.prompt}];else if(null!=e.prompt&&Array.isArray(e.prompt))t=e.prompt;else if(null!=e.messages)t=e.messages;else throw new g.M3({prompt:e,message:"prompt or messages must be defined"});if(0===t.length)throw new g.M3({prompt:e,message:"messages must not be empty"});let r=await (0,m.ZZ)({value:t,schema:f.z.array(e_)});if(!r.success)throw new g.M3({prompt:e,message:"The messages must be a ModelMessage[]. If you have passed a UIMessage[], you can use convertToModelMessages to convert them.",cause:r.error});return{messages:t,system:e.system}}function eO({operationId:e,telemetry:t}){return{"operation.name":`${e}${(null==t?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":null==t?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":null==t?void 0:t.functionId}}var eS={startSpan:()=>eA,startActiveSpan:(e,t,r,o)=>"function"==typeof t?t(eA):"function"==typeof r?r(eA):"function"==typeof o?o(eA):void 0},eA={spanContext:()=>eR,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},eR={traceId:"",spanId:"",traceFlags:0};function eC({name:e,tracer:t,attributes:r,fn:o,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:r},async e=>{try{let t=await o(e);return a&&e.end(),t}catch(t){try{ej(e,t)}finally{e.end()}throw t}})}function ej(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:y.sY.ERROR,message:t.message})):e.setStatus({code:y.sY.ERROR})}function ek({telemetry:e,attributes:t}){return(null==e?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((t,[r,o])=>{if(null==o)return t;if("object"==typeof o&&"input"in o&&"function"==typeof o.input){if((null==e?void 0:e.recordInputs)===!1)return t;let a=o.input();return null==a?t:{...t,[r]:a}}if("object"==typeof o&&"output"in o&&"function"==typeof o.output){if((null==e?void 0:e.recordOutputs)===!1)return t;let a=o.output();return null==a?t:{...t,[r]:a}}return{...t,[r]:o}},{})}function eD(e,t){return null==e&&null==t?void 0:(null!=e?e:0)+(null!=t?t:0)}async function eM(e,{maxRetries:t,delayInMs:r,backoffFactor:o,abortSignal:a},n=[]){try{return await e()}catch(u){if((0,m.zf)(u)||0===t)throw u;let i=(0,m.u1)(u),s=[...n,u],l=s.length;if(l>t)throw new eo({message:`Failed after ${l} attempts. Last error: ${i}`,reason:"maxRetriesExceeded",errors:s});if(u instanceof Error&&g.hL.isInstance(u)&&!0===u.isRetryable&&l<=t)return await (0,m.cb)(function({error:e,exponentialBackoffDelay:t}){let r,o=e.responseHeaders;if(!o)return t;let a=o["retry-after-ms"];if(a){let e=parseFloat(a);Number.isNaN(e)||(r=e)}let n=o["retry-after"];if(n&&void 0===r){let e=parseFloat(n);r=Number.isNaN(e)?Date.parse(n)-Date.now():1e3*e}return null!=r&&!Number.isNaN(r)&&0<=r&&(r<6e4||r<t)?r:t}({error:u,exponentialBackoffDelay:r}),{abortSignal:a}),eM(e,{maxRetries:t,delayInMs:o*r,backoffFactor:o,abortSignal:a},s);if(1===l)throw u;throw new eo({message:`Failed after ${l} attempts with non-retryable error: '${i}'`,reason:"errorNotRetryable",errors:s})}}function e$(e){let t=e.filter(e=>"text"===e.type);if(0!==t.length)return t.map(e=>e.text).join("")}var eU=class{constructor({data:e,mediaType:t}){let r=e instanceof Uint8Array;this.base64Data=r?void 0:e,this.uint8ArrayData=r?e:void 0,this.mediaType=t}get base64(){return null==this.base64Data&&(this.base64Data=(0,m.n_)(this.uint8ArrayData)),this.base64Data}get uint8Array(){return null==this.uint8ArrayData&&(this.uint8ArrayData=(0,m.Z9)(this.base64Data)),this.uint8ArrayData}};async function eP({toolCall:e,tools:t,repairToolCall:r,system:o,messages:a}){try{if(null==t)throw new P({toolName:e.toolName});try{return await eF({toolCall:e,tools:t})}catch(i){if(null==r||!(P.isInstance(i)||R.isInstance(i)))throw i;let n=null;try{n=await r({toolCall:e,tools:t,inputSchema:({toolName:e})=>{let{inputSchema:r}=t[e];return(0,m.mD)(r).jsonSchema},system:o,messages:a,error:i})}catch(e){throw new J({cause:e,originalError:i})}if(null==n)throw i;return await eF({toolCall:n,tools:t})}}catch(o){let t=await (0,m.N8)({text:e.input}),r=t.success?t.value:e.input;return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:r,dynamic:!0,invalid:!0,error:o}}}async function eF({toolCall:e,tools:t}){let r=e.toolName,o=t[r];if(null==o)throw new P({toolName:e.toolName,availableTools:Object.keys(t)});let a=(0,m.mD)(o.inputSchema),n=""===e.input.trim()?await (0,m.ZZ)({value:{},schema:a}):await (0,m.N8)({text:e.input,schema:a});if(!1===n.success)throw new R({toolName:r,toolInput:e.input,cause:n.error});return"dynamic"===o.type?{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:n.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,dynamic:!0}:{type:"tool-call",toolCallId:e.toolCallId,toolName:r,input:n.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}}var eB=class{constructor({content:e,finishReason:t,usage:r,warnings:o,request:a,response:n,providerMetadata:i}){this.content=e,this.finishReason=t,this.usage=r,this.warnings=o,this.request=a,this.response=n,this.providerMetadata=i}get text(){return this.content.filter(e=>"text"===e.type).map(e=>e.text).join("")}get reasoning(){return this.content.filter(e=>"reasoning"===e.type)}get reasoningText(){return 0===this.reasoning.length?void 0:this.reasoning.map(e=>e.text).join("")}get files(){return this.content.filter(e=>"file"===e.type).map(e=>e.file)}get sources(){return this.content.filter(e=>"source"===e.type)}get toolCalls(){return this.content.filter(e=>"tool-call"===e.type)}get staticToolCalls(){return this.toolCalls.filter(e=>!0!==e.dynamic)}get dynamicToolCalls(){return this.toolCalls.filter(e=>!0===e.dynamic)}get toolResults(){return this.content.filter(e=>"tool-result"===e.type)}get staticToolResults(){return this.toolResults.filter(e=>!0!==e.dynamic)}get dynamicToolResults(){return this.toolResults.filter(e=>!0===e.dynamic)}};async function eL({stopConditions:e,steps:t}){return(await Promise.all(e.map(e=>e({steps:t})))).some(e=>e)}function eJ({output:e,tool:t,errorMode:r}){return"text"===r?{type:"error-text",value:(0,g.u1)(e)}:"json"===r?{type:"error-json",value:eY(e)}:(null==t?void 0:t.toModelOutput)?t.toModelOutput(e):"string"==typeof e?{type:"text",value:e}:{type:"json",value:eY(e)}}function eY(e){return void 0===e?null:e}var eV=(0,m.hK)({prefix:"aitxt",size:24});async function eq({model:e,tools:t,toolChoice:r,system:o,prompt:a,messages:n,maxRetries:i,abortSignal:s,headers:l,stopWhen:u=function(e){return({steps:e})=>1===e.length}(0),experimental_output:p,experimental_telemetry:c,providerOptions:f,experimental_activeTools:z,activeTools:v=z,experimental_prepareStep:h,prepareStep:b=h,experimental_repairToolCall:I,experimental_download:E,experimental_context:x,_internal:{generateId:w=eV,currentDate:_=()=>new Date}={},onStepFinish:O,...S}){let A=ea(e),R=void 0===u?[]:Array.isArray(u)?u:[u],{maxRetries:C,retry:j}=function({maxRetries:e,abortSignal:t}){if(null!=e){if(!Number.isInteger(e))throw new N({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new N({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}let r=null!=e?e:2;return{maxRetries:r,retry:(({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2,abortSignal:o}={})=>async a=>eM(a,{maxRetries:e,delayInMs:t,backoffFactor:r,abortSignal:o}))({maxRetries:r,abortSignal:t})}}({maxRetries:i,abortSignal:s}),k=ed(S),D=(0,m.WZ)(null!=l?l:{},`ai/${ei}`),M=function({model:e,settings:t,telemetry:r,headers:o}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((e,[t,r])=>(e[`ai.settings.${t}`]=r,e),{}),...Object.entries(null!=(a=null==r?void 0:r.metadata)?a:{}).reduce((e,[t,r])=>(e[`ai.telemetry.metadata.${t}`]=r,e),{}),...Object.entries(null!=o?o:{}).reduce((e,[t,r])=>(void 0!==r&&(e[`ai.request.headers.${t}`]=r),e),{})}}({model:A,telemetry:c,headers:D,settings:{...k,maxRetries:C}}),$=await eN({system:o,prompt:a,messages:n}),U=function({isEnabled:e=!1,tracer:t}={}){return e?t||y.uP.getTracer("ai"):eS}(c);try{return await eC({name:"ai.generateText",attributes:ek({telemetry:c,attributes:{...eO({operationId:"ai.generateText",telemetry:c}),...M,"ai.model.provider":A.provider,"ai.model.id":A.modelId,"ai.prompt":{input:()=>JSON.stringify({system:o,prompt:a,messages:n})}}}),tracer:U,fn:async e=>{var a,n,i,l,u,d,g;let y,z=ed(S),h=[],N=[],C=[],k=[];do{let e=[...$.messages,...C],R=await (null==b?void 0:b({model:A,steps:k,stepNumber:k.length,messages:e})),P=await ep({prompt:{system:null!=(a=null==R?void 0:R.system)?a:$.system,messages:null!=(n=null==R?void 0:R.messages)?n:e},supportedUrls:await A.supportedUrls,download:E}),F=ea(null!=(i=null==R?void 0:R.model)?i:A),{toolChoice:B,tools:L}=function({tools:e,toolChoice:t,activeTools:r}){return null!=e&&Object.keys(e).length>0?{tools:(null!=r?Object.entries(e).filter(([e])=>r.includes(e)):Object.entries(e)).map(([e,t])=>{let r=t.type;switch(r){case void 0:case"dynamic":case"function":return{type:"function",name:e,description:t.description,inputSchema:(0,m.mD)(t.inputSchema).jsonSchema,providerOptions:t.providerOptions};case"provider-defined":return{type:"provider-defined",name:e,id:t.id,args:t.args};default:throw Error(`Unsupported tool type: ${r}`)}}),toolChoice:null==t?{type:"auto"}:"string"==typeof t?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}({tools:t,toolChoice:null!=(l=null==R?void 0:R.toolChoice)?l:r,activeTools:null!=(u=null==R?void 0:R.activeTools)?u:v});y=await j(()=>{var e;return eC({name:"ai.generateText.doGenerate",attributes:ek({telemetry:c,attributes:{...eO({operationId:"ai.generateText.doGenerate",telemetry:c}),...M,"ai.model.provider":F.provider,"ai.model.id":F.modelId,"ai.prompt.messages":{input:()=>JSON.stringify(P.map(e=>({...e,content:"string"==typeof e.content?e.content:e.content.map(e=>{var t;return"file"===e.type?{...e,data:e.data instanceof Uint8Array?"string"==typeof(t=e.data)?t:t instanceof ArrayBuffer?(0,m.n_)(new Uint8Array(t)):(0,m.n_)(t):e.data}:e})})))},"ai.prompt.tools":{input:()=>null==L?void 0:L.map(e=>JSON.stringify(e))},"ai.prompt.toolChoice":{input:()=>null!=B?JSON.stringify(B):void 0},"gen_ai.system":F.provider,"gen_ai.request.model":F.modelId,"gen_ai.request.frequency_penalty":S.frequencyPenalty,"gen_ai.request.max_tokens":S.maxOutputTokens,"gen_ai.request.presence_penalty":S.presencePenalty,"gen_ai.request.stop_sequences":S.stopSequences,"gen_ai.request.temperature":null!=(e=S.temperature)?e:void 0,"gen_ai.request.top_k":S.topK,"gen_ai.request.top_p":S.topP}}),tracer:U,fn:async e=>{var t,r,o,a,n,i,l,u;let d=await F.doGenerate({...z,tools:L,toolChoice:B,responseFormat:null==p?void 0:p.responseFormat,prompt:P,providerOptions:f,abortSignal:s,headers:D}),m={id:null!=(r=null==(t=d.response)?void 0:t.id)?r:w(),timestamp:null!=(a=null==(o=d.response)?void 0:o.timestamp)?a:_(),modelId:null!=(i=null==(n=d.response)?void 0:n.modelId)?i:F.modelId,headers:null==(l=d.response)?void 0:l.headers,body:null==(u=d.response)?void 0:u.body};return e.setAttributes(ek({telemetry:c,attributes:{"ai.response.finishReason":d.finishReason,"ai.response.text":{output:()=>e$(d.content)},"ai.response.toolCalls":{output:()=>{let e=eG(d.content);return null==e?void 0:JSON.stringify(e)}},"ai.response.id":m.id,"ai.response.model":m.modelId,"ai.response.timestamp":m.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(d.providerMetadata),"ai.usage.promptTokens":d.usage.inputTokens,"ai.usage.completionTokens":d.usage.outputTokens,"gen_ai.response.finish_reasons":[d.finishReason],"gen_ai.response.id":m.id,"gen_ai.response.model":m.modelId,"gen_ai.usage.input_tokens":d.usage.inputTokens,"gen_ai.usage.output_tokens":d.usage.outputTokens}})),{...d,response:m}}})});let J=await Promise.all(y.content.filter(e=>"tool-call"===e.type).map(r=>eP({toolCall:r,tools:t,repairToolCall:I,system:o,messages:e})));for(let r of J){if(r.invalid)continue;let o=t[r.toolName];(null==o?void 0:o.onInputAvailable)!=null&&await o.onInputAvailable({input:r.input,toolCallId:r.toolCallId,messages:e,abortSignal:s,experimental_context:x})}let Y=J.filter(e=>e.invalid&&e.dynamic);for(let e of(N=[],Y))N.push({type:"tool-error",toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,error:(0,m.u1)(e.error),dynamic:!0});h=J.filter(e=>!e.providerExecuted),null!=t&&N.push(...await eK({toolCalls:h.filter(e=>!e.invalid),tools:t,tracer:U,telemetry:c,messages:e,abortSignal:s,experimental_context:x}));let V=function({content:e,toolCalls:t,toolOutputs:r}){return[...e.map(e=>{switch(e.type){case"text":case"reasoning":case"source":return e;case"file":return{type:"file",file:new eU(e)};case"tool-call":return t.find(t=>t.toolCallId===e.toolCallId);case"tool-result":{let r=t.find(t=>t.toolCallId===e.toolCallId);if(null==r)throw Error(`Tool call ${e.toolCallId} not found.`);if(e.isError)return{type:"tool-error",toolCallId:e.toolCallId,toolName:e.toolName,input:r.input,error:e.result,providerExecuted:!0,dynamic:r.dynamic};return{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,input:r.input,output:e.result,providerExecuted:!0,dynamic:r.dynamic}}}}),...r]}({content:y.content,toolCalls:J,toolOutputs:N});C.push(...function({content:e,tools:t}){let r=[],o=e.filter(e=>"source"!==e.type).filter(e=>("tool-result"!==e.type||e.providerExecuted)&&("tool-error"!==e.type||e.providerExecuted)).filter(e=>"text"!==e.type||e.text.length>0).map(e=>{switch(e.type){case"text":return{type:"text",text:e.text,providerOptions:e.providerMetadata};case"reasoning":return{type:"reasoning",text:e.text,providerOptions:e.providerMetadata};case"file":return{type:"file",data:e.file.base64,mediaType:e.file.mediaType,providerOptions:e.providerMetadata};case"tool-call":return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,providerExecuted:e.providerExecuted,providerOptions:e.providerMetadata};case"tool-result":return{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,output:eJ({tool:null==t?void 0:t[e.toolName],output:e.output,errorMode:"none"}),providerExecuted:!0,providerOptions:e.providerMetadata};case"tool-error":return{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,output:eJ({tool:null==t?void 0:t[e.toolName],output:e.error,errorMode:"json"}),providerOptions:e.providerMetadata}}});o.length>0&&r.push({role:"assistant",content:o});let a=e.filter(e=>"tool-result"===e.type||"tool-error"===e.type).filter(e=>!e.providerExecuted).map(e=>({type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,output:eJ({tool:null==t?void 0:t[e.toolName],output:"tool-result"===e.type?e.output:e.error,errorMode:"tool-error"===e.type?"text":"none"})}));return a.length>0&&r.push({role:"tool",content:a}),r}({content:V,tools:t}));let q=new eB({content:V,finishReason:y.finishReason,usage:y.usage,warnings:y.warnings,providerMetadata:y.providerMetadata,request:null!=(d=y.request)?d:{},response:{...y.response,messages:structuredClone(C)}});T(null!=(g=y.warnings)?g:[]),k.push(q),await (null==O?void 0:O(q))}while(h.length>0&&N.length===h.length&&!await eL({stopConditions:R,steps:k}));e.setAttributes(ek({telemetry:c,attributes:{"ai.response.finishReason":y.finishReason,"ai.response.text":{output:()=>e$(y.content)},"ai.response.toolCalls":{output:()=>{let e=eG(y.content);return null==e?void 0:JSON.stringify(e)}},"ai.response.providerMetadata":JSON.stringify(y.providerMetadata),"ai.usage.promptTokens":y.usage.inputTokens,"ai.usage.completionTokens":y.usage.outputTokens}}));let P=k[k.length-1];return new eW({steps:k,resolvedOutput:await (null==p?void 0:p.parseOutput({text:P.text},{response:P.response,usage:P.usage,finishReason:P.finishReason}))})}})}catch(e){throw d.jN.isInstance(e)||d.vj.isInstance(e)?new g.bD({name:"GatewayError",message:"Vercel AI Gateway access failed. If you want to use AI SDK providers directly, use the providers, e.g. @ai-sdk/openai, or register a different global default provider.",cause:e}):e}}async function eK({toolCalls:e,tools:t,tracer:r,telemetry:o,messages:a,abortSignal:n,experimental_context:i}){return(await Promise.all(e.map(async({toolCallId:e,toolName:s,input:l})=>{let u=t[s];if((null==u?void 0:u.execute)!=null)return eC({name:"ai.toolCall",attributes:ek({telemetry:o,attributes:{...eO({operationId:"ai.toolCall",telemetry:o}),"ai.toolCall.name":s,"ai.toolCall.id":e,"ai.toolCall.args":{output:()=>JSON.stringify(l)}}}),tracer:r,fn:async t=>{try{let r;for await(let t of(0,m.o8)({execute:u.execute.bind(u),input:l,options:{toolCallId:e,messages:a,abortSignal:n,experimental_context:i}}))"final"===t.type&&(r=t.output);try{t.setAttributes(ek({telemetry:o,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(r)}}}))}catch(e){}return{type:"tool-result",toolCallId:e,toolName:s,input:l,output:r,dynamic:"dynamic"===u.type}}catch(r){return ej(t,r),{type:"tool-error",toolCallId:e,toolName:s,input:l,error:r,dynamic:"dynamic"===u.type}}}})}))).filter(e=>null!=e)}var eW=class{constructor(e){this.steps=e.steps,this.resolvedOutput=e.resolvedOutput}get finalStep(){return this.steps[this.steps.length-1]}get content(){return this.finalStep.content}get text(){return this.finalStep.text}get files(){return this.finalStep.files}get reasoningText(){return this.finalStep.reasoningText}get reasoning(){return this.finalStep.reasoning}get toolCalls(){return this.finalStep.toolCalls}get staticToolCalls(){return this.finalStep.staticToolCalls}get dynamicToolCalls(){return this.finalStep.dynamicToolCalls}get toolResults(){return this.finalStep.toolResults}get staticToolResults(){return this.finalStep.staticToolResults}get dynamicToolResults(){return this.finalStep.dynamicToolResults}get sources(){return this.finalStep.sources}get finishReason(){return this.finalStep.finishReason}get warnings(){return this.finalStep.warnings}get providerMetadata(){return this.finalStep.providerMetadata}get response(){return this.finalStep.response}get request(){return this.finalStep.request}get usage(){return this.finalStep.usage}get totalUsage(){return this.steps.reduce((e,t)=>{var r;return r=t.usage,{inputTokens:eD(e.inputTokens,r.inputTokens),outputTokens:eD(e.outputTokens,r.outputTokens),totalTokens:eD(e.totalTokens,r.totalTokens),reasoningTokens:eD(e.reasoningTokens,r.reasoningTokens),cachedInputTokens:eD(e.cachedInputTokens,r.cachedInputTokens)}},{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0,reasoningTokens:void 0,cachedInputTokens:void 0})}get experimental_output(){if(null==this.resolvedOutput)throw new I;return this.resolvedOutput}};function eG(e){let t=e.filter(e=>"tool-call"===e.type);if(0!==t.length)return t.map(e=>({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input}))}async function eZ(e){if(void 0===e)return{value:void 0,state:"undefined-input"};let t=await (0,m.N8)({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await (0,m.N8)({text:function(e){let t=["ROOT"],r=-1,o=null;function a(e,a,n){switch(e){case'"':r=a,t.pop(),t.push(n),t.push("INSIDE_STRING");break;case"f":case"t":case"n":r=a,o=a,t.pop(),t.push(n),t.push("INSIDE_LITERAL");break;case"-":t.pop(),t.push(n),t.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=a,t.pop(),t.push(n),t.push("INSIDE_NUMBER");break;case"{":r=a,t.pop(),t.push(n),t.push("INSIDE_OBJECT_START");break;case"[":r=a,t.pop(),t.push(n),t.push("INSIDE_ARRAY_START")}}function n(e,o){switch(e){case",":t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":r=o,t.pop()}}function i(e,o){switch(e){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=o,t.pop()}}for(let s=0;s<e.length;s++){let l=e[s];switch(t[t.length-1]){case"ROOT":a(l,s,"FINISH");break;case"INSIDE_OBJECT_START":switch(l){case'"':t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"}":r=s,t.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===l&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":a(l,s,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":n(l,s);break;case"INSIDE_STRING":switch(l){case'"':t.pop(),r=s;break;case"\\":t.push("INSIDE_STRING_ESCAPE");break;default:r=s}break;case"INSIDE_ARRAY_START":"]"===l?(r=s,t.pop()):(r=s,a(l,s,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(l){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=s,t.pop();break;default:r=s}break;case"INSIDE_ARRAY_AFTER_COMMA":a(l,s,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":t.pop(),r=s;break;case"INSIDE_NUMBER":switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=s;break;case"e":case"E":case"-":case".":break;case",":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,s),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&n(l,s);break;case"}":t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&n(l,s);break;case"]":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,s);break;default:t.pop()}break;case"INSIDE_LITERAL":{let a=e.substring(o,s+1);"false".startsWith(a)||"true".startsWith(a)||"null".startsWith(a)?r=s:(t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]?n(l,s):"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,s))}}}let s=e.slice(0,r+1);for(let r=t.length-1;r>=0;r--)switch(t[r]){case"INSIDE_STRING":s+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":s+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":s+="]";break;case"INSIDE_LITERAL":{let t=e.substring(o,e.length);"true".startsWith(t)?s+="true".slice(t.length):"false".startsWith(t)?s+="false".slice(t.length):"null".startsWith(t)&&(s+="null".slice(t.length))}}return s}(e)})).success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}TransformStream,f.z.union([f.z.strictObject({type:f.z.literal("text-start"),id:f.z.string(),providerMetadata:eg.optional()}),f.z.strictObject({type:f.z.literal("text-delta"),id:f.z.string(),delta:f.z.string(),providerMetadata:eg.optional()}),f.z.strictObject({type:f.z.literal("text-end"),id:f.z.string(),providerMetadata:eg.optional()}),f.z.strictObject({type:f.z.literal("error"),errorText:f.z.string()}),f.z.strictObject({type:f.z.literal("tool-input-start"),toolCallId:f.z.string(),toolName:f.z.string(),providerExecuted:f.z.boolean().optional(),dynamic:f.z.boolean().optional()}),f.z.strictObject({type:f.z.literal("tool-input-delta"),toolCallId:f.z.string(),inputTextDelta:f.z.string()}),f.z.strictObject({type:f.z.literal("tool-input-available"),toolCallId:f.z.string(),toolName:f.z.string(),input:f.z.unknown(),providerExecuted:f.z.boolean().optional(),providerMetadata:eg.optional(),dynamic:f.z.boolean().optional()}),f.z.strictObject({type:f.z.literal("tool-input-error"),toolCallId:f.z.string(),toolName:f.z.string(),input:f.z.unknown(),providerExecuted:f.z.boolean().optional(),providerMetadata:eg.optional(),dynamic:f.z.boolean().optional(),errorText:f.z.string()}),f.z.strictObject({type:f.z.literal("tool-output-available"),toolCallId:f.z.string(),output:f.z.unknown(),providerExecuted:f.z.boolean().optional(),dynamic:f.z.boolean().optional(),preliminary:f.z.boolean().optional()}),f.z.strictObject({type:f.z.literal("tool-output-error"),toolCallId:f.z.string(),errorText:f.z.string(),providerExecuted:f.z.boolean().optional(),dynamic:f.z.boolean().optional()}),f.z.strictObject({type:f.z.literal("reasoning-start"),id:f.z.string(),providerMetadata:eg.optional()}),f.z.strictObject({type:f.z.literal("reasoning-delta"),id:f.z.string(),delta:f.z.string(),providerMetadata:eg.optional()}),f.z.strictObject({type:f.z.literal("reasoning-end"),id:f.z.string(),providerMetadata:eg.optional()}),f.z.strictObject({type:f.z.literal("source-url"),sourceId:f.z.string(),url:f.z.string(),title:f.z.string().optional(),providerMetadata:eg.optional()}),f.z.strictObject({type:f.z.literal("source-document"),sourceId:f.z.string(),mediaType:f.z.string(),title:f.z.string(),filename:f.z.string().optional(),providerMetadata:eg.optional()}),f.z.strictObject({type:f.z.literal("file"),url:f.z.string(),mediaType:f.z.string(),providerMetadata:eg.optional()}),f.z.strictObject({type:f.z.custom(e=>"string"==typeof e&&e.startsWith("data-"),{message:'Type must start with "data-"'}),id:f.z.string().optional(),data:f.z.unknown(),transient:f.z.boolean().optional()}),f.z.strictObject({type:f.z.literal("start-step")}),f.z.strictObject({type:f.z.literal("finish-step")}),f.z.strictObject({type:f.z.literal("start"),messageId:f.z.string().optional(),messageMetadata:f.z.unknown().optional()}),f.z.strictObject({type:f.z.literal("finish"),messageMetadata:f.z.unknown().optional()}),f.z.strictObject({type:f.z.literal("abort")}),f.z.strictObject({type:f.z.literal("message-metadata"),messageMetadata:f.z.unknown()})]),(0,m.hK)({prefix:"aitxt",size:24}),(0,m.hK)({prefix:"aiobj",size:24}),(0,m.hK)({prefix:"aiobj",size:24}),g.bD,((e,t)=>{for(var r in t)z(e,r,{get:t[r],enumerable:!0})})({},{object:()=>eQ,text:()=>eH});var eH=()=>({type:"text",responseFormat:{type:"text"},parsePartial:async({text:e})=>({partial:e}),parseOutput:async({text:e})=>e}),eQ=({schema:e})=>{let t=(0,m.mD)(e);return{type:"object",responseFormat:{type:"json",schema:t.jsonSchema},async parsePartial({text:e}){let t=await eZ(e);switch(t.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:t.value};default:{let e=t.state;throw Error(`Unsupported parse state: ${e}`)}}},async parseOutput({text:e},r){let o=await (0,m.N8)({text:e});if(!o.success)throw new D({message:"No object generated: could not parse the response.",cause:o.error,text:e,response:r.response,usage:r.usage,finishReason:r.finishReason});let a=await (0,m.ZZ)({value:o.value,schema:t});if(!a.success)throw new D({message:"No object generated: response did not match schema.",cause:a.error,text:e,response:r.response,usage:r.usage,finishReason:r.finishReason});return a.value}}},eX=Symbol.for("vercel.ai.error.AI_NoSuchProviderError");g.eM;var e0=f.z.looseObject({name:f.z.string(),version:f.z.string()}),e1=f.z.looseObject({_meta:f.z.optional(f.z.object({}).loose())}),e2=f.z.object({method:f.z.string(),params:f.z.optional(e1)}),e7=f.z.looseObject({experimental:f.z.optional(f.z.object({}).loose()),logging:f.z.optional(f.z.object({}).loose()),prompts:f.z.optional(f.z.looseObject({listChanged:f.z.optional(f.z.boolean())})),resources:f.z.optional(f.z.looseObject({subscribe:f.z.optional(f.z.boolean()),listChanged:f.z.optional(f.z.boolean())})),tools:f.z.optional(f.z.looseObject({listChanged:f.z.optional(f.z.boolean())}))});e1.extend({protocolVersion:f.z.string(),capabilities:e7,serverInfo:e0,instructions:f.z.optional(f.z.string())});var e8=e1.extend({nextCursor:f.z.optional(f.z.string())}),e6=f.z.object({name:f.z.string(),description:f.z.optional(f.z.string()),inputSchema:f.z.object({type:f.z.literal("object"),properties:f.z.optional(f.z.object({}).loose())}).loose()}).loose();e8.extend({tools:f.z.array(e6)});var e4=f.z.object({type:f.z.literal("text"),text:f.z.string()}).loose(),e3=f.z.object({type:f.z.literal("image"),data:f.z.base64(),mimeType:f.z.string()}).loose(),e5=f.z.object({uri:f.z.string(),mimeType:f.z.optional(f.z.string())}).loose(),e9=e5.extend({text:f.z.string()}),te=e5.extend({blob:f.z.base64()}),tt=f.z.object({type:f.z.literal("resource"),resource:f.z.union([e9,te])}).loose();e1.extend({content:f.z.array(f.z.union([e4,e3,tt])),isError:f.z.boolean().default(!1).optional()}).or(e1.extend({toolResult:f.z.unknown()}));var tr=f.z.object({jsonrpc:f.z.literal("2.0"),id:f.z.union([f.z.string(),f.z.number().int()])}).merge(e2).strict(),to=f.z.object({jsonrpc:f.z.literal("2.0"),id:f.z.union([f.z.string(),f.z.number().int()]),result:e1}).strict(),ta=f.z.object({jsonrpc:f.z.literal("2.0"),id:f.z.union([f.z.string(),f.z.number().int()]),error:f.z.object({code:f.z.number().int(),message:f.z.string(),data:f.z.optional(f.z.unknown())})}).strict(),tn=f.z.object({jsonrpc:f.z.literal("2.0")}).merge(f.z.object({method:f.z.string(),params:f.z.optional(e1)})).strict();f.z.union([tr,tn,to,ta]),g.bD;var ti=f.z.object({type:f.z.literal("text"),text:f.z.string(),state:f.z.enum(["streaming","done"]).optional(),providerMetadata:eg.optional()}),ts=f.z.object({type:f.z.literal("reasoning"),text:f.z.string(),state:f.z.enum(["streaming","done"]).optional(),providerMetadata:eg.optional()}),tl=f.z.object({type:f.z.literal("source-url"),sourceId:f.z.string(),url:f.z.string(),title:f.z.string().optional(),providerMetadata:eg.optional()}),tu=f.z.object({type:f.z.literal("source-document"),sourceId:f.z.string(),mediaType:f.z.string(),title:f.z.string(),filename:f.z.string().optional(),providerMetadata:eg.optional()}),tp=f.z.object({type:f.z.literal("file"),mediaType:f.z.string(),filename:f.z.string().optional(),url:f.z.string(),providerMetadata:eg.optional()}),tc=f.z.object({type:f.z.literal("step-start")}),td=f.z.object({type:f.z.string().startsWith("data-"),id:f.z.string().optional(),data:f.z.unknown()}),tm=[f.z.object({type:f.z.literal("dynamic-tool"),toolName:f.z.string(),toolCallId:f.z.string(),state:f.z.literal("input-streaming"),input:f.z.unknown().optional(),output:f.z.never().optional(),errorText:f.z.never().optional()}),f.z.object({type:f.z.literal("dynamic-tool"),toolName:f.z.string(),toolCallId:f.z.string(),state:f.z.literal("input-available"),input:f.z.unknown(),output:f.z.never().optional(),errorText:f.z.never().optional(),callProviderMetadata:eg.optional()}),f.z.object({type:f.z.literal("dynamic-tool"),toolName:f.z.string(),toolCallId:f.z.string(),state:f.z.literal("output-available"),input:f.z.unknown(),output:f.z.unknown(),errorText:f.z.never().optional(),callProviderMetadata:eg.optional(),preliminary:f.z.boolean().optional()}),f.z.object({type:f.z.literal("dynamic-tool"),toolName:f.z.string(),toolCallId:f.z.string(),state:f.z.literal("output-error"),input:f.z.unknown(),output:f.z.never().optional(),errorText:f.z.string(),callProviderMetadata:eg.optional()})],tg=[f.z.object({type:f.z.string().startsWith("tool-"),toolCallId:f.z.string(),state:f.z.literal("input-streaming"),providerExecuted:f.z.boolean().optional(),input:f.z.unknown().optional(),output:f.z.never().optional(),errorText:f.z.never().optional()}),f.z.object({type:f.z.string().startsWith("tool-"),toolCallId:f.z.string(),state:f.z.literal("input-available"),providerExecuted:f.z.boolean().optional(),input:f.z.unknown(),output:f.z.never().optional(),errorText:f.z.never().optional(),callProviderMetadata:eg.optional()}),f.z.object({type:f.z.string().startsWith("tool-"),toolCallId:f.z.string(),state:f.z.literal("output-available"),providerExecuted:f.z.boolean().optional(),input:f.z.unknown(),output:f.z.unknown(),errorText:f.z.never().optional(),callProviderMetadata:eg.optional(),preliminary:f.z.boolean().optional()}),f.z.object({type:f.z.string().startsWith("tool-"),toolCallId:f.z.string(),state:f.z.literal("output-error"),providerExecuted:f.z.boolean().optional(),input:f.z.unknown(),output:f.z.never().optional(),errorText:f.z.string(),callProviderMetadata:eg.optional()})];f.z.object({id:f.z.string(),role:f.z.enum(["system","user","assistant"]),metadata:f.z.unknown().optional(),parts:f.z.array(f.z.union([ti,ts,tl,tu,tp,tc,td,...tm,...tg]))})}}]);