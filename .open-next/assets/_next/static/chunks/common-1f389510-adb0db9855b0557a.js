(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6680],{2479:(e,t,r)=>{"use strict";r.d(t,{JE:()=>s,fH:()=>c,vF:()=>o,vV:()=>n});class a{shouldLog(e){return e<=this.logLevel}formatLogEntry(e){let t=["ERROR","WARN","INFO","DEBUG"][e.level],r="[".concat(e.timestamp,"] ").concat(t,": ").concat(e.message);return e.context&&Object.keys(e.context).length>0&&(r+=" | Context: ".concat(JSON.stringify(e.context))),e.error&&(r+=" | Error: ".concat(e.error.message),this.isDevelopment&&e.error.stack&&(r+=" | Stack: ".concat(e.error.stack))),r}log(e,t,r,a){if(!this.shouldLog(e))return;let o={level:e,message:t,timestamp:new Date().toISOString(),context:r,error:a},n=this.formatLogEntry(o);0===e&&console.error(n),!this.isDevelopment&&e<=1&&this.sendToExternalService(o)}async sendToExternalService(e){}error(e,t,r){this.log(0,e,t,r)}warn(e,t){this.log(1,e,t)}info(e,t){this.log(2,e,t)}debug(e,t){this.log(3,e,t)}apiLog(e,t,r,a,o){let n="".concat(e," ").concat(t," - ").concat(r).concat(a?" (".concat(a,"ms)"):""),s=r>=500?0:r>=400?1:2;this.log(s,n,{method:e,path:t,statusCode:r,duration:a,...o})}dbLog(e,t,r,a){let o="DB ".concat(e," on ").concat(t).concat(r?" (".concat(r,"ms)"):"");this.log(3,o,{operation:e,table:t,duration:r,...a})}authLog(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=arguments.length>3?arguments[3]:void 0,o="Auth ".concat(e).concat(t?" for user ".concat(t):""," - ").concat(r?"SUCCESS":"FAILED");this.log(r?2:1,o,{action:e,userId:t,success:r,...a})}constructor(){this.isDevelopment=!1,this.logLevel=this.isDevelopment?3:2}}let o=new a,n=(e,t,r)=>{t instanceof Error?o.error(e,void 0,t):"object"==typeof t&&null!==t?o.error(e,t,r):o.error(e,void 0,r)},s=(e,t)=>o.warn(e,t),c=(e,t)=>o.info(e,t)},4192:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,AuthProvider:()=>c});var a=r(95155),o=r(2479),n=r(12115);let s=(0,n.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,n.useState)(null),[i,l]=(0,n.useState)(null),[u,f]=(0,n.useState)(!0);(0,n.useEffect)(()=>{{let e=localStorage.getItem("authToken");e?d(e):f(!1)}},[]);let d=async e=>{try{(0,o.fH)("Auth hook: Fetching user data with token",{tokenLength:e.length});let r=await fetch("/api/auth/user",{headers:{Authorization:"Bearer ".concat(e)}});if((0,o.fH)("Auth hook: User API response",{status:r.status,ok:r.ok}),r.ok){var t;let a=await r.json(),n=a&&(null!=(t=a.user)?t:a),s={user:n,access_token:e,refresh_token:e,expires_at:Date.now()+6048e5};c(n),l(s),(0,o.fH)("Auth hook: User data set successfully",{userId:n.id})}else(0,o.vV)("Auth hook: User API failed",{status:r.status}),(401===r.status||403===r.status)&&(localStorage.removeItem("authToken"),"/signin"!==window.location.pathname&&(window.location.href="/signin"))}catch(e){(0,o.vV)("Auth hook: Error fetching user data:",e)}finally{f(!1)}},h=async(e,t)=>{try{let r=await fetch("/api/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e.includes("@")?e:e.toLowerCase(),password:t,isEmail:e.includes("@")})}),a=await r.json();if(!r.ok)return{error:a.error};{let{user:e,token:t}=a;localStorage.setItem("authToken",t);let r={user:e,access_token:t,refresh_token:t,expires_at:Date.now()+6048e5};return c(e),l(r),{error:null}}}catch(e){return{error:"Network error"}}},p=async(e,t,r)=>{try{let a=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,metadata:r})}),o=await a.json();if(!a.ok)return{error:o.error};{let{user:e,token:t}=o;localStorage.setItem("authToken",t);let r={user:e,access_token:t,refresh_token:t,expires_at:Date.now()+6048e5};return c(e),l(r),{error:null}}}catch(e){return{error:"Network error"}}},g=async()=>{localStorage.removeItem("authToken"),c(null),l(null)},m=async()=>localStorage.getItem("authToken");return(0,a.jsx)(s.Provider,{value:{user:r,session:i,loading:u,signIn:h,signUp:p,signOut:g,getToken:m},children:t})}function i(){let e=(0,n.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7588:(e,t,r)=>{"use strict";r.d(t,{a:()=>o});var a=r(12115);function o(){let[e,t]=a.useState(void 0);return a.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),r=()=>{t(window.innerWidth<768)};return e.addEventListener("change",r),t(window.innerWidth<768),()=>e.removeEventListener("change",r)},[]),!!e}},19393:()=>{},25016:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(2821),o=r(75889);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.QP)((0,a.$)(t))}},28171:(e,t,r)=>{"use strict";r.d(t,{dj:()=>f,oR:()=>u});var a=r(12115);let o=0,n=new Map,s=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},c=[],i={toasts:[]};function l(e){i=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?s(r):e.toasts.forEach(e=>{s(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(i,e),c.forEach(e=>{e(i)})}function u(e){let{...t}=e,r=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>l({type:"DISMISS_TOAST",toastId:r});return l({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=a.useState(i);return a.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},33292:(e,t,r)=>{"use strict";r.d(t,{H:()=>s});var a=r(2479),o=r(12115),n=r(4192);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{getToken:t}=(0,n.A)(),[r,s]=(0,o.useState)(e.defaultValues||{}),[c,i]=(0,o.useState)(!0),[l,u]=(0,o.useState)(null),f=(0,o.useRef)(!1),d=(0,o.useCallback)(async()=>{let e=await t(),r={"Content-Type":"application/json"};return e&&(r.Authorization="Bearer ".concat(e)),r},[]),h=(0,o.useCallback)(async()=>{if(!f.current)try{f.current=!0,i(!0),u(null);let t=await d(),r=await fetch("/api/preferences",{method:"GET",headers:t});if(r.ok){let e=await r.json();s(e.preferences||{})}else if(e.fallbackToLocalStorage){let t={...e.defaultValues};Object.keys(t).forEach(e=>{try{let r=localStorage.getItem("pref_".concat(e));null!==r&&(t[e]=JSON.parse(r))}catch(e){}}),s(t)}}catch(t){if((0,a.vV)("Failed to load preferences:",t),u(t instanceof Error?t.message:"Failed to load preferences"),e.fallbackToLocalStorage){let t={...e.defaultValues};Object.keys(t).forEach(e=>{try{let r=localStorage.getItem("pref_".concat(e));null!==r&&(t[e]=JSON.parse(r))}catch(e){}}),s(t)}}finally{f.current=!1,i(!1)}},[d,e.defaultValues,e.fallbackToLocalStorage]),p=(0,o.useCallback)(async(t,r)=>{try{let o=await d();if((await fetch("/api/preferences",{method:"POST",headers:o,body:JSON.stringify({key:t,value:r})})).ok)s(e=>({...e,[t]:r})),u(null);else if(e.fallbackToLocalStorage)try{localStorage.setItem("pref_".concat(t),JSON.stringify(r)),s(e=>({...e,[t]:r}))}catch(e){throw(0,a.vV)("Failed to save to localStorage:",e),Error("Failed to save preference")}else throw Error("Failed to save preference")}catch(e){throw(0,a.vV)("Failed to set preference:",e),u(e instanceof Error?e.message:"Failed to save preference"),e}},[d,e.fallbackToLocalStorage]),g=(0,o.useCallback)(async t=>{try{let r=await d();if((await fetch("/api/preferences",{method:"POST",headers:r,body:JSON.stringify({preferences:t})})).ok)s(e=>({...e,...t})),u(null);else if(e.fallbackToLocalStorage)try{Object.entries(t).forEach(e=>{let[t,r]=e;localStorage.setItem("pref_".concat(t),JSON.stringify(r))}),s(e=>({...e,...t}))}catch(e){throw(0,a.vV)("Failed to save to localStorage:",e),Error("Failed to save preferences")}else throw Error("Failed to save preferences")}catch(e){throw(0,a.vV)("Failed to set preferences:",e),u(e instanceof Error?e.message:"Failed to save preferences"),e}},[d,e.fallbackToLocalStorage]),m=(0,o.useCallback)((e,t)=>void 0!==r[e]?r[e]:t,[r]),S=(0,o.useCallback)(async t=>{try{let r=await d();if((await fetch("/api/preferences?key=".concat(encodeURIComponent(t)),{method:"DELETE",headers:r})).ok)s(e=>{let r={...e};return delete r[t],r}),u(null);else if(e.fallbackToLocalStorage)try{localStorage.removeItem("pref_".concat(t)),s(e=>{let r={...e};return delete r[t],r})}catch(e){throw(0,a.vV)("Failed to remove from localStorage:",e),Error("Failed to remove preference")}else throw Error("Failed to remove preference")}catch(e){throw(0,a.vV)("Failed to remove preference:",e),u(e instanceof Error?e.message:"Failed to remove preference"),e}},[d,e.fallbackToLocalStorage]);return(0,o.useEffect)(()=>{h()},[]),{preferences:r,loading:c,error:l,setPreference:p,setPreferences:g,getPreference:m,removePreference:S,refreshPreferences:h}}},43660:(e,t,r)=>{"use strict";r.d(t,{CF:()=>c,LC:()=>i,st:()=>s});var a=r(2479),o=r(12115),n=r(4192);function s(){let{user:e}=(0,n.A)(),t=(0,o.useRef)(Date.now()),r=(0,o.useRef)(0);(0,o.useEffect)(()=>{r.current=Date.now(),(async()=>{e&&await s("page_view",{page:window.location.pathname,referrer:document.referrer,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})})()},[e]),(0,o.useEffect)(()=>()=>{e&&s("user_logout",{sessionDuration:Date.now()-t.current,timestamp:new Date().toISOString()}).catch(console.error)},[e]);let s=(0,o.useCallback)(async function(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e)try{let n=await fetch("/api/analytics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:r,properties:{...o,userId:e.id,sessionId:t.current.toString(),timestamp:new Date().toISOString()}})});n.ok||(0,a.vV)("Failed to track analytics event:",n.statusText)}catch(e){(0,a.vV)("Error tracking analytics event:",e)}},[e]),c=(0,o.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await s("page_view",{page:e,...t})},[s]),i=(0,o.useCallback)(async t=>{if(e)try{let r=await fetch("/api/analytics/metrics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,userId:e.id,timestamp:new Date().toISOString()})});r.ok||(0,a.vV)("Failed to track performance metrics:",r.statusText)}catch(e){(0,a.vV)("Error tracking performance metrics:",e)}},[e]),l=(0,o.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await s("error_occurred",{error:e,...t})},[s]);return{track:s,trackPageView:c,trackPerformance:i,trackError:l}}function c(){let{trackPageView:e}=s(),{user:t}=(0,n.A)();(0,o.useEffect)(()=>{if(!t)return;let r=()=>{e(window.location.pathname)};return e(window.location.pathname),window.addEventListener("popstate",r),()=>{window.removeEventListener("popstate",r)}},[t,e])}function i(){let{trackPerformance:e}=s(),{user:t}=(0,n.A)();(0,o.useEffect)(()=>{if(!t)return;let r=()=>{e({pageLoadTime:performance.now()})};"complete"===document.readyState?r():window.addEventListener("load",r);let a=setInterval(()=>{if("memory"in performance){let t=performance.memory;e({memoryUsage:t.usedJSHeapSize,memoryLimit:t.jsHeapSizeLimit})}},3e4);return()=>{window.removeEventListener("load",r),clearInterval(a)}},[t,e])}},90883:(e,t,r)=>{"use strict";r.d(t,{yK:()=>n});var a=r(25155),o=r(33834);let n=(0,a.MB)({baseURL:"https://solosuccess.ai",plugins:[(0,o.NA)({onTwoFactorRedirect:()=>{window.location.href="/auth/2fa"}}),(0,o.KM)(),(0,o.N$)(),(0,o.jz)()]}),{signIn:s,signUp:c,signOut:i,useSession:l,getSession:u}=n}}]);