(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[307],{32697:(e,s,t)=>{Promise.resolve().then(t.bind(t,50162))},50162:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var r=t(95155),a=t(2479),i=t(12115),l=t(31322),n=t(20063),d=t(52056),c=t(35626),o=t(42529),m=t(39867),x=t(71360),h=t(21786),u=t(65229),p=t(52619),g=t.n(p),j=t(33775),y=t(84972),v=t(67812),f=t(90923),N=t(96633);function w(){let e=(0,n.useRouter)(),[s,t]=(0,i.useState)("upload"),[p,w]=(0,i.useState)(!1),[b,C]=(0,i.useState)(!1),[k,S]=(0,i.useState)(!1),[A,z]=(0,i.useState)([]),[I,D]=(0,i.useState)(null),[E,L]=(0,i.useState)(new Set),V=async e=>{if(!e.name.endsWith(".csv"))return void alert("Please upload a CSV file");try{C(!0),await new Promise(e=>setTimeout(e,2e3));let a=(await e.text()).split("\n").filter(e=>e.trim()),i=a[0].split(",").map(e=>e.trim().toLowerCase()),l=[];for(let e=1;e<a.length;e++){var s,r;let t=a[e].split(",").map(e=>e.trim()),n={};i.forEach((e,s)=>{n[e]=t[s]||""});let d=[];n.name&&""!==n.name.trim()||d.push("Company name is required"),n.domain&&""!==n.domain.trim()?/^[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]*\.([a-zA-Z]{2,})$/.test(n.domain)||d.push("Invalid domain format"):d.push("Domain is required"),n.description&&""!==n.description.trim()||d.push("Description is required"),n.industry&&""!==n.industry.trim()||d.push("Industry is required"),["low","medium","high","critical"].includes(null==(s=n.threatlevel)?void 0:s.toLowerCase())||d.push("Invalid threat level. Must be: low, medium, high, or critical"),n.employeecount&&isNaN(parseInt(n.employeecount))&&d.push("Employee count must be a number");let c=0===d.length?"valid":d.length<=2?"warning":"error";l.push({id:e.toString(),name:n.name||"",domain:n.domain||"",description:n.description||"",industry:n.industry||"",headquarters:n.headquarters||"",employeeCount:n.employeecount?parseInt(n.employeecount):null,fundingStage:n.fundingstage||"",threatLevel:(null==(r=n.threatlevel)?void 0:r.toLowerCase())||"medium",status:c,issues:d})}z(l);let n={valid:l.filter(e=>"valid"===e.status).length,warnings:l.filter(e=>"warning"===e.status).length,errors:l.filter(e=>"error"===e.status).length,total:l.length};D(n),t("review");let d=l.filter(e=>"valid"===e.status||"warning"===e.status).map(e=>e.id);L(new Set(d))}catch(e){(0,a.vV)("Error processing file:",e)}finally{C(!1)}},P=async()=>{if(0!==E.size)try{S(!0),await new Promise(e=>setTimeout(e,3e3)),e.push("/dashboard/competitors")}catch(e){(0,a.vV)("Error importing competitors:",e)}finally{S(!1)}};return(0,r.jsx)("div",{className:"min-h-screen gradient-background p-6",children:(0,r.jsxs)(l.PY1.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-6xl mx-auto space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(g(),{href:"/dashboard/competitors",children:(0,r.jsxs)(y.e2,{variant:"secondary",size:"sm",children:[(0,r.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,r.jsx)(l.PY1.div,{animate:{rotate:[0,10,-10,0],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"w-12 h-12 gradient-accent rounded-full flex items-center justify-center",children:(0,r.jsx)(h.A,{className:"w-6 h-6 text-white"})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gradient",children:"Bulk Import Competitors"})]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Import multiple competitors at once using a CSV file"})]})]}),E.size>0&&(0,r.jsxs)(y.K_,{onClick:P,loading:k,children:["Import ",E.size," Competitor",E.size>1?"s":""]})]}),(0,r.jsxs)(f.tU,{value:s,onValueChange:t,className:"space-y-6",children:[(0,r.jsxs)(f.j7,{className:"grid w-full grid-cols-2",children:[(0,r.jsx)(f.Xi,{value:"upload",children:"Upload File"}),(0,r.jsxs)(f.Xi,{value:"review",disabled:0===A.length,children:["Review & Import (",A.length,")"]})]}),(0,r.jsxs)(f.av,{value:"upload",className:"space-y-6",children:[(0,r.jsxs)(j.EmpowermentCard,{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gradient mb-4",children:"Import Instructions"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Required Fields:"}),(0,r.jsxs)("ul",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsxs)("li",{children:["• ",(0,r.jsx)("strong",{children:"name"})," - Competitor company name"]}),(0,r.jsxs)("li",{children:["• ",(0,r.jsx)("strong",{children:"domain"})," - Website domain (e.g., example.com)"]}),(0,r.jsxs)("li",{children:["• ",(0,r.jsx)("strong",{children:"threatLevel"})," - low, medium, high, or critical"]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Optional Fields:"}),(0,r.jsxs)("ul",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsxs)("li",{children:["• ",(0,r.jsx)("strong",{children:"description"})," - Company description"]}),(0,r.jsxs)("li",{children:["• ",(0,r.jsx)("strong",{children:"industry"})," - Industry category"]}),(0,r.jsxs)("li",{children:["• ",(0,r.jsx)("strong",{children:"headquarters"})," - Company location"]}),(0,r.jsxs)("li",{children:["• ",(0,r.jsx)("strong",{children:"employeeCount"})," - Number of employees"]}),(0,r.jsxs)("li",{children:["• ",(0,r.jsx)("strong",{children:"fundingStage"})," - seed, series-a, series-b, etc."]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Download our template to get started with the correct format"}),(0,r.jsx)(y.e2,{variant:"secondary",size:"sm",onClick:()=>{let e=new Blob(["name,domain,description,industry,headquarters,employeeCount,fundingStage,threatLevel\nTechRival Corp,techrival.com,AI-powered productivity platform,Technology,San Francisco CA,150,series-b,high\nStartupSlayer,startupslayer.io,Business automation tools,Technology,Austin TX,75,series-a,critical\nBizBoost Solutions,bizboost.com,Business management platform,Technology,New York NY,200,series-c,medium"],{type:"text/csv"}),s=window.URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="competitor-import-template.csv",document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(s)},icon:(0,r.jsx)(m.A,{className:"w-4 h-4"}),children:"Download Template"})]})]})]}),(0,r.jsx)(j.EmpowermentCard,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gradient",children:"Upload CSV File"}),(0,r.jsx)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors ".concat(p?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-300 dark:border-gray-600"),onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),w(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),w(!1)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation(),w(!1);let s=Array.from(e.dataTransfer.files);s.length>0&&V(s[0])},children:(0,r.jsxs)(l.PY1.div,{animate:p?{scale:1.05}:{scale:1},className:"space-y-4",children:[(0,r.jsx)("div",{className:"mx-auto w-16 h-16 gradient-accent rounded-full flex items-center justify-center",children:(0,r.jsx)(h.A,{className:"w-8 h-8 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-lg font-semibold mb-2",children:p?"Drop your CSV file here":"Drag and drop your CSV file"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"or click to browse and select a file"}),(0,r.jsx)("input",{type:"file",accept:".csv",onChange:e=>{let s=e.target.files;s&&s.length>0&&V(s[0])},className:"hidden",id:"file-upload"}),(0,r.jsx)("label",{htmlFor:"file-upload",children:(0,r.jsx)(y.e2,{variant:"primary",size:"sm",children:"Select CSV File"})})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Maximum file size: 10MB • Supported format: CSV"})]})}),b&&(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsxs)("div",{className:"inline-flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Processing file..."})]})})]})})]}),(0,r.jsx)(f.av,{value:"review",className:"space-y-6",children:I&&(0,r.jsxs)(j.EmpowermentCard,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gradient",children:"Validation Results"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(y.e2,{variant:"secondary",size:"sm",onClick:()=>{L(new Set(A.filter(e=>"valid"===e.status||"warning"===e.status).map(e=>e.id)))},children:"Select All Valid"}),(0,r.jsx)(y.e2,{variant:"secondary",size:"sm",onClick:()=>{L(new Set)},children:"Deselect All"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"text-center p-4 glass rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:I.total}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Rows"})]}),(0,r.jsxs)("div",{className:"text-center p-4 glass rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:I.valid}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valid"})]}),(0,r.jsxs)("div",{className:"text-center p-4 glass rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:I.warnings}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Warnings"})]}),(0,r.jsxs)("div",{className:"text-center p-4 glass rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-red-600",children:I.errors}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Errors"})]})]}),(0,r.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,r.jsxs)(N.XI,{children:[(0,r.jsx)(N.A0,{children:(0,r.jsxs)(N.Hj,{children:[(0,r.jsx)(N.nd,{className:"w-12",children:"Select"}),(0,r.jsx)(N.nd,{className:"w-12",children:"Status"}),(0,r.jsx)(N.nd,{children:"Name"}),(0,r.jsx)(N.nd,{children:"Domain"}),(0,r.jsx)(N.nd,{children:"Industry"}),(0,r.jsx)(N.nd,{children:"Threat Level"}),(0,r.jsx)(N.nd,{children:"Issues"}),(0,r.jsx)(N.nd,{className:"w-12",children:"Actions"})]})}),(0,r.jsx)(N.BF,{children:A.map(e=>(0,r.jsxs)(N.Hj,{children:[(0,r.jsx)(N.nA,{children:"error"!==e.status&&(0,r.jsx)("input",{type:"checkbox",checked:E.has(e.id),onChange:()=>(e=>{let s=new Set(E);s.has(e)?s.delete(e):s.add(e),L(s)})(e.id),"aria-label":"Select ".concat(e.name," for import"),className:"rounded border-gray-300"})}),(0,r.jsx)(N.nA,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(e=>{switch(e){case"valid":return(0,r.jsx)(o.A,{className:"w-4 h-4 text-green-500"});case"warning":return(0,r.jsx)(d.A,{className:"w-4 h-4 text-yellow-500"});case"error":return(0,r.jsx)(u.A,{className:"w-4 h-4 text-red-500"});default:return null}})(e.status),(0,r.jsx)(v.E,{variant:"outline",className:{valid:"bg-green-100 text-green-800 border-green-200",warning:"bg-yellow-100 text-yellow-800 border-yellow-200",error:"bg-red-100 text-red-800 border-red-200"}[e.status]||"bg-gray-100 text-gray-800 border-gray-200",children:e.status.toUpperCase()})]})}),(0,r.jsx)(N.nA,{className:"font-medium",children:e.name}),(0,r.jsx)(N.nA,{children:e.domain}),(0,r.jsx)(N.nA,{children:e.industry||"-"}),(0,r.jsx)(N.nA,{children:e.threatLevel&&(0,r.jsx)(v.E,{variant:"outline",children:e.threatLevel.toUpperCase()})}),(0,r.jsx)(N.nA,{children:e.issues.length>0?(0,r.jsxs)("div",{className:"space-y-1",children:[e.issues.slice(0,2).map((e,s)=>(0,r.jsx)("div",{className:"text-xs text-red-600",children:e},s)),e.issues.length>2&&(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["+",e.issues.length-2," more"]})]}):(0,r.jsx)("span",{className:"text-green-600 text-sm",children:"No issues"})}),(0,r.jsx)(N.nA,{children:(0,r.jsx)(y.e2,{variant:"secondary",size:"sm",onClick:()=>(e=>{z(s=>s.filter(s=>s.id!==e)),L(s=>{let t=new Set(s);return t.delete(e),t});let s=A.filter(s=>s.id!==e);s.length>0&&D({valid:s.filter(e=>"valid"===e.status).length,warnings:s.filter(e=>"warning"===e.status).length,errors:s.filter(e=>"error"===e.status).length,total:s.length})})(e.id),children:(0,r.jsx)(x.A,{className:"w-3 h-3"})})})]},e.id))})]})}),E.size>0&&(0,r.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[E.size," competitor",E.size>1?"s":""," selected for import"]}),(0,r.jsx)(y.K_,{onClick:P,loading:k,children:k?"Importing...":"Import ".concat(E.size," Competitor").concat(E.size>1?"s":"")})]})]})})]})]})})}}},e=>{e.O(0,[6975,4228,3848,9809,8061,2807,1198,1159,5159,23,6529,5593,4180,3976,186,8790,5848,8861,9701,5147,4961,2136,7908,8030,2583,9168,4774,27,6308,563,4696,9173,9219,4409,3376,9765,7650,8920,871,6680,7358],()=>e(e.s=32697)),_N_E=e.O()}]);