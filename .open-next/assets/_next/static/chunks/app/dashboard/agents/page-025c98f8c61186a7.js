(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4480],{34847:(e,a,t)=>{Promise.resolve().then(t.bind(t,76882))},76882:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>_});var s=t(95155),i=t(2479),n=t(12115),l=t(83209),r=t(97003),c=t(67812),o=t(67001),d=t(27346),m=t(78192),h=t(29633),p=t(75426),x=t(46046),g=t(18085),u=t(95740),v=t(91169),y=t(28171),j=t(43660),f=t(54679),N=t(33789),b=t(90235),w=t(83550),S=t(31322);let C=[{id:"roxy",name:"roxy",display_name:"Roxy",description:"Strategic Decision Architect & Executive Assistant",personality:"Efficiently rebellious, organized chaos master, proactively punk",capabilities:["SPADE Framework","Strategic Planning","Schedule Management","Risk Assessment"],accent_color:"#8B5CF6"},{id:"blaze",name:"blaze",display_name:"Blaze",description:"Growth & Sales Strategist",personality:"Energetically rebellious, results-driven with punk rock passion",capabilities:["Cost-Benefit Analysis","Sales Funnels","Market Strategy","Growth Planning"],accent_color:"#F59E0B"},{id:"echo",name:"echo",display_name:"Echo",description:"Marketing Maven & Content Creator",personality:"Creatively rebellious, high-converting with warm punk energy",capabilities:["Content Creation","Brand Strategy","Social Media","Campaign Planning"],accent_color:"#EC4899"},{id:"lumi",name:"lumi",display_name:"Lumi",description:"Guardian AI & Compliance Co-Pilot",personality:"Proactive compliance expert with ethical decision-making",capabilities:["GDPR/CCPA Compliance","Policy Generation","Legal Guidance","Risk Management"],accent_color:"#10B981"},{id:"vex",name:"vex",display_name:"Vex",description:"Technical Architect & Systems Optimizer",personality:"Systems rebel, automation architect, technical problem solver",capabilities:["System Design","Automation","Technical Strategy","Process Optimization"],accent_color:"#3B82F6"},{id:"lexi",name:"lexi",display_name:"Lexi",description:"Strategy Analyst & Data Queen",personality:"Data-driven insights insurgent, analytical powerhouse",capabilities:["Data Analysis","Market Research","Performance Metrics","Strategic Insights"],accent_color:"#6366F1"},{id:"nova",name:"nova",display_name:"Nova",description:"Productivity & Time Management Coach",personality:"Productivity revolutionary, time optimization expert",capabilities:["Time Management","Workflow Optimization","Productivity Systems","Focus Techniques"],accent_color:"#06B6D4"},{id:"glitch",name:"glitch",display_name:"Glitch",description:"Problem-Solving Architect",personality:"Root cause investigator, creative problem solver",capabilities:["Five Whys Analysis","Problem Solving","Innovation","Creative Solutions"],accent_color:"#EF4444"}];function _(){let[e,a]=(0,n.useState)(null),[t,_]=(0,n.useState)([]),[A,k]=(0,n.useState)(""),[F,D]=(0,n.useState)(!1),[I,B]=(0,n.useState)([]),[P,E]=(0,n.useState)(!1),[T,O]=(0,n.useState)(null),[z,M]=(0,n.useState)({fileName:"",description:"",category:"document",tags:"",format:"txt"}),[R,L]=(0,n.useState)(!1),{toast:G}=(0,y.dj)(),{track:J}=(0,j.st)();(0,j.CF)(),(0,n.useEffect)(()=>{V()},[]);let V=async()=>{try{let e=await fetch("/api/chat/conversations");if(e.ok){let a=await e.json();B(a.conversations||[])}}catch(e){(0,i.vV)("Error fetching conversations:",e)}},$=async()=>{if(!A.trim()||!e)return;let a={id:Date.now().toString(),role:"user",content:A,timestamp:new Date,agentId:e.id};J("ai_agent_interaction",{agentName:e.name,agentId:e.id,messageLength:A.length,timestamp:new Date().toISOString()}),_(e=>[...e,a]),k(""),D(!0);try{let a=localStorage.getItem("authToken"),s=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json",...a?{Authorization:"Bearer ".concat(a)}:{}},body:JSON.stringify({message:A,agentId:e.id})});if(s.ok){var t;let a=null==(t=s.body)?void 0:t.getReader();if(a){let t=new TextDecoder,s="";for(;;){let{done:i,value:n}=await a.read();if(i)break;let l=t.decode(n);s+=l,_(a=>{let t=[...a],i=t[t.length-1];return i&&"assistant"===i.role?i.content=s:t.push({id:Date.now().toString(),role:"assistant",content:s,timestamp:new Date,agentId:e.id}),t})}}}}catch(a){(0,i.vV)("Error sending message:",a),_(a=>[...a,{id:Date.now().toString(),role:"assistant",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date,agentId:e.id}])}finally{D(!1)}},q=e=>e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),W=async()=>{if(T){L(!0);try{let a=T.content,t="text/plain",s=z.format;"md"===z.format?(a="# ".concat(z.fileName,"\n\n").concat(T.content),t="text/markdown"):"json"===z.format&&(a=JSON.stringify({agent:null==e?void 0:e.display_name,timestamp:T.timestamp,content:T.content,metadata:{role:T.role,agentId:T.agentId}},null,2),t="application/json");let i=new Blob([a],{type:t}),n=new File([i],"".concat(z.fileName,".").concat(s),{type:t}),l=new FormData;l.append("files",n),l.append("category",z.category),l.append("description",z.description),l.append("tags",z.tags);let r=localStorage.getItem("authToken");if((await fetch("/api/briefcase/upload",{method:"POST",headers:{...r?{Authorization:"Bearer ".concat(r)}:{}},body:l})).ok)G({title:"Saved Successfully!",description:'"'.concat(z.fileName,'" has been saved to your Briefcase.')}),E(!1),M({fileName:"",description:"",category:"document",tags:"",format:"txt"});else throw Error("Failed to save")}catch(e){(0,i.vV)("Save error:",e),G({title:"Save Failed",description:"Failed to save to Briefcase. Please try again.",variant:"destructive"})}finally{L(!1)}}};return(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"AI Squad"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Chat with your specialized AI agents to dominate your empire"})]}),(0,s.jsxs)(c.E,{className:"bg-purple-100 text-purple-800",children:[(0,s.jsx)(m.A,{className:"w-3 h-3 mr-1"}),C.length," Agents Available"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 h-[calc(100vh-200px)]",children:[(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)(l.Zp,{className:"h-full",children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(v.A,{className:"w-5 h-5"}),"Your AI Squad"]}),(0,s.jsx)(l.BT,{children:"Choose your AI agent to chat with"})]}),(0,s.jsx)(l.Wu,{children:(0,s.jsx)(d.F,{className:"h-[calc(100vh-300px)]",children:(0,s.jsx)("div",{className:"space-y-3",children:C.map(t=>(0,s.jsxs)("div",{onClick:()=>{a(t),_([])},className:"p-4 border rounded-lg cursor-pointer transition-all hover:shadow-md ".concat((null==e?void 0:e.id)===t.id?"border-purple-300 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold agent-avatar","data-agent-color":t.accent_color,children:t.display_name.charAt(0)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-semibold text-sm",children:t.display_name}),(0,s.jsx)("p",{className:"text-xs text-gray-600 truncate",children:t.description})]})]}),(0,s.jsxs)("div",{className:"mt-2 flex flex-wrap gap-1",children:[t.capabilities.slice(0,2).map((e,a)=>(0,s.jsx)(c.E,{variant:"secondary",className:"text-xs",children:e},a)),t.capabilities.length>2&&(0,s.jsxs)(c.E,{variant:"outline",className:"text-xs",children:["+",t.capabilities.length-2," more"]})]})]},t.id))})})})]})}),(0,s.jsx)("div",{className:"lg:col-span-3",children:(0,s.jsx)(l.Zp,{className:"h-full flex flex-col",children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.aR,{className:"border-b",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold agent-avatar","data-agent-color":e.accent_color,children:e.display_name.charAt(0)}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[e.display_name,(0,s.jsx)(u.A,{className:"w-4 h-4 text-purple-500"})]}),(0,s.jsx)(l.BT,{children:e.description})]})]}),t.length>0&&(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)(r.$,{size:"sm",variant:"outline",onClick:()=>{if(0===t.length)return;let a=(null==e?void 0:e.display_name)||"AI",s=new Date().toISOString().slice(0,19).replace(/:/g,"-"),i="".concat(a,"_Conversation_").concat(s);O({id:"conversation-export",role:"assistant",content:t.map(e=>"[".concat(e.role.toUpperCase(),"] ").concat(q(e.timestamp),":\n").concat(e.content,"\n")).join("\n"),timestamp:new Date,agentId:null==e?void 0:e.id}),M({fileName:i,description:"Full conversation with ".concat(a," (").concat(t.length," messages)"),category:"document",tags:"".concat(a.toLowerCase(),", conversation, full-export"),format:"txt"}),E(!0)},className:"flex items-center gap-2",children:[(0,s.jsx)(h.A,{className:"w-4 h-4"}),"Save Conversation"]})})]})}),(0,s.jsx)(l.Wu,{className:"flex-1 p-0",children:(0,s.jsx)(d.F,{className:"h-[calc(100vh-400px)] p-4",children:0===t.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-4 agent-avatar","data-agent-color":e.accent_color,children:e.display_name.charAt(0)}),(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-2",children:["Chat with ",e.display_name]}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:e.personality}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:e.capabilities.map((e,a)=>(0,s.jsx)(c.E,{variant:"outline",children:e},a))})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[t.map(a=>(0,s.jsx)(S.PY1.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex ".concat("user"===a.role?"justify-end":"justify-start"," group"),children:(0,s.jsxs)("div",{className:"max-w-[80%] p-3 rounded-lg relative ".concat("user"===a.role?"bg-purple-600 text-white":"bg-gray-100 text-gray-900 hover:bg-gray-50"),children:[(0,s.jsx)("p",{className:"text-sm",children:a.content}),(0,s.jsx)("p",{className:"text-xs mt-1 ".concat("user"===a.role?"text-purple-200":"text-gray-500"),children:q(a.timestamp)}),"assistant"===a.role&&(0,s.jsx)("div",{className:"absolute -right-2 top-0 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsxs)("div",{className:"flex flex-col gap-1 bg-white rounded-lg shadow-lg border p-1",children:[(0,s.jsx)(r.$,{size:"sm",variant:"ghost",onClick:()=>(a=>{O(a);let t=(null==e?void 0:e.display_name)||"AI",s=new Date().toISOString().slice(0,19).replace(/:/g,"-"),i="".concat(t,"_Response_").concat(s),n="document",l=a.content.toLowerCase();(l.includes("strategy")||l.includes("plan"))&&(n="document"),(l.includes("email")||l.includes("message"))&&(n="document"),(l.includes("code")||l.includes("function"))&&(n="document"),(l.includes("image")||l.includes("design"))&&(n="image");let r=[(null==e?void 0:e.display_name.toLowerCase())||"ai","assistant"===a.role?"ai-generated":"user-input","chat-export"];M({fileName:i,description:"Conversation with ".concat(t," - ").concat(a.content.substring(0,100),"..."),category:n,tags:r.join(", "),format:"txt"}),E(!0)})(a),className:"w-8 h-8 p-0 hover:bg-purple-100",title:"Save to Briefcase",children:(0,s.jsx)(h.A,{className:"w-3 h-3 text-purple-600"})}),(0,s.jsx)(r.$,{size:"sm",variant:"ghost",onClick:()=>{var e;return e=a.content,void(navigator.clipboard.writeText(e),G({title:"Copied!",description:"Message copied to clipboard."}))},className:"w-8 h-8 p-0 hover:bg-gray-100",title:"Copy to Clipboard",children:(0,s.jsx)(p.A,{className:"w-3 h-3 text-gray-600"})})]})})]})},a.id)),F&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-gray-100 p-3 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-600"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Thinking..."})]})})})]})})}),(0,s.jsx)("div",{className:"p-4 border-t",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(o.T,{value:A,onChange:e=>k(e.target.value),placeholder:"Message ".concat(e.display_name,"..."),className:"flex-1 min-h-[60px] max-h-[120px] resize-none",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),$())}}),(0,s.jsx)(r.$,{onClick:$,disabled:!A.trim()||F,className:"px-4",children:(0,s.jsx)(g.A,{className:"w-4 h-4"})})]})})]}):(0,s.jsx)(l.Wu,{className:"flex-1 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(m.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Select an AI Agent"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Choose an agent from the sidebar to start chatting"})]})})})})]}),(0,s.jsx)(f.lG,{open:P,onOpenChange:E,children:(0,s.jsxs)(f.Cf,{className:"sm:max-w-md",children:[(0,s.jsxs)(f.c7,{children:[(0,s.jsxs)(f.L3,{className:"flex items-center gap-2",children:[(0,s.jsx)(h.A,{className:"w-5 h-5 text-purple-600"}),"Save to Briefcase"]}),(0,s.jsx)(f.rr,{children:"Configure how you want to save this content to your Briefcase."})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(b.J,{htmlFor:"fileName",children:"File Name"}),(0,s.jsx)(N.p,{id:"fileName",value:z.fileName,onChange:e=>M(a=>({...a,fileName:e.target.value})),placeholder:"Enter filename..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(b.J,{htmlFor:"description",children:"Description (Optional)"}),(0,s.jsx)(N.p,{id:"description",value:z.description,onChange:e=>M(a=>({...a,description:e.target.value})),placeholder:"Brief description of the content..."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(b.J,{htmlFor:"category",children:"Category"}),(0,s.jsxs)(w.l6,{value:z.category,onValueChange:e=>M(a=>({...a,category:e})),children:[(0,s.jsx)(w.bq,{children:(0,s.jsx)(w.yv,{})}),(0,s.jsxs)(w.gC,{children:[(0,s.jsx)(w.eb,{value:"document",children:"Document"}),(0,s.jsx)(w.eb,{value:"template",children:"Template"}),(0,s.jsx)(w.eb,{value:"note",children:"Note"}),(0,s.jsx)(w.eb,{value:"reference",children:"Reference"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(b.J,{htmlFor:"format",children:"Format"}),(0,s.jsxs)(w.l6,{value:z.format,onValueChange:e=>M(a=>({...a,format:e})),children:[(0,s.jsx)(w.bq,{children:(0,s.jsx)(w.yv,{})}),(0,s.jsxs)(w.gC,{children:[(0,s.jsx)(w.eb,{value:"txt",children:"Text (.txt)"}),(0,s.jsx)(w.eb,{value:"md",children:"Markdown (.md)"}),(0,s.jsx)(w.eb,{value:"json",children:"JSON (.json)"})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(b.J,{htmlFor:"tags",children:"Tags (Optional)"}),(0,s.jsx)(N.p,{id:"tags",value:z.tags,onChange:e=>M(a=>({...a,tags:e.target.value})),placeholder:"comma, separated, tags"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,s.jsx)(r.$,{variant:"outline",onClick:()=>E(!1),children:"Cancel"}),(0,s.jsx)(r.$,{onClick:W,disabled:!z.fileName.trim()||R,className:"bg-purple-600 hover:bg-purple-700",children:R?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"Save to Briefcase"]})})]})]})})]})}}},e=>{e.O(0,[5848,8861,9701,5147,4961,2136,7908,8030,2583,9168,4774,27,6308,563,4696,9173,9219,4409,3376,9765,7650,8920,871,6680,6975,4228,3848,9809,8061,2807,1198,1159,5159,23,6529,5593,4180,3976,186,8790,7358],()=>e(e.s=34847)),_N_E=e.O()}]);