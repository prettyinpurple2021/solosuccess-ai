(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9839],{95423:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var a=t(95155),r=t(12115),l=t(2479),c=t(31322),i=t(83209),n=t(97003),d=t(67812),x=t(32559),m=t(94760),h=t(25016);function o(e){let{className:s=""}=e,[t,o]=(0,r.useState)([]),[g,j]=(0,r.useState)(null),[p,u]=(0,r.useState)([]),[N,f]=(0,r.useState)(!0),[b,v]=(0,r.useState)(null),[y,w]=(0,r.useState)("30d"),[k,E]=(0,r.useState)("all"),[A,Z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{C()},[y]);let C=async()=>{try{f(!0),v(null);let e=new URLSearchParams({timeframe:y,includeForecast:"true",includeAnomalies:"true"}),s=await fetch("/api/analytics/predictive?".concat(e));if(!s.ok)throw Error("Failed to fetch predictive insights");let t=await s.json();if(t.success)o(t.data.insights||[]),j(t.data.forecast||null),u(t.data.anomalies||[]);else throw Error(t.error||"Failed to load insights")}catch(e){(0,l.vV)("Error fetching predictive insights:",e),v(e instanceof Error?e.message:"Unknown error")}finally{f(!1)}},W=async()=>{Z(!0),await C(),Z(!1)},P=e=>{switch(e){case"low":return"bg-green-100 text-green-800 border-green-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"critical":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},S="all"===k?t:t.filter(e=>e.category===k),F=S.filter(e=>e.priority>=7),R=S.filter(e=>e.actionable);return N?(0,a.jsxs)("div",{className:(0,h.cn)("space-y-6",s),children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:(0,a.jsx)(m.jy,{className:"w-4 h-4 text-white"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Predictive Insights"})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,a.jsx)(i.Zp,{className:"animate-pulse",children:(0,a.jsxs)(i.Wu,{className:"p-6",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})},e))})]}):b?(0,a.jsxs)(x.Fc,{className:"border-red-200 bg-red-50",children:[(0,a.jsx)(m.hc,{className:"h-4 w-4 text-red-600"}),(0,a.jsx)(x.TN,{className:"text-red-800",children:b})]}):(0,a.jsxs)("div",{className:(0,h.cn)("space-y-6",s),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:(0,a.jsx)(m.jy,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Predictive Insights"}),(0,a.jsx)("p",{className:"text-gray-600",children:"AI-powered analytics and predictions"})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:W,disabled:A,children:[(0,a.jsx)(m.e9,{className:(0,h.cn)("w-4 h-4 mr-2",A&&"animate-spin")}),"Refresh"]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(i.Zp,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",children:(0,a.jsx)(i.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Insights"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:t.length})]}),(0,a.jsx)(m.jy,{className:"w-8 h-8 text-purple-500"})]})})}),(0,a.jsx)(i.Zp,{className:"border-orange-200 bg-gradient-to-br from-orange-50 to-red-50",children:(0,a.jsx)(i.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"High Priority"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:F.length})]}),(0,a.jsx)(m.hc,{className:"w-8 h-8 text-orange-500"})]})})}),(0,a.jsx)(i.Zp,{className:"border-green-200 bg-gradient-to-br from-green-50 to-emerald-50",children:(0,a.jsx)(i.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Actionable"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:R.length})]}),(0,a.jsx)(m.We,{className:"w-8 h-8 text-green-500"})]})})}),(0,a.jsx)(i.Zp,{className:"border-red-200 bg-gradient-to-br from-red-50 to-pink-50",children:(0,a.jsx)(i.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Anomalies"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:p.length})]}),(0,a.jsx)(m.hc,{className:"w-8 h-8 text-red-500"})]})})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.dJ,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Timeframe:"}),(0,a.jsx)("div",{className:"flex gap-1",children:["7d","30d","90d","1y"].map(e=>(0,a.jsx)(n.$,{variant:y===e?"default":"outline",size:"sm",onClick:()=>w(e),className:"h-8 px-3",children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Category:"}),(0,a.jsx)("div",{className:"flex gap-1",children:["all","productivity","engagement","performance","business","user_behavior"].map(e=>(0,a.jsx)(n.$,{variant:k===e?"default":"outline",size:"sm",onClick:()=>E(e),className:"h-8 px-3",children:"all"===e?"All":e.charAt(0).toUpperCase()+e.slice(1).replace("_"," ")},e))})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:S.map((e,s)=>(0,a.jsx)(c.PY1.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},children:(0,a.jsxs)(i.Zp,{className:"relative overflow-hidden border-2 hover:shadow-lg transition-shadow",children:[e.priority>=8&&(0,a.jsx)("div",{className:"absolute top-0 right-0 w-0 h-0 border-l-[20px] border-l-transparent border-t-[20px] border-t-red-500"}),(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:(e=>{switch(e){case"trend":return(0,a.jsx)(m.nt,{className:"w-4 h-4"});case"anomaly":case"risk":return(0,a.jsx)(m.hc,{className:"w-4 h-4"});case"forecast":return(0,a.jsx)(m.bl,{className:"w-4 h-4"});case"recommendation":return(0,a.jsx)(m.We,{className:"w-4 h-4"});default:return(0,a.jsx)(m.jy,{className:"w-4 h-4"})}})(e.type)}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.ZB,{className:"text-lg",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)(d.E,{variant:"outline",className:P(e.impact),children:e.impact}),(0,a.jsxs)(d.E,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[e.confidence,"% confidence"]})]})]})]})})}),(0,a.jsxs)(i.Wu,{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-gray-600",children:e.description}),e.data&&(0,a.jsxs)("div",{className:"space-y-2",children:[void 0!==e.data.current&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{children:"Current:"}),(0,a.jsx)("span",{className:"font-medium",children:e.data.current})]}),void 0!==e.data.changePercent&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Change:"}),(0,a.jsxs)("div",{className:(0,h.cn)("flex items-center gap-1 text-sm font-medium",e.data.changePercent>0?"text-green-600":"text-red-600"),children:[e.data.changePercent>0?(0,a.jsx)(m.nt,{className:"w-3 h-3"}):(0,a.jsx)(m.kl,{className:"w-3 h-3"}),Math.abs(e.data.changePercent),"%"]})]})]}),e.recommendations&&e.recommendations.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Recommendations:"}),(0,a.jsx)("ul",{className:"space-y-1",children:e.recommendations.slice(0,3).map((e,s)=>(0,a.jsxs)("li",{className:"text-xs text-gray-600 flex items-start gap-2",children:[(0,a.jsx)(m.rA,{className:"w-3 h-3 text-green-500 mt-0.5 flex-shrink-0"}),e]},s))})]}),e.actionable&&(0,a.jsxs)(n.$,{size:"sm",className:"w-full",children:["Take Action",(0,a.jsx)(m.Qp,{className:"w-3 h-3 ml-2"})]})]})]})},e.id))}),g&&(0,a.jsxs)(i.Zp,{className:"border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-cyan-50",children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.bl,{className:"w-5 h-5 text-blue-600"}),"Business Forecast (",g.timeframe,")"]}),(0,a.jsxs)(i.BT,{children:["AI-powered predictions with ",g.confidence,"% confidence"]})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"User Growth"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:g.metrics.userGrowth[g.metrics.userGrowth.length-1]}),(0,a.jsxs)("p",{className:"text-xs text-green-600",children:["+",g.metrics.userGrowth[g.metrics.userGrowth.length-1]-g.metrics.userGrowth[0]]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Revenue"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",g.metrics.revenue[g.metrics.revenue.length-1]]}),(0,a.jsxs)("p",{className:"text-xs text-green-600",children:["+",g.metrics.revenue[g.metrics.revenue.length-1]-g.metrics.revenue[0]]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Engagement"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[g.metrics.engagement[g.metrics.engagement.length-1],"%"]}),(0,a.jsxs)("p",{className:"text-xs text-green-600",children:["+",g.metrics.engagement[g.metrics.engagement.length-1]-g.metrics.engagement[0],"%"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Churn Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:[g.metrics.churn[g.metrics.churn.length-1],"%"]}),(0,a.jsxs)("p",{className:"text-xs text-green-600",children:["-",g.metrics.churn[0]-g.metrics.churn[g.metrics.churn.length-1],"%"]})]})]})})]}),p.length>0&&(0,a.jsxs)(i.Zp,{className:"border-2 border-red-200 bg-gradient-to-br from-red-50 to-pink-50",children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.hc,{className:"w-5 h-5 text-red-600"}),"Detected Anomalies"]}),(0,a.jsx)(i.BT,{children:"Unusual patterns detected in your data"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:p.map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-white rounded-lg border",children:[(0,a.jsx)("div",{className:(0,h.cn)("w-8 h-8 rounded-full flex items-center justify-center","critical"===e.severity?"bg-red-100 text-red-600":"high"===e.severity?"bg-orange-100 text-orange-600":"medium"===e.severity?"bg-yellow-100 text-yellow-600":"bg-blue-100 text-blue-600"),children:(0,a.jsx)(m.hc,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.description}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.impact}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Expected: ",e.expectedValue.toFixed(2)]}),(0,a.jsxs)("span",{children:["Actual: ",e.actualValue.toFixed(2)]}),(0,a.jsxs)("span",{children:["Deviation: ",e.deviation.toFixed(2),"Ïƒ"]})]})]}),(0,a.jsx)(d.E,{variant:"outline",className:P(e.severity),children:e.severity})]},e.id))})})]})]})}}},e=>{e.O(0,[5848,8861,9701,5147,4961,2136,7908,8030,2583,9168,4774,27,6308,563,4696,9173,9219,4409,3376,9765,7650,8920,871,6680,93,7433,6802,6975,4228,3848,9809,8061,2807,1198,1159,5159,23,6529,5593,4180,3976,186,8790,7358],()=>e(e.s=11305)),_N_E=e.O()}]);