(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9263],{49471:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>J});var a=t(95155),i=t(2479),r=t(12115),l=t(83209),n=t(97003),d=t(67812),c=t(55850),o=t(33789),m=t(67001),h=t(90235),u=t(83550),g=t(54679),x=t(16485),p=t(61194),j=t(26983),y=t(24589),v=t(39142),k=t(6191),N=t(30814),f=t(1524),w=t(32559),b=t(90923),T=t(6132),C=t(52987),S=t(80534),A=t(1473),_=t(42529),E=t(17666),D=t(89559),O=t(4192),P=t(12507),I=t(15187);class z{async optimizeTaskList(e){try{let s=e.filter(e=>"completed"!==e.status);if(0===s.length)return{optimizedOrder:[],workloadAnalysis:this.createEmptyWorkloadAnalysis(),suggestions:[],productivityTips:["No active tasks to optimize!"]};let t=await Promise.all(s.map(e=>this.generateTaskSuggestion(e,s))),a=this.createOptimizedOrder(s,t),i=this.analyzeWorkload(s,t),r=await this.generateProductivityTips(s,i);return{optimizedOrder:a,workloadAnalysis:i,suggestions:t,productivityTips:r}}catch(e){throw(0,i.vV)("Error optimizing task list:",e),Error("Failed to optimize task list")}}async generateTaskSuggestion(e,s){try{let t=this.buildTaskAnalysisPrompt(e,s),a=await (0,P.Df)({model:(0,I.NJ)("gpt-4-turbo"),prompt:t,temperature:.3,maxOutputTokens:500});return this.parseTaskSuggestion(a.text,e.id)}catch(s){return(0,i.vV)("Error generating task suggestion:",s),this.createDefaultSuggestion(e)}}createOptimizedOrder(e,s){let t=new Map(s.map(e=>[e.taskId,e])),a=e.map(e=>{let s=t.get(e.id),a=this.calculateTaskScore(e,s);return{taskId:e.id,score:a}});return a.sort((e,s)=>s.score-e.score),a.map(e=>e.taskId)}calculateTaskScore(e,s){let t;if(t=0+10*({low:1,medium:2,high:3,urgent:4})[e.priority],e.due_date){let s=new Date(e.due_date),a=new Date,i=Math.ceil((s.getTime()-a.getTime())/864e5);i<0?t+=50:0===i?t+=40:1===i?t+=30:i<=3?t+=20:i<=7&&(t+=10)}return s&&(t+=5*s.confidence+(3*({low:1,medium:2,high:3})[s.impact]+3*({low:1,medium:2,high:3})[s.urgency])),e.estimated_minutes&&(e.estimated_minutes<=30?t+=5:e.estimated_minutes<=120&&(t+=2)),t}analyzeWorkload(e,s){let t=e.length,a=e.reduce((e,s)=>e+(s.estimated_minutes||0),0),i=e.filter(e=>"high"===e.priority||"urgent"===e.priority).length,r=e.filter(e=>!!e.due_date&&new Date(e.due_date)<new Date).length,l=Math.min(100,Math.max(0,5*t+a/60*2+10*i+15*r)),n=this.generateWorkloadRecommendations(t,a,i,r,l);return{totalTasks:t,estimatedTotalTime:a,highPriorityTasks:i,overdueTasks:r,workloadScore:l,recommendations:n,suggestedSchedule:this.createSuggestedSchedule(e,s)}}generateWorkloadRecommendations(e,s,t,a,i){let r=[];return i>80?r.push("\uD83D\uDEA8 High workload detected! Consider delegating or postponing non-urgent tasks."):i>60?r.push("⚠️ Moderate workload. Focus on high-priority items first."):r.push("✅ Manageable workload. You can take on additional tasks if needed."),a>0&&r.push("⏰ You have ".concat(a," overdue task(s). Address these immediately.")),t>5&&r.push("\uD83C\uDFAF You have ".concat(t," high-priority tasks. Consider breaking them down.")),s>480&&r.push("⏱️ Estimated work time exceeds 8 hours. Consider spreading tasks across multiple days."),r}createSuggestedSchedule(e,s){let t=[],a=[],i=[];return this.createOptimizedOrder(e,s).map(s=>e.find(e=>e.id===s)).filter(Boolean).forEach(e=>{let r=s.find(s=>s.taskId===e.id),l=(null==r?void 0:r.difficulty)==="easy"||e.estimated_minutes<=60,n=(null==r?void 0:r.difficulty)==="medium"||e.estimated_minutes>60&&e.estimated_minutes<=180,d=(null==r?void 0:r.difficulty)==="hard"||e.estimated_minutes>180;l&&t.length<3?t.push(e.id):n&&a.length<4?a.push(e.id):d&&i.length<2?i.push(e.id):t.length<3?t.push(e.id):a.length<4?a.push(e.id):i.length<2&&i.push(e.id)}),{morning:t,afternoon:a,evening:i}}async generateProductivityTips(e,s){try{let e="Based on this workload analysis, provide 3-5 actionable productivity tips:\n\nWorkload Score: ".concat(s.workloadScore,"/100\nTotal Tasks: ").concat(s.totalTasks,"\nEstimated Time: ").concat(Math.round(s.estimatedTotalTime/60)," hours\nHigh Priority Tasks: ").concat(s.highPriorityTasks,"\nOverdue Tasks: ").concat(s.overdueTasks,"\n\nProvide specific, actionable tips that would help improve productivity and task management. Keep each tip under 100 characters.");return(await (0,P.Df)({model:(0,I.NJ)("gpt-4-turbo"),prompt:e,temperature:.7,maxOutputTokens:300})).text.split("\n").filter(e=>e.trim().length>0).slice(0,5)}catch(e){return(0,i.vV)("Error generating productivity tips:",e),["\uD83C\uDFAF Focus on one task at a time for better results","⏰ Use time blocking to structure your day","✅ Celebrate small wins to maintain momentum"]}}buildTaskAnalysisPrompt(e,s){var t;return"Analyze this task and provide intelligent suggestions:\n\nTASK: ".concat(e.title,"\nDESCRIPTION: ").concat(e.description||"No description","\nPRIORITY: ").concat(e.priority,"\nDUE DATE: ").concat(e.due_date||"No due date","\nESTIMATED TIME: ").concat(e.estimated_minutes||"Unknown"," minutes\nCATEGORY: ").concat(e.category||"Uncategorized","\nTAGS: ").concat((null==(t=e.tags)?void 0:t.join(", "))||"None","\n\nCONTEXT:\n- Total active tasks: ").concat(s.length,"\n- User work style: ").concat(this.userContext.workStyle,"\n- Preferred hours: ").concat(this.userContext.preferredWorkHours.start," - ").concat(this.userContext.preferredWorkHours.end,'\n\nProvide a JSON response with:\n{\n  "suggestedPriority": "low|medium|high|urgent",\n  "suggestedDeadline": "YYYY-MM-DD or null",\n  "suggestedCategory": "category name",\n  "suggestedTags": ["tag1", "tag2"],\n  "confidence": 0.0-1.0,\n  "reasoning": "brief explanation",\n  "estimatedCompletionTime": minutes,\n  "dependencies": ["task_id1", "task_id2"],\n  "difficulty": "easy|medium|hard",\n  "impact": "low|medium|high",\n  "urgency": "low|medium|high"\n}')}parseTaskSuggestion(e,s){try{let t=e.match(/\{[\s\S]*\}/);if(!t)throw Error("No JSON found in response");let a=JSON.parse(t[0]);return{taskId:s,suggestedPriority:a.suggestedPriority||"medium",suggestedDeadline:a.suggestedDeadline,suggestedCategory:a.suggestedCategory,suggestedTags:a.suggestedTags||[],confidence:a.confidence||.5,reasoning:a.reasoning||"AI analysis completed",estimatedCompletionTime:a.estimatedCompletionTime,dependencies:a.dependencies||[],difficulty:a.difficulty||"medium",impact:a.impact||"medium",urgency:a.urgency||"medium"}}catch(e){return(0,i.vV)("Error parsing task suggestion:",e),this.createDefaultSuggestion({id:s})}}createDefaultSuggestion(e){return{taskId:e.id,suggestedPriority:e.priority,suggestedDeadline:e.due_date,suggestedCategory:e.category,suggestedTags:e.tags||[],confidence:.5,reasoning:"Default suggestion - AI analysis unavailable",estimatedCompletionTime:e.estimated_minutes,dependencies:[],difficulty:"medium",impact:"medium",urgency:"medium"}}createEmptyWorkloadAnalysis(){return{totalTasks:0,estimatedTotalTime:0,highPriorityTasks:0,overdueTasks:0,workloadScore:0,recommendations:["No tasks to analyze"],suggestedSchedule:{morning:[],afternoon:[],evening:[]}}}updateUserContext(e){this.userContext={...this.userContext,...e}}constructor(e){this.userContext={workStyle:"focused",preferredWorkHours:{start:"09:00",end:"17:00"},energyPatterns:{morning:.8,afternoon:.6,evening:.4},currentWorkload:0,goals:[],...e}}}function F(e){let{tasks:s,onApplySuggestion:t,onReorderTasks:o,className:m=""}=e,[h,u]=(0,r.useState)(!1),[g,x]=(0,r.useState)(new Set),{optimizeTasks:p,getOptimizedOrder:y,getWorkloadAnalysis:v,getProductivityTips:k,getTaskSuggestions:f,getSuggestionForTask:P,loading:I,error:F,lastOptimized:V,optimizationResult:J}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{user:s}=(0,O.A)(),[t]=(0,r.useState)(()=>new z),[a,l]=(0,r.useState)(null),[n,d]=(0,r.useState)(!1),[c,o]=(0,r.useState)(null),[m,h]=(0,r.useState)(null),{autoOptimize:u=!0,refreshInterval:g=3e5,enableAI:x=!0}=e,p=(0,r.useCallback)(async e=>{if(!s||!x)return o("User not authenticated or AI disabled"),null;try{d(!0),o(null);let s=await t.optimizeTaskList(e);return l(s),h(new Date),s}catch(e){return o(e instanceof Error?e.message:"Failed to optimize tasks"),(0,i.vV)("Task optimization error:",e),null}finally{d(!1)}},[s,x,t]),j=(0,r.useCallback)(async(e,a)=>{if(!s||!x)return null;try{return await t.generateTaskSuggestion(e,a)}catch(e){return(0,i.vV)("Error getting task suggestion:",e),null}},[s,x,t]),y=(0,r.useCallback)(async(e,s)=>{try{return{taskId:e,applied:!0,changes:{priority:s.suggestedPriority,due_date:s.suggestedDeadline,category:s.suggestedCategory,tags:s.suggestedTags,estimated_minutes:s.estimatedCompletionTime}}}catch(e){return(0,i.vV)("Error applying task suggestion:",e),null}},[]),v=(0,r.useCallback)(()=>(null==a?void 0:a.optimizedOrder)||[],[a]),k=(0,r.useCallback)(()=>(null==a?void 0:a.workloadAnalysis)||null,[a]),N=(0,r.useCallback)(()=>(null==a?void 0:a.productivityTips)||[],[a]),f=(0,r.useCallback)(()=>(null==a?void 0:a.suggestions)||[],[a]),w=(0,r.useCallback)(e=>(null==a?void 0:a.suggestions.find(s=>s.taskId===e))||null,[a]),b=(0,r.useCallback)(e=>{t.updateUserContext(e)},[t]);(0,r.useEffect)(()=>{if(!u||!s)return;let e=setInterval(()=>{(0,i.fH)("Auto-optimization interval triggered")},g);return()=>clearInterval(e)},[u,s,g]);let T=(0,r.useCallback)(()=>(null==a?void 0:a.workloadAnalysis.suggestedSchedule)||{morning:[],afternoon:[],evening:[]},[a]),C=(0,r.useCallback)(()=>{let e=k();return!e||e.workloadScore<80},[k]),S=(0,r.useCallback)(e=>{let s=f().filter(e=>"high"===e.urgency||"urgent"===e.suggestedPriority).map(e=>e.taskId);return e.filter(e=>s.includes(e.id))},[f]),A=(0,r.useCallback)(e=>{let s=f().filter(e=>"easy"===e.difficulty&&30>=(e.estimatedCompletionTime||0)).map(e=>e.taskId);return e.filter(e=>s.includes(e.id))},[f]),_=(0,r.useCallback)(e=>{let s=f().filter(e=>"high"===e.impact).map(e=>e.taskId);return e.filter(e=>s.includes(e.id))},[f]),E=(0,r.useCallback)(async e=>await p(e),[p]),D=(0,r.useCallback)(()=>({loading:n,error:c,lastOptimized:m,hasResults:!!a,isWorkloadManageable:C(),totalSuggestions:f().length}),[n,c,m,a,C,f]);return{optimizeTasks:p,getTaskSuggestion:j,applyTaskSuggestion:y,refreshOptimization:E,getOptimizedOrder:v,getWorkloadAnalysis:k,getProductivityTips:N,getTaskSuggestions:f,getSuggestionForTask:w,getSuggestedSchedule:T,getUrgentTasks:S,getQuickWins:A,getHighImpactTasks:_,getOptimizationStatus:D,updateUserContext:b,isWorkloadManageable:C,loading:n,error:c,lastOptimized:m,optimizationResult:a}}({autoOptimize:!1,enableAI:!0});(0,r.useEffect)(()=>{s.length>0&&W()},[s.length]);let W=async()=>{u(!0);try{await p(s)}catch(e){(0,i.vV)("Failed to optimize tasks:",e)}finally{u(!1)}},M=async e=>{let s=P(e);if(s)try{await t(e,s),x(s=>new Set([...s,e]))}catch(e){(0,i.vV)("Failed to apply suggestion:",e)}},G=async()=>{let e=y();if(0!==e.length)try{await o(e)}catch(e){(0,i.vV)("Failed to apply optimized order:",e)}},Y=v(),L=f(),U=k(),Z=y();return 0===s.length?(0,a.jsx)(l.Zp,{className:m,children:(0,a.jsx)(l.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"text-center text-gray-500",children:[(0,a.jsx)(A.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"Add tasks to see AI-powered insights"})]})})}):(0,a.jsxs)(l.Zp,{className:m,children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"w-5 h-5 text-purple-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.ZB,{children:"AI Task Intelligence"}),(0,a.jsx)(l.BT,{children:V?"Last optimized ".concat(V.toLocaleTimeString()):"Click optimize for AI insights"})]})]}),(0,a.jsxs)(n.$,{onClick:W,disabled:I||h,size:"sm",variant:"outline",children:[(0,a.jsx)(D.A,{className:"w-4 h-4 mr-2 ".concat(I||h?"animate-spin":"")}),"Optimize"]})]})}),(0,a.jsxs)(l.Wu,{children:[F&&(0,a.jsxs)(w.Fc,{className:"mb-4",variant:"destructive",children:[(0,a.jsx)(T.A,{className:"h-4 w-4"}),(0,a.jsx)(w.XL,{children:"AI Analysis Failed"}),(0,a.jsx)(w.TN,{children:F})]}),J&&(0,a.jsxs)(b.tU,{defaultValue:"workload",className:"w-full",children:[(0,a.jsxs)(b.j7,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(b.Xi,{value:"workload",children:"Workload"}),(0,a.jsx)(b.Xi,{value:"suggestions",children:"Suggestions"}),(0,a.jsx)(b.Xi,{value:"schedule",children:"Schedule"}),(0,a.jsx)(b.Xi,{value:"tips",children:"Tips"})]}),(0,a.jsx)(b.av,{value:"workload",className:"space-y-4",children:Y&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Workload Score"}),(0,a.jsxs)(d.E,{variant:Y.workloadScore>80?"destructive":Y.workloadScore>60?"default":"secondary",children:[Y.workloadScore,"/100"]})]}),(0,a.jsx)(c.k,{value:Y.workloadScore,className:"h-3 mb-4"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:Y.totalTasks}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:"Total Tasks"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(Y.estimatedTotalTime/60),"h"]}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:"Est. Time"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:Y.highPriorityTasks}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:"High Priority"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:Y.overdueTasks}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:"Overdue"})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:Y.recommendations.map((e,s)=>(0,a.jsx)(w.Fc,{className:"py-2",children:(0,a.jsx)(w.TN,{className:"text-sm",children:e})},s))})]})}),(0,a.jsx)(b.av,{value:"suggestions",className:"space-y-3",children:L.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm font-medium",children:[L.length," AI Suggestions"]}),Z.length>0&&(0,a.jsxs)(n.$,{onClick:G,size:"sm",children:[(0,a.jsx)(C.A,{className:"w-4 h-4 mr-2"}),"Apply Order"]})]}),L.slice(0,5).map(e=>{let t=s.find(s=>s.id===e.taskId),i=g.has(e.taskId);return t?(0,a.jsx)(l.Zp,{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-sm mb-1",children:t.title}),(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-2",children:e.reasoning}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,a.jsx)(d.E,{variant:"outline",className:"text-xs py-0",children:e.suggestedPriority}),(0,a.jsx)(d.E,{variant:"outline",className:"text-xs py-0",children:e.difficulty}),(0,a.jsxs)(d.E,{variant:"outline",className:"text-xs py-0",children:[e.impact," impact"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-2",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[Math.round(100*e.confidence),"%"]}),i?(0,a.jsx)(_.A,{className:"w-4 h-4 text-green-600"}):(0,a.jsx)(n.$,{onClick:()=>M(e.taskId),size:"sm",variant:"outline",children:"Apply"})]})]})},e.taskId):null})]}):(0,a.jsxs)("div",{className:"text-center py-6 text-gray-500",children:[(0,a.jsx)(N.A,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),(0,a.jsx)("p",{className:"text-sm",children:"No suggestions available"})]})}),(0,a.jsx)(b.av,{value:"schedule",className:"space-y-4",children:(null==Y?void 0:Y.suggestedSchedule)&&(0,a.jsx)("div",{children:Object.entries(Y.suggestedSchedule).map(e=>{let[t,i]=e;return(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("h4",{className:"font-medium text-sm mb-2 capitalize flex items-center gap-2",children:[(0,a.jsx)(j.A,{className:"w-4 h-4"}),t," (",i.length," tasks)"]}),(0,a.jsx)("div",{className:"space-y-1",children:i.map(e=>{let t=s.find(s=>s.id===e);return t?(0,a.jsxs)("div",{className:"text-xs p-2 bg-gray-50 rounded flex items-center justify-between",children:[(0,a.jsx)("span",{children:t.title}),(0,a.jsxs)(d.E,{variant:"outline",className:"text-xs",children:[t.estimated_minutes||30,"m"]})]},e):null})})]},t)})})}),(0,a.jsx)(b.av,{value:"tips",className:"space-y-3",children:U.length>0?U.map((e,s)=>(0,a.jsxs)(w.Fc,{children:[(0,a.jsx)(E.A,{className:"h-4 w-4"}),(0,a.jsx)(w.TN,{children:e})]},s)):(0,a.jsxs)("div",{className:"text-center py-6 text-gray-500",children:[(0,a.jsx)(E.A,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),(0,a.jsx)("p",{className:"text-sm",children:"No tips available yet"})]})})]}),!J&&!I&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(S.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:'Click "Optimize" to get AI-powered insights'})]})]})]})}var V=t(13402);function J(){let[e,s]=(0,r.useState)([]),[t,w]=(0,r.useState)([]),[b,T]=(0,r.useState)(!0),[C,S]=(0,r.useState)(!1),[A,_]=(0,r.useState)(!1),[E,D]=(0,r.useState)(!1),[O,P]=(0,r.useState)(null),[I,z]=(0,r.useState)({title:"",description:"",priority:"medium",target_date:"",category:"general"}),[J,W]=(0,r.useState)({title:"",description:"",priority:"medium",due_date:"",goal_id:"",estimated_minutes:30});(0,r.useEffect)(()=>{M(),G()},[]);let M=async()=>{try{let e=await fetch("/api/goals");if(e.ok){let t=await e.json();s(t.goals||[])}}catch(e){(0,i.vV)("Error fetching goals:",e)}},G=async()=>{try{let e=await fetch("/api/tasks");if(e.ok){let s=await e.json();w(s.tasks||[])}}catch(e){(0,i.vV)("Error fetching tasks:",e)}finally{T(!1)}},Y=async()=>{try{(await fetch("/api/goals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).ok&&(await M(),S(!1),z({title:"",description:"",priority:"medium",target_date:"",category:"general"}))}catch(e){(0,i.vV)("Error creating goal:",e)}},L=async()=>{try{(await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)})).ok&&(await G(),_(!1),W({title:"",description:"",priority:"medium",due_date:"",goal_id:"",estimated_minutes:30}))}catch(e){(0,i.vV)("Error creating task:",e)}},U=async e=>{try{if((await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)await G();else throw Error("Failed to create task")}catch(e){throw(0,i.vV)("Error creating voice task:",e),e}},Z=async(e,s)=>{try{(await fetch("/api/tasks/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})})).ok&&(await G(),await M())}catch(e){(0,i.vV)("Error updating task:",e)}},R=async(e,s)=>{try{(await fetch("/api/tasks/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({priority:s.suggestedPriority,due_date:s.suggestedDeadline,category:s.suggestedCategory,estimated_minutes:s.estimatedCompletionTime})})).ok&&await G()}catch(e){(0,i.vV)("Error applying AI suggestion:",e)}},H=async e=>{try{let s=e.map((e,s)=>({id:e,sort_order:s}));(await fetch("/api/tasks/bulk-update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:s})})).ok&&await G()}catch(e){(0,i.vV)("Error reordering tasks:",e)}},$=e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return b?(0,a.jsx)("div",{className:"p-6 space-y-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4].map(e=>(0,a.jsx)("div",{className:"h-32 bg-gray-200 rounded"},e))})]})}):(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"SlayList"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage your goals and tasks to dominate your empire"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(n.$,{onClick:()=>D(!0),className:"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white",children:[(0,a.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"Voice Task"]}),(0,a.jsxs)(g.lG,{open:C,onOpenChange:S,children:[(0,a.jsx)(g.zM,{asChild:!0,children:(0,a.jsxs)(n.$,{className:"bg-purple-600 hover:bg-purple-700",children:[(0,a.jsx)(k.A,{className:"w-4 h-4 mr-2"}),"New Goal"]})}),(0,a.jsxs)(g.Cf,{children:[(0,a.jsxs)(g.c7,{children:[(0,a.jsx)(g.L3,{children:"Create New Goal"}),(0,a.jsx)(g.rr,{children:"Set a new goal to work towards your empire"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"goal-title",children:"Title"}),(0,a.jsx)(o.p,{id:"goal-title",value:I.title,onChange:e=>z({...I,title:e.target.value}),placeholder:"Enter goal title"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"goal-description",children:"Description"}),(0,a.jsx)(m.T,{id:"goal-description",value:I.description,onChange:e=>z({...I,description:e.target.value}),placeholder:"Describe your goal"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"goal-priority",children:"Priority"}),(0,a.jsxs)(u.l6,{value:I.priority,onValueChange:e=>z({...I,priority:e}),children:[(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"low",children:"Low"}),(0,a.jsx)(u.eb,{value:"medium",children:"Medium"}),(0,a.jsx)(u.eb,{value:"high",children:"High"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"goal-category",children:"Category"}),(0,a.jsxs)(u.l6,{value:I.category,onValueChange:e=>z({...I,category:e}),children:[(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"general",children:"General"}),(0,a.jsx)(u.eb,{value:"business",children:"Business"}),(0,a.jsx)(u.eb,{value:"personal",children:"Personal"}),(0,a.jsx)(u.eb,{value:"health",children:"Health"})]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"goal-date",children:"Target Date"}),(0,a.jsx)(o.p,{id:"goal-date",type:"date",value:I.target_date,onChange:e=>z({...I,target_date:e.target.value})})]}),(0,a.jsx)(n.$,{onClick:Y,className:"w-full",children:"Create Goal"})]})]})]}),(0,a.jsxs)(g.lG,{open:A,onOpenChange:_,children:[(0,a.jsx)(g.zM,{asChild:!0,children:(0,a.jsxs)(n.$,{variant:"outline",children:[(0,a.jsx)(k.A,{className:"w-4 h-4 mr-2"}),"New Task"]})}),(0,a.jsxs)(g.Cf,{children:[(0,a.jsxs)(g.c7,{children:[(0,a.jsx)(g.L3,{children:"Create New Task"}),(0,a.jsx)(g.rr,{children:"Add a new task to work on"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"task-title",children:"Title"}),(0,a.jsx)(o.p,{id:"task-title",value:J.title,onChange:e=>W({...J,title:e.target.value}),placeholder:"Enter task title"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"task-description",children:"Description"}),(0,a.jsx)(m.T,{id:"task-description",value:J.description,onChange:e=>W({...J,description:e.target.value}),placeholder:"Describe your task"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"task-priority",children:"Priority"}),(0,a.jsxs)(u.l6,{value:J.priority,onValueChange:e=>W({...J,priority:e}),children:[(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"low",children:"Low"}),(0,a.jsx)(u.eb,{value:"medium",children:"Medium"}),(0,a.jsx)(u.eb,{value:"high",children:"High"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"task-goal",children:"Goal (Optional)"}),(0,a.jsxs)(u.l6,{value:J.goal_id,onValueChange:e=>W({...J,goal_id:e}),children:[(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{placeholder:"Select a goal"})}),(0,a.jsx)(u.gC,{children:e.map(e=>(0,a.jsx)(u.eb,{value:e.id,children:e.title},e.id))})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"task-date",children:"Due Date"}),(0,a.jsx)(o.p,{id:"task-date",type:"date",value:J.due_date,onChange:e=>W({...J,due_date:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"task-time",children:"Estimated Time (min)"}),(0,a.jsx)(o.p,{id:"task-time",type:"number",value:J.estimated_minutes,onChange:e=>W({...J,estimated_minutes:parseInt(e.target.value)})})]})]}),(0,a.jsx)(n.$,{onClick:L,className:"w-full",children:"Create Task"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Goals"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.length})]}),(0,a.jsx)(N.A,{className:"w-8 h-8 text-purple-600"})]})})}),(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Tasks"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:t.length})]}),(0,a.jsx)(p.A,{className:"w-8 h-8 text-blue-600"})]})})}),(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed Today"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:t.filter(e=>"completed"===e.status&&new Date(e.created_at).toDateString()===new Date().toDateString()).length})]}),(0,a.jsx)(f.A,{className:"w-8 h-8 text-green-600"})]})})}),(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Goals"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.filter(e=>"active"===e.status).length})]}),(0,a.jsx)(y.A,{className:"w-8 h-8 text-orange-600"})]})})})]}),t.length>0&&(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(F,{tasks:t,onApplySuggestion:R,onReorderTasks:H})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(N.A,{className:"w-5 h-5"}),"Goals"]}),(0,a.jsx)(l.BT,{children:"Your empire-building objectives"})]}),(0,a.jsx)(l.Wu,{children:0===e.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(N.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"No goals yet"}),(0,a.jsx)(n.$,{onClick:()=>S(!0),className:"mt-4",variant:"outline",children:"Create Your First Goal"})]}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-medium",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),(0,a.jsx)(d.E,{className:$(e.priority),children:e.priority})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{children:"Progress"}),(0,a.jsxs)("span",{children:[e.progress_percentage,"%"]})]}),(0,a.jsx)(c.k,{value:e.progress_percentage,className:"h-2"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.A,{className:"w-3 h-3"}),e.target_date?new Date(e.target_date).toLocaleDateString():"No deadline"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(y.A,{className:"w-3 h-3"}),e.category]})]})]})]},e.id))})})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"w-5 h-5"}),"Tasks"]}),(0,a.jsx)(l.BT,{children:"Your actionable items"})]}),(0,a.jsx)(l.Wu,{children:0===t.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(p.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"No tasks yet"}),(0,a.jsx)(n.$,{onClick:()=>_(!0),className:"mt-4",variant:"outline",children:"Create Your First Task"})]}):(0,a.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,a.jsx)("input",{type:"checkbox",checked:"completed"===e.status,onChange:s=>Z(e.id,s.target.checked?"completed":"todo"),className:"mt-1","aria-label":'Mark task "'.concat(e.title,'" as ').concat("completed"===e.status?"incomplete":"completed")}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium ".concat("completed"===e.status?"line-through text-gray-500":""),children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.A,{className:"w-3 h-3"}),e.due_date?new Date(e.due_date).toLocaleDateString():"No due date"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(j.A,{className:"w-3 h-3"}),e.estimated_minutes,"m"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.E,{className:$(e.priority),children:e.priority}),(0,a.jsx)(d.E,{className:(e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(e.status),children:e.status})]})]})},e.id))})})]})]}),(0,a.jsx)(V.A,{open:E,onOpenChange:D,onCreateTask:U,goals:e.map(e=>({id:e.id,title:e.title,category:e.category||"general"}))})]})}},68528:(e,s,t)=>{Promise.resolve().then(t.bind(t,49471))}},e=>{e.O(0,[5848,8861,9701,5147,4961,2136,7908,8030,2583,9168,4774,27,6308,563,4696,9173,9219,4409,3376,9765,7650,8920,871,6680,6975,4228,3848,9809,8061,2807,1198,1159,5159,23,6529,5593,4180,3976,186,8790,7358],()=>e(e.s=68528)),_N_E=e.O()}]);