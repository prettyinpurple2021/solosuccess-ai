(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1455],{7488:(e,s,a)=>{Promise.resolve().then(a.bind(a,33301))},33301:(e,s,a)=>{"use strict";a.d(s,{default:()=>S});var t=a(95155),i=a(12115),l=a(83209),n=a(97003),c=a(67812),r=a(90923),o=a(50906),d=a(89715),m=a(37586),x=a(37772),h=a(53511),u=a(85921),j=a(6191),g=a(86651),p=a(15870),v=a(96583),N=a(91169),f=a(25016),b=a(28171),y=a(54679),w=a(33789),C=a(90235);let S=()=>{let{toast:e}=(0,b.dj)(),[s,a]=(0,i.useState)([]),[S,A]=(0,i.useState)([]),[k,E]=(0,i.useState)({activeSessions:0,totalSessions:0,availableAgents:0,totalMessages:0,avgSessionDuration:0}),[$,O]=(0,i.useState)(!0),[T,Z]=(0,i.useState)("sessions"),[J,P]=(0,i.useState)(""),[z,F]=(0,i.useState)("all"),[L,_]=(0,i.useState)(null),[D,M]=(0,i.useState)(!1),[I,G]=(0,i.useState)(""),[X,H]=(0,i.useState)([]),[R,U]=(0,i.useState)(!1),[q,V]=(0,i.useState)("pause"),[Y,B]=(0,i.useState)(null);(0,i.useEffect)(()=>{let s=!1,t=async()=>{_(null);try{var t,i;let[e,l]=await Promise.all([fetch("/api/collaboration/sessions",{cache:"no-store"}),fetch("/api/collaboration/agents",{cache:"no-store"})]),n=[];e.ok&&(n=(null==(t=(await e.json()).data)?void 0:t.sessions)||[]);let c=[];l.ok&&(c=(null==(i=(await l.json()).data)?void 0:i.agents)||[]),s||(a(n),A(c),((e,s)=>{let a=e.filter(e=>"active"===e.status).length,t=s.filter(e=>"available"===e.status).length,i=e.reduce((e,s)=>e+(s.messageCount||0),0);E({activeSessions:a,totalSessions:e.length,availableAgents:t,totalMessages:i,avgSessionDuration:45})})(n,c),O(!1))}catch(a){s||(_("Failed to load collaboration data"),e({title:"Load failed",description:"Could not load collaboration data",variant:"destructive"}),O(!1))}};t();let i=setInterval(t,3e4);return()=>{s=!0,clearInterval(i)}},[e]);let K=async s=>{try{if(!(await fetch("/api/collaboration/sessions/".concat(s,"/control"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"join",agentId:"assistant"})})).ok)throw Error("Failed to join session");e({title:"Joined session",description:"You have joined the session."});let i=await fetch("/api/collaboration/sessions",{cache:"no-store"});if(i.ok){var t;let e=await i.json();a((null==(t=e.data)?void 0:t.sessions)||[])}}catch(s){e({title:"Join failed",description:"Could not join session",variant:"destructive"})}},Q=async(s,t)=>{try{if(!(await fetch("/api/collaboration/sessions/".concat(s,"/control"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:t})})).ok)throw Error("Failed to update session");e({title:"Session ".concat(t,"d"),description:"Session has been ".concat(t,"d.")});let l=await fetch("/api/collaboration/sessions",{cache:"no-store"});if(l.ok){var i;let e=await l.json();a((null==(i=e.data)?void 0:i.sessions)||[])}}catch(s){e({title:"Update failed",description:"Could not update session",variant:"destructive"})}},W=async s=>{try{if(!(await fetch("/api/collaboration/sessions/".concat(s),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"completed"})})).ok)throw Error("Failed to complete session");e({title:"Session completed",description:"Session marked as completed."});let i=await fetch("/api/collaboration/sessions",{cache:"no-store"});if(i.ok){var t;let e=await i.json();a((null==(t=e.data)?void 0:t.sessions)||[])}}catch(s){e({title:"Complete failed",description:"Could not complete session",variant:"destructive"})}},ee=(e,s)=>{B(e),V(s),U(!0)},es=async()=>{try{if(!(await fetch("/api/collaboration/sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({goal:I||"New Collaboration Session",requiredAgents:X})})).ok)throw Error("Failed to create session");e({title:"Session created",description:"New session has been created."});let t=await fetch("/api/collaboration/sessions",{cache:"no-store"});if(t.ok){var s;let e=await t.json();a((null==(s=e.data)?void 0:s.sessions)||[])}M(!1),G(""),H([])}catch(s){e({title:"Create failed",description:"Could not create session",variant:"destructive"})}},ea=s.filter(e=>{var s;let a=e.name.toLowerCase().includes(J.toLowerCase())||(null==(s=e.description)?void 0:s.toLowerCase().includes(J.toLowerCase())),t="all"===z||e.status===z;return a&&t});return $?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"h-8 w-56 bg-gray-100 rounded shimmer mb-2"}),(0,t.jsx)("div",{className:"h-4 w-72 bg-gray-100 rounded shimmer"})]}),(0,t.jsx)("div",{className:"h-10 w-36 bg-gray-100 rounded shimmer"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:Array.from({length:5}).map((e,s)=>(0,t.jsxs)(l.Zp,{className:"p-4",children:[(0,t.jsx)("div",{className:"h-6 w-28 bg-gray-100 rounded shimmer mb-2"}),(0,t.jsx)("div",{className:"h-5 w-16 bg-gray-100 rounded shimmer"})]},s))}),(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"skull-loading"})})]}):L?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"p-4 rounded-lg bg-red-50 border border-red-200 text-red-800",children:L}),(0,t.jsx)(n.$,{onClick:()=>{location.reload()},children:"Retry"})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Collaboration Hub"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage and participate in multi-agent collaboration sessions"})]}),(0,t.jsxs)(n.$,{className:"flex items-center gap-2",onClick:()=>M(!0),children:[(0,t.jsx)(j.A,{className:"w-4 h-4"}),"New Session"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,t.jsx)(l.Zp,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,t.jsx)(o.A,{className:"w-4 h-4 text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Sessions"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:k.activeSessions})]})]})}),(0,t.jsx)(l.Zp,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,t.jsx)(d.A,{className:"w-4 h-4 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Sessions"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:k.totalSessions})]})]})}),(0,t.jsx)(l.Zp,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,t.jsx)(N.A,{className:"w-4 h-4 text-purple-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Available Agents"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:k.availableAgents})]})]})}),(0,t.jsx)(l.Zp,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,t.jsx)(m.A,{className:"w-4 h-4 text-orange-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Messages"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:k.totalMessages})]})]})}),(0,t.jsx)(l.Zp,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-teal-100 rounded-lg",children:(0,t.jsx)(p.A,{className:"w-4 h-4 text-teal-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Duration"}),(0,t.jsxs)("p",{className:"text-2xl font-bold",children:[k.avgSessionDuration,"m"]})]})]})})]}),(0,t.jsxs)(r.tU,{value:T,onValueChange:Z,className:"space-y-4",children:[(0,t.jsxs)(r.j7,{className:"grid w-full grid-cols-3 lg:w-[400px]",children:[(0,t.jsxs)(r.Xi,{value:"sessions",className:"flex items-center gap-2",children:[(0,t.jsx)(d.A,{className:"w-4 h-4"}),"Sessions"]}),(0,t.jsxs)(r.Xi,{value:"agents",className:"flex items-center gap-2",children:[(0,t.jsx)(N.A,{className:"w-4 h-4"}),"Agents"]}),(0,t.jsxs)(r.Xi,{value:"analytics",className:"flex items-center gap-2",children:[(0,t.jsx)(o.A,{className:"w-4 h-4"}),"Analytics"]})]}),(0,t.jsxs)(r.av,{value:"sessions",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,t.jsx)(g.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,t.jsx)("input",{type:"text",placeholder:"Search sessions...",value:J,onChange:e=>P(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring","aria-label":"Search sessions"})]}),(0,t.jsxs)("select",{value:z,onChange:e=>F(e.target.value),className:"px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring","aria-label":"Filter sessions by status",children:[(0,t.jsx)("option",{value:"all",children:"All Status"}),(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"paused",children:"Paused"}),(0,t.jsx)("option",{value:"completed",children:"Completed"}),(0,t.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ea.map(e=>(0,t.jsxs)(l.Zp,{className:"p-4 hover:shadow-lg transition-shadow cursor-pointer",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description})]}),(0,t.jsx)(n.$,{variant:"ghost",size:"sm",children:(0,t.jsx)(x.A,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.E,{className:(0,f.cn)("text-xs",(e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"paused":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"completed":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e.status)),children:e.status}),(0,t.jsx)(c.E,{variant:"outline",className:"text-xs",children:e.type})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(N.A,{className:"w-4 h-4"}),e.participatingAgents.length," agents"]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(m.A,{className:"w-4 h-4"}),e.messageCount||0," messages"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 pt-2",children:[(0,t.jsx)(n.$,{size:"sm",className:"flex-1",onClick:()=>K(e.id),children:"Join Session"}),"active"===e.status?(0,t.jsx)(n.$,{size:"sm",variant:"outline",onClick:()=>ee(e.id,"pause"),children:(0,t.jsx)(h.A,{className:"w-4 h-4"})}):(0,t.jsx)(n.$,{size:"sm",variant:"outline",onClick:()=>ee(e.id,"resume"),children:(0,t.jsx)(u.A,{className:"w-4 h-4"})}),(0,t.jsx)(n.$,{size:"sm",variant:"outline",onClick:()=>ee(e.id,"complete"),children:"Complete"})]})]})]},e.id))}),0===ea.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(d.A,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No sessions found"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:J||"all"!==z?"Try adjusting your search or filter criteria":"Create your first collaboration session to get started"}),(0,t.jsxs)(n.$,{onClick:()=>M(!0),children:[(0,t.jsx)(j.A,{className:"w-4 h-4 mr-2"}),"Create Session"]})]})]}),(0,t.jsx)(r.av,{value:"agents",className:"space-y-4",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:S.map(e=>(0,t.jsxs)(l.Zp,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.specialization})]}),(0,t.jsx)(c.E,{className:(0,f.cn)("text-xs",(e=>{switch(e){case"available":return"bg-green-100 text-green-800";case"busy":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(e.status)),children:e.status})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Sessions: "}),e.currentSessions,"/",e.maxSessions]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.capabilities.slice(0,3).map((e,s)=>(0,t.jsx)(c.E,{variant:"secondary",className:"text-xs",children:e},s)),e.capabilities.length>3&&(0,t.jsxs)(c.E,{variant:"secondary",className:"text-xs",children:["+",e.capabilities.length-3]})]}),(0,t.jsxs)(n.$,{size:"sm",className:"w-full mt-3",disabled:"available"!==e.status,children:[(0,t.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"Invite to Session"]})]})]},e.id))})}),(0,t.jsx)(r.av,{value:"analytics",className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(l.Zp,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Session Activity"}),(0,t.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(o.A,{className:"w-12 h-12 mx-auto mb-2"}),(0,t.jsx)("p",{children:"Analytics dashboard coming soon"})]})})]}),(0,t.jsxs)(l.Zp,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Agent Performance"}),(0,t.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(N.A,{className:"w-12 h-12 mx-auto mb-2"}),(0,t.jsx)("p",{children:"Performance metrics coming soon"})]})})]})]})})]}),(0,t.jsx)(y.lG,{open:D,onOpenChange:M,children:(0,t.jsxs)(y.Cf,{children:[(0,t.jsxs)(y.c7,{children:[(0,t.jsx)(y.L3,{children:"Create New Session"}),(0,t.jsx)(y.rr,{children:"Define the goal and choose agents to participate."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(C.J,{htmlFor:"goal",children:"Goal"}),(0,t.jsx)(w.p,{id:"goal",value:I,onChange:e=>G(e.target.value),placeholder:"e.g., Research competitor pricing"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.J,{children:"Agents"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2 max-h-56 overflow-auto",children:S.map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("input",{type:"checkbox",checked:X.includes(e.id),onChange:s=>{H(a=>s.target.checked?[...a,e.id]:a.filter(s=>s!==e.id))}}),(0,t.jsxs)("span",{children:[e.name," ",(0,t.jsxs)("span",{className:"text-muted-foreground",children:["(",e.specialization,")"]})]})]},e.id))})]})]}),(0,t.jsxs)(y.Es,{children:[(0,t.jsx)(n.$,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),(0,t.jsx)(n.$,{onClick:es,children:"Create"})]})]})}),(0,t.jsx)(y.lG,{open:R,onOpenChange:U,children:(0,t.jsxs)(y.Cf,{children:[(0,t.jsxs)(y.c7,{children:[(0,t.jsx)(y.L3,{children:"Confirm action"}),(0,t.jsx)(y.rr,{children:"complete"===q?"Mark this session as completed?":"Are you sure you want to ".concat(q," this session?")})]}),(0,t.jsxs)(y.Es,{children:[(0,t.jsx)(n.$,{variant:"outline",onClick:()=>U(!1),children:"Cancel"}),(0,t.jsx)(n.$,{onClick:()=>{U(!1),Y&&("complete"===q?W(Y):Q(Y,q))},children:"Confirm"})]})]})})]})}}},e=>{e.O(0,[5848,8861,9701,5147,4961,9168,4774,27,6308,563,4696,9173,9219,4409,3376,9765,7650,8920,871,6680,6975,4228,3848,9809,8061,2807,1198,1159,5159,23,6529,5593,4180,3976,186,8790,7358],()=>e(e.s=7488)),_N_E=e.O()}]);