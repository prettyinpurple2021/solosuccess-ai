"use strict";exports.id=4570,exports.ids=[4570],exports.modules={41393:(a,b,c)=>{c.r(b),c.d(b,{achievementRelations:()=>aI,achievements:()=>ax,briefcases:()=>q,briefcasesRelations:()=>P,chatConversations:()=>ao,chatConversationsRelations:()=>ar,chatMessages:()=>ap,chatMessagesRelations:()=>as,competitiveOpportunities:()=>F,competitiveOpportunitiesRelations:()=>aa,competitorActivities:()=>an,competitorActivitiesRelations:()=>aq,competitorAlerts:()=>C,competitorAlertsRelations:()=>Z,competitorProfiles:()=>A,competitorProfilesRelations:()=>X,competitors:()=>v,deviceApprovals:()=>aD,documentActivity:()=>N,documentActivityRelations:()=>ai,documentFolders:()=>J,documentFoldersRelations:()=>ae,documentPermissions:()=>L,documentPermissionsRelations:()=>ag,documentShareLinks:()=>M,documentShareLinksRelations:()=>ah,documentVersions:()=>K,documentVersionsRelations:()=>af,documents:()=>I,documentsRelations:()=>ad,focusSessionRelations:()=>aK,focusSessions:()=>az,goals:()=>r,goalsRelations:()=>Q,intelligenceData:()=>B,intelligenceDataRelations:()=>Y,notificationJobs:()=>aA,opportunityActions:()=>G,opportunityActionsRelations:()=>ab,opportunityMetrics:()=>H,opportunityMetricsRelations:()=>ac,posts:()=>y,productivityInsights:()=>x,productivityInsightsRelations:()=>V,pushSubscriptions:()=>al,pushSubscriptionsRelations:()=>am,scrapingJobResults:()=>E,scrapingJobResultsRelations:()=>_,scrapingJobs:()=>D,scrapingJobsRelations:()=>$,taskAnalytics:()=>w,taskAnalyticsRelations:()=>U,taskCategories:()=>u,taskCategoriesRelations:()=>T,tasks:()=>s,tasksRelations:()=>R,templateDownloadRelations:()=>aH,templateDownloads:()=>aw,templates:()=>t,templatesRelations:()=>S,userAchievementRelations:()=>aJ,userAchievements:()=>ay,userBrandSettings:()=>aj,userBrandSettingsRelations:()=>ak,userCompetitiveStats:()=>z,userCompetitiveStatsRelations:()=>W,userMfaSettings:()=>aC,userSessions:()=>aB,users:()=>p,usersRelations:()=>O,workflowExecutionRelations:()=>aF,workflowExecutions:()=>au,workflowRelations:()=>aE,workflowTemplateRelations:()=>aG,workflowTemplates:()=>av,workflows:()=>at});var d=c(67969),e=c(57789),f=c(62352),g=c(4396),h=c(84266),i=c(29745),j=c(94728),k=c(4397),l=c(66587),m=c(65828),n=c(29205),o=c(98445);let p=(0,d.cJ)("users",{id:(0,e.yf)("id",{length:255}).primaryKey(),email:(0,e.yf)("email",{length:255}).notNull().unique(),password_hash:(0,e.yf)("password_hash",{length:255}).notNull(),full_name:(0,e.yf)("full_name",{length:255}),username:(0,e.yf)("username",{length:100}).unique(),date_of_birth:(0,f.vE)("date_of_birth"),avatar_url:(0,e.yf)("avatar_url",{length:500}),subscription_tier:(0,e.yf)("subscription_tier",{length:50}).default("free"),subscription_status:(0,e.yf)("subscription_status",{length:50}).default("active"),stripe_customer_id:(0,e.yf)("stripe_customer_id",{length:255}),stripe_subscription_id:(0,e.yf)("stripe_subscription_id",{length:255}),current_period_start:(0,f.vE)("current_period_start"),current_period_end:(0,f.vE)("current_period_end"),cancel_at_period_end:(0,g.zM)("cancel_at_period_end").default(!1),is_verified:(0,g.zM)("is_verified").default(!1),onboarding_completed:(0,g.zM)("onboarding_completed").default(!1),onboarding_completed_at:(0,f.vE)("onboarding_completed_at"),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()}),q=(0,d.cJ)("briefcases",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),title:(0,e.yf)("title",{length:255}).notNull(),description:(0,i.Qq)("description"),status:(0,e.yf)("status",{length:50}).default("active"),metadata:(0,j.Fx)("metadata"),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()}),r=(0,d.cJ)("goals",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),briefcase_id:(0,h.nd)("briefcase_id").references(()=>q.id,{onDelete:"cascade"}),title:(0,e.yf)("title",{length:255}).notNull(),description:(0,i.Qq)("description"),status:(0,e.yf)("status",{length:50}).default("pending"),priority:(0,e.yf)("priority",{length:20}).default("medium"),due_date:(0,f.vE)("due_date"),completed_at:(0,f.vE)("completed_at"),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()}),s=(0,d.cJ)("tasks",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),goal_id:(0,h.nd)("goal_id").references(()=>r.id,{onDelete:"cascade"}),briefcase_id:(0,h.nd)("briefcase_id").references(()=>q.id,{onDelete:"cascade"}),parent_task_id:(0,h.nd)("parent_task_id"),title:(0,e.yf)("title",{length:255}).notNull(),description:(0,i.Qq)("description"),status:(0,e.yf)("status",{length:50}).default("pending"),priority:(0,e.yf)("priority",{length:20}).default("medium"),category:(0,e.yf)("category",{length:100}),tags:(0,j.Fx)("tags").default("[]"),due_date:(0,f.vE)("due_date"),estimated_minutes:(0,h.nd)("estimated_minutes"),actual_minutes:(0,h.nd)("actual_minutes"),energy_level:(0,e.yf)("energy_level",{length:20}).default("medium"),is_recurring:(0,g.zM)("is_recurring").default(!1),recurrence_pattern:(0,j.Fx)("recurrence_pattern"),ai_suggestions:(0,j.Fx)("ai_suggestions").default("{}"),completed_at:(0,f.vE)("completed_at"),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()},a=>({parentTaskFk:(0,k.mt)({columns:[a.parent_task_id],foreignColumns:[a.id]}).onDelete("cascade")})),t=(0,d.cJ)("templates",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),user_id:(0,e.yf)("user_id",{length:255}).references(()=>p.id,{onDelete:"cascade"}),title:(0,e.yf)("title",{length:255}).notNull(),description:(0,i.Qq)("description"),content:(0,i.Qq)("content").notNull(),category:(0,e.yf)("category",{length:100}),is_public:(0,g.zM)("is_public").default(!1),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()}),u=(0,d.cJ)("task_categories",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),name:(0,e.yf)("name",{length:100}).notNull(),color:(0,e.yf)("color",{length:7}).default("#8B5CF6"),icon:(0,e.yf)("icon",{length:50}),is_default:(0,g.zM)("is_default").default(!1),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()}),v=(0,d.cJ)("competitors",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),name:(0,e.yf)("name",{length:255}).notNull(),website:(0,e.yf)("website",{length:500}),description:(0,i.Qq)("description"),strengths:(0,j.Fx)("strengths").default("[]"),weaknesses:(0,j.Fx)("weaknesses").default("[]"),opportunities:(0,j.Fx)("opportunities").default("[]"),threats:(0,j.Fx)("threats").default("[]"),market_position:(0,e.yf)("market_position",{length:100}),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()}),w=(0,d.cJ)("task_analytics",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),task_id:(0,h.nd)("task_id").notNull().references(()=>s.id,{onDelete:"cascade"}),action:(0,e.yf)("action",{length:50}).notNull(),timestamp:(0,f.vE)("timestamp").defaultNow(),metadata:(0,j.Fx)("metadata").default("{}")}),x=(0,d.cJ)("productivity_insights",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),insight_type:(0,e.yf)("insight_type",{length:50}).notNull(),date:(0,f.vE)("date",{mode:"date"}).notNull(),metrics:(0,j.Fx)("metrics").notNull(),ai_recommendations:(0,j.Fx)("ai_recommendations").default("{}"),created_at:(0,f.vE)("created_at").defaultNow()}),y=(0,d.cJ)("posts",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),title:(0,e.yf)("title",{length:255}).notNull(),content:(0,i.Qq)("content").notNull().default("")}),z=(0,d.cJ)("user_competitive_stats",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),competitors_monitored:(0,h.nd)("competitors_monitored").default(0),intelligence_gathered:(0,h.nd)("intelligence_gathered").default(0),alerts_processed:(0,h.nd)("alerts_processed").default(0),opportunities_identified:(0,h.nd)("opportunities_identified").default(0),competitive_tasks_completed:(0,h.nd)("competitive_tasks_completed").default(0),market_victories:(0,h.nd)("market_victories").default(0),threat_responses:(0,h.nd)("threat_responses").default(0),intelligence_streaks:(0,h.nd)("intelligence_streaks").default(0),competitive_advantage_points:(0,h.nd)("competitive_advantage_points").default(0),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()}),A=(0,d.cJ)("competitor_profiles",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),name:(0,e.yf)("name",{length:255}).notNull(),domain:(0,e.yf)("domain",{length:255}),description:(0,i.Qq)("description"),industry:(0,e.yf)("industry",{length:100}),headquarters:(0,e.yf)("headquarters",{length:255}),founded_year:(0,h.nd)("founded_year"),employee_count:(0,h.nd)("employee_count"),funding_amount:(0,l._)("funding_amount",{precision:15,scale:2}),funding_stage:(0,e.yf)("funding_stage",{length:50}),threat_level:(0,e.yf)("threat_level",{length:20}).notNull().default("medium"),monitoring_status:(0,e.yf)("monitoring_status",{length:20}).notNull().default("active"),social_media_handles:(0,j.Fx)("social_media_handles").default("{}"),key_personnel:(0,j.Fx)("key_personnel").default("[]"),products:(0,j.Fx)("products").default("[]"),market_position:(0,j.Fx)("market_position").default("{}"),competitive_advantages:(0,j.Fx)("competitive_advantages").default("[]"),vulnerabilities:(0,j.Fx)("vulnerabilities").default("[]"),monitoring_config:(0,j.Fx)("monitoring_config").default("{}"),last_analyzed:(0,f.vE)("last_analyzed"),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()},a=>({userIdIdx:(0,m.Pe)("competitor_profiles_user_id_idx").on(a.user_id),threatLevelIdx:(0,m.Pe)("competitor_profiles_threat_level_idx").on(a.threat_level),monitoringStatusIdx:(0,m.Pe)("competitor_profiles_monitoring_status_idx").on(a.monitoring_status),domainIdx:(0,m.Pe)("competitor_profiles_domain_idx").on(a.domain),industryIdx:(0,m.Pe)("competitor_profiles_industry_idx").on(a.industry)})),B=(0,d.cJ)("intelligence_data",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),competitor_id:(0,h.nd)("competitor_id").notNull().references(()=>A.id,{onDelete:"cascade"}),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),source_type:(0,e.yf)("source_type",{length:50}).notNull(),source_url:(0,e.yf)("source_url",{length:1e3}),data_type:(0,e.yf)("data_type",{length:100}).notNull(),raw_content:(0,j.Fx)("raw_content"),extracted_data:(0,j.Fx)("extracted_data").default("{}"),analysis_results:(0,j.Fx)("analysis_results").default("[]"),confidence:(0,l._)("confidence",{precision:3,scale:2}).default("0.00"),importance:(0,e.yf)("importance",{length:20}).notNull().default("medium"),tags:(0,j.Fx)("tags").default("[]"),collected_at:(0,f.vE)("collected_at").defaultNow(),processed_at:(0,f.vE)("processed_at"),expires_at:(0,f.vE)("expires_at"),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()},a=>({competitorIdIdx:(0,m.Pe)("intelligence_data_competitor_id_idx").on(a.competitor_id),userIdIdx:(0,m.Pe)("intelligence_data_user_id_idx").on(a.user_id),sourceTypeIdx:(0,m.Pe)("intelligence_data_source_type_idx").on(a.source_type),dataTypeIdx:(0,m.Pe)("intelligence_data_data_type_idx").on(a.data_type),importanceIdx:(0,m.Pe)("intelligence_data_importance_idx").on(a.importance),collectedAtIdx:(0,m.Pe)("intelligence_data_collected_at_idx").on(a.collected_at),expiresAtIdx:(0,m.Pe)("intelligence_data_expires_at_idx").on(a.expires_at)})),C=(0,d.cJ)("competitor_alerts",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),competitor_id:(0,h.nd)("competitor_id").notNull().references(()=>A.id,{onDelete:"cascade"}),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),intelligence_id:(0,h.nd)("intelligence_id").references(()=>B.id,{onDelete:"set null"}),alert_type:(0,e.yf)("alert_type",{length:100}).notNull(),severity:(0,e.yf)("severity",{length:20}).notNull().default("info"),title:(0,e.yf)("title",{length:255}).notNull(),description:(0,i.Qq)("description"),source_data:(0,j.Fx)("source_data").default("{}"),action_items:(0,j.Fx)("action_items").default("[]"),recommended_actions:(0,j.Fx)("recommended_actions").default("[]"),is_read:(0,g.zM)("is_read").default(!1),is_archived:(0,g.zM)("is_archived").default(!1),acknowledged_at:(0,f.vE)("acknowledged_at"),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()},a=>({competitorIdIdx:(0,m.Pe)("competitor_alerts_competitor_id_idx").on(a.competitor_id),userIdIdx:(0,m.Pe)("competitor_alerts_user_id_idx").on(a.user_id),alertTypeIdx:(0,m.Pe)("competitor_alerts_alert_type_idx").on(a.alert_type),severityIdx:(0,m.Pe)("competitor_alerts_severity_idx").on(a.severity),isReadIdx:(0,m.Pe)("competitor_alerts_is_read_idx").on(a.is_read),isArchivedIdx:(0,m.Pe)("competitor_alerts_is_archived_idx").on(a.is_archived),createdAtIdx:(0,m.Pe)("competitor_alerts_created_at_idx").on(a.created_at)})),D=(0,d.cJ)("scraping_jobs",{id:(0,e.yf)("id",{length:255}).primaryKey(),competitor_id:(0,h.nd)("competitor_id").notNull().references(()=>A.id,{onDelete:"cascade"}),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),job_type:(0,e.yf)("job_type",{length:50}).notNull(),url:(0,e.yf)("url",{length:1e3}).notNull(),priority:(0,e.yf)("priority",{length:20}).notNull().default("medium"),frequency_type:(0,e.yf)("frequency_type",{length:20}).notNull().default("interval"),frequency_value:(0,e.yf)("frequency_value",{length:100}).notNull(),frequency_timezone:(0,e.yf)("frequency_timezone",{length:50}),next_run_at:(0,f.vE)("next_run_at").notNull(),last_run_at:(0,f.vE)("last_run_at"),retry_count:(0,h.nd)("retry_count").notNull().default(0),max_retries:(0,h.nd)("max_retries").notNull().default(3),status:(0,e.yf)("status",{length:20}).notNull().default("pending"),config:(0,j.Fx)("config").notNull().default("{}"),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()},a=>({competitorIdIdx:(0,m.Pe)("scraping_jobs_competitor_id_idx").on(a.competitor_id),userIdIdx:(0,m.Pe)("scraping_jobs_user_id_idx").on(a.user_id),statusIdx:(0,m.Pe)("scraping_jobs_status_idx").on(a.status),priorityIdx:(0,m.Pe)("scraping_jobs_priority_idx").on(a.priority),nextRunAtIdx:(0,m.Pe)("scraping_jobs_next_run_at_idx").on(a.next_run_at),jobTypeIdx:(0,m.Pe)("scraping_jobs_job_type_idx").on(a.job_type)})),E=(0,d.cJ)("scraping_job_results",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),job_id:(0,e.yf)("job_id",{length:255}).notNull().references(()=>D.id,{onDelete:"cascade"}),success:(0,g.zM)("success").notNull(),data:(0,j.Fx)("data"),error:(0,i.Qq)("error"),execution_time:(0,h.nd)("execution_time").notNull(),changes_detected:(0,g.zM)("changes_detected").notNull().default(!1),retry_count:(0,h.nd)("retry_count").notNull().default(0),completed_at:(0,f.vE)("completed_at").defaultNow(),created_at:(0,f.vE)("created_at").defaultNow()},a=>({jobIdIdx:(0,m.Pe)("scraping_job_results_job_id_idx").on(a.job_id),successIdx:(0,m.Pe)("scraping_job_results_success_idx").on(a.success),completedAtIdx:(0,m.Pe)("scraping_job_results_completed_at_idx").on(a.completed_at)})),F=(0,d.cJ)("competitive_opportunities",{id:(0,e.yf)("id",{length:255}).primaryKey(),user_id:(0,n.uR)("user_id").notNull().references(()=>p.id,{onDelete:"cascade"}),competitor_id:(0,n.uR)("competitor_id").notNull().references(()=>A.id,{onDelete:"cascade"}),intelligence_id:(0,n.uR)("intelligence_id").references(()=>B.id,{onDelete:"set null"}),opportunity_type:(0,e.yf)("opportunity_type",{length:50}).notNull(),title:(0,e.yf)("title",{length:255}).notNull(),description:(0,i.Qq)("description").notNull(),confidence:(0,l._)("confidence",{precision:3,scale:2}).notNull(),impact:(0,e.yf)("impact",{length:20}).notNull(),effort:(0,e.yf)("effort",{length:20}).notNull(),timing:(0,e.yf)("timing",{length:20}).notNull(),priority_score:(0,l._)("priority_score",{precision:5,scale:2}).notNull(),evidence:(0,j.Fx)("evidence").default("[]"),recommendations:(0,j.Fx)("recommendations").default("[]"),status:(0,e.yf)("status",{length:50}).default("identified"),assigned_to:(0,n.uR)("assigned_to").references(()=>p.id,{onDelete:"set null"}),implementation_notes:(0,i.Qq)("implementation_notes"),roi_estimate:(0,l._)("roi_estimate",{precision:10,scale:2}),actual_roi:(0,l._)("actual_roi",{precision:10,scale:2}),success_metrics:(0,j.Fx)("success_metrics").default("{}"),tags:(0,j.Fx)("tags").default("[]"),is_archived:(0,g.zM)("is_archived").default(!1),detected_at:(0,f.vE)("detected_at").defaultNow(),started_at:(0,f.vE)("started_at"),completed_at:(0,f.vE)("completed_at"),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()},a=>({userIdIdx:(0,m.Pe)("competitive_opportunities_user_id_idx").on(a.user_id),competitorIdIdx:(0,m.Pe)("competitive_opportunities_competitor_id_idx").on(a.competitor_id),opportunityTypeIdx:(0,m.Pe)("competitive_opportunities_type_idx").on(a.opportunity_type),impactIdx:(0,m.Pe)("competitive_opportunities_impact_idx").on(a.impact),statusIdx:(0,m.Pe)("competitive_opportunities_status_idx").on(a.status),priorityScoreIdx:(0,m.Pe)("competitive_opportunities_priority_score_idx").on(a.priority_score),detectedAtIdx:(0,m.Pe)("competitive_opportunities_detected_at_idx").on(a.detected_at),isArchivedIdx:(0,m.Pe)("competitive_opportunities_is_archived_idx").on(a.is_archived)})),G=(0,d.cJ)("opportunity_actions",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),opportunity_id:(0,e.yf)("opportunity_id",{length:255}).notNull().references(()=>F.id,{onDelete:"cascade"}),user_id:(0,n.uR)("user_id").notNull().references(()=>p.id,{onDelete:"cascade"}),action_type:(0,e.yf)("action_type",{length:50}).notNull(),title:(0,e.yf)("title",{length:255}).notNull(),description:(0,i.Qq)("description"),priority:(0,e.yf)("priority",{length:20}).default("medium"),estimated_effort_hours:(0,h.nd)("estimated_effort_hours"),actual_effort_hours:(0,h.nd)("actual_effort_hours"),estimated_cost:(0,l._)("estimated_cost",{precision:10,scale:2}),actual_cost:(0,l._)("actual_cost",{precision:10,scale:2}),expected_outcome:(0,i.Qq)("expected_outcome"),actual_outcome:(0,i.Qq)("actual_outcome"),status:(0,e.yf)("status",{length:50}).default("pending"),due_date:(0,f.vE)("due_date"),completed_at:(0,f.vE)("completed_at"),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()},a=>({opportunityIdIdx:(0,m.Pe)("opportunity_actions_opportunity_id_idx").on(a.opportunity_id),userIdIdx:(0,m.Pe)("opportunity_actions_user_id_idx").on(a.user_id),statusIdx:(0,m.Pe)("opportunity_actions_status_idx").on(a.status),priorityIdx:(0,m.Pe)("opportunity_actions_priority_idx").on(a.priority),dueDateIdx:(0,m.Pe)("opportunity_actions_due_date_idx").on(a.due_date)})),H=(0,d.cJ)("opportunity_metrics",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),opportunity_id:(0,e.yf)("opportunity_id",{length:255}).notNull().references(()=>F.id,{onDelete:"cascade"}),user_id:(0,n.uR)("user_id").notNull().references(()=>p.id,{onDelete:"cascade"}),metric_name:(0,e.yf)("metric_name",{length:100}).notNull(),metric_type:(0,e.yf)("metric_type",{length:50}).notNull(),baseline_value:(0,l._)("baseline_value",{precision:15,scale:4}),target_value:(0,l._)("target_value",{precision:15,scale:4}),current_value:(0,l._)("current_value",{precision:15,scale:4}),unit:(0,e.yf)("unit",{length:50}),measurement_date:(0,f.vE)("measurement_date").defaultNow(),notes:(0,i.Qq)("notes"),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()},a=>({opportunityIdIdx:(0,m.Pe)("opportunity_metrics_opportunity_id_idx").on(a.opportunity_id),userIdIdx:(0,m.Pe)("opportunity_metrics_user_id_idx").on(a.user_id),metricNameIdx:(0,m.Pe)("opportunity_metrics_metric_name_idx").on(a.metric_name),measurementDateIdx:(0,m.Pe)("opportunity_metrics_measurement_date_idx").on(a.measurement_date)})),I=(0,d.cJ)("documents",{id:(0,e.yf)("id",{length:255}).primaryKey(),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),folder_id:(0,h.nd)("folder_id").references(()=>J.id,{onDelete:"set null"}),name:(0,e.yf)("name",{length:255}).notNull(),original_name:(0,e.yf)("original_name",{length:255}).notNull(),file_type:(0,e.yf)("file_type",{length:50}).notNull(),mime_type:(0,e.yf)("mime_type",{length:100}).notNull(),size:(0,h.nd)("size").notNull(),file_url:(0,e.yf)("file_url",{length:1e3}),category:(0,e.yf)("category",{length:100}).default("uncategorized"),description:(0,i.Qq)("description"),tags:(0,j.Fx)("tags").default("[]"),metadata:(0,j.Fx)("metadata").default("{}"),ai_insights:(0,j.Fx)("ai_insights").default("{}"),is_favorite:(0,g.zM)("is_favorite").default(!1),is_public:(0,g.zM)("is_public").default(!1),download_count:(0,h.nd)("download_count").default(0),view_count:(0,h.nd)("view_count").default(0),last_accessed:(0,f.vE)("last_accessed"),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()},a=>({userIdIdx:(0,m.Pe)("documents_user_id_idx").on(a.user_id),folderIdIdx:(0,m.Pe)("documents_folder_id_idx").on(a.folder_id),categoryIdx:(0,m.Pe)("documents_category_idx").on(a.category),fileTypeIdx:(0,m.Pe)("documents_file_type_idx").on(a.file_type),isFavoriteIdx:(0,m.Pe)("documents_is_favorite_idx").on(a.is_favorite),createdAtIdx:(0,m.Pe)("documents_created_at_idx").on(a.created_at),nameIdx:(0,m.Pe)("documents_name_idx").on(a.name)})),J=(0,d.cJ)("document_folders",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),parent_id:(0,h.nd)("parent_id"),name:(0,e.yf)("name",{length:255}).notNull(),description:(0,i.Qq)("description"),color:(0,e.yf)("color",{length:7}).default("#8B5CF6"),icon:(0,e.yf)("icon",{length:50}),is_default:(0,g.zM)("is_default").default(!1),file_count:(0,h.nd)("file_count").default(0),total_size:(0,h.nd)("total_size").default(0),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()},a=>({userIdIdx:(0,m.Pe)("document_folders_user_id_idx").on(a.user_id),parentIdIdx:(0,m.Pe)("document_folders_parent_id_idx").on(a.parent_id),nameIdx:(0,m.Pe)("document_folders_name_idx").on(a.name),parentFolderFk:(0,k.mt)({columns:[a.parent_id],foreignColumns:[a.id]}).onDelete("cascade")})),K=(0,d.cJ)("document_versions",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),document_id:(0,e.yf)("document_id",{length:255}).notNull().references(()=>I.id,{onDelete:"cascade"}),version_number:(0,h.nd)("version_number").notNull(),name:(0,e.yf)("name",{length:255}).notNull(),file_type:(0,e.yf)("file_type",{length:50}).notNull(),size:(0,h.nd)("size").notNull(),file_data:(0,i.Qq)("file_data").notNull(),change_summary:(0,i.Qq)("change_summary"),created_by:(0,e.yf)("created_by",{length:255}).notNull().references(()=>p.id),created_at:(0,f.vE)("created_at").defaultNow()},a=>({documentIdIdx:(0,m.Pe)("document_versions_document_id_idx").on(a.document_id),versionNumberIdx:(0,m.Pe)("document_versions_version_number_idx").on(a.version_number),createdByIdx:(0,m.Pe)("document_versions_created_by_idx").on(a.created_by)})),L=(0,d.cJ)("document_permissions",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),document_id:(0,e.yf)("document_id",{length:255}).notNull().references(()=>I.id,{onDelete:"cascade"}),user_id:(0,e.yf)("user_id",{length:255}).references(()=>p.id,{onDelete:"cascade"}),email:(0,e.yf)("email",{length:255}),role:(0,e.yf)("role",{length:20}).notNull().default("viewer"),granted_by:(0,e.yf)("granted_by",{length:255}).notNull().references(()=>p.id),granted_at:(0,f.vE)("granted_at").defaultNow(),expires_at:(0,f.vE)("expires_at"),is_active:(0,g.zM)("is_active").default(!0)},a=>({documentIdIdx:(0,m.Pe)("document_permissions_document_id_idx").on(a.document_id),userIdIdx:(0,m.Pe)("document_permissions_user_id_idx").on(a.user_id),emailIdx:(0,m.Pe)("document_permissions_email_idx").on(a.email),roleIdx:(0,m.Pe)("document_permissions_role_idx").on(a.role)})),M=(0,d.cJ)("document_share_links",{id:(0,e.yf)("id",{length:255}).primaryKey(),document_id:(0,e.yf)("document_id",{length:255}).notNull().references(()=>I.id,{onDelete:"cascade"}),created_by:(0,e.yf)("created_by",{length:255}).notNull().references(()=>p.id),url:(0,e.yf)("url",{length:1e3}).notNull(),password_hash:(0,e.yf)("password_hash",{length:255}),permissions:(0,e.yf)("permissions",{length:20}).notNull().default("view"),expires_at:(0,f.vE)("expires_at"),max_access_count:(0,h.nd)("max_access_count"),access_count:(0,h.nd)("access_count").default(0),download_enabled:(0,g.zM)("download_enabled").default(!0),require_auth:(0,g.zM)("require_auth").default(!1),is_active:(0,g.zM)("is_active").default(!0),created_at:(0,f.vE)("created_at").defaultNow()},a=>({documentIdIdx:(0,m.Pe)("document_share_links_document_id_idx").on(a.document_id),createdByIdx:(0,m.Pe)("document_share_links_created_by_idx").on(a.created_by),isActiveIdx:(0,m.Pe)("document_share_links_is_active_idx").on(a.is_active),expiresAtIdx:(0,m.Pe)("document_share_links_expires_at_idx").on(a.expires_at)})),N=(0,d.cJ)("document_activity",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),document_id:(0,e.yf)("document_id",{length:255}).notNull().references(()=>I.id,{onDelete:"cascade"}),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),action:(0,e.yf)("action",{length:50}).notNull(),details:(0,j.Fx)("details").default("{}"),ip_address:(0,e.yf)("ip_address",{length:45}),user_agent:(0,i.Qq)("user_agent"),created_at:(0,f.vE)("created_at").defaultNow()},a=>({documentIdIdx:(0,m.Pe)("document_activity_document_id_idx").on(a.document_id),userIdIdx:(0,m.Pe)("document_activity_user_id_idx").on(a.user_id),actionIdx:(0,m.Pe)("document_activity_action_idx").on(a.action),createdAtIdx:(0,m.Pe)("document_activity_created_at_idx").on(a.created_at)})),O=(0,o.K1)(p,({many:a,one:b})=>({briefcases:a(q),goals:a(r),tasks:a(s),templates:a(t),taskCategories:a(u),taskAnalytics:a(w),productivityInsights:a(x),competitorProfiles:a(A),intelligenceData:a(B),competitorAlerts:a(C),scrapingJobs:a(D),competitiveOpportunities:a(F),opportunityActions:a(G),opportunityMetrics:a(H),competitiveStats:a(z),documents:a(I),documentFolders:a(J),documentVersions:a(K),documentPermissions:a(L),documentShareLinks:a(M),documentActivity:a(N),brandSettings:b(aj),pushSubscriptions:a(al),competitorActivities:a(an),chatConversations:a(ao),chatMessages:a(ap)})),P=(0,o.K1)(q,({one:a,many:b})=>({user:a(p,{fields:[q.user_id],references:[p.id]}),goals:b(r),tasks:b(s)})),Q=(0,o.K1)(r,({one:a,many:b})=>({user:a(p,{fields:[r.user_id],references:[p.id]}),briefcase:a(q,{fields:[r.briefcase_id],references:[q.id]}),tasks:b(s)})),R=(0,o.K1)(s,({one:a,many:b})=>({user:a(p,{fields:[s.user_id],references:[p.id]}),goal:a(r,{fields:[s.goal_id],references:[r.id]}),briefcase:a(q,{fields:[s.briefcase_id],references:[q.id]}),parentTask:a(s,{fields:[s.parent_task_id],references:[s.id]}),subtasks:b(s),analytics:b(w)})),S=(0,o.K1)(t,({one:a})=>({user:a(p,{fields:[t.user_id],references:[p.id]})})),T=(0,o.K1)(u,({one:a})=>({user:a(p,{fields:[u.user_id],references:[p.id]})})),U=(0,o.K1)(w,({one:a})=>({user:a(p,{fields:[w.user_id],references:[p.id]}),task:a(s,{fields:[w.task_id],references:[s.id]})})),V=(0,o.K1)(x,({one:a})=>({user:a(p,{fields:[x.user_id],references:[p.id]})})),W=(0,o.K1)(z,({one:a})=>({user:a(p,{fields:[z.user_id],references:[p.id]})})),X=(0,o.K1)(A,({one:a,many:b})=>({user:a(p,{fields:[A.user_id],references:[p.id]}),intelligenceData:b(B),alerts:b(C),scrapingJobs:b(D),opportunities:b(F)})),Y=(0,o.K1)(B,({one:a,many:b})=>({competitor:a(A,{fields:[B.competitor_id],references:[A.id]}),user:a(p,{fields:[B.user_id],references:[p.id]}),alerts:b(C)})),Z=(0,o.K1)(C,({one:a})=>({competitor:a(A,{fields:[C.competitor_id],references:[A.id]}),user:a(p,{fields:[C.user_id],references:[p.id]}),intelligence:a(B,{fields:[C.intelligence_id],references:[B.id]})})),$=(0,o.K1)(D,({one:a,many:b})=>({competitor:a(A,{fields:[D.competitor_id],references:[A.id]}),user:a(p,{fields:[D.user_id],references:[p.id]}),results:b(E)})),_=(0,o.K1)(E,({one:a})=>({job:a(D,{fields:[E.job_id],references:[D.id]})})),aa=(0,o.K1)(F,({one:a,many:b})=>({user:a(p,{fields:[F.user_id],references:[p.id]}),competitor:a(A,{fields:[F.competitor_id],references:[A.id]}),intelligence:a(B,{fields:[F.intelligence_id],references:[B.id]}),assignedUser:a(p,{fields:[F.assigned_to],references:[p.id]}),actions:b(G),metrics:b(H)})),ab=(0,o.K1)(G,({one:a})=>({opportunity:a(F,{fields:[G.opportunity_id],references:[F.id]}),user:a(p,{fields:[G.user_id],references:[p.id]})})),ac=(0,o.K1)(H,({one:a})=>({opportunity:a(F,{fields:[H.opportunity_id],references:[F.id]}),user:a(p,{fields:[H.user_id],references:[p.id]})})),ad=(0,o.K1)(I,({one:a,many:b})=>({user:a(p,{fields:[I.user_id],references:[p.id]}),folder:a(J,{fields:[I.folder_id],references:[J.id]}),versions:b(K),permissions:b(L),shareLinks:b(M),activity:b(N)})),ae=(0,o.K1)(J,({one:a,many:b})=>({user:a(p,{fields:[J.user_id],references:[p.id]}),parent:a(J,{fields:[J.parent_id],references:[J.id]}),children:b(J),documents:b(I)})),af=(0,o.K1)(K,({one:a})=>({document:a(I,{fields:[K.document_id],references:[I.id]}),createdBy:a(p,{fields:[K.created_by],references:[p.id]})})),ag=(0,o.K1)(L,({one:a})=>({document:a(I,{fields:[L.document_id],references:[I.id]}),user:a(p,{fields:[L.user_id],references:[p.id]}),grantedBy:a(p,{fields:[L.granted_by],references:[p.id]})})),ah=(0,o.K1)(M,({one:a})=>({document:a(I,{fields:[M.document_id],references:[I.id]}),createdBy:a(p,{fields:[M.created_by],references:[p.id]})})),ai=(0,o.K1)(N,({one:a})=>({document:a(I,{fields:[N.document_id],references:[I.id]}),user:a(p,{fields:[N.user_id],references:[p.id]})})),aj=(0,d.cJ)("user_brand_settings",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),user_id:(0,n.uR)("user_id").notNull().references(()=>p.id,{onDelete:"cascade"}).unique(),company_name:(0,e.yf)("company_name",{length:255}),tagline:(0,e.yf)("tagline",{length:500}),description:(0,i.Qq)("description"),industry:(0,e.yf)("industry",{length:100}),target_audience:(0,i.Qq)("target_audience"),brand_personality:(0,j.Fx)("brand_personality").default("[]"),color_palette:(0,j.Fx)("color_palette").default("{}"),typography:(0,j.Fx)("typography").default("{}"),logo_url:(0,e.yf)("logo_url",{length:1e3}),logo_prompt:(0,i.Qq)("logo_prompt"),moodboard:(0,j.Fx)("moodboard").default("[]"),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()},a=>({userIdIdx:(0,m.Pe)("user_brand_settings_user_id_idx").on(a.user_id),industryIdx:(0,m.Pe)("user_brand_settings_industry_idx").on(a.industry)})),ak=(0,o.K1)(aj,({one:a})=>({user:a(p,{fields:[aj.user_id],references:[p.id]})})),al=(0,d.cJ)("push_subscriptions",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),user_id:(0,n.uR)("user_id").notNull().references(()=>p.id,{onDelete:"cascade"}),endpoint:(0,e.yf)("endpoint",{length:1e3}).notNull(),p256dh_key:(0,e.yf)("p256dh_key",{length:500}).notNull(),auth_key:(0,e.yf)("auth_key",{length:500}).notNull(),device_info:(0,j.Fx)("device_info").default("{}"),is_active:(0,g.zM)("is_active").default(!0),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()},a=>({userIdIdx:(0,m.Pe)("push_subscriptions_user_id_idx").on(a.user_id),endpointIdx:(0,m.Pe)("push_subscriptions_endpoint_idx").on(a.endpoint),isActiveIdx:(0,m.Pe)("push_subscriptions_is_active_idx").on(a.is_active)})),am=(0,o.K1)(al,({one:a})=>({user:a(p,{fields:[al.user_id],references:[p.id]})})),an=(0,d.cJ)("competitor_activities",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),competitor_id:(0,h.nd)("competitor_id").notNull().references(()=>A.id,{onDelete:"cascade"}),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),activity_type:(0,e.yf)("activity_type",{length:50}).notNull(),title:(0,e.yf)("title",{length:255}).notNull(),description:(0,i.Qq)("description"),source_url:(0,e.yf)("source_url",{length:1e3}),source_type:(0,e.yf)("source_type",{length:50}).notNull(),importance:(0,e.yf)("importance",{length:20}).notNull().default("medium"),confidence:(0,l._)("confidence",{precision:3,scale:2}).default("0.00"),metadata:(0,j.Fx)("metadata").default("{}"),tags:(0,j.Fx)("tags").default("[]"),detected_at:(0,f.vE)("detected_at").defaultNow(),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()},a=>({competitorIdIdx:(0,m.Pe)("competitor_activities_competitor_id_idx").on(a.competitor_id),userIdIdx:(0,m.Pe)("competitor_activities_user_id_idx").on(a.user_id),activityTypeIdx:(0,m.Pe)("competitor_activities_activity_type_idx").on(a.activity_type),importanceIdx:(0,m.Pe)("competitor_activities_importance_idx").on(a.importance),detectedAtIdx:(0,m.Pe)("competitor_activities_detected_at_idx").on(a.detected_at)})),ao=(0,d.cJ)("chat_conversations",{id:(0,e.yf)("id",{length:255}).primaryKey(),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),title:(0,e.yf)("title",{length:255}).notNull(),agent_id:(0,e.yf)("agent_id",{length:50}).notNull(),agent_name:(0,e.yf)("agent_name",{length:100}).notNull(),last_message:(0,i.Qq)("last_message"),last_message_at:(0,f.vE)("last_message_at"),message_count:(0,h.nd)("message_count").default(0),is_archived:(0,g.zM)("is_archived").default(!1),metadata:(0,j.Fx)("metadata").default("{}"),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()},a=>({userIdIdx:(0,m.Pe)("chat_conversations_user_id_idx").on(a.user_id),agentIdIdx:(0,m.Pe)("chat_conversations_agent_id_idx").on(a.agent_id),lastMessageAtIdx:(0,m.Pe)("chat_conversations_last_message_at_idx").on(a.last_message_at),isArchivedIdx:(0,m.Pe)("chat_conversations_is_archived_idx").on(a.is_archived)})),ap=(0,d.cJ)("chat_messages",{id:(0,e.yf)("id",{length:255}).primaryKey(),conversation_id:(0,e.yf)("conversation_id",{length:255}).notNull().references(()=>ao.id,{onDelete:"cascade"}),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),role:(0,e.yf)("role",{length:20}).notNull(),content:(0,i.Qq)("content").notNull(),metadata:(0,j.Fx)("metadata").default("{}"),created_at:(0,f.vE)("created_at").defaultNow()},a=>({conversationIdIdx:(0,m.Pe)("chat_messages_conversation_id_idx").on(a.conversation_id),userIdIdx:(0,m.Pe)("chat_messages_user_id_idx").on(a.user_id),roleIdx:(0,m.Pe)("chat_messages_role_idx").on(a.role),createdAtIdx:(0,m.Pe)("chat_messages_created_at_idx").on(a.created_at)})),aq=(0,o.K1)(an,({one:a})=>({competitor:a(A,{fields:[an.competitor_id],references:[A.id]}),user:a(p,{fields:[an.user_id],references:[p.id]})})),ar=(0,o.K1)(ao,({one:a,many:b})=>({user:a(p,{fields:[ao.user_id],references:[p.id]}),messages:b(ap)})),as=(0,o.K1)(ap,({one:a})=>({conversation:a(ao,{fields:[ap.conversation_id],references:[ao.id]}),user:a(p,{fields:[ap.user_id],references:[p.id]})})),at=(0,d.cJ)("workflows",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),name:(0,e.yf)("name",{length:255}).notNull(),description:(0,i.Qq)("description"),version:(0,e.yf)("version",{length:50}).default("1.0.0"),status:(0,e.yf)("status",{length:50}).default("draft"),trigger_type:(0,e.yf)("trigger_type",{length:100}).notNull(),trigger_config:(0,j.Fx)("trigger_config").default("{}"),nodes:(0,j.Fx)("nodes").default("[]"),edges:(0,j.Fx)("edges").default("[]"),variables:(0,j.Fx)("variables").default("{}"),settings:(0,j.Fx)("settings").default("{}"),category:(0,e.yf)("category",{length:100}).default("general"),tags:(0,j.Fx)("tags").default("[]"),template_id:(0,h.nd)("template_id"),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()}),au=(0,d.cJ)("workflow_executions",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),workflow_id:(0,h.nd)("workflow_id").notNull().references(()=>at.id,{onDelete:"cascade"}),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),status:(0,e.yf)("status",{length:50}).default("running"),started_at:(0,f.vE)("started_at").defaultNow(),completed_at:(0,f.vE)("completed_at"),duration:(0,h.nd)("duration"),input:(0,j.Fx)("input").default("{}"),output:(0,j.Fx)("output").default("{}"),variables:(0,j.Fx)("variables").default("{}"),options:(0,j.Fx)("options").default("{}"),error:(0,j.Fx)("error"),logs:(0,j.Fx)("logs").default("[]"),created_at:(0,f.vE)("created_at").defaultNow()}),av=(0,d.cJ)("workflow_templates",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),name:(0,e.yf)("name",{length:255}).notNull(),description:(0,i.Qq)("description"),category:(0,e.yf)("category",{length:100}).default("general"),tags:(0,j.Fx)("tags").default("[]"),workflow_data:(0,j.Fx)("workflow_data").notNull(),is_public:(0,g.zM)("is_public").default(!1),featured:(0,g.zM)("featured").default(!1),created_by:(0,e.yf)("created_by",{length:255}).references(()=>p.id),usage_count:(0,h.nd)("usage_count").default(0),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()}),aw=(0,d.cJ)("template_downloads",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),template_id:(0,h.nd)("template_id").notNull().references(()=>av.id,{onDelete:"cascade"}),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),downloaded_at:(0,f.vE)("downloaded_at").defaultNow()}),ax=(0,d.cJ)("achievements",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),name:(0,e.yf)("name",{length:255}).notNull().unique(),title:(0,e.yf)("title",{length:255}).notNull(),description:(0,i.Qq)("description"),icon:(0,e.yf)("icon",{length:100}),points:(0,h.nd)("points").default(0),category:(0,e.yf)("category",{length:100}),requirements:(0,j.Fx)("requirements").default("{}"),is_active:(0,g.zM)("is_active").default(!0),created_at:(0,f.vE)("created_at").defaultNow()}),ay=(0,d.cJ)("user_achievements",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),achievement_id:(0,h.nd)("achievement_id").notNull().references(()=>ax.id,{onDelete:"cascade"}),earned_at:(0,f.vE)("earned_at").defaultNow(),metadata:(0,j.Fx)("metadata").default("{}")}),az=(0,d.cJ)("focus_sessions",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),started_at:(0,f.vE)("started_at").defaultNow(),ended_at:(0,f.vE)("ended_at"),duration_minutes:(0,h.nd)("duration_minutes"),task_id:(0,h.nd)("task_id").references(()=>s.id),notes:(0,i.Qq)("notes"),created_at:(0,f.vE)("created_at").defaultNow()}),aA=(0,d.cJ)("notification_jobs",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),title:(0,e.yf)("title",{length:255}).notNull(),body:(0,i.Qq)("body").notNull(),icon:(0,e.yf)("icon",{length:500}),badge:(0,e.yf)("badge",{length:500}),image:(0,e.yf)("image",{length:500}),tag:(0,e.yf)("tag",{length:100}),require_interaction:(0,g.zM)("require_interaction").default(!1),silent:(0,g.zM)("silent").default(!1),vibrate:(0,j.Fx)("vibrate"),user_ids:(0,j.Fx)("user_ids").default("[]"),all_users:(0,g.zM)("all_users").default(!1),scheduled_time:(0,f.vE)("scheduled_time").defaultNow(),created_at:(0,f.vE)("created_at").defaultNow(),created_by:(0,e.yf)("created_by",{length:255}),attempts:(0,h.nd)("attempts").default(0),max_attempts:(0,h.nd)("max_attempts").default(3),status:(0,e.yf)("status",{length:50}).default("pending"),error:(0,i.Qq)("error"),processed_at:(0,f.vE)("processed_at")}),aB=(0,d.cJ)("user_sessions",{id:(0,e.yf)("id",{length:255}).primaryKey(),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),refresh_token:(0,e.yf)("refresh_token",{length:500}).notNull().unique(),device_fingerprint:(0,e.yf)("device_fingerprint",{length:255}).notNull(),device_name:(0,e.yf)("device_name",{length:255}),device_type:(0,e.yf)("device_type",{length:50}),ip_address:(0,e.yf)("ip_address",{length:45}),user_agent:(0,i.Qq)("user_agent"),is_remember_me:(0,g.zM)("is_remember_me").default(!1),remember_me_expires_at:(0,f.vE)("remember_me_expires_at"),last_activity:(0,f.vE)("last_activity").defaultNow(),expires_at:(0,f.vE)("expires_at").notNull(),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()},a=>({userIdIdx:(0,m.Pe)("user_sessions_user_id_idx").on(a.user_id),refreshTokenIdx:(0,m.Pe)("user_sessions_refresh_token_idx").on(a.refresh_token),deviceFingerprintIdx:(0,m.Pe)("user_sessions_device_fingerprint_idx").on(a.device_fingerprint),expiresAtIdx:(0,m.Pe)("user_sessions_expires_at_idx").on(a.expires_at),lastActivityIdx:(0,m.Pe)("user_sessions_last_activity_idx").on(a.last_activity)})),aC=(0,d.cJ)("user_mfa_settings",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}).unique(),totp_secret:(0,e.yf)("totp_secret",{length:255}),totp_enabled:(0,g.zM)("totp_enabled").default(!1),totp_backup_codes:(0,j.Fx)("totp_backup_codes").default("[]"),webauthn_enabled:(0,g.zM)("webauthn_enabled").default(!1),webauthn_credentials:(0,j.Fx)("webauthn_credentials").default("[]"),recovery_codes:(0,j.Fx)("recovery_codes").default("[]"),mfa_required:(0,g.zM)("mfa_required").default(!1),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()},a=>({userIdIdx:(0,m.Pe)("user_mfa_settings_user_id_idx").on(a.user_id),totpEnabledIdx:(0,m.Pe)("user_mfa_settings_totp_enabled_idx").on(a.totp_enabled),webauthnEnabledIdx:(0,m.Pe)("user_mfa_settings_webauthn_enabled_idx").on(a.webauthn_enabled)})),aD=(0,d.cJ)("device_approvals",{id:(0,h.nd)("id").primaryKey().generatedAlwaysAsIdentity(),user_id:(0,e.yf)("user_id",{length:255}).notNull().references(()=>p.id,{onDelete:"cascade"}),device_fingerprint:(0,e.yf)("device_fingerprint",{length:255}).notNull(),device_name:(0,e.yf)("device_name",{length:255}),device_type:(0,e.yf)("device_type",{length:50}),ip_address:(0,e.yf)("ip_address",{length:45}),user_agent:(0,i.Qq)("user_agent"),is_approved:(0,g.zM)("is_approved").default(!1),approved_at:(0,f.vE)("approved_at"),approved_by:(0,e.yf)("approved_by",{length:255}).references(()=>p.id),expires_at:(0,f.vE)("expires_at"),created_at:(0,f.vE)("created_at").defaultNow(),updated_at:(0,f.vE)("updated_at").defaultNow()},a=>({userIdIdx:(0,m.Pe)("device_approvals_user_id_idx").on(a.user_id),deviceFingerprintIdx:(0,m.Pe)("device_approvals_device_fingerprint_idx").on(a.device_fingerprint),isApprovedIdx:(0,m.Pe)("device_approvals_is_approved_idx").on(a.is_approved),expiresAtIdx:(0,m.Pe)("device_approvals_expires_at_idx").on(a.expires_at)})),aE=(0,o.K1)(at,({one:a,many:b})=>({user:a(p,{fields:[at.user_id],references:[p.id]}),executions:b(au),template:a(av,{fields:[at.template_id],references:[av.id]})})),aF=(0,o.K1)(au,({one:a})=>({workflow:a(at,{fields:[au.workflow_id],references:[at.id]}),user:a(p,{fields:[au.user_id],references:[p.id]})})),aG=(0,o.K1)(av,({one:a,many:b})=>({creator:a(p,{fields:[av.created_by],references:[p.id]}),downloads:b(aw),workflows:b(at)})),aH=(0,o.K1)(aw,({one:a})=>({template:a(av,{fields:[aw.template_id],references:[av.id]}),user:a(p,{fields:[aw.user_id],references:[p.id]})})),aI=(0,o.K1)(ax,({many:a})=>({userAchievements:a(ay)})),aJ=(0,o.K1)(ay,({one:a})=>({user:a(p,{fields:[ay.user_id],references:[p.id]}),achievement:a(ax,{fields:[ay.achievement_id],references:[ax.id]})})),aK=(0,o.K1)(az,({one:a})=>({user:a(p,{fields:[az.user_id],references:[p.id]}),task:a(s,{fields:[az.task_id],references:[s.id]})}))},94570:(a,b,c)=>{c.d(b,{Lf:()=>i,db:()=>j});var d=c(15191),e=c(9608),f=c(41393),g=c(30477);let h=null;function i(){if("phase-production-build"===process.env.NEXT_PHASE)throw Error("Database client is not available during build time");if(!h){let a="postgresql://neondb_owner:npg_MRLUf85DBNPv@ep-curly-meadow-aefoagku-pooler.c-2.us-east-2.aws.neon.tech/neondb?sslmode=require&channel_binding=require";if(!a)throw Error("DATABASE_URL is not set");try{let b=(0,e.lw)(a);h=(0,d.fd)({schema:f,client:b}),g.vF.info("Database client initialized successfully")}catch(a){throw(0,g.vV)("Failed to initialize database client:",a),Error("Database connection failed")}}return h}let j=new Proxy({},{get:(a,b)=>i()[b]})}};