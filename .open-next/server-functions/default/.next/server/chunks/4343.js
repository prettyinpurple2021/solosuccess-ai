"use strict";exports.id=4343,exports.ids=[4343],exports.modules={72567:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(23339).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},74343:(a,b,c)=>{c.d(b,{SubscriptionManager:()=>q});var d=c(21124),e=c(4803),f=c(38301),g=c(19217),h=c(45119),i=c(22544),j=c(58410),k=c(14263),l=c(14343),m=c(18310),n=c(72567),o=c(75219),p=c(62037);function q(){var a;let{user:b}=(0,j.A)(),[c,q]=(0,f.useState)(null),[r,s]=(0,f.useState)(!0),[t,u]=(0,f.useState)(null),v=async()=>{try{let a=await fetch("/api/stripe/subscription");if(a.ok){let b=await a.json();q(b.subscription)}}catch(a){(0,e.vV)("Error fetching subscription:",a),(0,p.oR)({title:"Error",description:"Failed to fetch subscription details",variant:"destructive"})}finally{s(!1)}},w=async(a,b)=>{u(`upgrade-${a}-${b}`);try{let c=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tier:a,billing:b})}),d=await c.json();if(c.ok&&d.url)window.location.href=d.url;else throw Error(d.error||"Failed to create checkout session")}catch(a){(0,e.vV)("Error creating checkout session:",a),(0,p.oR)({title:"Error",description:"Failed to start upgrade process",variant:"destructive"})}finally{u(null)}},x=async()=>{u("billing");try{let a=await fetch("/api/stripe/billing-portal",{method:"POST",headers:{"Content-Type":"application/json"}}),b=await a.json();if(a.ok&&b.url)window.location.href=b.url;else throw Error(b.error||"Failed to open billing portal")}catch(a){(0,e.vV)("Error opening billing portal:",a),(0,p.oR)({title:"Error",description:"Failed to open billing portal",variant:"destructive"})}finally{u(null)}},y=async()=>{if(confirm("Are you sure you want to cancel your subscription? You will retain access until the end of your current billing period.")){u("cancel");try{let a=await fetch("/api/stripe/cancel-subscription",{method:"POST",headers:{"Content-Type":"application/json"}}),b=await a.json();if(a.ok)(0,p.oR)({title:"Subscription Canceled",description:b.message}),v();else throw Error(b.error||"Failed to cancel subscription")}catch(a){(0,e.vV)("Error canceling subscription:",a),(0,p.oR)({title:"Error",description:"Failed to cancel subscription",variant:"destructive"})}finally{u(null)}}},z=async()=>{u("reactivate");try{let a=await fetch("/api/stripe/reactivate-subscription",{method:"POST",headers:{"Content-Type":"application/json"}}),b=await a.json();if(a.ok)(0,p.oR)({title:"Subscription Reactivated",description:b.message}),v();else throw Error(b.error||"Failed to reactivate subscription")}catch(a){(0,e.vV)("Error reactivating subscription:",a),(0,p.oR)({title:"Error",description:"Failed to reactivate subscription",variant:"destructive"})}finally{u(null)}};return r?(0,d.jsx)(h.Zp,{children:(0,d.jsx)(h.Wu,{className:"flex items-center justify-center p-6",children:(0,d.jsx)(k.A,{className:"h-6 w-6 animate-spin"})})}):c?(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)(h.Zp,{children:[(0,d.jsxs)(h.aR,{children:[(0,d.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,d.jsx)(l.A,{className:"h-5 w-5"}),"Current Subscription"]}),(0,d.jsx)(h.BT,{children:"Manage your subscription and billing"})]}),(0,d.jsxs)(h.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-semibold",children:(a=>{switch(a){case"launch":return"Launch (Free)";case"accelerator":return"Accelerator";case"dominator":return"Dominator";default:return a}})(c.subscription_tier)}),(0,d.jsx)(i.E,{className:(a=>{switch(a){case"active":return"bg-green-100 text-green-800";case"canceled":return"bg-red-100 text-red-800";case"past_due":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(c.subscription_status),children:c.subscription_status})]}),c.cancel_at_period_end&&(0,d.jsxs)(i.E,{variant:"destructive",children:[(0,d.jsx)(m.A,{className:"h-3 w-3 mr-1"}),"Canceling"]})]}),c.current_period_end&&(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,d.jsx)(n.A,{className:"h-4 w-4"}),(0,d.jsxs)("span",{children:[c.cancel_at_period_end?"Access until":"Next billing",":"," ",(a=c.current_period_end)?new Date(a).toLocaleDateString():"N/A"]})]}),(0,d.jsxs)("div",{className:"flex gap-2 pt-4",children:[c.stripe_customer_id&&(0,d.jsxs)(g.$,{variant:"outline",onClick:x,disabled:"billing"===t,children:["billing"===t?(0,d.jsx)(k.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,d.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Manage Billing"]}),"launch"!==c.subscription_tier&&(0,d.jsx)(d.Fragment,{children:c.cancel_at_period_end?(0,d.jsxs)(g.$,{variant:"default",onClick:z,disabled:"reactivate"===t,children:["reactivate"===t?(0,d.jsx)(k.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,d.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Reactivate"]}):(0,d.jsxs)(g.$,{variant:"destructive",onClick:y,disabled:"cancel"===t,children:["cancel"===t?(0,d.jsx)(k.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,d.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Cancel Subscription"]})})]})]})]}),"launch"===c.subscription_tier&&(0,d.jsxs)(h.Zp,{children:[(0,d.jsxs)(h.aR,{children:[(0,d.jsx)(h.ZB,{children:"Upgrade Your Plan"}),(0,d.jsx)(h.BT,{children:"Unlock more features and capabilities"})]}),(0,d.jsx)(h.Wu,{className:"space-y-4",children:(0,d.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,d.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,d.jsx)("h3",{className:"font-semibold",children:"Accelerator"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Perfect for growing businesses"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)(g.$,{className:"w-full",onClick:()=>w("accelerator","monthly"),disabled:"upgrade-accelerator-monthly"===t,children:["upgrade-accelerator-monthly"===t?(0,d.jsx)(k.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"$19/month"]}),(0,d.jsxs)(g.$,{variant:"outline",className:"w-full",onClick:()=>w("accelerator","yearly"),disabled:"upgrade-accelerator-yearly"===t,children:["upgrade-accelerator-yearly"===t?(0,d.jsx)(k.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"$190/year (Save $38)"]})]})]}),(0,d.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,d.jsx)("h3",{className:"font-semibold",children:"Dominator"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"For enterprise-level needs"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)(g.$,{className:"w-full",onClick:()=>w("dominator","monthly"),disabled:"upgrade-dominator-monthly"===t,children:["upgrade-dominator-monthly"===t?(0,d.jsx)(k.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"$29/month"]}),(0,d.jsxs)(g.$,{variant:"outline",className:"w-full",onClick:()=>w("dominator","yearly"),disabled:"upgrade-dominator-yearly"===t,children:["upgrade-dominator-yearly"===t?(0,d.jsx)(k.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"$290/year (Save $58)"]})]})]})]})})]})]}):(0,d.jsx)(h.Zp,{children:(0,d.jsx)(h.Wu,{className:"p-6",children:(0,d.jsx)("p",{className:"text-muted-foreground",children:"No subscription found"})})})}}};