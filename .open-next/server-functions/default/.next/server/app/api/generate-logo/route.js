(()=>{var a={};a.id=3853,a.ids=[3853,4291],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},328:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Responses=void 0;let d=c(73555),e=c(78662),f=c(75059),g=c(9173),h=d.__importStar(c(61709)),i=c(61709),j=c(80321),k=c(12998);class l extends g.APIResource{constructor(){super(...arguments),this.inputItems=new h.InputItems(this._client)}create(a,b){return this._client.post("/responses",{body:a,...b,stream:a.stream??!1})._thenUnwrap(a=>("object"in a&&"response"===a.object&&(0,e.addOutputText)(a),a))}retrieve(a,b={},c){return this._client.get((0,k.path)`/responses/${a}`,{query:b,...c,stream:b?.stream??!1})._thenUnwrap(a=>("object"in a&&"response"===a.object&&(0,e.addOutputText)(a),a))}delete(a,b){return this._client.delete((0,k.path)`/responses/${a}`,{...b,headers:(0,j.buildHeaders)([{Accept:"*/*"},b?.headers])})}parse(a,b){return this._client.responses.create(a,b)._thenUnwrap(b=>(0,e.parseResponse)(b,a))}stream(a,b){return f.ResponseStream.createResponse(this._client,a,b)}cancel(a,b){return this._client.post((0,k.path)`/responses/${a}/cancel`,b)}}b.Responses=l,l.InputItems=i.InputItems},719:(a,b,c)=>{"use strict";var d,e;Object.defineProperty(b,"__esModule",{value:!0}),b.LineDecoder=void 0,b.findDoubleNewlineIndex=function(a){for(let b=0;b<a.length-1;b++){if(10===a[b]&&10===a[b+1]||13===a[b]&&13===a[b+1])return b+2;if(13===a[b]&&10===a[b+1]&&b+3<a.length&&13===a[b+2]&&10===a[b+3])return b+4}return -1};let f=c(73555),g=c(56246);class h{constructor(){d.set(this,void 0),e.set(this,void 0),f.__classPrivateFieldSet(this,d,new Uint8Array,"f"),f.__classPrivateFieldSet(this,e,null,"f")}decode(a){let b;if(null==a)return[];let c=a instanceof ArrayBuffer?new Uint8Array(a):"string"==typeof a?(0,g.encodeUTF8)(a):a;f.__classPrivateFieldSet(this,d,(0,g.concatBytes)([f.__classPrivateFieldGet(this,d,"f"),c]),"f");let h=[];for(;null!=(b=function(a,b){for(let c=b??0;c<a.length;c++){if(10===a[c])return{preceding:c,index:c+1,carriage:!1};if(13===a[c])return{preceding:c,index:c+1,carriage:!0}}return null}(f.__classPrivateFieldGet(this,d,"f"),f.__classPrivateFieldGet(this,e,"f")));){if(b.carriage&&null==f.__classPrivateFieldGet(this,e,"f")){f.__classPrivateFieldSet(this,e,b.index,"f");continue}if(null!=f.__classPrivateFieldGet(this,e,"f")&&(b.index!==f.__classPrivateFieldGet(this,e,"f")+1||b.carriage)){h.push((0,g.decodeUTF8)(f.__classPrivateFieldGet(this,d,"f").subarray(0,f.__classPrivateFieldGet(this,e,"f")-1))),f.__classPrivateFieldSet(this,d,f.__classPrivateFieldGet(this,d,"f").subarray(f.__classPrivateFieldGet(this,e,"f")),"f"),f.__classPrivateFieldSet(this,e,null,"f");continue}let a=null!==f.__classPrivateFieldGet(this,e,"f")?b.preceding-1:b.preceding,c=(0,g.decodeUTF8)(f.__classPrivateFieldGet(this,d,"f").subarray(0,a));h.push(c),f.__classPrivateFieldSet(this,d,f.__classPrivateFieldGet(this,d,"f").subarray(b.index),"f"),f.__classPrivateFieldSet(this,e,null,"f")}return h}flush(){return f.__classPrivateFieldGet(this,d,"f").length?this.decode("\n"):[]}}b.LineDecoder=h,d=new WeakMap,e=new WeakMap,h.NEWLINE_CHARS=new Set(["\n","\r"]),h.NEWLINE_REGEXP=/\r\n|[\n\r]/g},2671:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Batches=void 0;let d=c(9173),e=c(73637),f=c(12998);class g extends d.APIResource{create(a,b){return this._client.post("/batches",{body:a,...b})}retrieve(a,b){return this._client.get((0,f.path)`/batches/${a}`,b)}list(a={},b){return this._client.getAPIList("/batches",e.CursorPage,{query:a,...b})}cancel(a,b){return this._client.post((0,f.path)`/batches/${a}/cancel`,b)}}b.Batches=g},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4536:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.isToolMessage=b.isAssistantMessage=void 0,b.isPresent=function(a){return null!=a},b.isAssistantMessage=a=>a?.role==="assistant",b.isToolMessage=a=>a?.role==="tool"},6207:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Graders=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(92668)),g=c(92668);class h extends e.APIResource{constructor(){super(...arguments),this.graderModels=new f.GraderModels(this._client)}}b.Graders=h,h.GraderModels=g.GraderModels},9159:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Files=void 0;let d=c(9173),e=c(73637),f=c(80321),g=c(78473),h=c(12998);class i extends d.APIResource{create(a,b,c){return this._client.post((0,h.path)`/vector_stores/${a}/files`,{body:b,...c,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}retrieve(a,b,c){let{vector_store_id:d}=b;return this._client.get((0,h.path)`/vector_stores/${d}/files/${a}`,{...c,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}update(a,b,c){let{vector_store_id:d,...e}=b;return this._client.post((0,h.path)`/vector_stores/${d}/files/${a}`,{body:e,...c,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}list(a,b={},c){return this._client.getAPIList((0,h.path)`/vector_stores/${a}/files`,e.CursorPage,{query:b,...c,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}delete(a,b,c){let{vector_store_id:d}=b;return this._client.delete((0,h.path)`/vector_stores/${d}/files/${a}`,{...c,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}async createAndPoll(a,b,c){let d=await this.create(a,b,c);return await this.poll(a,d.id,c)}async poll(a,b,c){let d=(0,f.buildHeaders)([c?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":c?.pollIntervalMs?.toString()??void 0}]);for(;;){let e=await this.retrieve(b,{vector_store_id:a},{...c,headers:d}).withResponse(),f=e.data;switch(f.status){case"in_progress":let h=5e3;if(c?.pollIntervalMs)h=c.pollIntervalMs;else{let a=e.response.headers.get("openai-poll-after-ms");if(a){let b=parseInt(a);isNaN(b)||(h=b)}}await (0,g.sleep)(h);break;case"failed":case"completed":return f}}}async upload(a,b,c){let d=await this._client.files.create({file:b,purpose:"assistants"},c);return this.create(a,{file_id:d.id},c)}async uploadAndPoll(a,b,c){let d=await this.upload(a,b,c);return await this.poll(a,d.id,c)}content(a,b,c){let{vector_store_id:d}=b;return this._client.getAPIList((0,h.path)`/vector_stores/${d}/files/${a}/content`,e.Page,{...c,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}}b.Files=i},9173:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.APIResource=void 0;class c{constructor(a){this._client=a}}b.APIResource=c},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10922:(a,b,c)=>{"use strict";var d,e,f,g;Object.defineProperty(b,"__esModule",{value:!0}),b.OpenAI=void 0;let h=c(73555),i=c(25122),j=c(28491),k=c(27426),l=c(58512),m=c(58542),n=h.__importStar(c(38477)),o=h.__importStar(c(34649)),p=h.__importStar(c(82020)),q=c(94749),r=h.__importStar(c(97799)),s=h.__importStar(c(73637)),t=h.__importStar(c(29407)),u=h.__importStar(c(12663)),v=c(46321),w=c(2671),x=c(24244),y=c(57277),z=c(44364),A=c(97549),B=c(11309),C=c(94374),D=c(13633),E=c(34888),F=c(34850),G=c(31946),H=c(61826),I=c(62480),J=c(74684),K=c(95040),L=c(6207),M=c(42540),N=c(328),O=c(26708),P=c(27528),Q=c(58542),R=c(80321),S=c(78514),T=c(65435),U=c(28491);class V{constructor({baseURL:a=(0,S.readEnv)("OPENAI_BASE_URL"),apiKey:b=(0,S.readEnv)("OPENAI_API_KEY"),organization:c=(0,S.readEnv)("OPENAI_ORG_ID")??null,project:g=(0,S.readEnv)("OPENAI_PROJECT_ID")??null,webhookSecret:i=(0,S.readEnv)("OPENAI_WEBHOOK_SECRET")??null,...j}={}){if(d.add(this),f.set(this,void 0),this.completions=new u.Completions(this),this.chat=new u.Chat(this),this.embeddings=new u.Embeddings(this),this.files=new u.Files(this),this.images=new u.Images(this),this.audio=new u.Audio(this),this.moderations=new u.Moderations(this),this.models=new u.Models(this),this.fineTuning=new u.FineTuning(this),this.graders=new u.Graders(this),this.vectorStores=new u.VectorStores(this),this.webhooks=new u.Webhooks(this),this.beta=new u.Beta(this),this.batches=new u.Batches(this),this.uploads=new u.Uploads(this),this.responses=new u.Responses(this),this.realtime=new u.Realtime(this),this.conversations=new u.Conversations(this),this.evals=new u.Evals(this),this.containers=new u.Containers(this),void 0===b)throw new r.OpenAIError("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");let k={apiKey:b,organization:c,project:g,webhookSecret:i,...j,baseURL:a||"https://api.openai.com/v1"};if(!k.dangerouslyAllowBrowser&&(0,Q.isRunningInBrowser)())throw new r.OpenAIError("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");this.baseURL=k.baseURL,this.timeout=k.timeout??e.DEFAULT_TIMEOUT,this.logger=k.logger??console;let l="warn";this.logLevel=l,this.logLevel=(0,T.parseLogLevel)(k.logLevel,"ClientOptions.logLevel",this)??(0,T.parseLogLevel)((0,S.readEnv)("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??l,this.fetchOptions=k.fetchOptions,this.maxRetries=k.maxRetries??2,this.fetch=k.fetch??n.getDefaultFetch(),h.__classPrivateFieldSet(this,f,o.FallbackEncoder,"f"),this._options=k,this.apiKey="string"==typeof b?b:"Missing Key",this.organization=c,this.project=g,this.webhookSecret=i}withOptions(a){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...a})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:a,nulls:b}){}async authHeaders(a){return(0,R.buildHeaders)([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(a){return p.stringify(a,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${q.VERSION}`}defaultIdempotencyKey(){return`stainless-node-retry-${(0,i.uuid4)()}`}makeStatusError(a,b,c,d){return r.APIError.generate(a,b,c,d)}async _callApiKey(){let a,b=this._options.apiKey;if("function"!=typeof b)return!1;try{a=await b()}catch(a){if(a instanceof r.OpenAIError)throw a;throw new r.OpenAIError(`Failed to get token from 'apiKey' function: ${a.message}`,{cause:a})}if("string"!=typeof a||!a)throw new r.OpenAIError(`Expected 'apiKey' function argument to return a string but it returned ${a}`);return this.apiKey=a,!0}buildURL(a,b,c){let e=!h.__classPrivateFieldGet(this,d,"m",g).call(this)&&c||this.baseURL,f=new URL((0,j.isAbsoluteURL)(a)?a:e+(e.endsWith("/")&&a.startsWith("/")?a.slice(1):a)),i=this.defaultQuery();return(0,U.isEmptyObj)(i)||(b={...i,...b}),"object"==typeof b&&b&&!Array.isArray(b)&&(f.search=this.stringifyQuery(b)),f.toString()}async prepareOptions(a){await this._callApiKey()}async prepareRequest(a,{url:b,options:c}){}get(a,b){return this.methodRequest("get",a,b)}post(a,b){return this.methodRequest("post",a,b)}patch(a,b){return this.methodRequest("patch",a,b)}put(a,b){return this.methodRequest("put",a,b)}delete(a,b){return this.methodRequest("delete",a,b)}methodRequest(a,b,c){return this.request(Promise.resolve(c).then(c=>({method:a,path:b,...c})))}request(a,b=null){return new v.APIPromise(this,this.makeRequest(a,b,void 0))}async makeRequest(a,b,c){let d=await a,e=d.maxRetries??this.maxRetries;null==b&&(b=e),await this.prepareOptions(d);let{req:f,url:g,timeout:h}=await this.buildRequest(d,{retryCount:e-b});await this.prepareRequest(f,{url:g,options:d});let i="log_"+(0x1000000*Math.random()|0).toString(16).padStart(6,"0"),k=void 0===c?"":`, retryOf: ${c}`,m=Date.now();if((0,T.loggerFor)(this).debug(`[${i}] sending request`,(0,T.formatRequestDetails)({retryOfRequestLogID:c,method:d.method,url:g,options:d,headers:f.headers})),d.signal?.aborted)throw new r.APIUserAbortError;let o=new AbortController,p=await this.fetchWithTimeout(g,f,h,o).catch(l.castToError),q=Date.now();if(p instanceof globalThis.Error){let a=`retrying, ${b} attempts remaining`;if(d.signal?.aborted)throw new r.APIUserAbortError;let e=(0,l.isAbortError)(p)||/timed? ?out/i.test(String(p)+("cause"in p?String(p.cause):""));if(b)return(0,T.loggerFor)(this).info(`[${i}] connection ${e?"timed out":"failed"} - ${a}`),(0,T.loggerFor)(this).debug(`[${i}] connection ${e?"timed out":"failed"} (${a})`,(0,T.formatRequestDetails)({retryOfRequestLogID:c,url:g,durationMs:q-m,message:p.message})),this.retryRequest(d,b,c??i);if((0,T.loggerFor)(this).info(`[${i}] connection ${e?"timed out":"failed"} - error; no more retries left`),(0,T.loggerFor)(this).debug(`[${i}] connection ${e?"timed out":"failed"} (error; no more retries left)`,(0,T.formatRequestDetails)({retryOfRequestLogID:c,url:g,durationMs:q-m,message:p.message})),e)throw new r.APIConnectionTimeoutError;throw new r.APIConnectionError({cause:p})}let s=[...p.headers.entries()].filter(([a])=>"x-request-id"===a).map(([a,b])=>", "+a+": "+JSON.stringify(b)).join(""),t=`[${i}${k}${s}] ${f.method} ${g} ${p.ok?"succeeded":"failed"} with status ${p.status} in ${q-m}ms`;if(!p.ok){let a=await this.shouldRetry(p);if(b&&a){let a=`retrying, ${b} attempts remaining`;return await n.CancelReadableStream(p.body),(0,T.loggerFor)(this).info(`${t} - ${a}`),(0,T.loggerFor)(this).debug(`[${i}] response error (${a})`,(0,T.formatRequestDetails)({retryOfRequestLogID:c,url:p.url,status:p.status,headers:p.headers,durationMs:q-m})),this.retryRequest(d,b,c??i,p.headers)}let e=a?"error; no more retries left":"error; not retryable";(0,T.loggerFor)(this).info(`${t} - ${e}`);let f=await p.text().catch(a=>(0,l.castToError)(a).message),g=(0,j.safeJSON)(f),h=g?void 0:f;throw(0,T.loggerFor)(this).debug(`[${i}] response error (${e})`,(0,T.formatRequestDetails)({retryOfRequestLogID:c,url:p.url,status:p.status,headers:p.headers,message:h,durationMs:Date.now()-m})),this.makeStatusError(p.status,g,h,p.headers)}return(0,T.loggerFor)(this).info(t),(0,T.loggerFor)(this).debug(`[${i}] response start`,(0,T.formatRequestDetails)({retryOfRequestLogID:c,url:p.url,status:p.status,headers:p.headers,durationMs:q-m})),{response:p,options:d,controller:o,requestLogID:i,retryOfRequestLogID:c,startTime:m}}getAPIList(a,b,c){return this.requestAPIList(b,{method:"get",path:a,...c})}requestAPIList(a,b){let c=this.makeRequest(b,null,void 0);return new s.PagePromise(this,c,a)}async fetchWithTimeout(a,b,c,d){let{signal:e,method:f,...g}=b||{};e&&e.addEventListener("abort",()=>d.abort());let h=setTimeout(()=>d.abort(),c),i=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||"object"==typeof g.body&&null!==g.body&&Symbol.asyncIterator in g.body,j={signal:d.signal,...i?{duplex:"half"}:{},method:"GET",...g};f&&(j.method=f.toUpperCase());try{return await this.fetch.call(void 0,a,j)}finally{clearTimeout(h)}}async shouldRetry(a){let b=a.headers.get("x-should-retry");return"true"===b||"false"!==b&&(408===a.status||409===a.status||429===a.status||!!(a.status>=500))}async retryRequest(a,b,c,d){let e,f=d?.get("retry-after-ms");if(f){let a=parseFloat(f);Number.isNaN(a)||(e=a)}let g=d?.get("retry-after");if(g&&!e){let a=parseFloat(g);e=Number.isNaN(a)?Date.parse(g)-Date.now():1e3*a}if(!(e&&0<=e&&e<6e4)){let c=a.maxRetries??this.maxRetries;e=this.calculateDefaultRetryTimeoutMillis(b,c)}return await (0,k.sleep)(e),this.makeRequest(a,b-1,c)}calculateDefaultRetryTimeoutMillis(a,b){return Math.min(.5*Math.pow(2,b-a),8)*(1-.25*Math.random())*1e3}async buildRequest(a,{retryCount:b=0}={}){let c={...a},{method:d,path:e,query:f,defaultBaseURL:g}=c,h=this.buildURL(e,f,g);"timeout"in c&&(0,j.validatePositiveInteger)("timeout",c.timeout),c.timeout=c.timeout??this.timeout;let{bodyHeaders:i,body:k}=this.buildBody({options:c}),l=await this.buildHeaders({options:a,method:d,bodyHeaders:i,retryCount:b});return{req:{method:d,headers:l,...c.signal&&{signal:c.signal},...globalThis.ReadableStream&&k instanceof globalThis.ReadableStream&&{duplex:"half"},...k&&{body:k},...this.fetchOptions??{},...c.fetchOptions??{}},url:h,timeout:c.timeout}}async buildHeaders({options:a,method:b,bodyHeaders:c,retryCount:d}){let e={};this.idempotencyHeader&&"get"!==b&&(a.idempotencyKey||(a.idempotencyKey=this.defaultIdempotencyKey()),e[this.idempotencyHeader]=a.idempotencyKey);let f=(0,R.buildHeaders)([e,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(d),...a.timeout?{"X-Stainless-Timeout":String(Math.trunc(a.timeout/1e3))}:{},...(0,m.getPlatformHeaders)(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(a),this._options.defaultHeaders,c,a.headers]);return this.validateHeaders(f),f.values}buildBody({options:{body:a,headers:b}}){if(!a)return{bodyHeaders:void 0,body:void 0};let c=(0,R.buildHeaders)([b]);return ArrayBuffer.isView(a)||a instanceof ArrayBuffer||a instanceof DataView||"string"==typeof a&&c.values.has("content-type")||globalThis.Blob&&a instanceof globalThis.Blob||a instanceof FormData||a instanceof URLSearchParams||globalThis.ReadableStream&&a instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:a}:"object"==typeof a&&(Symbol.asyncIterator in a||Symbol.iterator in a&&"next"in a&&"function"==typeof a.next)?{bodyHeaders:void 0,body:n.ReadableStreamFrom(a)}:h.__classPrivateFieldGet(this,f,"f").call(this,{body:a,headers:c})}}b.OpenAI=V,e=V,f=new WeakMap,d=new WeakSet,g=function(){return"https://api.openai.com/v1"!==this.baseURL},V.OpenAI=e,V.DEFAULT_TIMEOUT=6e5,V.OpenAIError=r.OpenAIError,V.APIError=r.APIError,V.APIConnectionError=r.APIConnectionError,V.APIConnectionTimeoutError=r.APIConnectionTimeoutError,V.APIUserAbortError=r.APIUserAbortError,V.NotFoundError=r.NotFoundError,V.ConflictError=r.ConflictError,V.RateLimitError=r.RateLimitError,V.BadRequestError=r.BadRequestError,V.AuthenticationError=r.AuthenticationError,V.InternalServerError=r.InternalServerError,V.PermissionDeniedError=r.PermissionDeniedError,V.UnprocessableEntityError=r.UnprocessableEntityError,V.InvalidWebhookSignatureError=r.InvalidWebhookSignatureError,V.toFile=t.toFile,V.Completions=x.Completions,V.Chat=G.Chat,V.Embeddings=y.Embeddings,V.Files=z.Files,V.Images=A.Images,V.Audio=E.Audio,V.Moderations=C.Moderations,V.Models=B.Models,V.FineTuning=K.FineTuning,V.Graders=L.Graders,V.VectorStores=P.VectorStores,V.Webhooks=D.Webhooks,V.Beta=F.Beta,V.Batches=w.Batches,V.Uploads=O.Uploads,V.Responses=N.Responses,V.Realtime=M.Realtime,V.Conversations=I.Conversations,V.Evals=J.Evals,V.Containers=H.Containers},11077:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.FileBatches=void 0;let d=c(9173),e=c(73637),f=c(80321),g=c(27426),h=c(37165),i=c(12998);class j extends d.APIResource{create(a,b,c){return this._client.post((0,i.path)`/vector_stores/${a}/file_batches`,{body:b,...c,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}retrieve(a,b,c){let{vector_store_id:d}=b;return this._client.get((0,i.path)`/vector_stores/${d}/file_batches/${a}`,{...c,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}cancel(a,b,c){let{vector_store_id:d}=b;return this._client.post((0,i.path)`/vector_stores/${d}/file_batches/${a}/cancel`,{...c,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}async createAndPoll(a,b,c){let d=await this.create(a,b);return await this.poll(a,d.id,c)}listFiles(a,b,c){let{vector_store_id:d,...g}=b;return this._client.getAPIList((0,i.path)`/vector_stores/${d}/file_batches/${a}/files`,e.CursorPage,{query:g,...c,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}async poll(a,b,c){let d=(0,f.buildHeaders)([c?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":c?.pollIntervalMs?.toString()??void 0}]);for(;;){let{data:e,response:f}=await this.retrieve(b,{vector_store_id:a},{...c,headers:d}).withResponse();switch(e.status){case"in_progress":let h=5e3;if(c?.pollIntervalMs)h=c.pollIntervalMs;else{let a=f.headers.get("openai-poll-after-ms");if(a){let b=parseInt(a);isNaN(b)||(h=b)}}await (0,g.sleep)(h);break;case"failed":case"cancelled":case"completed":return e}}}async uploadAndPoll(a,{files:b,fileIds:c=[]},d){if(null==b||0==b.length)throw Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let e=Math.min(d?.maxConcurrency??5,b.length),f=this._client,g=b.values(),i=[...c];async function j(a){for(let b of a){let a=await f.files.create({file:b,purpose:"assistants"},d);i.push(a.id)}}let k=Array(e).fill(g).map(j);return await (0,h.allSettledWithThrow)(k),await this.createAndPoll(a,{file_ids:i})}}b.FileBatches=j},11309:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Models=void 0;let d=c(9173),e=c(73637),f=c(12998);class g extends d.APIResource{retrieve(a,b){return this._client.get((0,f.path)`/models/${a}`,b)}list(a){return this._client.getAPIList("/models",e.Page,a)}delete(a,b){return this._client.delete((0,f.path)`/models/${a}`,b)}}b.Models=g},12663:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Webhooks=b.VectorStores=b.Uploads=b.Responses=b.Realtime=b.Moderations=b.Models=b.Images=b.Graders=b.FineTuning=b.Files=b.Evals=b.Embeddings=b.Conversations=b.Containers=b.Completions=b.Beta=b.Batches=b.Audio=void 0;let d=c(73555);d.__exportStar(c(24462),b),d.__exportStar(c(16562),b);var e=c(34888);Object.defineProperty(b,"Audio",{enumerable:!0,get:function(){return e.Audio}});var f=c(2671);Object.defineProperty(b,"Batches",{enumerable:!0,get:function(){return f.Batches}});var g=c(34850);Object.defineProperty(b,"Beta",{enumerable:!0,get:function(){return g.Beta}});var h=c(24244);Object.defineProperty(b,"Completions",{enumerable:!0,get:function(){return h.Completions}});var i=c(61826);Object.defineProperty(b,"Containers",{enumerable:!0,get:function(){return i.Containers}});var j=c(62480);Object.defineProperty(b,"Conversations",{enumerable:!0,get:function(){return j.Conversations}});var k=c(57277);Object.defineProperty(b,"Embeddings",{enumerable:!0,get:function(){return k.Embeddings}});var l=c(74684);Object.defineProperty(b,"Evals",{enumerable:!0,get:function(){return l.Evals}});var m=c(44364);Object.defineProperty(b,"Files",{enumerable:!0,get:function(){return m.Files}});var n=c(95040);Object.defineProperty(b,"FineTuning",{enumerable:!0,get:function(){return n.FineTuning}});var o=c(6207);Object.defineProperty(b,"Graders",{enumerable:!0,get:function(){return o.Graders}});var p=c(97549);Object.defineProperty(b,"Images",{enumerable:!0,get:function(){return p.Images}});var q=c(11309);Object.defineProperty(b,"Models",{enumerable:!0,get:function(){return q.Models}});var r=c(94374);Object.defineProperty(b,"Moderations",{enumerable:!0,get:function(){return r.Moderations}});var s=c(42540);Object.defineProperty(b,"Realtime",{enumerable:!0,get:function(){return s.Realtime}});var t=c(328);Object.defineProperty(b,"Responses",{enumerable:!0,get:function(){return t.Responses}});var u=c(26708);Object.defineProperty(b,"Uploads",{enumerable:!0,get:function(){return u.Uploads}});var v=c(27528);Object.defineProperty(b,"VectorStores",{enumerable:!0,get:function(){return v.VectorStores}});var w=c(13633);Object.defineProperty(b,"Webhooks",{enumerable:!0,get:function(){return w.Webhooks}})},12981:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.encode=b.has=void 0,b.merge=function a(c,d,f={}){if(!d)return c;if("object"!=typeof d){if((0,e.isArray)(c))c.push(d);else{if(!c||"object"!=typeof c)return[c,d];(f&&(f.plainObjects||f.allowPrototypes)||!(0,b.has)(Object.prototype,d))&&(c[d]=!0)}return c}if(!c||"object"!=typeof c)return[c].concat(d);let g=c;return((0,e.isArray)(c)&&!(0,e.isArray)(d)&&(g=function(a,b){let c=b&&b.plainObjects?Object.create(null):{};for(let b=0;b<a.length;++b)void 0!==a[b]&&(c[b]=a[b]);return c}(c,f)),(0,e.isArray)(c)&&(0,e.isArray)(d))?(d.forEach(function(d,e){if((0,b.has)(c,e)){let b=c[e];b&&"object"==typeof b&&d&&"object"==typeof d?c[e]=a(b,d,f):c.push(d)}else c[e]=d}),c):Object.keys(d).reduce(function(c,e){let g=d[e];return(0,b.has)(c,e)?c[e]=a(c[e],g,f):c[e]=g,c},g)},b.assign_single_source=function(a,b){return Object.keys(b).reduce(function(a,c){return a[c]=b[c],a},a)},b.decode=function(a,b,c){let d=a.replace(/\+/g," ");if("iso-8859-1"===c)return d.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(d)}catch(a){return d}},b.compact=function(a){let b=[{obj:{o:a},prop:"o"}],c=[];for(let a=0;a<b.length;++a){let d=b[a],e=d.obj[d.prop],f=Object.keys(e);for(let a=0;a<f.length;++a){let d=f[a],g=e[d];"object"==typeof g&&null!==g&&-1===c.indexOf(g)&&(b.push({obj:e,prop:d}),c.push(g))}}for(;b.length>1;){let a=b.pop();if(!a)continue;let c=a.obj[a.prop];if((0,e.isArray)(c)){let b=[];for(let a=0;a<c.length;++a)void 0!==c[a]&&b.push(c[a]);a.obj[a.prop]=b}}return a},b.is_regexp=function(a){return"[object RegExp]"===Object.prototype.toString.call(a)},b.is_buffer=function(a){return!!a&&"object"==typeof a&&!!(a.constructor&&a.constructor.isBuffer&&a.constructor.isBuffer(a))},b.combine=function(a,b){return[].concat(a,b)},b.maybe_map=function(a,b){if((0,e.isArray)(a)){let c=[];for(let d=0;d<a.length;d+=1)c.push(b(a[d]));return c}return b(a)};let d=c(15900),e=c(28491);b.has=(a,c)=>(b.has=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),(0,b.has)(a,c));let f=(()=>{let a=[];for(let b=0;b<256;++b)a.push("%"+((b<16?"0":"")+b.toString(16)).toUpperCase());return a})();b.encode=(a,b,c,e,g)=>{if(0===a.length)return a;let h=a;if("symbol"==typeof a?h=Symbol.prototype.toString.call(a):"string"!=typeof a&&(h=String(a)),"iso-8859-1"===c)return escape(h).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let i="";for(let a=0;a<h.length;a+=1024){let b=h.length>=1024?h.slice(a,a+1024):h,c=[];for(let a=0;a<b.length;++a){let e=b.charCodeAt(a);if(45===e||46===e||95===e||126===e||e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||g===d.RFC1738&&(40===e||41===e)){c[c.length]=b.charAt(a);continue}if(e<128){c[c.length]=f[e];continue}if(e<2048){c[c.length]=f[192|e>>6]+f[128|63&e];continue}if(e<55296||e>=57344){c[c.length]=f[224|e>>12]+f[128|e>>6&63]+f[128|63&e];continue}a+=1,e=65536+((1023&e)<<10|1023&b.charCodeAt(a)),c[c.length]=f[240|e>>18]+f[128|e>>12&63]+f[128|e>>6&63]+f[128|63&e]}i+=c.join("")}return i}},12998:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.path=b.createPathTagFunction=void 0,b.encodeURIPath=e;let d=c(97799);function e(a){return a.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}let f=Object.freeze(Object.create(null));b.createPathTagFunction=(a=e)=>function(b,...c){let e;if(1===b.length)return b[0];let g=!1,h=[],i=b.reduce((b,d,e)=>{/[?#]/.test(d)&&(g=!0);let i=c[e],j=(g?encodeURIComponent:a)(""+i);return e!==c.length&&(null==i||"object"==typeof i&&i.toString===Object.getPrototypeOf(Object.getPrototypeOf(i.hasOwnProperty??f)??f)?.toString)&&(j=i+"",h.push({start:b.length+d.length,length:j.length,error:`Value of type ${Object.prototype.toString.call(i).slice(8,-1)} is not a valid path parameter`})),b+d+(e===c.length?"":j)},""),j=i.split(/[?#]/,1)[0],k=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;for(;null!==(e=k.exec(j));)h.push({start:e.index,length:e[0].length,error:`Value "${e[0]}" can't be safely passed as a path parameter`});if(h.sort((a,b)=>a.start-b.start),h.length>0){let a=0,b=h.reduce((b,c)=>{let d=" ".repeat(c.start-a),e="^".repeat(c.length);return a=c.start+c.length,b+d+e},"");throw new d.OpenAIError(`Path parameters result in path with invalid segments:
${h.map(a=>a.error).join("\n")}
${i}
${b}`)}return i},b.path=(0,b.createPathTagFunction)(e)},13633:(a,b,c)=>{"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.Webhooks=void 0;let g=c(73555),h=c(82963),i=c(9173),j=c(80321);class k extends i.APIResource{constructor(){super(...arguments),d.add(this)}async unwrap(a,b,c=this._client.webhookSecret,d=300){return await this.verifySignature(a,b,c,d),JSON.parse(a)}async verifySignature(a,b,c=this._client.webhookSecret,i=300){if("undefined"==typeof crypto||"function"!=typeof crypto.subtle.importKey||"function"!=typeof crypto.subtle.verify)throw Error("Webhook signature verification is only supported when the `crypto` global is defined");g.__classPrivateFieldGet(this,d,"m",e).call(this,c);let k=(0,j.buildHeaders)([b]).values,l=g.__classPrivateFieldGet(this,d,"m",f).call(this,k,"webhook-signature"),m=g.__classPrivateFieldGet(this,d,"m",f).call(this,k,"webhook-timestamp"),n=g.__classPrivateFieldGet(this,d,"m",f).call(this,k,"webhook-id"),o=parseInt(m,10);if(isNaN(o))throw new h.InvalidWebhookSignatureError("Invalid webhook timestamp format");let p=Math.floor(Date.now()/1e3);if(p-o>i)throw new h.InvalidWebhookSignatureError("Webhook timestamp is too old");if(o>p+i)throw new h.InvalidWebhookSignatureError("Webhook timestamp is too new");let q=l.split(" ").map(a=>a.startsWith("v1,")?a.substring(3):a),r=c.startsWith("whsec_")?Buffer.from(c.replace("whsec_",""),"base64"):Buffer.from(c,"utf-8"),s=n?`${n}.${m}.${a}`:`${m}.${a}`,t=await crypto.subtle.importKey("raw",r,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(let a of q)try{let b=Buffer.from(a,"base64");if(await crypto.subtle.verify("HMAC",t,b,new TextEncoder().encode(s)))return}catch{continue}throw new h.InvalidWebhookSignatureError("The given webhook signature does not match the expected signature")}}b.Webhooks=k,d=new WeakSet,e=function(a){if("string"!=typeof a||0===a.length)throw Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},f=function(a,b){if(!a)throw Error("Headers are required");let c=a.get(b);if(null==c)throw Error(`Missing required header: ${b}`);return c}},15772:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Translations=void 0;let d=c(9173),e=c(30453);class f extends d.APIResource{create(a,b){return this._client.post("/audio/translations",(0,e.multipartFormRequestOptions)({body:a,...b,__metadata:{model:a.model}},this._client))}}b.Translations=f},15900:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.RFC3986=b.RFC1738=b.formatters=b.default_formatter=b.default_format=void 0,b.default_format="RFC3986",b.default_formatter=a=>String(a),b.formatters={RFC1738:a=>String(a).replace(/%20/g,"+"),RFC3986:b.default_formatter},b.RFC1738="RFC1738",b.RFC3986="RFC3986"},16453:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),c(73555).__exportStar(c(48193),b)},16562:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20123:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Jobs=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(68916)),g=c(68916),h=c(73637),i=c(12998);class j extends e.APIResource{constructor(){super(...arguments),this.checkpoints=new f.Checkpoints(this._client)}create(a,b){return this._client.post("/fine_tuning/jobs",{body:a,...b})}retrieve(a,b){return this._client.get((0,i.path)`/fine_tuning/jobs/${a}`,b)}list(a={},b){return this._client.getAPIList("/fine_tuning/jobs",h.CursorPage,{query:a,...b})}cancel(a,b){return this._client.post((0,i.path)`/fine_tuning/jobs/${a}/cancel`,b)}listEvents(a,b={},c){return this._client.getAPIList((0,i.path)`/fine_tuning/jobs/${a}/events`,h.CursorPage,{query:b,...c})}pause(a,b){return this._client.post((0,i.path)`/fine_tuning/jobs/${a}/pause`,b)}resume(a,b){return this._client.post((0,i.path)`/fine_tuning/jobs/${a}/resume`,b)}}b.Jobs=j,j.Checkpoints=g.Checkpoints},20516:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Parts=void 0;let d=c(9173),e=c(30453),f=c(12998);class g extends d.APIResource{create(a,b,c){return this._client.post((0,f.path)`/uploads/${a}/parts`,(0,e.multipartFormRequestOptions)({body:b,...c},this._client))}}b.Parts=g},21118:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Permissions=void 0;let d=c(9173),e=c(73637),f=c(12998);class g extends d.APIResource{create(a,b,c){return this._client.getAPIList((0,f.path)`/fine_tuning/checkpoints/${a}/permissions`,e.Page,{body:b,method:"post",...c})}retrieve(a,b={},c){return this._client.get((0,f.path)`/fine_tuning/checkpoints/${a}/permissions`,{query:b,...c})}delete(a,b,c){let{fine_tuned_model_checkpoint:d}=b;return this._client.delete((0,f.path)`/fine_tuning/checkpoints/${d}/permissions/${a}`,c)}}b.Permissions=g},21317:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Assistants=void 0;let d=c(9173),e=c(73637),f=c(80321),g=c(12998);class h extends d.APIResource{create(a,b){return this._client.post("/assistants",{body:a,...b,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},b?.headers])})}retrieve(a,b){return this._client.get((0,g.path)`/assistants/${a}`,{...b,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},b?.headers])})}update(a,b,c){return this._client.post((0,g.path)`/assistants/${a}`,{body:b,...c,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}list(a={},b){return this._client.getAPIList("/assistants",e.CursorPage,{query:a,...b,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},b?.headers])})}delete(a,b){return this._client.delete((0,g.path)`/assistants/${a}`,{...b,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},b?.headers])})}}b.Assistants=h},22001:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Content=void 0;let d=c(9173),e=c(80321),f=c(12998);class g extends d.APIResource{retrieve(a,b,c){let{container_id:d}=b;return this._client.get((0,f.path)`/containers/${d}/files/${a}/content`,{...c,headers:(0,e.buildHeaders)([{Accept:"application/binary"},c?.headers]),__binaryResponse:!0})}}b.Content=g},22180:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Messages=void 0;let d=c(9173),e=c(73637),f=c(12998);class g extends d.APIResource{list(a,b={},c){return this._client.getAPIList((0,f.path)`/chat/completions/${a}/messages`,e.CursorPage,{query:b,...c})}}b.Messages=g},24244:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Completions=void 0;let d=c(9173);class e extends d.APIResource{create(a,b){return this._client.post("/completions",{body:a,...b,stream:a.stream??!1})}}b.Completions=e},24462:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Completions=b.Chat=void 0;var d=c(31946);Object.defineProperty(b,"Chat",{enumerable:!0,get:function(){return d.Chat}});var e=c(55546);Object.defineProperty(b,"Completions",{enumerable:!0,get:function(){return e.Completions}})},24664:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Steps=void 0;let d=c(9173),e=c(73637),f=c(80321),g=c(12998);class h extends d.APIResource{retrieve(a,b,c){let{thread_id:d,run_id:e,...h}=b;return this._client.get((0,g.path)`/threads/${d}/runs/${e}/steps/${a}`,{query:h,...c,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}list(a,b,c){let{thread_id:d,...h}=b;return this._client.getAPIList((0,g.path)`/threads/${d}/runs/${a}/steps`,e.CursorPage,{query:h,...c,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}}b.Steps=h},25122:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.uuid4=void 0,b.uuid4=function(){let{crypto:a}=globalThis;if(a?.randomUUID)return b.uuid4=a.randomUUID.bind(a),a.randomUUID();let c=new Uint8Array(1),d=a?()=>a.getRandomValues(c)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,a=>(a^d()&15>>a/4).toString(16))}},25685:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Checkpoints=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(21118)),g=c(21118);class h extends e.APIResource{constructor(){super(...arguments),this.permissions=new f.Permissions(this._client)}}b.Checkpoints=h,h.Permissions=g.Permissions},26708:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Uploads=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(20516)),g=c(20516),h=c(12998);class i extends e.APIResource{constructor(){super(...arguments),this.parts=new f.Parts(this._client)}create(a,b){return this._client.post("/uploads",{body:a,...b})}cancel(a,b){return this._client.post((0,h.path)`/uploads/${a}/cancel`,b)}complete(a,b,c){return this._client.post((0,h.path)`/uploads/${a}/complete`,{body:b,...c})}}b.Uploads=i,i.Parts=g.Parts},27426:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.sleep=void 0,b.sleep=a=>new Promise(b=>setTimeout(b,a))},27528:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.VectorStores=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(11077)),g=c(11077),h=d.__importStar(c(9159)),i=c(9159),j=c(73637),k=c(80321),l=c(12998);class m extends e.APIResource{constructor(){super(...arguments),this.files=new h.Files(this._client),this.fileBatches=new f.FileBatches(this._client)}create(a,b){return this._client.post("/vector_stores",{body:a,...b,headers:(0,k.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},b?.headers])})}retrieve(a,b){return this._client.get((0,l.path)`/vector_stores/${a}`,{...b,headers:(0,k.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},b?.headers])})}update(a,b,c){return this._client.post((0,l.path)`/vector_stores/${a}`,{body:b,...c,headers:(0,k.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}list(a={},b){return this._client.getAPIList("/vector_stores",j.CursorPage,{query:a,...b,headers:(0,k.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},b?.headers])})}delete(a,b){return this._client.delete((0,l.path)`/vector_stores/${a}`,{...b,headers:(0,k.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},b?.headers])})}search(a,b,c){return this._client.getAPIList((0,l.path)`/vector_stores/${a}/search`,j.Page,{body:b,method:"post",...c,headers:(0,k.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}}b.VectorStores=m,m.Files=i.Files,m.FileBatches=g.FileBatches},28491:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.safeJSON=b.maybeCoerceBoolean=b.maybeCoerceFloat=b.maybeCoerceInteger=b.coerceBoolean=b.coerceFloat=b.coerceInteger=b.validatePositiveInteger=b.ensurePresent=b.isReadonlyArray=b.isArray=b.isAbsoluteURL=void 0,b.maybeObj=function(a){return"object"!=typeof a?{}:a??{}},b.isEmptyObj=function(a){if(!a)return!0;for(let b in a)return!1;return!0},b.hasOwn=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.isObj=function(a){return null!=a&&"object"==typeof a&&!Array.isArray(a)};let d=c(97799),e=/^[a-z][a-z0-9+.-]*:/i;b.isAbsoluteURL=a=>e.test(a),b.isArray=a=>(b.isArray=Array.isArray,(0,b.isArray)(a)),b.isReadonlyArray=b.isArray,b.ensurePresent=a=>{if(null==a)throw new d.OpenAIError(`Expected a value to be given but received ${a} instead.`);return a},b.validatePositiveInteger=(a,b)=>{if("number"!=typeof b||!Number.isInteger(b))throw new d.OpenAIError(`${a} must be an integer`);if(b<0)throw new d.OpenAIError(`${a} must be a positive integer`);return b},b.coerceInteger=a=>{if("number"==typeof a)return Math.round(a);if("string"==typeof a)return parseInt(a,10);throw new d.OpenAIError(`Could not coerce ${a} (type: ${typeof a}) into a number`)},b.coerceFloat=a=>{if("number"==typeof a)return a;if("string"==typeof a)return parseFloat(a);throw new d.OpenAIError(`Could not coerce ${a} (type: ${typeof a}) into a number`)},b.coerceBoolean=a=>"boolean"==typeof a?a:"string"==typeof a?"true"===a:!!a,b.maybeCoerceInteger=a=>{if(null!=a)return(0,b.coerceInteger)(a)},b.maybeCoerceFloat=a=>{if(null!=a)return(0,b.coerceFloat)(a)},b.maybeCoerceBoolean=a=>{if(null!=a)return(0,b.coerceBoolean)(a)},b.safeJSON=a=>{try{return JSON.parse(a)}catch(a){return}}},28782:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Runs=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(94500)),g=c(94500),h=c(73637),i=c(12998);class j extends e.APIResource{constructor(){super(...arguments),this.outputItems=new f.OutputItems(this._client)}create(a,b,c){return this._client.post((0,i.path)`/evals/${a}/runs`,{body:b,...c})}retrieve(a,b,c){let{eval_id:d}=b;return this._client.get((0,i.path)`/evals/${d}/runs/${a}`,c)}list(a,b={},c){return this._client.getAPIList((0,i.path)`/evals/${a}/runs`,h.CursorPage,{query:b,...c})}delete(a,b,c){let{eval_id:d}=b;return this._client.delete((0,i.path)`/evals/${d}/runs/${a}`,c)}cancel(a,b,c){let{eval_id:d}=b;return this._client.post((0,i.path)`/evals/${d}/runs/${a}`,c)}}b.Runs=j,j.OutputItems=g.OutputItems},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29407:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.toFile=void 0;var d=c(93545);Object.defineProperty(b,"toFile",{enumerable:!0,get:function(){return d.toFile}})},30018:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ClientSecrets=void 0;let d=c(9173);class e extends d.APIResource{create(a,b){return this._client.post("/realtime/client_secrets",{body:a,...b})}}b.ClientSecrets=e},30065:(a,b,c)=>{"use strict";var d,e,f,g,h,i,j,k,l,m,n,o;Object.defineProperty(b,"__esModule",{value:!0}),b.ChatCompletionStream=void 0;let p=c(73555),q=c(80793),r=c(82963),s=c(84630),t=c(16453),u=c(73341);class v extends u.AbstractChatCompletionRunner{constructor(a){super(),d.add(this),e.set(this,void 0),f.set(this,void 0),g.set(this,void 0),p.__classPrivateFieldSet(this,e,a,"f"),p.__classPrivateFieldSet(this,f,[],"f")}get currentChatCompletionSnapshot(){return p.__classPrivateFieldGet(this,g,"f")}static fromReadableStream(a){let b=new v(null);return b._run(()=>b._fromReadableStream(a)),b}static createChatCompletion(a,b,c){let d=new v(b);return d._run(()=>d._runChatCompletion(a,{...b,stream:!0},{...c,headers:{...c?.headers,"X-Stainless-Helper-Method":"stream"}})),d}async _createChatCompletion(a,b,c){super._createChatCompletion;let e=c?.signal;e&&(e.aborted&&this.controller.abort(),e.addEventListener("abort",()=>this.controller.abort())),p.__classPrivateFieldGet(this,d,"m",h).call(this);let f=await a.chat.completions.create({...b,stream:!0},{...c,signal:this.controller.signal});for await(let a of(this._connected(),f))p.__classPrivateFieldGet(this,d,"m",j).call(this,a);if(f.controller.signal?.aborted)throw new r.APIUserAbortError;return this._addChatCompletion(p.__classPrivateFieldGet(this,d,"m",m).call(this))}async _fromReadableStream(a,b){let c,e=b?.signal;e&&(e.aborted&&this.controller.abort(),e.addEventListener("abort",()=>this.controller.abort())),p.__classPrivateFieldGet(this,d,"m",h).call(this),this._connected();let f=t.Stream.fromReadableStream(a,this.controller);for await(let a of f)c&&c!==a.id&&this._addChatCompletion(p.__classPrivateFieldGet(this,d,"m",m).call(this)),p.__classPrivateFieldGet(this,d,"m",j).call(this,a),c=a.id;if(f.controller.signal?.aborted)throw new r.APIUserAbortError;return this._addChatCompletion(p.__classPrivateFieldGet(this,d,"m",m).call(this))}[(e=new WeakMap,f=new WeakMap,g=new WeakMap,d=new WeakSet,h=function(){this.ended||p.__classPrivateFieldSet(this,g,void 0,"f")},i=function(a){let b=p.__classPrivateFieldGet(this,f,"f")[a.index];return b||(b={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},p.__classPrivateFieldGet(this,f,"f")[a.index]=b),b},j=function(a){if(this.ended)return;let b=p.__classPrivateFieldGet(this,d,"m",o).call(this,a);for(let c of(this._emit("chunk",a,b),a.choices)){let a=b.choices[c.index];null!=c.delta.content&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",c.delta.content,a.message.content),this._emit("content.delta",{delta:c.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),null!=c.delta.refusal&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:c.delta.refusal,snapshot:a.message.refusal}),c.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:c.logprobs?.content,snapshot:a.logprobs?.content??[]}),c.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:c.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});let e=p.__classPrivateFieldGet(this,d,"m",i).call(this,a);for(let b of(a.finish_reason&&(p.__classPrivateFieldGet(this,d,"m",l).call(this,a),null!=e.current_tool_call_index&&p.__classPrivateFieldGet(this,d,"m",k).call(this,a,e.current_tool_call_index)),c.delta.tool_calls??[]))e.current_tool_call_index!==b.index&&(p.__classPrivateFieldGet(this,d,"m",l).call(this,a),null!=e.current_tool_call_index&&p.__classPrivateFieldGet(this,d,"m",k).call(this,a,e.current_tool_call_index)),e.current_tool_call_index=b.index;for(let b of c.delta.tool_calls??[]){let c=a.message.tool_calls?.[b.index];c?.type&&(c?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:c.function?.name,index:b.index,arguments:c.function.arguments,parsed_arguments:c.function.parsed_arguments,arguments_delta:b.function?.arguments??""}):c?.type)}}},k=function(a,b){if(p.__classPrivateFieldGet(this,d,"m",i).call(this,a).done_tool_calls.has(b))return;let c=a.message.tool_calls?.[b];if(!c)throw Error("no tool call snapshot");if(!c.type)throw Error("tool call snapshot missing `type`");if("function"===c.type){let a=p.__classPrivateFieldGet(this,e,"f")?.tools?.find(a=>(0,s.isChatCompletionFunctionTool)(a)&&a.function.name===c.function.name);this._emit("tool_calls.function.arguments.done",{name:c.function.name,index:b,arguments:c.function.arguments,parsed_arguments:(0,s.isAutoParsableTool)(a)?a.$parseRaw(c.function.arguments):a?.function.strict?JSON.parse(c.function.arguments):null})}else c.type},l=function(a){let b=p.__classPrivateFieldGet(this,d,"m",i).call(this,a);if(a.message.content&&!b.content_done){b.content_done=!0;let c=p.__classPrivateFieldGet(this,d,"m",n).call(this);this._emit("content.done",{content:a.message.content,parsed:c?c.$parseRaw(a.message.content):null})}a.message.refusal&&!b.refusal_done&&(b.refusal_done=!0,this._emit("refusal.done",{refusal:a.message.refusal})),a.logprobs?.content&&!b.logprobs_content_done&&(b.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:a.logprobs.content})),a.logprobs?.refusal&&!b.logprobs_refusal_done&&(b.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:a.logprobs.refusal}))},m=function(){if(this.ended)throw new r.OpenAIError("stream has ended, this shouldn't happen");let a=p.__classPrivateFieldGet(this,g,"f");if(!a)throw new r.OpenAIError("request ended without sending any chunks");return p.__classPrivateFieldSet(this,g,void 0,"f"),p.__classPrivateFieldSet(this,f,[],"f"),function(a,b){let{id:c,choices:d,created:e,model:f,system_fingerprint:g,...h}=a,i={...h,id:c,choices:d.map(({message:b,finish_reason:c,index:d,logprobs:e,...f})=>{if(!c)throw new r.OpenAIError(`missing finish_reason for choice ${d}`);let{content:g=null,function_call:h,tool_calls:i,...j}=b,k=b.role;if(!k)throw new r.OpenAIError(`missing role for choice ${d}`);if(h){let{arguments:a,name:i}=h;if(null==a)throw new r.OpenAIError(`missing function_call.arguments for choice ${d}`);if(!i)throw new r.OpenAIError(`missing function_call.name for choice ${d}`);return{...f,message:{content:g,function_call:{arguments:a,name:i},role:k,refusal:b.refusal??null},finish_reason:c,index:d,logprobs:e}}return i?{...f,index:d,finish_reason:c,logprobs:e,message:{...j,role:k,content:g,refusal:b.refusal??null,tool_calls:i.map((b,c)=>{let{function:e,type:f,id:g,...h}=b,{arguments:i,name:j,...k}=e||{};if(null==g)throw new r.OpenAIError(`missing choices[${d}].tool_calls[${c}].id
${w(a)}`);if(null==f)throw new r.OpenAIError(`missing choices[${d}].tool_calls[${c}].type
${w(a)}`);if(null==j)throw new r.OpenAIError(`missing choices[${d}].tool_calls[${c}].function.name
${w(a)}`);if(null==i)throw new r.OpenAIError(`missing choices[${d}].tool_calls[${c}].function.arguments
${w(a)}`);return{...h,id:g,type:f,function:{...k,name:j,arguments:i}}})}}:{...f,message:{...j,content:g,role:k,refusal:b.refusal??null},finish_reason:c,index:d,logprobs:e}}),created:e,model:f,object:"chat.completion",...g?{system_fingerprint:g}:{}};return(0,s.maybeParseChatCompletion)(i,b)}(a,p.__classPrivateFieldGet(this,e,"f"))},n=function(){let a=p.__classPrivateFieldGet(this,e,"f")?.response_format;return(0,s.isAutoParsableResponseFormat)(a)?a:null},o=function(a){var b,c,f,h;let i=p.__classPrivateFieldGet(this,g,"f"),{choices:j,...k}=a;for(let{delta:j,finish_reason:l,index:m,logprobs:o=null,...t}of(i?Object.assign(i,k):i=p.__classPrivateFieldSet(this,g,{...k,choices:[]},"f"),a.choices)){let a=i.choices[m];if(a||(a=i.choices[m]={finish_reason:l,index:m,message:{},logprobs:o,...t}),o)if(a.logprobs){let{content:d,refusal:e,...f}=o;Object.assign(a.logprobs,f),d&&((b=a.logprobs).content??(b.content=[]),a.logprobs.content.push(...d)),e&&((c=a.logprobs).refusal??(c.refusal=[]),a.logprobs.refusal.push(...e))}else a.logprobs=Object.assign({},o);if(l&&(a.finish_reason=l,p.__classPrivateFieldGet(this,e,"f")&&(0,s.hasAutoParseableInput)(p.__classPrivateFieldGet(this,e,"f")))){if("length"===l)throw new r.LengthFinishReasonError;if("content_filter"===l)throw new r.ContentFilterFinishReasonError}if(Object.assign(a,t),!j)continue;let{content:g,refusal:k,function_call:u,role:v,tool_calls:w,...x}=j;if(Object.assign(a.message,x),k&&(a.message.refusal=(a.message.refusal||"")+k),v&&(a.message.role=v),u&&(a.message.function_call?(u.name&&(a.message.function_call.name=u.name),u.arguments&&((f=a.message.function_call).arguments??(f.arguments=""),a.message.function_call.arguments+=u.arguments)):a.message.function_call=u),g&&(a.message.content=(a.message.content||"")+g,!a.message.refusal&&p.__classPrivateFieldGet(this,d,"m",n).call(this)&&(a.message.parsed=(0,q.partialParse)(a.message.content))),w)for(let{index:b,id:c,type:d,function:f,...g}of(a.message.tool_calls||(a.message.tool_calls=[]),w)){let i=(h=a.message.tool_calls)[b]??(h[b]={});Object.assign(i,g),c&&(i.id=c),d&&(i.type=d),f&&(i.function??(i.function={name:f.name??"",arguments:""})),f?.name&&(i.function.name=f.name),f?.arguments&&(i.function.arguments+=f.arguments,(0,s.shouldParseToolCall)(p.__classPrivateFieldGet(this,e,"f"),i)&&(i.function.parsed_arguments=(0,q.partialParse)(i.function.arguments)))}}return i},Symbol.asyncIterator)](){let a=[],b=[],c=!1;return this.on("chunk",c=>{let d=b.shift();d?d.resolve(c):a.push(c)}),this.on("end",()=>{for(let a of(c=!0,b))a.resolve(void 0);b.length=0}),this.on("abort",a=>{for(let d of(c=!0,b))d.reject(a);b.length=0}),this.on("error",a=>{for(let d of(c=!0,b))d.reject(a);b.length=0}),{next:async()=>a.length?{value:a.shift(),done:!1}:c?{value:void 0,done:!0}:new Promise((a,c)=>b.push({resolve:a,reject:c})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new t.Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function w(a){return JSON.stringify(a)}b.ChatCompletionStream=v},30329:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Sessions=void 0;let d=c(9173),e=c(80321);class f extends d.APIResource{create(a,b){return this._client.post("/realtime/sessions",{body:a,...b,headers:(0,e.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},b?.headers])})}}b.Sessions=f},30453:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.createForm=b.multipartFormRequestOptions=b.maybeMultipartFormRequestOptions=b.isAsyncIterable=b.checkFileSupport=void 0,b.makeFile=e,b.getName=f;let d=c(38477);function e(a,c,d){return(0,b.checkFileSupport)(),new File(a,c??"unknown_file",d)}function f(a){return("object"==typeof a&&null!==a&&("name"in a&&a.name&&String(a.name)||"url"in a&&a.url&&String(a.url)||"filename"in a&&a.filename&&String(a.filename)||"path"in a&&a.path&&String(a.path))||"").split(/[\\/]/).pop()||void 0}b.checkFileSupport=()=>{if("undefined"==typeof File){let{process:a}=globalThis;throw Error("`File` is not defined as a global, which is required for file uploads."+("string"==typeof a?.versions?.node&&20>parseInt(a.versions.node.split("."))?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}},b.isAsyncIterable=a=>null!=a&&"object"==typeof a&&"function"==typeof a[Symbol.asyncIterator];let g=async(a,c)=>k(a.body)?{...a,body:await (0,b.createForm)(a.body,c)}:a;b.maybeMultipartFormRequestOptions=g;let h=async(a,c)=>({...a,body:await (0,b.createForm)(a.body,c)});b.multipartFormRequestOptions=h;let i=new WeakMap;b.createForm=async(a,b)=>{if(!await function(a){let b="function"==typeof a?a:a.fetch,c=i.get(b);if(c)return c;let d=(async()=>{try{let a="Response"in b?b.Response:(await b("data:,")).constructor,c=new FormData;if(c.toString()===await new a(c).text())return!1;return!0}catch{return!0}})();return i.set(b,d),d}(b))throw TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let c=new FormData;return await Promise.all(Object.entries(a||{}).map(([a,b])=>l(c,a,b))),c};let j=a=>a instanceof Blob&&"name"in a,k=a=>{if((a=>"object"==typeof a&&null!==a&&(a instanceof Response||(0,b.isAsyncIterable)(a)||j(a)))(a))return!0;if(Array.isArray(a))return a.some(k);if(a&&"object"==typeof a){for(let b in a)if(k(a[b]))return!0}return!1},l=async(a,c,g)=>{if(void 0!==g){if(null==g)throw TypeError(`Received null for "${c}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof g||"number"==typeof g||"boolean"==typeof g)a.append(c,String(g));else if(g instanceof Response)a.append(c,e([await g.blob()],f(g)));else if((0,b.isAsyncIterable)(g))a.append(c,e([await new Response((0,d.ReadableStreamFrom)(g)).blob()],f(g)));else if(j(g))a.append(c,g,f(g));else if(Array.isArray(g))await Promise.all(g.map(b=>l(a,c+"[]",b)));else if("object"==typeof g)await Promise.all(Object.entries(g).map(([b,d])=>l(a,`${c}[${b}]`,d)));else throw TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${g} instead`)}}},30477:(a,b,c)=>{"use strict";c.d(b,{HG:()=>i,JE:()=>g,fH:()=>h,vF:()=>e,vV:()=>f});class d{constructor(){this.isDevelopment=!1,this.logLevel=this.isDevelopment?3:2}shouldLog(a){return a<=this.logLevel}formatLogEntry(a){let b=["ERROR","WARN","INFO","DEBUG"][a.level],c=`[${a.timestamp}] ${b}: ${a.message}`;return a.context&&Object.keys(a.context).length>0&&(c+=` | Context: ${JSON.stringify(a.context)}`),a.error&&(c+=` | Error: ${a.error.message}`,this.isDevelopment&&a.error.stack&&(c+=` | Stack: ${a.error.stack}`)),c}log(a,b,c,d){if(!this.shouldLog(a))return;let e={level:a,message:b,timestamp:new Date().toISOString(),context:c,error:d},f=this.formatLogEntry(e);0===a&&console.error(f),!this.isDevelopment&&a<=1&&this.sendToExternalService(e)}async sendToExternalService(a){}error(a,b,c){this.log(0,a,b,c)}warn(a,b){this.log(1,a,b)}info(a,b){this.log(2,a,b)}debug(a,b){this.log(3,a,b)}apiLog(a,b,c,d,e){let f=`${a} ${b} - ${c}${d?` (${d}ms)`:""}`,g=c>=500?0:c>=400?1:2;this.log(g,f,{method:a,path:b,statusCode:c,duration:d,...e})}dbLog(a,b,c,d){let e=`DB ${a} on ${b}${c?` (${c}ms)`:""}`;this.log(3,e,{operation:a,table:b,duration:c,...d})}authLog(a,b,c=!0,d){let e=`Auth ${a}${b?` for user ${b}`:""} - ${c?"SUCCESS":"FAILED"}`;this.log(c?2:1,e,{action:a,userId:b,success:c,...d})}}let e=new d,f=(a,b,c)=>{b instanceof Error?e.error(a,void 0,b):"object"==typeof b&&null!==b?e.error(a,b,c):e.error(a,void 0,c)},g=(a,b)=>e.warn(a,b),h=(a,b)=>e.info(a,b),i=(a,b,c,d,f)=>e.apiLog(a,b,c,d,f)},31946:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Chat=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(34369)),g=c(34369);class h extends e.APIResource{constructor(){super(...arguments),this.completions=new f.Completions(this._client)}}b.Chat=h,h.Completions=g.Completions},34369:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ChatCompletionRunner=b.ChatCompletionStream=b.ParsingToolFunction=b.ChatCompletionStreamingRunner=b.Completions=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(22180)),g=c(22180),h=c(73637),i=c(12998),j=c(76003),k=c(35591),l=c(30065),m=c(84630);class n extends e.APIResource{constructor(){super(...arguments),this.messages=new f.Messages(this._client)}create(a,b){return this._client.post("/chat/completions",{body:a,...b,stream:a.stream??!1})}retrieve(a,b){return this._client.get((0,i.path)`/chat/completions/${a}`,b)}update(a,b,c){return this._client.post((0,i.path)`/chat/completions/${a}`,{body:b,...c})}list(a={},b){return this._client.getAPIList("/chat/completions",h.CursorPage,{query:a,...b})}delete(a,b){return this._client.delete((0,i.path)`/chat/completions/${a}`,b)}parse(a,b){return(0,m.validateInputTools)(a.tools),this._client.chat.completions.create(a,{...b,headers:{...b?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(b=>(0,m.parseChatCompletion)(b,a))}runTools(a,b){return a.stream?k.ChatCompletionStreamingRunner.runTools(this._client,a,b):j.ChatCompletionRunner.runTools(this._client,a,b)}stream(a,b){return l.ChatCompletionStream.createChatCompletion(this._client,a,b)}}b.Completions=n;var o=c(35591);Object.defineProperty(b,"ChatCompletionStreamingRunner",{enumerable:!0,get:function(){return o.ChatCompletionStreamingRunner}});var p=c(59916);Object.defineProperty(b,"ParsingToolFunction",{enumerable:!0,get:function(){return p.ParsingToolFunction}});var q=c(30065);Object.defineProperty(b,"ChatCompletionStream",{enumerable:!0,get:function(){return q.ChatCompletionStream}});var r=c(76003);Object.defineProperty(b,"ChatCompletionRunner",{enumerable:!0,get:function(){return r.ChatCompletionRunner}}),n.Messages=g.Messages},34649:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.FallbackEncoder=void 0,b.FallbackEncoder=({headers:a,body:b})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(b)})},34850:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Beta=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(21317)),g=c(21317),h=d.__importStar(c(40029)),i=c(40029),j=d.__importStar(c(99605)),k=c(99605);class l extends e.APIResource{constructor(){super(...arguments),this.realtime=new h.Realtime(this._client),this.assistants=new f.Assistants(this._client),this.threads=new j.Threads(this._client)}}b.Beta=l,l.Realtime=i.Realtime,l.Assistants=g.Assistants,l.Threads=k.Threads},34888:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Audio=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(94686)),g=c(94686),h=d.__importStar(c(64961)),i=c(64961),j=d.__importStar(c(15772)),k=c(15772);class l extends e.APIResource{constructor(){super(...arguments),this.transcriptions=new h.Transcriptions(this._client),this.translations=new j.Translations(this._client),this.speech=new f.Speech(this._client)}}b.Audio=l,l.Transcriptions=i.Transcriptions,l.Translations=k.Translations,l.Speech=g.Speech},35591:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ChatCompletionStreamingRunner=void 0;let d=c(30065);class e extends d.ChatCompletionStream{static fromReadableStream(a){let b=new e(null);return b._run(()=>b._fromReadableStream(a)),b}static runTools(a,b,c){let d=new e(b),f={...c,headers:{...c?.headers,"X-Stainless-Helper-Method":"runTools"}};return d._run(()=>d._runTools(a,b,f)),d}}b.ChatCompletionStreamingRunner=e},37165:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.allSettledWithThrow=void 0,b.allSettledWithThrow=async a=>{let b=await Promise.allSettled(a),c=b.filter(a=>"rejected"===a.status);if(c.length){for(let a of c)console.error(a.reason);throw Error(`${c.length} promise(s) failed - see the above errors`)}let d=[];for(let a of b)"fulfilled"===a.status&&d.push(a.value);return d}},38466:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.toFloat32Array=b.fromBase64=b.toBase64=void 0;let d=c(97799),e=c(56246);b.toBase64=a=>{if(!a)return"";if(void 0!==globalThis.Buffer)return globalThis.Buffer.from(a).toString("base64");if("string"==typeof a&&(a=(0,e.encodeUTF8)(a)),"undefined"!=typeof btoa)return btoa(String.fromCharCode.apply(null,a));throw new d.OpenAIError("Cannot generate base64 string; Expected `Buffer` or `btoa` to be defined")},b.fromBase64=a=>{if(void 0!==globalThis.Buffer){let b=globalThis.Buffer.from(a,"base64");return new Uint8Array(b.buffer,b.byteOffset,b.byteLength)}if("undefined"!=typeof atob){let b=atob(a),c=new Uint8Array(b.length);for(let a=0;a<b.length;a++)c[a]=b.charCodeAt(a);return c}throw new d.OpenAIError("Cannot decode base64 string; Expected `Buffer` or `atob` to be defined")},b.toFloat32Array=a=>{if("undefined"!=typeof Buffer){let b=Buffer.from(a,"base64");return Array.from(new Float32Array(b.buffer,b.byteOffset,b.length/Float32Array.BYTES_PER_ELEMENT))}{let b=atob(a),c=b.length,d=new Uint8Array(c);for(let a=0;a<c;a++)d[a]=b.charCodeAt(a);return Array.from(new Float32Array(d.buffer))}}},38477:(a,b)=>{"use strict";function c(...a){let b=globalThis.ReadableStream;if(void 0===b)throw Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new b(...a)}async function d(a){if(null===a||"object"!=typeof a)return;if(a[Symbol.asyncIterator])return void await a[Symbol.asyncIterator]().return?.();let b=a.getReader(),c=b.cancel();b.releaseLock(),await c}Object.defineProperty(b,"__esModule",{value:!0}),b.getDefaultFetch=function(){if("undefined"!=typeof fetch)return fetch;throw Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")},b.makeReadableStream=c,b.ReadableStreamFrom=function(a){let b=Symbol.asyncIterator in a?a[Symbol.asyncIterator]():a[Symbol.iterator]();return c({start(){},async pull(a){let{done:c,value:d}=await b.next();c?a.close():a.enqueue(d)},async cancel(){await b.return?.()}})},b.ReadableStreamToAsyncIterable=function(a){if(a[Symbol.asyncIterator])return a;let b=a.getReader();return{async next(){try{let a=await b.read();return a?.done&&b.releaseLock(),a}catch(a){throw b.releaseLock(),a}},async return(){let a=b.cancel();return b.releaseLock(),await a,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}},b.CancelReadableStream=d},40029:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Realtime=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(30329)),g=c(30329),h=d.__importStar(c(78934)),i=c(78934);class j extends e.APIResource{constructor(){super(...arguments),this.sessions=new f.Sessions(this._client),this.transcriptionSessions=new h.TranscriptionSessions(this._client)}}b.Realtime=j,j.Sessions=g.Sessions,j.TranscriptionSessions=i.TranscriptionSessions},42540:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Realtime=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(30018)),g=c(30018);class h extends e.APIResource{constructor(){super(...arguments),this.clientSecrets=new f.ClientSecrets(this._client)}}b.Realtime=h,h.ClientSecrets=g.ClientSecrets},42981:(a,b,c)=>{"use strict";function d(a,b,c,d){let e,f=(globalThis.__rateLimits||(globalThis.__rateLimits=new Map),(e=globalThis.__rateLimits.get(a))||(e=new Map,globalThis.__rateLimits.set(a,e)),e),g=Date.now(),h=f.get(b);if(!h||g-h.ts>c)return f.set(b,{count:1,ts:g}),{allowed:!0,remaining:d-1};h.count+=1,h.ts=g;let i=Math.max(0,d-h.count);return{allowed:h.count<=d,remaining:i}}async function e(a,b){let c=function(a){let b=a.headers.get("x-forwarded-for");if(b)return b.split(",")[0].trim();let c=a.headers.get("x-real-ip");if(c)return c;let d=a.headers.get("cf-connecting-ip");return d||"127.0.0.1"}(a),e=d(a.url||"default",c,1e3*b.window,b.requests);return{...e,success:e.allowed}}function f(a,b,c,f){if(a instanceof Request&&"object"==typeof b)return e(a,b);if("string"==typeof a&&"string"==typeof b&&c&&f)return d(a,b,c,f);throw Error("Invalid rateLimitByIp arguments")}c.d(b,{E:()=>f})},44364:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Files=void 0;let d=c(9173),e=c(73637),f=c(80321),g=c(27426),h=c(82963),i=c(30453),j=c(12998);class k extends d.APIResource{create(a,b){return this._client.post("/files",(0,i.multipartFormRequestOptions)({body:a,...b},this._client))}retrieve(a,b){return this._client.get((0,j.path)`/files/${a}`,b)}list(a={},b){return this._client.getAPIList("/files",e.CursorPage,{query:a,...b})}delete(a,b){return this._client.delete((0,j.path)`/files/${a}`,b)}content(a,b){return this._client.get((0,j.path)`/files/${a}/content`,{...b,headers:(0,f.buildHeaders)([{Accept:"application/binary"},b?.headers]),__binaryResponse:!0})}async waitForProcessing(a,{pollInterval:b=5e3,maxWait:c=18e5}={}){let d=new Set(["processed","error","deleted"]),e=Date.now(),f=await this.retrieve(a);for(;!f.status||!d.has(f.status);)if(await (0,g.sleep)(b),f=await this.retrieve(a),Date.now()-e>c)throw new h.APIConnectionTimeoutError({message:`Giving up on waiting for file ${a} to finish processing after ${c} milliseconds.`});return f}}b.Files=k},44870:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},46321:(a,b,c)=>{"use strict";var d;Object.defineProperty(b,"__esModule",{value:!0}),b.APIPromise=void 0;let e=c(73555),f=c(84419);class g extends Promise{constructor(a,b,c=f.defaultParseResponse){super(a=>{a(null)}),this.responsePromise=b,this.parseResponse=c,d.set(this,void 0),e.__classPrivateFieldSet(this,d,a,"f")}_thenUnwrap(a){return new g(e.__classPrivateFieldGet(this,d,"f"),this.responsePromise,async(b,c)=>(0,f.addRequestID)(a(await this.parseResponse(b,c),c),c.response))}asResponse(){return this.responsePromise.then(a=>a.response)}async withResponse(){let[a,b]=await Promise.all([this.parse(),this.asResponse()]);return{data:a,response:b,request_id:b.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(a=>this.parseResponse(e.__classPrivateFieldGet(this,d,"f"),a))),this.parsedPromise}then(a,b){return this.parse().then(a,b)}catch(a){return this.parse().catch(a)}finally(a){return this.parse().finally(a)}}b.APIPromise=g,d=new WeakMap},48193:(a,b,c)=>{"use strict";var d;Object.defineProperty(b,"__esModule",{value:!0}),b.Stream=void 0,b._iterSSEMessages=o;let e=c(73555),f=c(97799),g=c(38477),h=c(719),i=c(38477),j=c(58512),k=c(56246),l=c(65435),m=c(97799);class n{constructor(a,b,c){this.iterator=a,d.set(this,void 0),this.controller=b,e.__classPrivateFieldSet(this,d,c,"f")}static fromSSEResponse(a,b,c){let d=!1,e=c?(0,l.loggerFor)(c):console;async function*g(){if(d)throw new f.OpenAIError("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");d=!0;let c=!1;try{for await(let d of o(a,b))if(!c){if(d.data.startsWith("[DONE]")){c=!0;continue}if(null!==d.event&&d.event.startsWith("thread.")){let a;try{a=JSON.parse(d.data)}catch(a){throw console.error("Could not parse message into JSON:",d.data),console.error("From chunk:",d.raw),a}if("error"==d.event)throw new m.APIError(void 0,a.error,a.message,void 0);yield{event:d.event,data:a}}else{let b;try{b=JSON.parse(d.data)}catch(a){throw e.error("Could not parse message into JSON:",d.data),e.error("From chunk:",d.raw),a}if(b&&b.error)throw new m.APIError(void 0,b.error,void 0,a.headers);yield b}}c=!0}catch(a){if((0,j.isAbortError)(a))return;throw a}finally{c||b.abort()}}return new n(g,b,c)}static fromReadableStream(a,b,c){let d=!1;async function*e(){let b=new h.LineDecoder;for await(let c of(0,i.ReadableStreamToAsyncIterable)(a))for(let a of b.decode(c))yield a;for(let a of b.flush())yield a}return new n(async function*(){if(d)throw new f.OpenAIError("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");d=!0;let a=!1;try{for await(let b of e())!a&&b&&(yield JSON.parse(b));a=!0}catch(a){if((0,j.isAbortError)(a))return;throw a}finally{a||b.abort()}},b,c)}[(d=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let a=[],b=[],c=this.iterator(),f=d=>({next:()=>{if(0===d.length){let d=c.next();a.push(d),b.push(d)}return d.shift()}});return[new n(()=>f(a),this.controller,e.__classPrivateFieldGet(this,d,"f")),new n(()=>f(b),this.controller,e.__classPrivateFieldGet(this,d,"f"))]}toReadableStream(){let a,b=this;return(0,g.makeReadableStream)({async start(){a=b[Symbol.asyncIterator]()},async pull(b){try{let{value:c,done:d}=await a.next();if(d)return b.close();let e=(0,k.encodeUTF8)(JSON.stringify(c)+"\n");b.enqueue(e)}catch(a){b.error(a)}},async cancel(){await a.return?.()}})}}async function*o(a,b){if(!a.body){if(b.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new f.OpenAIError("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new f.OpenAIError("Attempted to iterate over a response with no body")}let c=new q,d=new h.LineDecoder;for await(let b of p((0,i.ReadableStreamToAsyncIterable)(a.body)))for(let a of d.decode(b)){let b=c.decode(a);b&&(yield b)}for(let a of d.flush()){let b=c.decode(a);b&&(yield b)}}async function*p(a){let b=new Uint8Array;for await(let c of a){let a;if(null==c)continue;let d=c instanceof ArrayBuffer?new Uint8Array(c):"string"==typeof c?(0,k.encodeUTF8)(c):c,e=new Uint8Array(b.length+d.length);for(e.set(b),e.set(d,b.length),b=e;-1!==(a=(0,h.findDoubleNewlineIndex)(b));)yield b.slice(0,a),b=b.slice(a)}b.length>0&&(yield b)}b.Stream=n;class q{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(a){if(a.endsWith("\r")&&(a=a.substring(0,a.length-1)),!a){if(!this.event&&!this.data.length)return null;let a={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(a),a.startsWith(":"))return null;let[b,c,d]=function(a,b){let c=a.indexOf(":");return -1!==c?[a.substring(0,c),b,a.substring(c+b.length)]:[a,"",""]}(a,":");return d.startsWith(" ")&&(d=d.substring(1)),"event"===b?this.event=d:"data"===b&&this.data.push(d),null}}},55546:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Messages=b.Completions=void 0;let d=c(73555);var e=c(34369);Object.defineProperty(b,"Completions",{enumerable:!0,get:function(){return e.Completions}}),d.__exportStar(c(34369),b);var f=c(22180);Object.defineProperty(b,"Messages",{enumerable:!0,get:function(){return f.Messages}})},56246:(a,b)=>{"use strict";let c,d;Object.defineProperty(b,"__esModule",{value:!0}),b.concatBytes=function(a){let b=0;for(let c of a)b+=c.length;let c=new Uint8Array(b),d=0;for(let b of a)c.set(b,d),d+=b.length;return c},b.encodeUTF8=function(a){let b;return(c??(c=(b=new globalThis.TextEncoder).encode.bind(b)))(a)},b.decodeUTF8=function(a){let b;return(d??(d=(b=new globalThis.TextDecoder).decode.bind(b)))(a)}},57277:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Embeddings=void 0;let d=c(9173),e=c(78473);class f extends d.APIResource{create(a,b){let c=!!a.encoding_format,d=c?a.encoding_format:"base64";c&&(0,e.loggerFor)(this._client).debug("embeddings/user defined encoding_format:",a.encoding_format);let f=this._client.post("/embeddings",{body:{...a,encoding_format:d},...b});return c?f:((0,e.loggerFor)(this._client).debug("embeddings/decoding base64 embeddings from base64"),f._thenUnwrap(a=>(a&&a.data&&a.data.forEach(a=>{let b=a.embedding;a.embedding=(0,e.toFloat32Array)(b)}),a)))}}b.Embeddings=f},57461:(a,b,c)=>{"use strict";c.r(b),c.d(b,{handler:()=>H,patchFetch:()=>G,routeModule:()=>C,serverHooks:()=>F,workAsyncStorage:()=>D,workUnitAsyncStorage:()=>E});var d={};c.r(d),c.d(d,{POST:()=>B,dynamic:()=>z});var e=c(95736),f=c(9117),g=c(4044),h=c(39326),i=c(32324),j=c(261),k=c(54290),l=c(85328),m=c(38928),n=c(46595),o=c(3421),p=c(17679),q=c(41681),r=c(63446),s=c(86439),t=c(51356),u=c(30477),v=c(10641),w=c(74291),x=c(42981),y=c(2995);let z="force-dynamic";async function A(a,b,c,d){let e=`Create a professional logo for "${b}" in ${c} style. ${d}. The logo should be simple, memorable, and suitable for business use. Use clean lines and modern design principles. The logo should work well in both color and black & white.`;return{url:(await a.images.generate({model:"dall-e-3",prompt:e,n:1,size:"1024x1024",quality:"standard",style:"natural"})).data[0].url}}async function B(a){try{let b=a.headers.get("x-forwarded-for")||"unknown",{allowed:d}=(0,x.E)("brand:generate-logo",b,3e4,20);if(!d)return v.NextResponse.json({error:"Too many requests"},{status:429});let{user:e,error:f}=await (0,w.authenticateRequest)();if(f||!e)return v.NextResponse.json({error:"Unauthorized"},{status:401});let g=y.Ik({brandName:y.Yj().min(1,"Brand name is required"),style:y.Yj().optional()}).safeParse(await a.json());if(!g.success)return v.NextResponse.json({error:"Invalid payload",details:g.error.flatten()},{status:400});let{brandName:h,style:i}=g.data;if(process.env.OPENAI_API_KEY)try{let a=new(c(86837)).OpenAI({apiKey:process.env.OPENAI_API_KEY}),b=[A(a,h,i||"modern","clean and professional"),A(a,h,i||"elegant","sophisticated and refined"),A(a,h,i||"bold","dynamic and impactful")],d=(await Promise.allSettled(b)).filter(a=>"fulfilled"===a.status).map((a,b)=>({id:b+1,url:a.value.url,style:[i||"modern",i||"elegant",i||"bold"][b],description:["Modern logo design","Elegant logo design","Bold logo design"][b],generated:!0}));if(d.length>0)return v.NextResponse.json({logos:d,isFallback:!1,generatedBy:"OpenAI DALL-E"},{status:200})}catch(a){(0,u.vV)("OpenAI logo generation failed:",a)}let j=(a,b,c)=>{let d=a.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2),e="";switch(b){case"modern":e=`
            <svg width="300" height="100" viewBox="0 0 300 100" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:${c.accent};stop-opacity:1" />
                  <stop offset="100%" style="stop-color:${c.bg};stop-opacity:1" />
                </linearGradient>
              </defs>
              <rect width="300" height="100" fill="${c.bg}" rx="8"/>
              <circle cx="50" cy="50" r="30" fill="url(#grad1)"/>
              <text x="50" y="57" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="20" font-weight="bold">${d}</text>
              <text x="100" y="40" fill="${c.text}" font-family="Arial, sans-serif" font-size="24" font-weight="bold">${a}</text>
              <text x="100" y="60" fill="${c.text}" font-family="Arial, sans-serif" font-size="12" opacity="0.7">BRAND</text>
            </svg>
          `;break;case"elegant":e=`
            <svg width="300" height="100" viewBox="0 0 300 100" xmlns="http://www.w3.org/2000/svg">
              <rect width="300" height="100" fill="${c.bg}"/>
              <rect x="20" y="20" width="60" height="60" fill="none" stroke="${c.accent}" stroke-width="2" rx="4"/>
              <text x="50" y="58" text-anchor="middle" fill="${c.accent}" font-family="serif" font-size="24" font-weight="bold">${d}</text>
              <text x="100" y="45" fill="${c.text}" font-family="serif" font-size="28" font-weight="300">${a}</text>
              <line x1="100" y1="55" x2="280" y2="55" stroke="${c.accent}" stroke-width="1"/>
            </svg>
          `;break;default:e=`
            <svg width="300" height="100" viewBox="0 0 300 100" xmlns="http://www.w3.org/2000/svg">
              <rect width="300" height="100" fill="${c.bg}"/>
              <rect x="20" y="25" width="50" height="50" fill="${c.accent}" rx="8"/>
              <text x="45" y="58" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="18" font-weight="bold">${d}</text>
              <text x="90" y="45" fill="${c.text}" font-family="Arial, sans-serif" font-size="22" font-weight="900">${a.toUpperCase()}</text>
              <rect x="90" y="55" width="180" height="3" fill="${c.accent}"/>
            </svg>
          `}return`data:image/svg+xml;base64,${Buffer.from(e).toString("base64")}`},k=[{id:1,url:j(h,"modern",{bg:"#f8fafc",text:"#1e293b",accent:"#3b82f6"}),style:"modern",description:"Modern logo design",generated:!0},{id:2,url:j(h,"elegant",{bg:"#fefefe",text:"#374151",accent:"#7c3aed"}),style:"elegant",description:"Elegant logo design",generated:!0},{id:3,url:j(h,"bold",{bg:"#0f172a",text:"#ffffff",accent:"#ef4444"}),style:"bold",description:"Bold logo design",generated:!0}];return v.NextResponse.json({logos:k,isFallback:!0,fallbackReason:process.env.OPENAI_API_KEY?"AI service temporarily unavailable":"OpenAI API key not configured"},{status:200})}catch(a){return(0,u.vV)("Error generating logos:",a),v.NextResponse.json({error:"Failed to generate logos"},{status:500})}}let C=new e.AppRouteRouteModule({definition:{kind:f.RouteKind.APP_ROUTE,page:"/api/generate-logo/route",pathname:"/api/generate-logo",filename:"route",bundlePath:"app/api/generate-logo/route"},distDir:".next",relativeProjectDir:"",resolvedPagePath:"C:\\Users\\prett\\Desktop\\SoloSuccess AI\\app\\api\\generate-logo\\route.ts",nextConfigOutput:"standalone",userland:d}),{workAsyncStorage:D,workUnitAsyncStorage:E,serverHooks:F}=C;function G(){return(0,g.patchFetch)({workAsyncStorage:D,workUnitAsyncStorage:E})}async function H(a,b,c){var d;let e="/api/generate-logo/route";"/index"===e&&(e="/");let g=await C.prepare(a,b,{srcPage:e,multiZoneDraftMode:!1});if(!g)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:u,params:v,nextConfig:w,isDraftMode:x,prerenderManifest:y,routerServerContext:z,isOnDemandRevalidate:A,revalidateOnlyGenerated:B,resolvedPathname:D}=g,E=(0,j.normalizeAppPath)(e),F=!!(y.dynamicRoutes[E]||y.routes[D]);if(F&&!x){let a=!!y.routes[D],b=y.dynamicRoutes[E];if(b&&!1===b.fallback&&!a)throw new s.NoFallbackError}let G=null;!F||C.isDev||x||(G="/index"===(G=D)?"/":G);let H=!0===C.isDev||!F,I=F&&!H,J=a.method||"GET",K=(0,i.getTracer)(),L=K.getActiveScopeSpan(),M={params:v,prerenderManifest:y,renderOpts:{experimental:{cacheComponents:!!w.experimental.cacheComponents,authInterrupts:!!w.experimental.authInterrupts},supportsDynamicResponse:H,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:null==(d=w.experimental)?void 0:d.cacheLife,isRevalidate:I,waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:void 0,onInstrumentationRequestError:(b,c,d)=>C.onRequestError(a,b,d,z)},sharedContext:{buildId:u}},N=new k.NodeNextRequest(a),O=new k.NodeNextResponse(b),P=l.NextRequestAdapter.fromNodeNextRequest(N,(0,l.signalFromNodeResponse)(b));try{let d=async c=>C.handle(P,M).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=K.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==m.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${J} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${J} ${a.url}`)}),g=async g=>{var i,j;let k=async({previousCacheEntry:f})=>{try{if(!(0,h.getRequestMeta)(a,"minimalMode")&&A&&B&&!f)return b.statusCode=404,b.setHeader("x-nextjs-cache","REVALIDATED"),b.end("This page could not be found"),null;let e=await d(g);a.fetchMetrics=M.renderOpts.fetchMetrics;let i=M.renderOpts.pendingWaitUntil;i&&c.waitUntil&&(c.waitUntil(i),i=void 0);let j=M.renderOpts.collectedTags;if(!F)return await (0,o.I)(N,O,e,M.renderOpts.pendingWaitUntil),null;{let a=await e.blob(),b=(0,p.toNodeOutgoingHttpHeaders)(e.headers);j&&(b[r.NEXT_CACHE_TAGS_HEADER]=j),!b["content-type"]&&a.type&&(b["content-type"]=a.type);let c=void 0!==M.renderOpts.collectedRevalidate&&!(M.renderOpts.collectedRevalidate>=r.INFINITE_CACHE)&&M.renderOpts.collectedRevalidate,d=void 0===M.renderOpts.collectedExpire||M.renderOpts.collectedExpire>=r.INFINITE_CACHE?void 0:M.renderOpts.collectedExpire;return{value:{kind:t.CachedRouteKind.APP_ROUTE,status:e.status,body:Buffer.from(await a.arrayBuffer()),headers:b},cacheControl:{revalidate:c,expire:d}}}}catch(b){throw(null==f?void 0:f.isStale)&&await C.onRequestError(a,b,{routerKind:"App Router",routePath:e,routeType:"route",revalidateReason:(0,n.c)({isRevalidate:I,isOnDemandRevalidate:A})},z),b}},l=await C.handleResponse({req:a,nextConfig:w,cacheKey:G,routeKind:f.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:y,isRoutePPREnabled:!1,isOnDemandRevalidate:A,revalidateOnlyGenerated:B,responseGenerator:k,waitUntil:c.waitUntil});if(!F)return null;if((null==l||null==(i=l.value)?void 0:i.kind)!==t.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==l||null==(j=l.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,h.getRequestMeta)(a,"minimalMode")||b.setHeader("x-nextjs-cache",A?"REVALIDATED":l.isMiss?"MISS":l.isStale?"STALE":"HIT"),x&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let m=(0,p.fromNodeOutgoingHttpHeaders)(l.value.headers);return(0,h.getRequestMeta)(a,"minimalMode")&&F||m.delete(r.NEXT_CACHE_TAGS_HEADER),!l.cacheControl||b.getHeader("Cache-Control")||m.get("Cache-Control")||m.set("Cache-Control",(0,q.getCacheControlHeader)(l.cacheControl)),await (0,o.I)(N,O,new Response(l.value.body,{headers:m,status:l.value.status||200})),null};L?await g(L):await K.withPropagatedContext(a.headers,()=>K.trace(m.BaseServerSpan.handleRequest,{spanName:`${J} ${a.url}`,kind:i.SpanKind.SERVER,attributes:{"http.method":J,"http.target":a.url}},g))}catch(b){if(L||b instanceof s.NoFallbackError||await C.onRequestError(a,b,{routerKind:"App Router",routePath:E,routeType:"route",revalidateReason:(0,n.c)({isRevalidate:I,isOnDemandRevalidate:A})}),F)throw b;return await (0,o.I)(N,O,new Response(null,{status:500})),null}}},57945:(a,b,c)=>{"use strict";let d;Object.defineProperty(b,"__esModule",{value:!0}),b.stringify=function(a,b={}){let c,d=a,l=function(a=j){let b;if(void 0!==a.allowEmptyArrays&&"boolean"!=typeof a.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==a.encodeDotInKeys&&"boolean"!=typeof a.encodeDotInKeys)throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw TypeError("Encoder has to be a function.");let c=a.charset||j.charset;if(void 0!==a.charset&&"utf-8"!==a.charset&&"iso-8859-1"!==a.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let d=f.default_format;if(void 0!==a.format){if(!(0,e.has)(f.formatters,a.format))throw TypeError("Unknown format option provided.");d=a.format}let i=f.formatters[d],k=j.filter;if(("function"==typeof a.filter||(0,g.isArray)(a.filter))&&(k=a.filter),b=a.arrayFormat&&a.arrayFormat in h?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":j.arrayFormat,"commaRoundTrip"in a&&"boolean"!=typeof a.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");let l=void 0===a.allowDots?!0==!!a.encodeDotInKeys||j.allowDots:!!a.allowDots;return{addQueryPrefix:"boolean"==typeof a.addQueryPrefix?a.addQueryPrefix:j.addQueryPrefix,allowDots:l,allowEmptyArrays:"boolean"==typeof a.allowEmptyArrays?!!a.allowEmptyArrays:j.allowEmptyArrays,arrayFormat:b,charset:c,charsetSentinel:"boolean"==typeof a.charsetSentinel?a.charsetSentinel:j.charsetSentinel,commaRoundTrip:!!a.commaRoundTrip,delimiter:void 0===a.delimiter?j.delimiter:a.delimiter,encode:"boolean"==typeof a.encode?a.encode:j.encode,encodeDotInKeys:"boolean"==typeof a.encodeDotInKeys?a.encodeDotInKeys:j.encodeDotInKeys,encoder:"function"==typeof a.encoder?a.encoder:j.encoder,encodeValuesOnly:"boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:j.encodeValuesOnly,filter:k,format:d,formatter:i,serializeDate:"function"==typeof a.serializeDate?a.serializeDate:j.serializeDate,skipNulls:"boolean"==typeof a.skipNulls?a.skipNulls:j.skipNulls,sort:"function"==typeof a.sort?a.sort:null,strictNullHandling:"boolean"==typeof a.strictNullHandling?a.strictNullHandling:j.strictNullHandling}}(b);"function"==typeof l.filter?d=(0,l.filter)("",d):(0,g.isArray)(l.filter)&&(c=l.filter);let m=[];if("object"!=typeof d||null===d)return"";let n=h[l.arrayFormat],o="comma"===n&&l.commaRoundTrip;c||(c=Object.keys(d)),l.sort&&c.sort(l.sort);let p=new WeakMap;for(let a=0;a<c.length;++a){let b=c[a];l.skipNulls&&null===d[b]||i(m,function a(b,c,d,f,h,l,m,n,o,p,q,r,s,t,u,v,w,x){var y;let z,A=b,B=x,C=0,D=!1;for(;void 0!==(B=B.get(k))&&!D;){let a=B.get(b);if(C+=1,void 0!==a)if(a===C)throw RangeError("Cyclic object value");else D=!0;void 0===B.get(k)&&(C=0)}if("function"==typeof p?A=p(c,A):A instanceof Date?A=s?.(A):"comma"===d&&(0,g.isArray)(A)&&(A=(0,e.maybe_map)(A,function(a){return a instanceof Date?s?.(a):a})),null===A){if(l)return o&&!v?o(c,j.encoder,w,"key",t):c;A=""}if("string"==typeof(y=A)||"number"==typeof y||"boolean"==typeof y||"symbol"==typeof y||"bigint"==typeof y||(0,e.is_buffer)(A)){if(o){let a=v?c:o(c,j.encoder,w,"key",t);return[u?.(a)+"="+u?.(o(A,j.encoder,w,"value",t))]}return[u?.(c)+"="+u?.(String(A))]}let E=[];if(void 0===A)return E;if("comma"===d&&(0,g.isArray)(A))v&&o&&(A=(0,e.maybe_map)(A,o)),z=[{value:A.length>0?A.join(",")||null:void 0}];else if((0,g.isArray)(p))z=p;else{let a=Object.keys(A);z=q?a.sort(q):a}let F=n?String(c).replace(/\./g,"%2E"):String(c),G=f&&(0,g.isArray)(A)&&1===A.length?F+"[]":F;if(h&&(0,g.isArray)(A)&&0===A.length)return G+"[]";for(let c=0;c<z.length;++c){let e=z[c],j="object"==typeof e&&void 0!==e.value?e.value:A[e];if(m&&null===j)continue;let y=r&&n?e.replace(/\./g,"%2E"):e,B=(0,g.isArray)(A)?"function"==typeof d?d(G,y):G:G+(r?"."+y:"["+y+"]");x.set(b,C);let D=new WeakMap;D.set(k,x),i(E,a(j,B,d,f,h,l,m,n,"comma"===d&&v&&(0,g.isArray)(A)?null:o,p,q,r,s,t,u,v,w,D))}return E}(d[b],b,n,o,l.allowEmptyArrays,l.strictNullHandling,l.skipNulls,l.encodeDotInKeys,l.encode?l.encoder:null,l.filter,l.sort,l.allowDots,l.serializeDate,l.format,l.formatter,l.encodeValuesOnly,l.charset,p))}let q=m.join(l.delimiter),r=!0===l.addQueryPrefix?"?":"";return l.charsetSentinel&&("iso-8859-1"===l.charset?r+="utf8=%26%2310003%3B&":r+="utf8=%E2%9C%93&"),q.length>0?r+q:""};let e=c(12981),f=c(15900),g=c(28491),h={brackets:a=>String(a)+"[]",comma:"comma",indices:(a,b)=>String(a)+"["+b+"]",repeat:a=>String(a)},i=function(a,b){Array.prototype.push.apply(a,(0,g.isArray)(b)?b:[b])},j={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,format:f.default_format,formatter:f.default_formatter,indices:!1,serializeDate:a=>(d??(d=Function.prototype.call.bind(Date.prototype.toISOString)))(a),skipNulls:!1,strictNullHandling:!1},k={}},58512:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.castToError=void 0,b.isAbortError=function(a){return"object"==typeof a&&null!==a&&("name"in a&&"AbortError"===a.name||"message"in a&&String(a.message).includes("FetchRequestCanceledException"))},b.castToError=a=>{if(a instanceof Error)return a;if("object"==typeof a&&null!==a){try{if("[object Error]"===Object.prototype.toString.call(a)){let b=Error(a.message,a.cause?{cause:a.cause}:{});return a.stack&&(b.stack=a.stack),a.cause&&!b.cause&&(b.cause=a.cause),a.name&&(b.name=a.name),b}}catch{}try{return Error(JSON.stringify(a))}catch{}}return Error(a)}},58542:(a,b,c)=>{"use strict";let d;Object.defineProperty(b,"__esModule",{value:!0}),b.getPlatformHeaders=b.isRunningInBrowser=void 0;let e=c(94749);b.isRunningInBrowser=()=>"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator;let f=a=>"x32"===a?"x32":"x86_64"===a||"x64"===a?"x64":"arm"===a?"arm":"aarch64"===a||"arm64"===a?"arm64":a?`other:${a}`:"unknown",g=a=>(a=a.toLowerCase()).includes("ios")?"iOS":"android"===a?"Android":"darwin"===a?"MacOS":"win32"===a?"Windows":"freebsd"===a?"FreeBSD":"openbsd"===a?"OpenBSD":"linux"===a?"Linux":a?`Other:${a}`:"Unknown";b.getPlatformHeaders=()=>d??(d=(()=>{let a="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===a)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e.VERSION,"X-Stainless-OS":g(Deno.build.os),"X-Stainless-Arch":f(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===a)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e.VERSION,"X-Stainless-OS":g(globalThis.process.platform??"unknown"),"X-Stainless-Arch":f(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let b=function(){if("undefined"==typeof navigator||!navigator)return null;for(let{key:a,pattern:b}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let c=b.exec(navigator.userAgent);if(c){let b=c[1]||0,d=c[2]||0,e=c[3]||0;return{browser:a,version:`${b}.${d}.${e}`}}}return null}();return b?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${b.browser}`,"X-Stainless-Runtime-Version":b.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})())},58549:(a,b,c)=>{"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;Object.defineProperty(b,"__esModule",{value:!0}),b.AssistantStream=void 0;let A=c(73555),B=c(16453),C=c(82963),D=c(86773),E=c(78473);class F extends D.EventStream{constructor(){super(...arguments),d.add(this),f.set(this,[]),g.set(this,{}),h.set(this,{}),i.set(this,void 0),j.set(this,void 0),k.set(this,void 0),l.set(this,void 0),m.set(this,void 0),n.set(this,void 0),o.set(this,void 0),p.set(this,void 0),q.set(this,void 0)}[(f=new WeakMap,g=new WeakMap,h=new WeakMap,i=new WeakMap,j=new WeakMap,k=new WeakMap,l=new WeakMap,m=new WeakMap,n=new WeakMap,o=new WeakMap,p=new WeakMap,q=new WeakMap,d=new WeakSet,Symbol.asyncIterator)](){let a=[],b=[],c=!1;return this.on("event",c=>{let d=b.shift();d?d.resolve(c):a.push(c)}),this.on("end",()=>{for(let a of(c=!0,b))a.resolve(void 0);b.length=0}),this.on("abort",a=>{for(let d of(c=!0,b))d.reject(a);b.length=0}),this.on("error",a=>{for(let d of(c=!0,b))d.reject(a);b.length=0}),{next:async()=>a.length?{value:a.shift(),done:!1}:c?{value:void 0,done:!0}:new Promise((a,c)=>b.push({resolve:a,reject:c})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(a){let b=new e;return b._run(()=>b._fromReadableStream(a)),b}async _fromReadableStream(a,b){let c=b?.signal;c&&(c.aborted&&this.controller.abort(),c.addEventListener("abort",()=>this.controller.abort())),this._connected();let e=B.Stream.fromReadableStream(a,this.controller);for await(let a of e)A.__classPrivateFieldGet(this,d,"m",r).call(this,a);if(e.controller.signal?.aborted)throw new C.APIUserAbortError;return this._addRun(A.__classPrivateFieldGet(this,d,"m",s).call(this))}toReadableStream(){return new B.Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(a,b,c,d){let f=new e;return f._run(()=>f._runToolAssistantStream(a,b,c,{...d,headers:{...d?.headers,"X-Stainless-Helper-Method":"stream"}})),f}async _createToolAssistantStream(a,b,c,e){let f=e?.signal;f&&(f.aborted&&this.controller.abort(),f.addEventListener("abort",()=>this.controller.abort()));let g={...c,stream:!0},h=await a.submitToolOutputs(b,g,{...e,signal:this.controller.signal});for await(let a of(this._connected(),h))A.__classPrivateFieldGet(this,d,"m",r).call(this,a);if(h.controller.signal?.aborted)throw new C.APIUserAbortError;return this._addRun(A.__classPrivateFieldGet(this,d,"m",s).call(this))}static createThreadAssistantStream(a,b,c){let d=new e;return d._run(()=>d._threadAssistantStream(a,b,{...c,headers:{...c?.headers,"X-Stainless-Helper-Method":"stream"}})),d}static createAssistantStream(a,b,c,d){let f=new e;return f._run(()=>f._runAssistantStream(a,b,c,{...d,headers:{...d?.headers,"X-Stainless-Helper-Method":"stream"}})),f}currentEvent(){return A.__classPrivateFieldGet(this,o,"f")}currentRun(){return A.__classPrivateFieldGet(this,p,"f")}currentMessageSnapshot(){return A.__classPrivateFieldGet(this,i,"f")}currentRunStepSnapshot(){return A.__classPrivateFieldGet(this,q,"f")}async finalRunSteps(){return await this.done(),Object.values(A.__classPrivateFieldGet(this,g,"f"))}async finalMessages(){return await this.done(),Object.values(A.__classPrivateFieldGet(this,h,"f"))}async finalRun(){if(await this.done(),!A.__classPrivateFieldGet(this,j,"f"))throw Error("Final run was not received.");return A.__classPrivateFieldGet(this,j,"f")}async _createThreadAssistantStream(a,b,c){let e=c?.signal;e&&(e.aborted&&this.controller.abort(),e.addEventListener("abort",()=>this.controller.abort()));let f={...b,stream:!0},g=await a.createAndRun(f,{...c,signal:this.controller.signal});for await(let a of(this._connected(),g))A.__classPrivateFieldGet(this,d,"m",r).call(this,a);if(g.controller.signal?.aborted)throw new C.APIUserAbortError;return this._addRun(A.__classPrivateFieldGet(this,d,"m",s).call(this))}async _createAssistantStream(a,b,c,e){let f=e?.signal;f&&(f.aborted&&this.controller.abort(),f.addEventListener("abort",()=>this.controller.abort()));let g={...c,stream:!0},h=await a.create(b,g,{...e,signal:this.controller.signal});for await(let a of(this._connected(),h))A.__classPrivateFieldGet(this,d,"m",r).call(this,a);if(h.controller.signal?.aborted)throw new C.APIUserAbortError;return this._addRun(A.__classPrivateFieldGet(this,d,"m",s).call(this))}static accumulateDelta(a,b){for(let[c,d]of Object.entries(b)){if(!a.hasOwnProperty(c)){a[c]=d;continue}let b=a[c];if(null==b||"index"===c||"type"===c){a[c]=d;continue}if("string"==typeof b&&"string"==typeof d)b+=d;else if("number"==typeof b&&"number"==typeof d)b+=d;else if((0,E.isObj)(b)&&(0,E.isObj)(d))b=this.accumulateDelta(b,d);else if(Array.isArray(b)&&Array.isArray(d)){if(b.every(a=>"string"==typeof a||"number"==typeof a)){b.push(...d);continue}for(let a of d){if(!(0,E.isObj)(a))throw Error(`Expected array delta entry to be an object but got: ${a}`);let c=a.index;if(null==c)throw console.error(a),Error("Expected array delta entry to have an `index` property");if("number"!=typeof c)throw Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);let d=b[c];null==d?b.push(a):b[c]=this.accumulateDelta(d,a)}continue}else throw Error(`Unhandled record type: ${c}, deltaValue: ${d}, accValue: ${b}`);a[c]=b}return a}_addRun(a){return a}async _threadAssistantStream(a,b,c){return await this._createThreadAssistantStream(b,a,c)}async _runAssistantStream(a,b,c,d){return await this._createAssistantStream(b,a,c,d)}async _runToolAssistantStream(a,b,c,d){return await this._createToolAssistantStream(b,a,c,d)}}b.AssistantStream=F,e=F,r=function(a){if(!this.ended)switch(A.__classPrivateFieldSet(this,o,a,"f"),A.__classPrivateFieldGet(this,d,"m",v).call(this,a),a.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":A.__classPrivateFieldGet(this,d,"m",z).call(this,a);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":A.__classPrivateFieldGet(this,d,"m",u).call(this,a);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":A.__classPrivateFieldGet(this,d,"m",t).call(this,a);break;case"error":throw Error("Encountered an error event in event processing - errors should be processed earlier")}},s=function(){if(this.ended)throw new C.OpenAIError("stream has ended, this shouldn't happen");if(!A.__classPrivateFieldGet(this,j,"f"))throw Error("Final run has not been received");return A.__classPrivateFieldGet(this,j,"f")},t=function(a){let[b,c]=A.__classPrivateFieldGet(this,d,"m",x).call(this,a,A.__classPrivateFieldGet(this,i,"f"));for(let a of(A.__classPrivateFieldSet(this,i,b,"f"),A.__classPrivateFieldGet(this,h,"f")[b.id]=b,c)){let c=b.content[a.index];c?.type=="text"&&this._emit("textCreated",c.text)}switch(a.event){case"thread.message.created":this._emit("messageCreated",a.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",a.data.delta,b),a.data.delta.content)for(let c of a.data.delta.content){if("text"==c.type&&c.text){let a=c.text,d=b.content[c.index];if(d&&"text"==d.type)this._emit("textDelta",a,d.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(c.index!=A.__classPrivateFieldGet(this,k,"f")){if(A.__classPrivateFieldGet(this,l,"f"))switch(A.__classPrivateFieldGet(this,l,"f").type){case"text":this._emit("textDone",A.__classPrivateFieldGet(this,l,"f").text,A.__classPrivateFieldGet(this,i,"f"));break;case"image_file":this._emit("imageFileDone",A.__classPrivateFieldGet(this,l,"f").image_file,A.__classPrivateFieldGet(this,i,"f"))}A.__classPrivateFieldSet(this,k,c.index,"f")}A.__classPrivateFieldSet(this,l,b.content[c.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==A.__classPrivateFieldGet(this,k,"f")){let b=a.data.content[A.__classPrivateFieldGet(this,k,"f")];if(b)switch(b.type){case"image_file":this._emit("imageFileDone",b.image_file,A.__classPrivateFieldGet(this,i,"f"));break;case"text":this._emit("textDone",b.text,A.__classPrivateFieldGet(this,i,"f"))}}A.__classPrivateFieldGet(this,i,"f")&&this._emit("messageDone",a.data),A.__classPrivateFieldSet(this,i,void 0,"f")}},u=function(a){let b=A.__classPrivateFieldGet(this,d,"m",w).call(this,a);switch(A.__classPrivateFieldSet(this,q,b,"f"),a.event){case"thread.run.step.created":this._emit("runStepCreated",a.data);break;case"thread.run.step.delta":let c=a.data.delta;if(c.step_details&&"tool_calls"==c.step_details.type&&c.step_details.tool_calls&&"tool_calls"==b.step_details.type)for(let a of c.step_details.tool_calls)a.index==A.__classPrivateFieldGet(this,m,"f")?this._emit("toolCallDelta",a,b.step_details.tool_calls[a.index]):(A.__classPrivateFieldGet(this,n,"f")&&this._emit("toolCallDone",A.__classPrivateFieldGet(this,n,"f")),A.__classPrivateFieldSet(this,m,a.index,"f"),A.__classPrivateFieldSet(this,n,b.step_details.tool_calls[a.index],"f"),A.__classPrivateFieldGet(this,n,"f")&&this._emit("toolCallCreated",A.__classPrivateFieldGet(this,n,"f")));this._emit("runStepDelta",a.data.delta,b);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":A.__classPrivateFieldSet(this,q,void 0,"f"),"tool_calls"==a.data.step_details.type&&A.__classPrivateFieldGet(this,n,"f")&&(this._emit("toolCallDone",A.__classPrivateFieldGet(this,n,"f")),A.__classPrivateFieldSet(this,n,void 0,"f")),this._emit("runStepDone",a.data,b)}},v=function(a){A.__classPrivateFieldGet(this,f,"f").push(a),this._emit("event",a)},w=function(a){switch(a.event){case"thread.run.step.created":return A.__classPrivateFieldGet(this,g,"f")[a.data.id]=a.data,a.data;case"thread.run.step.delta":let b=A.__classPrivateFieldGet(this,g,"f")[a.data.id];if(!b)throw Error("Received a RunStepDelta before creation of a snapshot");let c=a.data;if(c.delta){let d=e.accumulateDelta(b,c.delta);A.__classPrivateFieldGet(this,g,"f")[a.data.id]=d}return A.__classPrivateFieldGet(this,g,"f")[a.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":A.__classPrivateFieldGet(this,g,"f")[a.data.id]=a.data}if(A.__classPrivateFieldGet(this,g,"f")[a.data.id])return A.__classPrivateFieldGet(this,g,"f")[a.data.id];throw Error("No snapshot available")},x=function(a,b){let c=[];switch(a.event){case"thread.message.created":return[a.data,c];case"thread.message.delta":if(!b)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let e=a.data;if(e.delta.content)for(let a of e.delta.content)if(a.index in b.content){let c=b.content[a.index];b.content[a.index]=A.__classPrivateFieldGet(this,d,"m",y).call(this,a,c)}else b.content[a.index]=a,c.push(a);return[b,c];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(b)return[b,c];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},y=function(a,b){return e.accumulateDelta(b,a)},z=function(a){switch(A.__classPrivateFieldSet(this,p,a.data,"f"),a.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":A.__classPrivateFieldSet(this,j,a.data,"f"),A.__classPrivateFieldGet(this,n,"f")&&(this._emit("toolCallDone",A.__classPrivateFieldGet(this,n,"f")),A.__classPrivateFieldSet(this,n,void 0,"f"))}}},59916:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ParsingToolFunction=void 0,b.isRunnableFunctionWithParse=function(a){return"function"==typeof a.parse};class c{constructor(a){this.type="function",this.function=a}}b.ParsingToolFunction=c},61709:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.InputItems=void 0;let d=c(9173),e=c(73637),f=c(12998);class g extends d.APIResource{list(a,b={},c){return this._client.getAPIList((0,f.path)`/responses/${a}/input_items`,e.CursorPage,{query:b,...c})}}b.InputItems=g},61826:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Containers=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(91868)),g=c(91868),h=c(73637),i=c(80321),j=c(12998);class k extends e.APIResource{constructor(){super(...arguments),this.files=new f.Files(this._client)}create(a,b){return this._client.post("/containers",{body:a,...b})}retrieve(a,b){return this._client.get((0,j.path)`/containers/${a}`,b)}list(a={},b){return this._client.getAPIList("/containers",h.CursorPage,{query:a,...b})}delete(a,b){return this._client.delete((0,j.path)`/containers/${a}`,{...b,headers:(0,i.buildHeaders)([{Accept:"*/*"},b?.headers])})}}b.Containers=k,k.Files=g.Files},62480:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Conversations=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(75424)),g=c(75424),h=c(12998);class i extends e.APIResource{constructor(){super(...arguments),this.items=new f.Items(this._client)}create(a={},b){return this._client.post("/conversations",{body:a,...b})}retrieve(a,b){return this._client.get((0,h.path)`/conversations/${a}`,b)}update(a,b,c){return this._client.post((0,h.path)`/conversations/${a}`,{body:b,...c})}delete(a,b){return this._client.delete((0,h.path)`/conversations/${a}`,b)}}b.Conversations=i,i.Items=g.Items},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63109:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Graders=void 0;let d=c(9173);class e extends d.APIResource{run(a,b){return this._client.post("/fine_tuning/alpha/graders/run",{body:a,...b})}validate(a,b){return this._client.post("/fine_tuning/alpha/graders/validate",{body:a,...b})}}b.Graders=e},64961:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Transcriptions=void 0;let d=c(9173),e=c(30453);class f extends d.APIResource{create(a,b){return this._client.post("/audio/transcriptions",(0,e.multipartFormRequestOptions)({body:a,...b,stream:a.stream??!1,__metadata:{model:a.model}},this._client))}}b.Transcriptions=f},65435:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.formatRequestDetails=b.parseLogLevel=void 0,b.loggerFor=j;let d=c(28491),e={off:0,error:200,warn:300,info:400,debug:500};function f(){}function g(a,b,c){return!b||e[a]>e[c]?f:b[a].bind(b)}b.parseLogLevel=(a,b,c)=>{if(a){if((0,d.hasOwn)(e,a))return a;j(c).warn(`${b} was set to ${JSON.stringify(a)}, expected one of ${JSON.stringify(Object.keys(e))}`)}};let h={error:f,warn:f,info:f,debug:f},i=new WeakMap;function j(a){let b=a.logger,c=a.logLevel??"off";if(!b)return h;let d=i.get(b);if(d&&d[0]===c)return d[1];let e={error:g("error",b,c),warn:g("warn",b,c),info:g("info",b,c),debug:g("debug",b,c)};return i.set(b,[c,e]),e}b.formatRequestDetails=a=>(a.options&&(a.options={...a.options},delete a.options.headers),a.headers&&(a.headers=Object.fromEntries((a.headers instanceof Headers?[...a.headers]:Object.entries(a.headers)).map(([a,b])=>[a,"authorization"===a.toLowerCase()||"cookie"===a.toLowerCase()||"set-cookie"===a.toLowerCase()?"***":b]))),"retryOfRequestLogID"in a&&(a.retryOfRequestLogID&&(a.retryOf=a.retryOfRequestLogID),delete a.retryOfRequestLogID),a)},67805:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Runs=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(24664)),g=c(24664),h=c(73637),i=c(80321),j=c(58549),k=c(27426),l=c(12998);class m extends e.APIResource{constructor(){super(...arguments),this.steps=new f.Steps(this._client)}create(a,b,c){let{include:d,...e}=b;return this._client.post((0,l.path)`/threads/${a}/runs`,{query:{include:d},body:e,...c,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers]),stream:b.stream??!1})}retrieve(a,b,c){let{thread_id:d}=b;return this._client.get((0,l.path)`/threads/${d}/runs/${a}`,{...c,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}update(a,b,c){let{thread_id:d,...e}=b;return this._client.post((0,l.path)`/threads/${d}/runs/${a}`,{body:e,...c,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}list(a,b={},c){return this._client.getAPIList((0,l.path)`/threads/${a}/runs`,h.CursorPage,{query:b,...c,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}cancel(a,b,c){let{thread_id:d}=b;return this._client.post((0,l.path)`/threads/${d}/runs/${a}/cancel`,{...c,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}async createAndPoll(a,b,c){let d=await this.create(a,b,c);return await this.poll(d.id,{thread_id:a},c)}createAndStream(a,b,c){return j.AssistantStream.createAssistantStream(a,this._client.beta.threads.runs,b,c)}async poll(a,b,c){let d=(0,i.buildHeaders)([c?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":c?.pollIntervalMs?.toString()??void 0}]);for(;;){let{data:e,response:f}=await this.retrieve(a,b,{...c,headers:{...c?.headers,...d}}).withResponse();switch(e.status){case"queued":case"in_progress":case"cancelling":let g=5e3;if(c?.pollIntervalMs)g=c.pollIntervalMs;else{let a=f.headers.get("openai-poll-after-ms");if(a){let b=parseInt(a);isNaN(b)||(g=b)}}await (0,k.sleep)(g);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return e}}}stream(a,b,c){return j.AssistantStream.createAssistantStream(a,this._client.beta.threads.runs,b,c)}submitToolOutputs(a,b,c){let{thread_id:d,...e}=b;return this._client.post((0,l.path)`/threads/${d}/runs/${a}/submit_tool_outputs`,{body:e,...c,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers]),stream:b.stream??!1})}async submitToolOutputsAndPoll(a,b,c){let d=await this.submitToolOutputs(a,b,c);return await this.poll(d.id,b,c)}submitToolOutputsStream(a,b,c){return j.AssistantStream.createToolAssistantStream(a,this._client.beta.threads.runs,b,c)}}b.Runs=m,m.Steps=g.Steps},68916:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Checkpoints=void 0;let d=c(9173),e=c(73637),f=c(12998);class g extends d.APIResource{list(a,b={},c){return this._client.getAPIList((0,f.path)`/fine_tuning/jobs/${a}/checkpoints`,e.CursorPage,{query:b,...c})}}b.Checkpoints=g},73341:(a,b,c)=>{"use strict";var d,e,f,g,h,i,j,k;Object.defineProperty(b,"__esModule",{value:!0}),b.AbstractChatCompletionRunner=void 0;let l=c(73555),m=c(82963),n=c(84630),o=c(4536),p=c(86773),q=c(59916);class r extends p.EventStream{constructor(){super(...arguments),d.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(a){this._chatCompletions.push(a),this._emit("chatCompletion",a);let b=a.choices[0]?.message;return b&&this._addMessage(b),a}_addMessage(a,b=!0){if("content"in a||(a.content=null),this.messages.push(a),b){if(this._emit("message",a),(0,o.isToolMessage)(a)&&a.content)this._emit("functionToolCallResult",a.content);else if((0,o.isAssistantMessage)(a)&&a.tool_calls)for(let b of a.tool_calls)"function"===b.type&&this._emit("functionToolCall",b.function)}}async finalChatCompletion(){await this.done();let a=this._chatCompletions[this._chatCompletions.length-1];if(!a)throw new m.OpenAIError("stream ended without producing a ChatCompletion");return a}async finalContent(){return await this.done(),l.__classPrivateFieldGet(this,d,"m",e).call(this)}async finalMessage(){return await this.done(),l.__classPrivateFieldGet(this,d,"m",f).call(this)}async finalFunctionToolCall(){return await this.done(),l.__classPrivateFieldGet(this,d,"m",g).call(this)}async finalFunctionToolCallResult(){return await this.done(),l.__classPrivateFieldGet(this,d,"m",h).call(this)}async totalUsage(){return await this.done(),l.__classPrivateFieldGet(this,d,"m",i).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let a=this._chatCompletions[this._chatCompletions.length-1];a&&this._emit("finalChatCompletion",a);let b=l.__classPrivateFieldGet(this,d,"m",f).call(this);b&&this._emit("finalMessage",b);let c=l.__classPrivateFieldGet(this,d,"m",e).call(this);c&&this._emit("finalContent",c);let j=l.__classPrivateFieldGet(this,d,"m",g).call(this);j&&this._emit("finalFunctionToolCall",j);let k=l.__classPrivateFieldGet(this,d,"m",h).call(this);null!=k&&this._emit("finalFunctionToolCallResult",k),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",l.__classPrivateFieldGet(this,d,"m",i).call(this))}async _createChatCompletion(a,b,c){let e=c?.signal;e&&(e.aborted&&this.controller.abort(),e.addEventListener("abort",()=>this.controller.abort())),l.__classPrivateFieldGet(this,d,"m",j).call(this,b);let f=await a.chat.completions.create({...b,stream:!1},{...c,signal:this.controller.signal});return this._connected(),this._addChatCompletion((0,n.parseChatCompletion)(f,b))}async _runChatCompletion(a,b,c){for(let a of b.messages)this._addMessage(a,!1);return await this._createChatCompletion(a,b,c)}async _runTools(a,b,c){let e="tool",{tool_choice:f="auto",stream:g,...h}=b,i="string"!=typeof f&&"function"===f.type&&f?.function?.name,{maxChatCompletions:j=10}=c||{},o=b.tools.map(a=>{if((0,n.isAutoParsableTool)(a)){if(!a.$callback)throw new m.OpenAIError("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:a.$callback,name:a.function.name,description:a.function.description||"",parameters:a.function.parameters,parse:a.$parseRaw,strict:!0}}}return a}),p={};for(let a of o)"function"===a.type&&(p[a.function.name||a.function.function.name]=a.function);let r="tools"in b?o.map(a=>"function"===a.type?{type:"function",function:{name:a.function.name||a.function.function.name,parameters:a.function.parameters,description:a.function.description,strict:a.function.strict}}:a):void 0;for(let a of b.messages)this._addMessage(a,!1);for(let b=0;b<j;++b){let b=await this._createChatCompletion(a,{...h,tool_choice:f,tools:r,messages:[...this.messages]},c),g=b.choices[0]?.message;if(!g)throw new m.OpenAIError("missing message in ChatCompletion response");if(!g.tool_calls?.length)break;for(let a of g.tool_calls){let b;if("function"!==a.type)continue;let c=a.id,{name:f,arguments:g}=a.function,h=p[f];if(h){if(i&&i!==f){let a=`Invalid tool_call: ${JSON.stringify(f)}. ${JSON.stringify(i)} requested. Please try again`;this._addMessage({role:e,tool_call_id:c,content:a});continue}}else{let a=`Invalid tool_call: ${JSON.stringify(f)}. Available options are: ${Object.keys(p).map(a=>JSON.stringify(a)).join(", ")}. Please try again`;this._addMessage({role:e,tool_call_id:c,content:a});continue}try{b=(0,q.isRunnableFunctionWithParse)(h)?await h.parse(g):g}catch(b){let a=b instanceof Error?b.message:String(b);this._addMessage({role:e,tool_call_id:c,content:a});continue}let j=await h.function(b,this),m=l.__classPrivateFieldGet(this,d,"m",k).call(this,j);if(this._addMessage({role:e,tool_call_id:c,content:m}),i)return}}}}b.AbstractChatCompletionRunner=r,d=new WeakSet,e=function(){return l.__classPrivateFieldGet(this,d,"m",f).call(this).content??null},f=function(){let a=this.messages.length;for(;a-- >0;){let b=this.messages[a];if((0,o.isAssistantMessage)(b))return{...b,content:b.content??null,refusal:b.refusal??null}}throw new m.OpenAIError("stream ended without producing a ChatCompletionMessage with role=assistant")},g=function(){for(let a=this.messages.length-1;a>=0;a--){let b=this.messages[a];if((0,o.isAssistantMessage)(b)&&b?.tool_calls?.length)return b.tool_calls.filter(a=>"function"===a.type).at(-1)?.function}},h=function(){for(let a=this.messages.length-1;a>=0;a--){let b=this.messages[a];if((0,o.isToolMessage)(b)&&null!=b.content&&"string"==typeof b.content&&this.messages.some(a=>"assistant"===a.role&&a.tool_calls?.some(a=>"function"===a.type&&a.id===b.tool_call_id)))return b.content}},i=function(){let a={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:b}of this._chatCompletions)b&&(a.completion_tokens+=b.completion_tokens,a.prompt_tokens+=b.prompt_tokens,a.total_tokens+=b.total_tokens);return a},j=function(a){if(null!=a.n&&a.n>1)throw new m.OpenAIError("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},k=function(a){return"string"==typeof a?a:void 0===a?"undefined":JSON.stringify(a)}},73555:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.__setModuleDefault=b.__createBinding=void 0,b.__classPrivateFieldSet=function(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c},b.__classPrivateFieldGet=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)},b.__exportStar=function(a,b){for(var d in a)"default"===d||Object.prototype.hasOwnProperty.call(b,d)||c(b,a,d)},b.__importStar=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var f=e(a),g=0;g<f.length;g++)"default"!==f[g]&&c(b,a,f[g]);return d(b,a),b};var c=Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]};b.__createBinding=c;var d=Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b};b.__setModuleDefault=d;var e=function(a){return(e=Object.getOwnPropertyNames||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[b.length]=c);return b})(a)}},73637:(a,b,c)=>{"use strict";var d;Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationCursorPage=b.CursorPage=b.Page=b.PagePromise=b.AbstractPage=void 0;let e=c(73555),f=c(97799),g=c(84419),h=c(46321),i=c(28491);class j{constructor(a,b,c,f){d.set(this,void 0),e.__classPrivateFieldSet(this,d,a,"f"),this.options=f,this.response=b,this.body=c}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){let a=this.nextPageRequestOptions();if(!a)throw new f.OpenAIError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await e.__classPrivateFieldGet(this,d,"f").requestAPIList(this.constructor,a)}async *iterPages(){let a=this;for(yield a;a.hasNextPage();)a=await a.getNextPage(),yield a}async *[(d=new WeakMap,Symbol.asyncIterator)](){for await(let a of this.iterPages())for(let b of a.getPaginatedItems())yield b}}b.AbstractPage=j;class k extends h.APIPromise{constructor(a,b,c){super(a,b,async(a,b)=>new c(a,b.response,await (0,g.defaultParseResponse)(a,b),b.options))}async *[Symbol.asyncIterator](){for await(let a of(await this))yield a}}b.PagePromise=k;class l extends j{constructor(a,b,c,d){super(a,b,c,d),this.data=c.data||[],this.object=c.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}b.Page=l;class m extends j{constructor(a,b,c,d){super(a,b,c,d),this.data=c.data||[],this.has_more=c.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){let a=this.getPaginatedItems(),b=a[a.length-1]?.id;return b?{...this.options,query:{...(0,i.maybeObj)(this.options.query),after:b}}:null}}b.CursorPage=m;class n extends j{constructor(a,b,c,d){super(a,b,c,d),this.data=c.data||[],this.has_more=c.has_more||!1,this.last_id=c.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){let a=this.last_id;return a?{...this.options,query:{...(0,i.maybeObj)(this.options.query),after:a}}:null}}b.ConversationCursorPage=n},74291:(a,b,c)=>{"use strict";c.d(b,{_:()=>m,authenticateRequest:()=>l});var d=c(30477);c(10641);var e=c(86802),f=c(80829),g=c.n(f),h=c(94570),i=c(41393),j=c(48689);async function k(){try{let a=await (0,e.b3)(),b=a.get("authorization"),c=null;if(b&&b.startsWith("Bearer "))c=b.substring(7);else{let b=a.get("cookie");b&&(c=b.split(";").reduce((a,b)=>{let[c,d]=b.trim().split("=");return a[c]=d,a},{}).auth_token||null)}if(!c)return null;let d=g().verify(c,"local-development-jwt-secret-key");if(!d||!d.userId)return null;let f=(0,h.Lf)(),k=await f.select({id:i.users.id,email:i.users.email,full_name:i.users.full_name,username:i.users.username,date_of_birth:i.users.date_of_birth,created_at:i.users.created_at,updated_at:i.users.updated_at,subscription_tier:i.users.subscription_tier,subscription_status:i.users.subscription_status}).from(i.users).where((0,j.eq)(i.users.id,d.userId)).limit(1);if(0===k.length)return null;let l=k[0];return{id:l.id,email:l.email,full_name:l.full_name,name:l.full_name,username:l.username,created_at:l.created_at,updated_at:l.updated_at,subscription_tier:l.subscription_tier??"free",subscription_status:l.subscription_status??"active"}}catch(a){return(0,d.vV)("JWT authentication error:",a),null}}async function l(){try{let a=await k();if(a)return{user:a,error:null};return{user:null,error:"No authenticated user session found"}}catch(a){return(0,d.vV)("Authentication error:",a),{user:null,error:"Authentication failed"}}}async function m(a){try{let a=await l();return{user:a.user||void 0,error:a.error||void 0}}catch(a){return(0,d.vV)("verifyAuth error:",a),{error:"Authentication failed"}}}},74684:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Evals=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(28782)),g=c(28782),h=c(73637),i=c(12998);class j extends e.APIResource{constructor(){super(...arguments),this.runs=new f.Runs(this._client)}create(a,b){return this._client.post("/evals",{body:a,...b})}retrieve(a,b){return this._client.get((0,i.path)`/evals/${a}`,b)}update(a,b,c){return this._client.post((0,i.path)`/evals/${a}`,{body:b,...c})}list(a={},b){return this._client.getAPIList("/evals",h.CursorPage,{query:a,...b})}delete(a,b){return this._client.delete((0,i.path)`/evals/${a}`,b)}}b.Evals=j,j.Runs=g.Runs},75059:(a,b,c)=>{"use strict";var d,e,f,g,h,i,j,k;Object.defineProperty(b,"__esModule",{value:!0}),b.ResponseStream=void 0;let l=c(73555),m=c(82963),n=c(86773),o=c(78662);class p extends n.EventStream{constructor(a){super(),d.add(this),e.set(this,void 0),f.set(this,void 0),g.set(this,void 0),l.__classPrivateFieldSet(this,e,a,"f")}static createResponse(a,b,c){let d=new p(b);return d._run(()=>d._createOrRetrieveResponse(a,b,{...c,headers:{...c?.headers,"X-Stainless-Helper-Method":"stream"}})),d}async _createOrRetrieveResponse(a,b,c){let e,f=c?.signal;f&&(f.aborted&&this.controller.abort(),f.addEventListener("abort",()=>this.controller.abort())),l.__classPrivateFieldGet(this,d,"m",h).call(this);let g=null;for await(let f of("response_id"in b?(e=await a.responses.retrieve(b.response_id,{stream:!0},{...c,signal:this.controller.signal,stream:!0}),g=b.starting_after??null):e=await a.responses.create({...b,stream:!0},{...c,signal:this.controller.signal}),this._connected(),e))l.__classPrivateFieldGet(this,d,"m",i).call(this,f,g);if(e.controller.signal?.aborted)throw new m.APIUserAbortError;return l.__classPrivateFieldGet(this,d,"m",j).call(this)}[(e=new WeakMap,f=new WeakMap,g=new WeakMap,d=new WeakSet,h=function(){this.ended||l.__classPrivateFieldSet(this,f,void 0,"f")},i=function(a,b){if(this.ended)return;let c=(a,c)=>{(null==b||c.sequence_number>b)&&this._emit(a,c)},e=l.__classPrivateFieldGet(this,d,"m",k).call(this,a);switch(c("event",a),a.type){case"response.output_text.delta":{let b=e.output[a.output_index];if(!b)throw new m.OpenAIError(`missing output at index ${a.output_index}`);if("message"===b.type){let d=b.content[a.content_index];if(!d)throw new m.OpenAIError(`missing content at index ${a.content_index}`);if("output_text"!==d.type)throw new m.OpenAIError(`expected content to be 'output_text', got ${d.type}`);c("response.output_text.delta",{...a,snapshot:d.text})}break}case"response.function_call_arguments.delta":{let b=e.output[a.output_index];if(!b)throw new m.OpenAIError(`missing output at index ${a.output_index}`);"function_call"===b.type&&c("response.function_call_arguments.delta",{...a,snapshot:b.arguments});break}default:c(a.type,a)}},j=function(){var a,b;if(this.ended)throw new m.OpenAIError("stream has ended, this shouldn't happen");let c=l.__classPrivateFieldGet(this,f,"f");if(!c)throw new m.OpenAIError("request ended without sending any events");l.__classPrivateFieldSet(this,f,void 0,"f");let d=(a=c,b=l.__classPrivateFieldGet(this,e,"f"),(0,o.maybeParseResponse)(a,b));return l.__classPrivateFieldSet(this,g,d,"f"),d},k=function(a){let b=l.__classPrivateFieldGet(this,f,"f");if(!b){if("response.created"!==a.type)throw new m.OpenAIError(`When snapshot hasn't been set yet, expected 'response.created' event, got ${a.type}`);return l.__classPrivateFieldSet(this,f,a.response,"f")}switch(a.type){case"response.output_item.added":b.output.push(a.item);break;case"response.content_part.added":{let c=b.output[a.output_index];if(!c)throw new m.OpenAIError(`missing output at index ${a.output_index}`);let d=c.type,e=a.part;"message"===d&&"reasoning_text"!==e.type?c.content.push(e):"reasoning"===d&&"reasoning_text"===e.type&&(c.content||(c.content=[]),c.content.push(e));break}case"response.output_text.delta":{let c=b.output[a.output_index];if(!c)throw new m.OpenAIError(`missing output at index ${a.output_index}`);if("message"===c.type){let b=c.content[a.content_index];if(!b)throw new m.OpenAIError(`missing content at index ${a.content_index}`);if("output_text"!==b.type)throw new m.OpenAIError(`expected content to be 'output_text', got ${b.type}`);b.text+=a.delta}break}case"response.function_call_arguments.delta":{let c=b.output[a.output_index];if(!c)throw new m.OpenAIError(`missing output at index ${a.output_index}`);"function_call"===c.type&&(c.arguments+=a.delta);break}case"response.reasoning_text.delta":{let c=b.output[a.output_index];if(!c)throw new m.OpenAIError(`missing output at index ${a.output_index}`);if("reasoning"===c.type){let b=c.content?.[a.content_index];if(!b)throw new m.OpenAIError(`missing content at index ${a.content_index}`);if("reasoning_text"!==b.type)throw new m.OpenAIError(`expected content to be 'reasoning_text', got ${b.type}`);b.text+=a.delta}break}case"response.completed":l.__classPrivateFieldSet(this,f,a.response,"f")}return b},Symbol.asyncIterator)](){let a=[],b=[],c=!1;return this.on("event",c=>{let d=b.shift();d?d.resolve(c):a.push(c)}),this.on("end",()=>{for(let a of(c=!0,b))a.resolve(void 0);b.length=0}),this.on("abort",a=>{for(let d of(c=!0,b))d.reject(a);b.length=0}),this.on("error",a=>{for(let d of(c=!0,b))d.reject(a);b.length=0}),{next:async()=>a.length?{value:a.shift(),done:!1}:c?{value:void 0,done:!0}:new Promise((a,c)=>b.push({resolve:a,reject:c})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();let a=l.__classPrivateFieldGet(this,g,"f");if(!a)throw new m.OpenAIError("stream ended without producing a ChatCompletion");return a}}b.ResponseStream=p},75424:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Items=void 0;let d=c(9173),e=c(73637),f=c(12998);class g extends d.APIResource{create(a,b,c){let{include:d,...e}=b;return this._client.post((0,f.path)`/conversations/${a}/items`,{query:{include:d},body:e,...c})}retrieve(a,b,c){let{conversation_id:d,...e}=b;return this._client.get((0,f.path)`/conversations/${d}/items/${a}`,{query:e,...c})}list(a,b={},c){return this._client.getAPIList((0,f.path)`/conversations/${a}/items`,e.ConversationCursorPage,{query:b,...c})}delete(a,b,c){let{conversation_id:d}=b;return this._client.delete((0,f.path)`/conversations/${d}/items/${a}`,c)}}b.Items=g},75484:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Methods=void 0;let d=c(9173);class e extends d.APIResource{}b.Methods=e},76003:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ChatCompletionRunner=void 0;let d=c(73341),e=c(4536);class f extends d.AbstractChatCompletionRunner{static runTools(a,b,c){let d=new f,e={...c,headers:{...c?.headers,"X-Stainless-Helper-Method":"runTools"}};return d._run(()=>d._runTools(a,b,e)),d}_addMessage(a,b=!0){super._addMessage(a,b),(0,e.isAssistantMessage)(a)&&a.content&&this._emit("content",a.content)}}b.ChatCompletionRunner=f},78335:()=>{},78473:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(73555);d.__exportStar(c(28491),b),d.__exportStar(c(38466),b),d.__exportStar(c(78514),b),d.__exportStar(c(65435),b),d.__exportStar(c(25122),b),d.__exportStar(c(27426),b)},78514:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.readEnv=void 0,b.readEnv=a=>void 0!==globalThis.process?globalThis.process.env?.[a]?.trim()??void 0:void 0!==globalThis.Deno?globalThis.Deno.env?.get?.(a)?.trim():void 0},78662:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.maybeParseResponse=function(a,b){return b&&g(b)?f(a,b):{...a,output_parsed:null,output:a.output.map(a=>"function_call"===a.type?{...a,parsed_arguments:null}:"message"===a.type?{...a,content:a.content.map(a=>({...a,parsed:null}))}:a)}},b.parseResponse=f,b.hasAutoParseableInput=g,b.makeParseableResponseTool=function(a,{parser:b,callback:c}){let d={...a};return Object.defineProperties(d,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:b,enumerable:!1},$callback:{value:c,enumerable:!1}}),d},b.isAutoParsableTool=h,b.shouldParseToolCall=function(a,b){if(!a)return!1;let c=i(a.tools??[],b.name);return h(c)||c?.strict||!1},b.validateInputTools=function(a){for(let b of a??[]){if("function"!==b.type)throw new d.OpenAIError(`Currently only \`function\` tool types support auto-parsing; Received \`${b.type}\``);if(!0!==b.function.strict)throw new d.OpenAIError(`The \`${b.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}},b.addOutputText=j;let d=c(82963),e=c(84630);function f(a,b){let c=a.output.map(a=>{if("function_call"===a.type)return{...a,parsed_arguments:function(a,b){let c=i(a.tools??[],b.name);return{...b,...b,parsed_arguments:h(c)?c.$parseRaw(b.arguments):c?.strict?JSON.parse(b.arguments):null}}(b,a)};if("message"===a.type){let c=a.content.map(a=>{var c,d;return"output_text"===a.type?{...a,parsed:(c=b,d=a.text,c.text?.format?.type!=="json_schema"?null:"$parseRaw"in c.text?.format?(c.text?.format).$parseRaw(d):JSON.parse(d))}:a});return{...a,content:c}}return a}),d=Object.assign({},a,{output:c});return Object.getOwnPropertyDescriptor(a,"output_text")||j(d),Object.defineProperty(d,"output_parsed",{enumerable:!0,get(){for(let a of d.output)if("message"===a.type){for(let b of a.content)if("output_text"===b.type&&null!==b.parsed)return b.parsed}return null}}),d}function g(a){return!!(0,e.isAutoParsableResponseFormat)(a.text?.format)}function h(a){return a?.$brand==="auto-parseable-tool"}function i(a,b){return a.find(a=>"function"===a.type&&a.name===b)}function j(a){let b=[];for(let c of a.output)if("message"===c.type)for(let a of c.content)"output_text"===a.type&&b.push(a.text);a.output_text=b.join("")}},78934:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TranscriptionSessions=void 0;let d=c(9173),e=c(80321);class f extends d.APIResource{create(a,b){return this._client.post("/realtime/transcription_sessions",{body:a,...b,headers:(0,e.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},b?.headers])})}}b.TranscriptionSessions=f},80321:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.isEmptyHeaders=b.buildHeaders=void 0;let d=c(28491),e=Symbol("brand.privateNullableHeaders");function*f(a){let b;if(!a)return;if(e in a){let{values:b,nulls:c}=a;for(let a of(yield*b.entries(),c))yield[a,null];return}let c=!1;for(let e of(a instanceof Headers?b=a.entries():(0,d.isReadonlyArray)(a)?b=a:(c=!0,b=Object.entries(a??{})),b)){let a=e[0];if("string"!=typeof a)throw TypeError("expected header name to be a string");let b=(0,d.isReadonlyArray)(e[1])?e[1]:[e[1]],f=!1;for(let d of b)void 0!==d&&(c&&!f&&(f=!0,yield[a,null]),yield[a,d])}}b.buildHeaders=a=>{let b=new Headers,c=new Set;for(let d of a){let a=new Set;for(let[e,g]of f(d)){let d=e.toLowerCase();a.has(d)||(b.delete(e),a.add(d)),null===g?(b.delete(e),c.add(d)):(b.append(e,g),c.delete(d))}}return{[e]:!0,values:b,nulls:c}},b.isEmptyHeaders=a=>{for(let b of f(a))return!1;return!0}},80793:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.MalformedJSON=b.PartialJSON=b.partialParse=void 0;let c={STR:1,NUM:2,ARR:4,OBJ:8,NULL:16,BOOL:32,NAN:64,INFINITY:128,MINUS_INFINITY:256,INF:384,ALL:511};class d extends Error{}b.PartialJSON=d;class e extends Error{}b.MalformedJSON=e;b.partialParse=a=>(function(a,b=c.ALL){if("string"!=typeof a)throw TypeError(`expecting str, got ${typeof a}`);if(!a.trim())throw Error(`${a} is empty`);return((a,b)=>{let f=a.length,g=0,h=a=>{throw new d(`${a} at position ${g}`)},i=a=>{throw new e(`${a} at position ${g}`)},j=()=>(o(),g>=f&&h("Unexpected end of input"),'"'===a[g])?k():"{"===a[g]?l():"["===a[g]?m():"null"===a.substring(g,g+4)||c.NULL&b&&f-g<4&&"null".startsWith(a.substring(g))?(g+=4,null):"true"===a.substring(g,g+4)||c.BOOL&b&&f-g<4&&"true".startsWith(a.substring(g))?(g+=4,!0):"false"===a.substring(g,g+5)||c.BOOL&b&&f-g<5&&"false".startsWith(a.substring(g))?(g+=5,!1):"Infinity"===a.substring(g,g+8)||c.INFINITY&b&&f-g<8&&"Infinity".startsWith(a.substring(g))?(g+=8,1/0):"-Infinity"===a.substring(g,g+9)||c.MINUS_INFINITY&b&&1<f-g&&f-g<9&&"-Infinity".startsWith(a.substring(g))?(g+=9,-1/0):"NaN"===a.substring(g,g+3)||c.NAN&b&&f-g<3&&"NaN".startsWith(a.substring(g))?(g+=3,NaN):n(),k=()=>{let d=g,e=!1;for(g++;g<f&&('"'!==a[g]||e&&"\\"===a[g-1]);)e="\\"===a[g]&&!e,g++;if('"'==a.charAt(g))try{return JSON.parse(a.substring(d,++g-Number(e)))}catch(a){i(String(a))}else if(c.STR&b)try{return JSON.parse(a.substring(d,g-Number(e))+'"')}catch(b){return JSON.parse(a.substring(d,a.lastIndexOf("\\"))+'"')}h("Unterminated string literal")},l=()=>{g++,o();let d={};try{for(;"}"!==a[g];){if(o(),g>=f&&c.OBJ&b)return d;let e=k();o(),g++;try{let a=j();Object.defineProperty(d,e,{value:a,writable:!0,enumerable:!0,configurable:!0})}catch(a){if(c.OBJ&b)return d;throw a}o(),","===a[g]&&g++}}catch(a){if(c.OBJ&b)return d;h("Expected '}' at end of object")}return g++,d},m=()=>{g++;let d=[];try{for(;"]"!==a[g];)d.push(j()),o(),","===a[g]&&g++}catch(a){if(c.ARR&b)return d;h("Expected ']' at end of array")}return g++,d},n=()=>{if(0===g){"-"===a&&c.NUM&b&&h("Not sure what '-' is");try{return JSON.parse(a)}catch(d){if(c.NUM&b)try{if("."===a[a.length-1])return JSON.parse(a.substring(0,a.lastIndexOf(".")));return JSON.parse(a.substring(0,a.lastIndexOf("e")))}catch(a){}i(String(d))}}let d=g;for("-"===a[g]&&g++;a[g]&&!",]}".includes(a[g]);)g++;g!=f||c.NUM&b||h("Unterminated number literal");try{return JSON.parse(a.substring(d,g))}catch(e){"-"===a.substring(d,g)&&c.NUM&b&&h("Not sure what '-' is");try{return JSON.parse(a.substring(d,a.lastIndexOf("e")))}catch(a){i(String(a))}}},o=()=>{for(;g<f&&" \n\r	".includes(a[g]);)g++};return j()})(a.trim(),b)})(a,c.ALL^c.NUM)},80829:a=>{"use strict";a.exports=require("jsonwebtoken")},82020:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.formats=b.stringify=void 0;let d=c(15900);b.formats={formatters:d.formatters,RFC1738:d.RFC1738,RFC3986:d.RFC3986,default:d.default_format};var e=c(57945);Object.defineProperty(b,"stringify",{enumerable:!0,get:function(){return e.stringify}})},82963:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),c(73555).__exportStar(c(97799),b)},84419:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.defaultParseResponse=f,b.addRequestID=g;let d=c(48193),e=c(65435);async function f(a,b){let{response:c,requestLogID:f,retryOfRequestLogID:h,startTime:i}=b,j=await (async()=>{if(b.options.stream)return((0,e.loggerFor)(a).debug("response",c.status,c.url,c.headers,c.body),b.options.__streamClass)?b.options.__streamClass.fromSSEResponse(c,b.controller,a):d.Stream.fromSSEResponse(c,b.controller,a);if(204===c.status)return null;if(b.options.__binaryResponse)return c;let f=c.headers.get("content-type"),h=f?.split(";")[0]?.trim();return h?.includes("application/json")||h?.endsWith("+json")?g(await c.json(),c):await c.text()})();return(0,e.loggerFor)(a).debug(`[${f}] response parsed`,(0,e.formatRequestDetails)({retryOfRequestLogID:h,url:c.url,status:c.status,body:j,durationMs:Date.now()-i})),j}function g(a,b){return!a||"object"!=typeof a||Array.isArray(a)?a:Object.defineProperty(a,"_request_id",{value:b.headers.get("x-request-id"),enumerable:!1})}},84630:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.isChatCompletionFunctionTool=e,b.makeParseableResponseFormat=function(a,b){let c={...a};return Object.defineProperties(c,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:b,enumerable:!1}}),c},b.makeParseableTextFormat=function(a,b){let c={...a};return Object.defineProperties(c,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:b,enumerable:!1}}),c},b.isAutoParsableResponseFormat=f,b.makeParseableTool=function(a,{parser:b,callback:c}){let d={...a};return Object.defineProperties(d,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:b,enumerable:!1},$callback:{value:c,enumerable:!1}}),d},b.isAutoParsableTool=g,b.maybeParseChatCompletion=function(a,b){return b&&i(b)?h(a,b):{...a,choices:a.choices.map(a=>(j(a.message.tool_calls),{...a,message:{...a.message,parsed:null,...a.message.tool_calls?{tool_calls:a.message.tool_calls}:void 0}}))}},b.parseChatCompletion=h,b.shouldParseToolCall=function(a,b){if(!a||!("tools"in a)||!a.tools)return!1;let c=a.tools?.find(a=>e(a)&&a.function?.name===b.function.name);return e(c)&&(g(c)||c?.function.strict||!1)},b.hasAutoParseableInput=i,b.assertToolCallsAreChatCompletionFunctionToolCalls=j,b.validateInputTools=function(a){for(let b of a??[]){if("function"!==b.type)throw new d.OpenAIError(`Currently only \`function\` tool types support auto-parsing; Received \`${b.type}\``);if(!0!==b.function.strict)throw new d.OpenAIError(`The \`${b.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}};let d=c(82963);function e(a){return void 0!==a&&"function"in a&&void 0!==a.function}function f(a){return a?.$brand==="auto-parseable-response-format"}function g(a){return a?.$brand==="auto-parseable-tool"}function h(a,b){let c=a.choices.map(a=>{var c,f;if("length"===a.finish_reason)throw new d.LengthFinishReasonError;if("content_filter"===a.finish_reason)throw new d.ContentFilterFinishReasonError;return j(a.message.tool_calls),{...a,message:{...a.message,...a.message.tool_calls?{tool_calls:a.message.tool_calls?.map(a=>(function(a,b){let c=a.tools?.find(a=>e(a)&&a.function?.name===b.function.name);return{...b,function:{...b.function,parsed_arguments:g(c)?c.$parseRaw(b.function.arguments):c?.function.strict?JSON.parse(b.function.arguments):null}}})(b,a))??void 0}:void 0,parsed:a.message.content&&!a.message.refusal?(c=b,f=a.message.content,c.response_format?.type!=="json_schema"?null:c.response_format?.type==="json_schema"?"$parseRaw"in c.response_format?c.response_format.$parseRaw(f):JSON.parse(f):null):null}}});return{...a,choices:c}}function i(a){return!!f(a.response_format)||(a.tools?.some(a=>g(a)||"function"===a.type&&!0===a.function.strict)??!1)}function j(a){for(let b of a||[])if("function"!==b.type)throw new d.OpenAIError(`Currently only \`function\` tool calls are supported; Received \`${b.type}\``)}},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},86773:(a,b,c)=>{"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p;Object.defineProperty(b,"__esModule",{value:!0}),b.EventStream=void 0;let q=c(73555),r=c(82963);class s{constructor(){d.add(this),this.controller=new AbortController,e.set(this,void 0),f.set(this,()=>{}),g.set(this,()=>{}),h.set(this,void 0),i.set(this,()=>{}),j.set(this,()=>{}),k.set(this,{}),l.set(this,!1),m.set(this,!1),n.set(this,!1),o.set(this,!1),q.__classPrivateFieldSet(this,e,new Promise((a,b)=>{q.__classPrivateFieldSet(this,f,a,"f"),q.__classPrivateFieldSet(this,g,b,"f")}),"f"),q.__classPrivateFieldSet(this,h,new Promise((a,b)=>{q.__classPrivateFieldSet(this,i,a,"f"),q.__classPrivateFieldSet(this,j,b,"f")}),"f"),q.__classPrivateFieldGet(this,e,"f").catch(()=>{}),q.__classPrivateFieldGet(this,h,"f").catch(()=>{})}_run(a){setTimeout(()=>{a().then(()=>{this._emitFinal(),this._emit("end")},q.__classPrivateFieldGet(this,d,"m",p).bind(this))},0)}_connected(){this.ended||(q.__classPrivateFieldGet(this,f,"f").call(this),this._emit("connect"))}get ended(){return q.__classPrivateFieldGet(this,l,"f")}get errored(){return q.__classPrivateFieldGet(this,m,"f")}get aborted(){return q.__classPrivateFieldGet(this,n,"f")}abort(){this.controller.abort()}on(a,b){return(q.__classPrivateFieldGet(this,k,"f")[a]||(q.__classPrivateFieldGet(this,k,"f")[a]=[])).push({listener:b}),this}off(a,b){let c=q.__classPrivateFieldGet(this,k,"f")[a];if(!c)return this;let d=c.findIndex(a=>a.listener===b);return d>=0&&c.splice(d,1),this}once(a,b){return(q.__classPrivateFieldGet(this,k,"f")[a]||(q.__classPrivateFieldGet(this,k,"f")[a]=[])).push({listener:b,once:!0}),this}emitted(a){return new Promise((b,c)=>{q.__classPrivateFieldSet(this,o,!0,"f"),"error"!==a&&this.once("error",c),this.once(a,b)})}async done(){q.__classPrivateFieldSet(this,o,!0,"f"),await q.__classPrivateFieldGet(this,h,"f")}_emit(a,...b){if(q.__classPrivateFieldGet(this,l,"f"))return;"end"===a&&(q.__classPrivateFieldSet(this,l,!0,"f"),q.__classPrivateFieldGet(this,i,"f").call(this));let c=q.__classPrivateFieldGet(this,k,"f")[a];if(c&&(q.__classPrivateFieldGet(this,k,"f")[a]=c.filter(a=>!a.once),c.forEach(({listener:a})=>a(...b))),"abort"===a){let a=b[0];q.__classPrivateFieldGet(this,o,"f")||c?.length||Promise.reject(a),q.__classPrivateFieldGet(this,g,"f").call(this,a),q.__classPrivateFieldGet(this,j,"f").call(this,a),this._emit("end");return}if("error"===a){let a=b[0];q.__classPrivateFieldGet(this,o,"f")||c?.length||Promise.reject(a),q.__classPrivateFieldGet(this,g,"f").call(this,a),q.__classPrivateFieldGet(this,j,"f").call(this,a),this._emit("end")}}_emitFinal(){}}b.EventStream=s,e=new WeakMap,f=new WeakMap,g=new WeakMap,h=new WeakMap,i=new WeakMap,j=new WeakMap,k=new WeakMap,l=new WeakMap,m=new WeakMap,n=new WeakMap,o=new WeakMap,d=new WeakSet,p=function(a){if(q.__classPrivateFieldSet(this,m,!0,"f"),a instanceof Error&&"AbortError"===a.name&&(a=new r.APIUserAbortError),a instanceof r.APIUserAbortError)return q.__classPrivateFieldSet(this,n,!0,"f"),this._emit("abort",a);if(a instanceof r.OpenAIError)return this._emit("error",a);if(a instanceof Error){let b=new r.OpenAIError(a.message);return b.cause=a,this._emit("error",b)}return this._emit("error",new r.OpenAIError(String(a)))}},86837:(a,b,c)=>{"use strict";Object.defineProperty(b=a.exports=function(...a){return new b.default(...a)},"__esModule",{value:!0}),b.AzureOpenAI=b.InvalidWebhookSignatureError=b.UnprocessableEntityError=b.PermissionDeniedError=b.InternalServerError=b.AuthenticationError=b.BadRequestError=b.RateLimitError=b.ConflictError=b.NotFoundError=b.APIUserAbortError=b.APIConnectionTimeoutError=b.APIConnectionError=b.APIError=b.OpenAIError=b.PagePromise=b.OpenAI=b.APIPromise=b.toFile=b.default=void 0;var d=c(10922);Object.defineProperty(b,"default",{enumerable:!0,get:function(){return d.OpenAI}});var e=c(29407);Object.defineProperty(b,"toFile",{enumerable:!0,get:function(){return e.toFile}});var f=c(46321);Object.defineProperty(b,"APIPromise",{enumerable:!0,get:function(){return f.APIPromise}});var g=c(10922);Object.defineProperty(b,"OpenAI",{enumerable:!0,get:function(){return g.OpenAI}});var h=c(73637);Object.defineProperty(b,"PagePromise",{enumerable:!0,get:function(){return h.PagePromise}});var i=c(97799);Object.defineProperty(b,"OpenAIError",{enumerable:!0,get:function(){return i.OpenAIError}}),Object.defineProperty(b,"APIError",{enumerable:!0,get:function(){return i.APIError}}),Object.defineProperty(b,"APIConnectionError",{enumerable:!0,get:function(){return i.APIConnectionError}}),Object.defineProperty(b,"APIConnectionTimeoutError",{enumerable:!0,get:function(){return i.APIConnectionTimeoutError}}),Object.defineProperty(b,"APIUserAbortError",{enumerable:!0,get:function(){return i.APIUserAbortError}}),Object.defineProperty(b,"NotFoundError",{enumerable:!0,get:function(){return i.NotFoundError}}),Object.defineProperty(b,"ConflictError",{enumerable:!0,get:function(){return i.ConflictError}}),Object.defineProperty(b,"RateLimitError",{enumerable:!0,get:function(){return i.RateLimitError}}),Object.defineProperty(b,"BadRequestError",{enumerable:!0,get:function(){return i.BadRequestError}}),Object.defineProperty(b,"AuthenticationError",{enumerable:!0,get:function(){return i.AuthenticationError}}),Object.defineProperty(b,"InternalServerError",{enumerable:!0,get:function(){return i.InternalServerError}}),Object.defineProperty(b,"PermissionDeniedError",{enumerable:!0,get:function(){return i.PermissionDeniedError}}),Object.defineProperty(b,"UnprocessableEntityError",{enumerable:!0,get:function(){return i.UnprocessableEntityError}}),Object.defineProperty(b,"InvalidWebhookSignatureError",{enumerable:!0,get:function(){return i.InvalidWebhookSignatureError}});var j=c(93662);Object.defineProperty(b,"AzureOpenAI",{enumerable:!0,get:function(){return j.AzureOpenAI}})},87933:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Alpha=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(63109)),g=c(63109);class h extends e.APIResource{constructor(){super(...arguments),this.graders=new f.Graders(this._client)}}b.Alpha=h,h.Graders=g.Graders},91790:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Messages=void 0;let d=c(9173),e=c(73637),f=c(80321),g=c(12998);class h extends d.APIResource{create(a,b,c){return this._client.post((0,g.path)`/threads/${a}/messages`,{body:b,...c,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}retrieve(a,b,c){let{thread_id:d}=b;return this._client.get((0,g.path)`/threads/${d}/messages/${a}`,{...c,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}update(a,b,c){let{thread_id:d,...e}=b;return this._client.post((0,g.path)`/threads/${d}/messages/${a}`,{body:e,...c,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}list(a,b={},c){return this._client.getAPIList((0,g.path)`/threads/${a}/messages`,e.CursorPage,{query:b,...c,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}delete(a,b,c){let{thread_id:d}=b;return this._client.delete((0,g.path)`/threads/${d}/messages/${a}`,{...c,headers:(0,f.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}}b.Messages=h},91868:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Files=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(22001)),g=c(22001),h=c(73637),i=c(80321),j=c(30453),k=c(12998);class l extends e.APIResource{constructor(){super(...arguments),this.content=new f.Content(this._client)}create(a,b,c){return this._client.post((0,k.path)`/containers/${a}/files`,(0,j.multipartFormRequestOptions)({body:b,...c},this._client))}retrieve(a,b,c){let{container_id:d}=b;return this._client.get((0,k.path)`/containers/${d}/files/${a}`,c)}list(a,b={},c){return this._client.getAPIList((0,k.path)`/containers/${a}/files`,h.CursorPage,{query:b,...c})}delete(a,b,c){let{container_id:d}=b;return this._client.delete((0,k.path)`/containers/${d}/files/${a}`,{...c,headers:(0,i.buildHeaders)([{Accept:"*/*"},c?.headers])})}}b.Files=l,l.Content=g.Content},92668:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GraderModels=void 0;let d=c(9173);class e extends d.APIResource{}b.GraderModels=e},93545:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.toFile=g;let d=c(30453),e=c(30453),f=a=>null!=a&&"object"==typeof a&&"number"==typeof a.size&&"string"==typeof a.type&&"function"==typeof a.text&&"function"==typeof a.slice&&"function"==typeof a.arrayBuffer;async function g(a,b,c){let g,i;if((0,e.checkFileSupport)(),null!=(g=a=await a)&&"object"==typeof g&&"string"==typeof g.name&&"number"==typeof g.lastModified&&f(g))return a instanceof File?a:(0,d.makeFile)([await a.arrayBuffer()],a.name);if(null!=(i=a)&&"object"==typeof i&&"string"==typeof i.url&&"function"==typeof i.blob){let e=await a.blob();return b||(b=new URL(a.url).pathname.split(/[\\/]/).pop()),(0,d.makeFile)(await h(e),b,c)}let j=await h(a);if(b||(b=(0,d.getName)(a)),!c?.type){let a=j.find(a=>"object"==typeof a&&"type"in a&&a.type);"string"==typeof a&&(c={...c,type:a})}return(0,d.makeFile)(j,b,c)}async function h(a){let b=[];if("string"==typeof a||ArrayBuffer.isView(a)||a instanceof ArrayBuffer)b.push(a);else if(f(a))b.push(a instanceof Blob?a:await a.arrayBuffer());else if((0,d.isAsyncIterable)(a))for await(let c of a)b.push(...await h(c));else{let b=a?.constructor?.name;throw Error(`Unexpected data type: ${typeof a}${b?`; constructor: ${b}`:""}${function(a){if("object"!=typeof a||null===a)return"";let b=Object.getOwnPropertyNames(a);return`; props: [${b.map(a=>`"${a}"`).join(", ")}]`}(a)}`)}return b}},93662:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AzureOpenAI=void 0;let d=c(73555),e=c(80321),f=d.__importStar(c(82963)),g=c(78473),h=c(10922);class i extends h.OpenAI{constructor({baseURL:a=(0,g.readEnv)("OPENAI_BASE_URL"),apiKey:b=(0,g.readEnv)("AZURE_OPENAI_API_KEY"),apiVersion:c=(0,g.readEnv)("OPENAI_API_VERSION"),endpoint:d,deployment:e,azureADTokenProvider:h,dangerouslyAllowBrowser:i,...j}={}){if(!c)throw new f.OpenAIError("The OPENAI_API_VERSION environment variable is missing or empty; either provide it, or instantiate the AzureOpenAI client with an apiVersion option, like new AzureOpenAI({ apiVersion: 'My API Version' }).");if("function"==typeof h&&(i=!0),!h&&!b)throw new f.OpenAIError("Missing credentials. Please pass one of `apiKey` and `azureADTokenProvider`, or set the `AZURE_OPENAI_API_KEY` environment variable.");if(h&&b)throw new f.OpenAIError("The `apiKey` and `azureADTokenProvider` arguments are mutually exclusive; only one can be passed at a time.");if(j.defaultQuery={...j.defaultQuery,"api-version":c},a){if(d)throw new f.OpenAIError("baseURL and endpoint are mutually exclusive")}else{if(d||(d=process.env.AZURE_OPENAI_ENDPOINT),!d)throw new f.OpenAIError("Must provide one of the `baseURL` or `endpoint` arguments, or the `AZURE_OPENAI_ENDPOINT` environment variable");a=`${d}/openai`}super({apiKey:h??b,baseURL:a,...j,...void 0!==i?{dangerouslyAllowBrowser:i}:{}}),this.apiVersion="",this.apiVersion=c,this.deploymentName=e}async buildRequest(a,b={}){if(j.has(a.path)&&"post"===a.method&&void 0!==a.body){if(!(0,g.isObj)(a.body))throw Error("Expected request body to be an object");let b=this.deploymentName||a.body.model||a.__metadata?.model;void 0===b||this.baseURL.includes("/deployments")||(a.path=`/deployments/${b}${a.path}`)}return super.buildRequest(a,b)}async authHeaders(a){return"string"==typeof this._options.apiKey?(0,e.buildHeaders)([{"api-key":this.apiKey}]):super.authHeaders(a)}}b.AzureOpenAI=i;let j=new Set(["/completions","/chat/completions","/embeddings","/audio/transcriptions","/audio/translations","/audio/speech","/images/generations","/batches","/images/edits"])},94374:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Moderations=void 0;let d=c(9173);class e extends d.APIResource{create(a,b){return this._client.post("/moderations",{body:a,...b})}}b.Moderations=e},94500:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.OutputItems=void 0;let d=c(9173),e=c(73637),f=c(12998);class g extends d.APIResource{retrieve(a,b,c){let{eval_id:d,run_id:e}=b;return this._client.get((0,f.path)`/evals/${d}/runs/${e}/output_items/${a}`,c)}list(a,b,c){let{eval_id:d,...g}=b;return this._client.getAPIList((0,f.path)`/evals/${d}/runs/${a}/output_items`,e.CursorPage,{query:g,...c})}}b.OutputItems=g},94686:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Speech=void 0;let d=c(9173),e=c(80321);class f extends d.APIResource{create(a,b){return this._client.post("/audio/speech",{body:a,...b,headers:(0,e.buildHeaders)([{Accept:"application/octet-stream"},b?.headers]),__binaryResponse:!0})}}b.Speech=f},94749:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.VERSION=void 0,b.VERSION="5.23.0"},95040:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.FineTuning=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(75484)),g=c(75484),h=d.__importStar(c(87933)),i=c(87933),j=d.__importStar(c(25685)),k=c(25685),l=d.__importStar(c(20123)),m=c(20123);class n extends e.APIResource{constructor(){super(...arguments),this.methods=new f.Methods(this._client),this.jobs=new l.Jobs(this._client),this.checkpoints=new j.Checkpoints(this._client),this.alpha=new h.Alpha(this._client)}}b.FineTuning=n,n.Methods=g.Methods,n.Jobs=m.Jobs,n.Checkpoints=k.Checkpoints,n.Alpha=i.Alpha},96487:()=>{},97549:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Images=void 0;let d=c(9173),e=c(30453);class f extends d.APIResource{createVariation(a,b){return this._client.post("/images/variations",(0,e.multipartFormRequestOptions)({body:a,...b},this._client))}edit(a,b){return this._client.post("/images/edits",(0,e.multipartFormRequestOptions)({body:a,...b,stream:a.stream??!1},this._client))}generate(a,b){return this._client.post("/images/generations",{body:a,...b,stream:a.stream??!1})}}b.Images=f},97799:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.InvalidWebhookSignatureError=b.ContentFilterFinishReasonError=b.LengthFinishReasonError=b.InternalServerError=b.RateLimitError=b.UnprocessableEntityError=b.ConflictError=b.NotFoundError=b.PermissionDeniedError=b.AuthenticationError=b.BadRequestError=b.APIConnectionTimeoutError=b.APIConnectionError=b.APIUserAbortError=b.APIError=b.OpenAIError=void 0;let d=c(58512);class e extends Error{}b.OpenAIError=e;class f extends e{constructor(a,b,c,d){super(`${f.makeMessage(a,b,c)}`),this.status=a,this.headers=d,this.requestID=d?.get("x-request-id"),this.error=b,this.code=b?.code,this.param=b?.param,this.type=b?.type}static makeMessage(a,b,c){let d=b?.message?"string"==typeof b.message?b.message:JSON.stringify(b.message):b?JSON.stringify(b):c;return a&&d?`${a} ${d}`:a?`${a} status code (no body)`:d||"(no status code or body)"}static generate(a,b,c,e){if(!a||!e)return new h({message:c,cause:(0,d.castToError)(b)});let g=b?.error;return 400===a?new j(a,g,c,e):401===a?new k(a,g,c,e):403===a?new l(a,g,c,e):404===a?new m(a,g,c,e):409===a?new n(a,g,c,e):422===a?new o(a,g,c,e):429===a?new p(a,g,c,e):a>=500?new q(a,g,c,e):new f(a,g,c,e)}}b.APIError=f;class g extends f{constructor({message:a}={}){super(void 0,void 0,a||"Request was aborted.",void 0)}}b.APIUserAbortError=g;class h extends f{constructor({message:a,cause:b}){super(void 0,void 0,a||"Connection error.",void 0),b&&(this.cause=b)}}b.APIConnectionError=h;class i extends h{constructor({message:a}={}){super({message:a??"Request timed out."})}}b.APIConnectionTimeoutError=i;class j extends f{}b.BadRequestError=j;class k extends f{}b.AuthenticationError=k;class l extends f{}b.PermissionDeniedError=l;class m extends f{}b.NotFoundError=m;class n extends f{}b.ConflictError=n;class o extends f{}b.UnprocessableEntityError=o;class p extends f{}b.RateLimitError=p;class q extends f{}b.InternalServerError=q;class r extends e{constructor(){super("Could not parse response content as the length limit was reached")}}b.LengthFinishReasonError=r;class s extends e{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}b.ContentFilterFinishReasonError=s;class t extends Error{constructor(a){super(a)}}b.InvalidWebhookSignatureError=t},99605:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Threads=void 0;let d=c(73555),e=c(9173),f=d.__importStar(c(91790)),g=c(91790),h=d.__importStar(c(67805)),i=c(67805),j=c(80321),k=c(58549),l=c(12998);class m extends e.APIResource{constructor(){super(...arguments),this.runs=new h.Runs(this._client),this.messages=new f.Messages(this._client)}create(a={},b){return this._client.post("/threads",{body:a,...b,headers:(0,j.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},b?.headers])})}retrieve(a,b){return this._client.get((0,l.path)`/threads/${a}`,{...b,headers:(0,j.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},b?.headers])})}update(a,b,c){return this._client.post((0,l.path)`/threads/${a}`,{body:b,...c,headers:(0,j.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},c?.headers])})}delete(a,b){return this._client.delete((0,l.path)`/threads/${a}`,{...b,headers:(0,j.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},b?.headers])})}createAndRun(a,b){return this._client.post("/threads/runs",{body:a,...b,headers:(0,j.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},b?.headers]),stream:a.stream??!1})}async createAndRunPoll(a,b){let c=await this.createAndRun(a,b);return await this.runs.poll(c.id,{thread_id:c.thread_id},b)}createAndRunStream(a,b){return k.AssistantStream.createThreadAssistantStream(a,this._client.beta.threads,b)}}b.Threads=m,m.Runs=i.Runs,m.Messages=g.Messages}};var b=require("../../../webpack-runtime.js");b.C(a);var c=b.X(0,[5873,1428,1692,9608,6802,2098,2995,4570],()=>b(b.s=57461));module.exports=c})();