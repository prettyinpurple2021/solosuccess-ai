(()=>{var a={};a.id=9263,a.ids=[9263],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5052:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>C.default,__next_app__:()=>I,handler:()=>K,pages:()=>H,routeModule:()=>J,tree:()=>G});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(50539),D=c(62506),E=c(91203),F={};for(let a in D)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(F[a]=()=>D[a]);c.d(b,F);let G={children:["",{children:["dashboard",{children:["slaylist",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,47485)),"C:\\Users\\prett\\Desktop\\SoloSuccess AI\\app\\dashboard\\slaylist\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,69694)),"C:\\Users\\prett\\Desktop\\SoloSuccess AI\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,16953)),"C:\\Users\\prett\\Desktop\\SoloSuccess AI\\app\\layout.tsx"],error:[()=>Promise.resolve().then(c.bind(c,41697)),"C:\\Users\\prett\\Desktop\\SoloSuccess AI\\app\\error.tsx"],loading:[()=>Promise.resolve().then(c.bind(c,90391)),"C:\\Users\\prett\\Desktop\\SoloSuccess AI\\app\\loading.tsx"],"global-error":[()=>Promise.resolve().then(c.bind(c,50539)),"C:\\Users\\prett\\Desktop\\SoloSuccess AI\\app\\global-error.tsx"],"not-found":[()=>Promise.resolve().then(c.bind(c,8595)),"C:\\Users\\prett\\Desktop\\SoloSuccess AI\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"]}]}.children,H=["C:\\Users\\prett\\Desktop\\SoloSuccess AI\\app\\dashboard\\slaylist\\page.tsx"],I={require:c,loadChunk:()=>Promise.resolve()},J=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/dashboard/slaylist/page",pathname:"/dashboard/slaylist",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:G},distDir:".next",relativeProjectDir:""});async function K(a,b,d){var F;let L="/dashboard/slaylist/page";"/index"===L&&(L="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await J.prepare(a,b,{srcPage:L,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(L),{isOnDemandRevalidate:ah}=O,ai=J.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(F=$.routes[ag]??$.dynamicRoutes[ag])?void 0:F.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===J.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&J.isDev&&(aB=aa),J.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...D,tree:G,pages:H,GlobalError:C.default,handler:K,routeModule:J,__next_app__:I};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:L,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=J.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return J.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:J,page:L,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),J.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>J.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:J.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!J.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===J.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await J.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await J.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),J.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!J.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&E.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw aF||b instanceof B.NoFallbackError||await J.onRequestError(a,b,{routerKind:"App Router",routePath:L,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},6334:(a,b,c)=>{"use strict";c.d(b,{tU:()=>D,av:()=>G,j7:()=>E,Xi:()=>F});var d=c(21124),e=c(38301),f=c(87868),g=c(2332),h=c(88617),i=c(29988),j=c(6406),k=c(10498),l=c(11720),m=c(75656),n="Tabs",[o,p]=(0,g.A)(n,[h.RG]),q=(0,h.RG)(),[r,s]=o(n),t=e.forwardRef((a,b)=>{let{__scopeTabs:c,value:e,onValueChange:f,defaultValue:g,orientation:h="horizontal",dir:i,activationMode:o="automatic",...p}=a,q=(0,k.jH)(i),[s,t]=(0,l.i)({prop:e,onChange:f,defaultProp:g??"",caller:n});return(0,d.jsx)(r,{scope:c,baseId:(0,m.B)(),value:s,onValueChange:t,orientation:h,dir:q,activationMode:o,children:(0,d.jsx)(j.sG.div,{dir:q,"data-orientation":h,...p,ref:b})})});t.displayName=n;var u="TabsList",v=e.forwardRef((a,b)=>{let{__scopeTabs:c,loop:e=!0,...f}=a,g=s(u,c),i=q(c);return(0,d.jsx)(h.bL,{asChild:!0,...i,orientation:g.orientation,dir:g.dir,loop:e,children:(0,d.jsx)(j.sG.div,{role:"tablist","aria-orientation":g.orientation,...f,ref:b})})});v.displayName=u;var w="TabsTrigger",x=e.forwardRef((a,b)=>{let{__scopeTabs:c,value:e,disabled:g=!1,...i}=a,k=s(w,c),l=q(c),m=A(k.baseId,e),n=B(k.baseId,e),o=e===k.value;return(0,d.jsx)(h.q7,{asChild:!0,...l,focusable:!g,active:o,children:(0,d.jsx)(j.sG.button,{type:"button",role:"tab","aria-selected":o,"aria-controls":n,"data-state":o?"active":"inactive","data-disabled":g?"":void 0,disabled:g,id:m,...i,ref:b,onMouseDown:(0,f.mK)(a.onMouseDown,a=>{g||0!==a.button||!1!==a.ctrlKey?a.preventDefault():k.onValueChange(e)}),onKeyDown:(0,f.mK)(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&k.onValueChange(e)}),onFocus:(0,f.mK)(a.onFocus,()=>{let a="manual"!==k.activationMode;o||g||!a||k.onValueChange(e)})})})});x.displayName=w;var y="TabsContent",z=e.forwardRef((a,b)=>{let{__scopeTabs:c,value:f,forceMount:g,children:h,...k}=a,l=s(y,c),m=A(l.baseId,f),n=B(l.baseId,f),o=f===l.value,p=e.useRef(o);return e.useEffect(()=>{let a=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,d.jsx)(i.C,{present:g||o,children:({present:c})=>(0,d.jsx)(j.sG.div,{"data-state":o?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":m,hidden:!c,id:n,tabIndex:0,...k,ref:b,style:{...a.style,animationDuration:p.current?"0s":void 0},children:c&&h})})});function A(a,b){return`${a}-trigger-${b}`}function B(a,b){return`${a}-content-${b}`}z.displayName=y;var C=c(15514);let D=t,E=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(v,{ref:c,className:(0,C.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...b}));E.displayName=v.displayName;let F=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(x,{ref:c,className:(0,C.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...b}));F.displayName=x.displayName;let G=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(z,{ref:c,className:(0,C.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...b}));G.displayName=z.displayName},7464:(a,b,c)=>{Promise.resolve().then(c.bind(c,47485))},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},28354:a=>{"use strict";a.exports=require("util")},29112:(a,b,c)=>{"use strict";let d;c.r(b),c.d(b,{default:()=>lm});var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U=c(21124),V=c(4803),W=c(38301),X=c(45119),Y=c(19217),Z=c(22544),$=c(88020),_=c(7629),aa=c(33847),ab=c(53199),ac=c(28241),ad=c(33305),ae=c(25658),af=c(8849),ag=c(81808),ah=c(53256),ai=c(67748);let aj=(0,c(23339).A)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]);var ak=c(72567),al=c(15303),am=c(26519),an=c(6334),ao=c(60073),ap=c(25345),aq=c(18310),ar=c(75535),as=c(75219),at=c(31506),au=c(15952),av=c(58410),aw="vercel.ai.error",ax=Symbol.for(aw),ay=class a extends Error{constructor({name:a,message:b,cause:c}){super(b),this[e]=!0,this.name=a,this.cause=c}static isInstance(b){return a.hasMarker(b,aw)}static hasMarker(a,b){let c=Symbol.for(b);return null!=a&&"object"==typeof a&&c in a&&"boolean"==typeof a[c]&&!0===a[c]}};e=ax;var az=ay,aA="AI_APICallError",aB=`vercel.ai.error.${aA}`,aC=Symbol.for(aB),aD=class extends az{constructor({message:a,url:b,requestBodyValues:c,statusCode:d,responseHeaders:e,responseBody:g,cause:h,isRetryable:i=null!=d&&(408===d||409===d||429===d||d>=500),data:j}){super({name:aA,message:a,cause:h}),this[f]=!0,this.url=b,this.requestBodyValues=c,this.statusCode=d,this.responseHeaders=e,this.responseBody=g,this.isRetryable=i,this.data=j}static isInstance(a){return az.hasMarker(a,aB)}};f=aC;var aE="AI_EmptyResponseBodyError",aF=`vercel.ai.error.${aE}`,aG=Symbol.for(aF),aH=class extends az{constructor({message:a="Empty response body"}={}){super({name:aE,message:a}),this[g]=!0}static isInstance(a){return az.hasMarker(a,aF)}};function aI(a){return null==a?"unknown error":"string"==typeof a?a:a instanceof Error?a.message:JSON.stringify(a)}g=aG;var aJ="AI_InvalidArgumentError",aK=`vercel.ai.error.${aJ}`,aL=Symbol.for(aK),aM=class extends az{constructor({message:a,cause:b,argument:c}){super({name:aJ,message:a,cause:b}),this[h]=!0,this.argument=c}static isInstance(a){return az.hasMarker(a,aK)}};h=aL;var aN="AI_InvalidPromptError",aO=`vercel.ai.error.${aN}`,aP=Symbol.for(aO),aQ=class extends az{constructor({prompt:a,message:b,cause:c}){super({name:aN,message:`Invalid prompt: ${b}`,cause:c}),this[i]=!0,this.prompt=a}static isInstance(a){return az.hasMarker(a,aO)}};i=aP;var aR="AI_InvalidResponseDataError",aS=`vercel.ai.error.${aR}`,aT=Symbol.for(aS),aU=class extends az{constructor({data:a,message:b=`Invalid response data: ${JSON.stringify(a)}.`}){super({name:aR,message:b}),this[j]=!0,this.data=a}static isInstance(a){return az.hasMarker(a,aS)}};j=aT;var aV="AI_JSONParseError",aW=`vercel.ai.error.${aV}`,aX=Symbol.for(aW),aY=class extends az{constructor({text:a,cause:b}){super({name:aV,message:`JSON parsing failed: Text: ${a}.
Error message: ${aI(b)}`,cause:b}),this[k]=!0,this.text=a}static isInstance(a){return az.hasMarker(a,aW)}};k=aX;var aZ="AI_LoadAPIKeyError",a$=`vercel.ai.error.${aZ}`,a_=Symbol.for(a$),a0=class extends az{constructor({message:a}){super({name:aZ,message:a}),this[l]=!0}static isInstance(a){return az.hasMarker(a,a$)}};l=a_,Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError");var a1="AI_NoSuchModelError",a2=`vercel.ai.error.${a1}`,a3=Symbol.for(a2),a4=class extends az{constructor({errorName:a=a1,modelId:b,modelType:c,message:d=`No such ${c}: ${b}`}){super({name:a,message:d}),this[m]=!0,this.modelId=b,this.modelType=c}static isInstance(a){return az.hasMarker(a,a2)}};m=a3;var a5="AI_TooManyEmbeddingValuesForCallError",a6=`vercel.ai.error.${a5}`,a7=Symbol.for(a6),a8=class extends az{constructor(a){super({name:a5,message:`Too many values for a single embedding call. The ${a.provider} model "${a.modelId}" can only embed up to ${a.maxEmbeddingsPerCall} values per call, but ${a.values.length} values were provided.`}),this[n]=!0,this.provider=a.provider,this.modelId=a.modelId,this.maxEmbeddingsPerCall=a.maxEmbeddingsPerCall,this.values=a.values}static isInstance(a){return az.hasMarker(a,a6)}};n=a7;var a9="AI_TypeValidationError",ba=`vercel.ai.error.${a9}`,bb=Symbol.for(ba),bc=class a extends az{constructor({value:a,cause:b}){super({name:a9,message:`Type validation failed: Value: ${JSON.stringify(a)}.
Error message: ${aI(b)}`,cause:b}),this[o]=!0,this.value=a}static isInstance(a){return az.hasMarker(a,ba)}static wrap({value:b,cause:c}){return a.isInstance(c)&&c.value===b?c:new a({value:b,cause:c})}};o=bb;var bd="AI_UnsupportedFunctionalityError",be=`vercel.ai.error.${bd}`,bf=Symbol.for(be),bg=class extends az{constructor({functionality:a,message:b=`'${a}' functionality not supported.`}){super({name:bd,message:b}),this[p]=!0,this.functionality=a}static isInstance(a){return az.hasMarker(a,be)}};p=bf;class bh extends Error{constructor(a,b){super(a),this.name="ParseError",this.type=b.type,this.field=b.field,this.value=b.value,this.line=b.line}}function bi(a){}class bj extends TransformStream{constructor({onError:a,onRetry:b,onComment:c}={}){let d;super({start(e){d=function(a){if("function"==typeof a)throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:b=bi,onError:c=bi,onRetry:d=bi,onComment:e}=a,f="",g=!0,h,i="",j="";function k(a){if(""===a)return void(i.length>0&&b({id:h,event:j||void 0,data:i.endsWith(`
`)?i.slice(0,-1):i}),h=void 0,i="",j="");if(a.startsWith(":")){e&&e(a.slice(a.startsWith(": ")?2:1));return}let c=a.indexOf(":");if(-1!==c){let b=a.slice(0,c),d=" "===a[c+1]?2:1;l(b,a.slice(c+d),a);return}l(a,"",a)}function l(a,b,e){switch(a){case"event":j=b;break;case"data":i=`${i}${b}
`;break;case"id":h=b.includes("\0")?void 0:b;break;case"retry":/^\d+$/.test(b)?d(parseInt(b,10)):c(new bh(`Invalid \`retry\` value: "${b}"`,{type:"invalid-retry",value:b,line:e}));break;default:c(new bh(`Unknown field "${a.length>20?`${a.slice(0,20)}\u2026`:a}"`,{type:"unknown-field",field:a,value:b,line:e}))}}return{feed:function(a){let b=g?a.replace(/^\xEF\xBB\xBF/,""):a,[c,d]=function(a){let b=[],c="",d=0;for(;d<a.length;){let e=a.indexOf("\r",d),f=a.indexOf(`
`,d),g=-1;if(-1!==e&&-1!==f?g=Math.min(e,f):-1!==e?g=e===a.length-1?-1:e:-1!==f&&(g=f),-1===g){c=a.slice(d);break}{let c=a.slice(d,g);b.push(c),"\r"===a[(d=g+1)-1]&&a[d]===`
`&&d++}}return[b,c]}(`${f}${b}`);for(let a of c)k(a);f=d,g=!1},reset:function(a={}){f&&a.consume&&k(f),g=!0,h=void 0,i="",j="",f=""}}}({onEvent:a=>{e.enqueue(a)},onError(b){"terminate"===a?e.error(b):"function"==typeof a&&a(b)},onRetry:b,onComment:c})},transform(a){d.feed(a)}})}}Symbol("ZodOutput"),Symbol("ZodInput");class bk{constructor(){this._map=new Map,this._idmap=new Map}add(a,...b){let c=b[0];if(this._map.set(a,c),c&&"object"==typeof c&&"id"in c){if(this._idmap.has(c.id))throw Error(`ID ${c.id} already exists in the registry`);this._idmap.set(c.id,a)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(a){let b=this._map.get(a);return b&&"object"==typeof b&&"id"in b&&this._idmap.delete(b.id),this._map.delete(a),this}get(a){let b=a._zod.parent;if(b){let c={...this.get(b)??{}};return delete c.id,{...c,...this._map.get(a)}}return this._map.get(a)}has(a){return this._map.has(a)}}let bl=new bk;function bm(a){let b=Object.values(a).filter(a=>"number"==typeof a);return Object.entries(a).filter(([a,c])=>-1===b.indexOf(+a)).map(([a,b])=>b)}function bn(a,b){return"bigint"==typeof b?b.toString():b}function bo(a){return{get value(){{let b=a();return Object.defineProperty(this,"value",{value:b}),b}}}}function bp(a){let b=+!!a.startsWith("^"),c=a.endsWith("$")?a.length-1:a.length;return a.slice(b,c)}function bq(a,b,c){Object.defineProperty(a,b,{get(){{let d=c();return a[b]=d,d}},set(c){Object.defineProperty(a,b,{value:c})},configurable:!0})}function br(a,b,c){Object.defineProperty(a,b,{value:c,writable:!0,enumerable:!0,configurable:!0})}function bs(a){return JSON.stringify(a)}let bt=Error.captureStackTrace?Error.captureStackTrace:(...a)=>{};function bu(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}let bv=bo(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(a){return!1}});function bw(a){if(!1===bu(a))return!1;let b=a.constructor;if(void 0===b)return!0;let c=b.prototype;return!1!==bu(c)&&!1!==Object.prototype.hasOwnProperty.call(c,"isPrototypeOf")}let bx=new Set(["string","number","symbol"]);function by(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function bz(a,b,c){let d=new a._zod.constr(b??a._zod.def);return(!b||c?.parent)&&(d._zod.parent=a),d}function bA(a){if(!a)return{};if("string"==typeof a)return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");a.error=a.message}return(delete a.message,"string"==typeof a.error)?{...a,error:()=>a.error}:a}let bB={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function bC(a,b=0){for(let c=b;c<a.issues.length;c++)if(a.issues[c]?.continue!==!0)return!0;return!1}function bD(a,b){return b.map(b=>(b.path??(b.path=[]),b.path.unshift(a),b))}function bE(a){return"string"==typeof a?a:a?.message}function bF(a,b,c){let d={...a,path:a.path??[]};return a.message||(d.message=bE(a.inst?._zod.def?.error?.(a))??bE(b?.error?.(a))??bE(c.customError?.(a))??bE(c.localeError?.(a))??"Invalid input"),delete d.inst,delete d.continue,b?.reportInput||delete d.input,d}function bG(a){return Array.isArray(a)?"array":"string"==typeof a?"string":"unknown"}function bH(...a){let[b,c,d]=a;return"string"==typeof b?{message:b,code:"custom",input:c,inst:d}:{...b}}class bI{constructor(a){this.counter=0,this.metadataRegistry=a?.metadata??bl,this.target=a?.target??"draft-2020-12",this.unrepresentable=a?.unrepresentable??"throw",this.override=a?.override??(()=>{}),this.io=a?.io??"output",this.seen=new Map}process(a,b={path:[],schemaPath:[]}){var c;let d=a._zod.def,e=this.seen.get(a);if(e)return e.count++,b.schemaPath.includes(a)&&(e.cycle=b.path),e.schema;let f={schema:{},count:1,cycle:void 0,path:b.path};this.seen.set(a,f);let g=a._zod.toJSONSchema?.();if(g)f.schema=g;else{let c={...b,schemaPath:[...b.schemaPath,a],path:b.path},e=a._zod.parent;if(e)f.ref=e,this.process(e,c),this.seen.get(e).isParent=!0;else{let b=f.schema;switch(d.type){case"string":{b.type="string";let{minimum:c,maximum:d,format:e,patterns:g,contentEncoding:h}=a._zod.bag;if("number"==typeof c&&(b.minLength=c),"number"==typeof d&&(b.maxLength=d),e&&(b.format=({guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""})[e]??e,""===b.format&&delete b.format),h&&(b.contentEncoding=h),g&&g.size>0){let a=[...g];1===a.length?b.pattern=a[0].source:a.length>1&&(f.schema.allOf=[...a.map(a=>({..."draft-7"===this.target?{type:"string"}:{},pattern:a.source}))])}break}case"number":{let{minimum:c,maximum:d,format:e,multipleOf:f,exclusiveMaximum:g,exclusiveMinimum:h}=a._zod.bag;"string"==typeof e&&e.includes("int")?b.type="integer":b.type="number","number"==typeof h&&(b.exclusiveMinimum=h),"number"==typeof c&&(b.minimum=c,"number"==typeof h&&(h>=c?delete b.minimum:delete b.exclusiveMinimum)),"number"==typeof g&&(b.exclusiveMaximum=g),"number"==typeof d&&(b.maximum=d,"number"==typeof g&&(g<=d?delete b.maximum:delete b.exclusiveMaximum)),"number"==typeof f&&(b.multipleOf=f);break}case"boolean":case"success":b.type="boolean";break;case"bigint":if("throw"===this.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema");break;case"symbol":if("throw"===this.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema");break;case"null":b.type="null";break;case"any":case"unknown":break;case"undefined":if("throw"===this.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema");break;case"void":if("throw"===this.unrepresentable)throw Error("Void cannot be represented in JSON Schema");break;case"never":b.not={};break;case"date":if("throw"===this.unrepresentable)throw Error("Date cannot be represented in JSON Schema");break;case"array":{let{minimum:e,maximum:f}=a._zod.bag;"number"==typeof e&&(b.minItems=e),"number"==typeof f&&(b.maxItems=f),b.type="array",b.items=this.process(d.element,{...c,path:[...c.path,"items"]});break}case"object":{b.type="object",b.properties={};let a=d.shape;for(let d in a)b.properties[d]=this.process(a[d],{...c,path:[...c.path,"properties",d]});let e=new Set([...new Set(Object.keys(a))].filter(a=>{let b=d.shape[a]._zod;return"input"===this.io?void 0===b.optin:void 0===b.optout}));e.size>0&&(b.required=Array.from(e)),d.catchall?._zod.def.type==="never"?b.additionalProperties=!1:d.catchall?d.catchall&&(b.additionalProperties=this.process(d.catchall,{...c,path:[...c.path,"additionalProperties"]})):"output"===this.io&&(b.additionalProperties=!1);break}case"union":b.anyOf=d.options.map((a,b)=>this.process(a,{...c,path:[...c.path,"anyOf",b]}));break;case"intersection":{let a=this.process(d.left,{...c,path:[...c.path,"allOf",0]}),e=this.process(d.right,{...c,path:[...c.path,"allOf",1]}),f=a=>"allOf"in a&&1===Object.keys(a).length;b.allOf=[...f(a)?a.allOf:[a],...f(e)?e.allOf:[e]];break}case"tuple":{b.type="array";let e=d.items.map((a,b)=>this.process(a,{...c,path:[...c.path,"prefixItems",b]}));if("draft-2020-12"===this.target?b.prefixItems=e:b.items=e,d.rest){let a=this.process(d.rest,{...c,path:[...c.path,"items"]});"draft-2020-12"===this.target?b.items=a:b.additionalItems=a}d.rest&&(b.items=this.process(d.rest,{...c,path:[...c.path,"items"]}));let{minimum:f,maximum:g}=a._zod.bag;"number"==typeof f&&(b.minItems=f),"number"==typeof g&&(b.maxItems=g);break}case"record":b.type="object",b.propertyNames=this.process(d.keyType,{...c,path:[...c.path,"propertyNames"]}),b.additionalProperties=this.process(d.valueType,{...c,path:[...c.path,"additionalProperties"]});break;case"map":if("throw"===this.unrepresentable)throw Error("Map cannot be represented in JSON Schema");break;case"set":if("throw"===this.unrepresentable)throw Error("Set cannot be represented in JSON Schema");break;case"enum":{let a=bm(d.entries);a.every(a=>"number"==typeof a)&&(b.type="number"),a.every(a=>"string"==typeof a)&&(b.type="string"),b.enum=a;break}case"literal":{let a=[];for(let b of d.values)if(void 0===b){if("throw"===this.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof b)if("throw"===this.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");else a.push(Number(b));else a.push(b);if(0===a.length);else if(1===a.length){let c=a[0];b.type=null===c?"null":typeof c,b.const=c}else a.every(a=>"number"==typeof a)&&(b.type="number"),a.every(a=>"string"==typeof a)&&(b.type="string"),a.every(a=>"boolean"==typeof a)&&(b.type="string"),a.every(a=>null===a)&&(b.type="null"),b.enum=a;break}case"file":{let c={type:"string",format:"binary",contentEncoding:"binary"},{minimum:d,maximum:e,mime:f}=a._zod.bag;void 0!==d&&(c.minLength=d),void 0!==e&&(c.maxLength=e),f?1===f.length?(c.contentMediaType=f[0],Object.assign(b,c)):b.anyOf=f.map(a=>({...c,contentMediaType:a})):Object.assign(b,c);break}case"transform":if("throw"===this.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema");break;case"nullable":b.anyOf=[this.process(d.innerType,c),{type:"null"}];break;case"nonoptional":case"promise":case"optional":this.process(d.innerType,c),f.ref=d.innerType;break;case"default":this.process(d.innerType,c),f.ref=d.innerType,b.default=JSON.parse(JSON.stringify(d.defaultValue));break;case"prefault":this.process(d.innerType,c),f.ref=d.innerType,"input"===this.io&&(b._prefault=JSON.parse(JSON.stringify(d.defaultValue)));break;case"catch":{let a;this.process(d.innerType,c),f.ref=d.innerType;try{a=d.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}b.default=a;break}case"nan":if("throw"===this.unrepresentable)throw Error("NaN cannot be represented in JSON Schema");break;case"template_literal":{let c=a._zod.pattern;if(!c)throw Error("Pattern not found in template literal");b.type="string",b.pattern=c.source;break}case"pipe":{let a="input"===this.io?"transform"===d.in._zod.def.type?d.out:d.in:d.out;this.process(a,c),f.ref=a;break}case"readonly":this.process(d.innerType,c),f.ref=d.innerType,b.readOnly=!0;break;case"lazy":{let b=a._zod.innerType;this.process(b,c),f.ref=b;break}case"custom":if("throw"===this.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema")}}}let h=this.metadataRegistry.get(a);return h&&Object.assign(f.schema,h),"input"===this.io&&function a(b,c){let d=c??{seen:new Set};if(d.seen.has(b))return!1;d.seen.add(b);let e=b._zod.def;switch(e.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":case"custom":case"success":case"catch":return!1;case"array":return a(e.element,d);case"object":for(let b in e.shape)if(a(e.shape[b],d))return!0;return!1;case"union":for(let b of e.options)if(a(b,d))return!0;return!1;case"intersection":return a(e.left,d)||a(e.right,d);case"tuple":for(let b of e.items)if(a(b,d))return!0;if(e.rest&&a(e.rest,d))return!0;return!1;case"record":case"map":return a(e.keyType,d)||a(e.valueType,d);case"set":return a(e.valueType,d);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":case"default":case"prefault":return a(e.innerType,d);case"lazy":return a(e.getter(),d);case"transform":return!0;case"pipe":return a(e.in,d)||a(e.out,d)}throw Error(`Unknown schema type: ${e.type}`)}(a)&&(delete f.schema.examples,delete f.schema.default),"input"===this.io&&f.schema._prefault&&((c=f.schema).default??(c.default=f.schema._prefault)),delete f.schema._prefault,this.seen.get(a).schema}emit(a,b){let c={cycles:b?.cycles??"ref",reused:b?.reused??"inline",external:b?.external??void 0},d=this.seen.get(a);if(!d)throw Error("Unprocessed schema. This is a bug in Zod.");let e=a=>{let b="draft-2020-12"===this.target?"$defs":"definitions";if(c.external){let d=c.external.registry.get(a[0])?.id,e=c.external.uri??(a=>a);if(d)return{ref:e(d)};let f=a[1].defId??a[1].schema.id??`schema${this.counter++}`;return a[1].defId=f,{defId:f,ref:`${e("__shared")}#/${b}/${f}`}}if(a[1]===d)return{ref:"#"};let e=`#/${b}/`,f=a[1].schema.id??`__schema${this.counter++}`;return{defId:f,ref:e+f}},f=a=>{if(a[1].schema.$ref)return;let b=a[1],{ref:c,defId:d}=e(a);b.def={...b.schema},d&&(b.defId=d);let f=b.schema;for(let a in f)delete f[a];f.$ref=c};if("throw"===c.cycles)for(let a of this.seen.entries()){let b=a[1];if(b.cycle)throw Error(`Cycle detected: #/${b.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let b of this.seen.entries()){let d=b[1];if(a===b[0]){f(b);continue}if(c.external){let d=c.external.registry.get(b[0])?.id;if(a!==b[0]&&d){f(b);continue}}if(this.metadataRegistry.get(b[0])?.id||d.cycle||d.count>1&&"ref"===c.reused){f(b);continue}}let g=(a,b)=>{let c=this.seen.get(a),d=c.def??c.schema,e={...d};if(null===c.ref)return;let f=c.ref;if(c.ref=null,f){g(f,b);let a=this.seen.get(f).schema;a.$ref&&"draft-7"===b.target?(d.allOf=d.allOf??[],d.allOf.push(a)):(Object.assign(d,a),Object.assign(d,e))}c.isParent||this.override({zodSchema:a,jsonSchema:d,path:c.path??[]})};for(let a of[...this.seen.entries()].reverse())g(a[0],{target:this.target});let h={};if("draft-2020-12"===this.target?h.$schema="https://json-schema.org/draft/2020-12/schema":"draft-7"===this.target?h.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),c.external?.uri){let b=c.external.registry.get(a)?.id;if(!b)throw Error("Schema is missing an `id` property");h.$id=c.external.uri(b)}Object.assign(h,d.def);let i=c.external?.defs??{};for(let a of this.seen.entries()){let b=a[1];b.def&&b.defId&&(i[b.defId]=b.def)}c.external||Object.keys(i).length>0&&("draft-2020-12"===this.target?h.$defs=i:h.definitions=i);try{return JSON.parse(JSON.stringify(h))}catch(a){throw Error("Error converting schema to JSON.")}}}function bJ(a,b,c){function d(c,d){var e;for(let f in Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(e=c._zod).traits??(e.traits=new Set),c._zod.traits.add(a),b(c,d),g.prototype)f in c||Object.defineProperty(c,f,{value:g.prototype[f].bind(c)});c._zod.constr=g,c._zod.def=d}let e=c?.Parent??Object;class f extends e{}function g(a){var b;let e=c?.Parent?new f:this;for(let c of(d(e,a),(b=e._zod).deferred??(b.deferred=[]),e._zod.deferred))c();return e}return Object.defineProperty(f,"name",{value:a}),Object.defineProperty(g,"init",{value:d}),Object.defineProperty(g,Symbol.hasInstance,{value:b=>!!c?.Parent&&b instanceof c.Parent||b?._zod?.traits?.has(a)}),Object.defineProperty(g,"name",{value:a}),g}Object.freeze({status:"aborted"}),Symbol("zod_brand");class bK extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}let bL={};function bM(a){return a&&Object.assign(bL,a),bL}let bN=(a,b)=>{a.name="$ZodError",Object.defineProperty(a,"_zod",{value:a._zod,enumerable:!1}),Object.defineProperty(a,"issues",{value:b,enumerable:!1}),Object.defineProperty(a,"message",{get:()=>JSON.stringify(b,bn,2),enumerable:!0}),Object.defineProperty(a,"toString",{value:()=>a.message,enumerable:!1})},bO=bJ("$ZodError",bN),bP=bJ("$ZodError",bN,{Parent:Error}),bQ=a=>(b,c,d)=>{let e=d?{...d,async:!1}:{async:!1},f=b._zod.run({value:c,issues:[]},e);if(f instanceof Promise)throw new bK;return f.issues.length?{success:!1,error:new(a??bO)(f.issues.map(a=>bF(a,e,bM())))}:{success:!0,data:f.value}},bR=bQ(bP),bS=a=>async(b,c,d)=>{let e=d?Object.assign(d,{async:!0}):{async:!0},f=b._zod.run({value:c,issues:[]},e);return f instanceof Promise&&(f=await f),f.issues.length?{success:!1,error:new a(f.issues.map(a=>bF(a,e,bM())))}:{success:!0,data:f.value}},bT=bS(bP),bU=(a,b)=>{bO.init(a,b),a.name="ZodError",Object.defineProperties(a,{format:{value:b=>(function(a,b){let c=b||function(a){return a.message},d={_errors:[]},e=a=>{for(let b of a.issues)if("invalid_union"===b.code&&b.errors.length)b.errors.map(a=>e({issues:a}));else if("invalid_key"===b.code)e({issues:b.issues});else if("invalid_element"===b.code)e({issues:b.issues});else if(0===b.path.length)d._errors.push(c(b));else{let a=d,e=0;for(;e<b.path.length;){let d=b.path[e];e===b.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(c(b))):a[d]=a[d]||{_errors:[]},a=a[d],e++}}};return e(a),d})(a,b)},flatten:{value:b=>(function(a,b=a=>a.message){let c={},d=[];for(let e of a.issues)e.path.length>0?(c[e.path[0]]=c[e.path[0]]||[],c[e.path[0]].push(b(e))):d.push(b(e));return{formErrors:d,fieldErrors:c}})(a,b)},addIssue:{value:b=>a.issues.push(b)},addIssues:{value:b=>a.issues.push(...b)},isEmpty:{get:()=>0===a.issues.length}})};bJ("ZodError",bU);let bV=bJ("ZodError",bU,{Parent:Error}),bW=(a,b,c,d)=>{let e=c?Object.assign(c,{async:!1}):{async:!1},f=a._zod.run({value:b,issues:[]},e);if(f instanceof Promise)throw new bK;if(f.issues.length){let a=new(d?.Err??bV)(f.issues.map(a=>bF(a,e,bM())));throw bt(a,d?.callee),a}return f.value},bX=async(a,b,c,d)=>{let e=c?Object.assign(c,{async:!0}):{async:!0},f=a._zod.run({value:b,issues:[]},e);if(f instanceof Promise&&(f=await f),f.issues.length){let a=new(d?.Err??bV)(f.issues.map(a=>bF(a,e,bM())));throw bt(a,d?.callee),a}return f.value},bY=bQ(bV),bZ=bS(bV);!function(a){a.assertEqual=a=>{},a.assertIs=function(a){},a.assertNever=function(a){throw Error()},a.arrayToEnum=a=>{let b={};for(let c of a)b[c]=c;return b},a.getValidEnumValues=b=>{let c=a.objectKeys(b).filter(a=>"number"!=typeof b[b[a]]),d={};for(let a of c)d[a]=b[a];return a.objectValues(d)},a.objectValues=b=>a.objectKeys(b).map(function(a){return b[a]}),a.objectKeys="function"==typeof Object.keys?a=>Object.keys(a):a=>{let b=[];for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b},a.find=(a,b)=>{for(let c of a)if(b(c))return c},a.isInteger="function"==typeof Number.isInteger?a=>Number.isInteger(a):a=>"number"==typeof a&&Number.isFinite(a)&&Math.floor(a)===a,a.joinValues=function(a,b=" | "){return a.map(a=>"string"==typeof a?`'${a}'`:a).join(b)},a.jsonStringifyReplacer=(a,b)=>"bigint"==typeof b?b.toString():b}(q||(q={})),(r||(r={})).mergeShapes=(a,b)=>({...a,...b});let b$=q.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),b_=a=>{switch(typeof a){case"undefined":return b$.undefined;case"string":return b$.string;case"number":return Number.isNaN(a)?b$.nan:b$.number;case"boolean":return b$.boolean;case"function":return b$.function;case"bigint":return b$.bigint;case"symbol":return b$.symbol;case"object":if(Array.isArray(a))return b$.array;if(null===a)return b$.null;if(a.then&&"function"==typeof a.then&&a.catch&&"function"==typeof a.catch)return b$.promise;if("undefined"!=typeof Map&&a instanceof Map)return b$.map;if("undefined"!=typeof Set&&a instanceof Set)return b$.set;if("undefined"!=typeof Date&&a instanceof Date)return b$.date;return b$.object;default:return b$.unknown}},b0=q.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class b1 extends Error{get errors(){return this.issues}constructor(a){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};let b=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,b):this.__proto__=b,this.name="ZodError",this.issues=a}format(a){let b=a||function(a){return a.message},c={_errors:[]},d=a=>{for(let e of a.issues)if("invalid_union"===e.code)e.unionErrors.map(d);else if("invalid_return_type"===e.code)d(e.returnTypeError);else if("invalid_arguments"===e.code)d(e.argumentsError);else if(0===e.path.length)c._errors.push(b(e));else{let a=c,d=0;for(;d<e.path.length;){let c=e.path[d];d===e.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(b(e))):a[c]=a[c]||{_errors:[]},a=a[c],d++}}};return d(this),c}static assert(a){if(!(a instanceof b1))throw Error(`Not a ZodError: ${a}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,q.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(a=a=>a.message){let b={},c=[];for(let d of this.issues)if(d.path.length>0){let c=d.path[0];b[c]=b[c]||[],b[c].push(a(d))}else c.push(a(d));return{formErrors:c,fieldErrors:b}}get formErrors(){return this.flatten()}}b1.create=a=>new b1(a);let b2=(a,b)=>{let c;switch(a.code){case b0.invalid_type:c=a.received===b$.undefined?"Required":`Expected ${a.expected}, received ${a.received}`;break;case b0.invalid_literal:c=`Invalid literal value, expected ${JSON.stringify(a.expected,q.jsonStringifyReplacer)}`;break;case b0.unrecognized_keys:c=`Unrecognized key(s) in object: ${q.joinValues(a.keys,", ")}`;break;case b0.invalid_union:c="Invalid input";break;case b0.invalid_union_discriminator:c=`Invalid discriminator value. Expected ${q.joinValues(a.options)}`;break;case b0.invalid_enum_value:c=`Invalid enum value. Expected ${q.joinValues(a.options)}, received '${a.received}'`;break;case b0.invalid_arguments:c="Invalid function arguments";break;case b0.invalid_return_type:c="Invalid function return type";break;case b0.invalid_date:c="Invalid date";break;case b0.invalid_string:"object"==typeof a.validation?"includes"in a.validation?(c=`Invalid input: must include "${a.validation.includes}"`,"number"==typeof a.validation.position&&(c=`${c} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?c=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?c=`Invalid input: must end with "${a.validation.endsWith}"`:q.assertNever(a.validation):c="regex"!==a.validation?`Invalid ${a.validation}`:"Invalid";break;case b0.too_small:c="array"===a.type?`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:"string"===a.type?`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:"number"===a.type||"bigint"===a.type?`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:"date"===a.type?`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:"Invalid input";break;case b0.too_big:c="array"===a.type?`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:"string"===a.type?`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:"number"===a.type?`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:"bigint"===a.type?`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:"date"===a.type?`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:"Invalid input";break;case b0.custom:c="Invalid input";break;case b0.invalid_intersection_types:c="Intersection results could not be merged";break;case b0.not_multiple_of:c=`Number must be a multiple of ${a.multipleOf}`;break;case b0.not_finite:c="Number must be finite";break;default:c=b.defaultError,q.assertNever(a)}return{message:c}};!function(a){a.errToObj=a=>"string"==typeof a?{message:a}:a||{},a.toString=a=>"string"==typeof a?a:a?.message}(s||(s={}));let b3=a=>{let{data:b,path:c,errorMaps:d,issueData:e}=a,f=[...c,...e.path||[]],g={...e,path:f};if(void 0!==e.message)return{...e,path:f,message:e.message};let h="";for(let a of d.filter(a=>!!a).slice().reverse())h=a(g,{data:b,defaultError:h}).message;return{...e,path:f,message:h}};function b4(a,b){let c=b3({issueData:b,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,b2,void 0].filter(a=>!!a)});a.common.issues.push(c)}class b5{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(a,b){let c=[];for(let d of b){if("aborted"===d.status)return b6;"dirty"===d.status&&a.dirty(),c.push(d.value)}return{status:a.value,value:c}}static async mergeObjectAsync(a,b){let c=[];for(let a of b){let b=await a.key,d=await a.value;c.push({key:b,value:d})}return b5.mergeObjectSync(a,c)}static mergeObjectSync(a,b){let c={};for(let d of b){let{key:b,value:e}=d;if("aborted"===b.status||"aborted"===e.status)return b6;"dirty"===b.status&&a.dirty(),"dirty"===e.status&&a.dirty(),"__proto__"!==b.value&&(void 0!==e.value||d.alwaysSet)&&(c[b.value]=e.value)}return{status:a.value,value:c}}}let b6=Object.freeze({status:"aborted"}),b7=a=>({status:"dirty",value:a}),b8=a=>({status:"valid",value:a}),b9=a=>"undefined"!=typeof Promise&&a instanceof Promise;class ca{constructor(a,b,c,d){this._cachedPath=[],this.parent=a,this.data=b,this._path=c,this._key=d}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let cb=(a,b)=>{if("valid"===b.status)return{success:!0,data:b.value};if(!a.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let b=new b1(a.common.issues);return this._error=b,this._error}}};function cc(a){if(!a)return{};let{errorMap:b,invalid_type_error:c,required_error:d,description:e}=a;if(b&&(c||d))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return b?{errorMap:b,description:e}:{errorMap:(b,e)=>{let{message:f}=a;return"invalid_enum_value"===b.code?{message:f??e.defaultError}:void 0===e.data?{message:f??d??e.defaultError}:"invalid_type"!==b.code?{message:e.defaultError}:{message:f??c??e.defaultError}},description:e}}class cd{get description(){return this._def.description}_getType(a){return b_(a.data)}_getOrReturnCtx(a,b){return b||{common:a.parent.common,data:a.data,parsedType:b_(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}_processInputParams(a){return{status:new b5,ctx:{common:a.parent.common,data:a.data,parsedType:b_(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}}_parseSync(a){let b=this._parse(a);if(b9(b))throw Error("Synchronous parse encountered promise.");return b}_parseAsync(a){return Promise.resolve(this._parse(a))}parse(a,b){let c=this.safeParse(a,b);if(c.success)return c.data;throw c.error}safeParse(a,b){let c={common:{issues:[],async:b?.async??!1,contextualErrorMap:b?.errorMap},path:b?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:b_(a)},d=this._parseSync({data:a,path:c.path,parent:c});return cb(c,d)}"~validate"(a){let b={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:b_(a)};if(!this["~standard"].async)try{let c=this._parseSync({data:a,path:[],parent:b});return"valid"===c.status?{value:c.value}:{issues:b.common.issues}}catch(a){a?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),b.common={issues:[],async:!0}}return this._parseAsync({data:a,path:[],parent:b}).then(a=>"valid"===a.status?{value:a.value}:{issues:b.common.issues})}async parseAsync(a,b){let c=await this.safeParseAsync(a,b);if(c.success)return c.data;throw c.error}async safeParseAsync(a,b){let c={common:{issues:[],contextualErrorMap:b?.errorMap,async:!0},path:b?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:b_(a)},d=this._parse({data:a,path:c.path,parent:c});return cb(c,await (b9(d)?d:Promise.resolve(d)))}refine(a,b){return this._refinement((c,d)=>{let e=a(c),f=()=>d.addIssue({code:b0.custom,..."string"==typeof b||void 0===b?{message:b}:"function"==typeof b?b(c):b});return"undefined"!=typeof Promise&&e instanceof Promise?e.then(a=>!!a||(f(),!1)):!!e||(f(),!1)})}refinement(a,b){return this._refinement((c,d)=>!!a(c)||(d.addIssue("function"==typeof b?b(c,d):b),!1))}_refinement(a){return new cY({schema:this,typeName:t.ZodEffects,effect:{type:"refinement",refinement:a}})}superRefine(a){return this._refinement(a)}constructor(a){this.spa=this.safeParseAsync,this._def=a,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return cZ.create(this,this._def)}nullable(){return c$.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return cH.create(this)}promise(){return cX.create(this,this._def)}or(a){return cJ.create([this,a],this._def)}and(a){return cM.create(this,a,this._def)}transform(a){return new cY({...cc(this._def),schema:this,typeName:t.ZodEffects,effect:{type:"transform",transform:a}})}default(a){return new c_({...cc(this._def),innerType:this,defaultValue:"function"==typeof a?a:()=>a,typeName:t.ZodDefault})}brand(){return new c2({typeName:t.ZodBranded,type:this,...cc(this._def)})}catch(a){return new c0({...cc(this._def),innerType:this,catchValue:"function"==typeof a?a:()=>a,typeName:t.ZodCatch})}describe(a){return new this.constructor({...this._def,description:a})}pipe(a){return c3.create(this,a)}readonly(){return c4.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let ce=/^c[^\s-]{8,}$/i,cf=/^[0-9a-z]+$/,cg=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ch=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ci=/^[a-z0-9_-]{21}$/i,cj=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ck=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,cl=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,cm=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,cn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,co=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,cp=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cq=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,cr=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,cs="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ct=RegExp(`^${cs}$`);function cu(a){let b="[0-5]\\d";a.precision?b=`${b}\\.\\d{${a.precision}}`:null==a.precision&&(b=`${b}(\\.\\d+)?`);let c=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${b})${c}`}class cv extends cd{_parse(a){var b,c,e,f;let g;if(this._def.coerce&&(a.data=String(a.data)),this._getType(a)!==b$.string){let b=this._getOrReturnCtx(a);return b4(b,{code:b0.invalid_type,expected:b$.string,received:b.parsedType}),b6}let h=new b5;for(let i of this._def.checks)if("min"===i.kind)a.data.length<i.value&&(b4(g=this._getOrReturnCtx(a,g),{code:b0.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),h.dirty());else if("max"===i.kind)a.data.length>i.value&&(b4(g=this._getOrReturnCtx(a,g),{code:b0.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),h.dirty());else if("length"===i.kind){let b=a.data.length>i.value,c=a.data.length<i.value;(b||c)&&(g=this._getOrReturnCtx(a,g),b?b4(g,{code:b0.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&b4(g,{code:b0.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),h.dirty())}else if("email"===i.kind)cl.test(a.data)||(b4(g=this._getOrReturnCtx(a,g),{validation:"email",code:b0.invalid_string,message:i.message}),h.dirty());else if("emoji"===i.kind)d||(d=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),d.test(a.data)||(b4(g=this._getOrReturnCtx(a,g),{validation:"emoji",code:b0.invalid_string,message:i.message}),h.dirty());else if("uuid"===i.kind)ch.test(a.data)||(b4(g=this._getOrReturnCtx(a,g),{validation:"uuid",code:b0.invalid_string,message:i.message}),h.dirty());else if("nanoid"===i.kind)ci.test(a.data)||(b4(g=this._getOrReturnCtx(a,g),{validation:"nanoid",code:b0.invalid_string,message:i.message}),h.dirty());else if("cuid"===i.kind)ce.test(a.data)||(b4(g=this._getOrReturnCtx(a,g),{validation:"cuid",code:b0.invalid_string,message:i.message}),h.dirty());else if("cuid2"===i.kind)cf.test(a.data)||(b4(g=this._getOrReturnCtx(a,g),{validation:"cuid2",code:b0.invalid_string,message:i.message}),h.dirty());else if("ulid"===i.kind)cg.test(a.data)||(b4(g=this._getOrReturnCtx(a,g),{validation:"ulid",code:b0.invalid_string,message:i.message}),h.dirty());else if("url"===i.kind)try{new URL(a.data)}catch{b4(g=this._getOrReturnCtx(a,g),{validation:"url",code:b0.invalid_string,message:i.message}),h.dirty()}else"regex"===i.kind?(i.regex.lastIndex=0,i.regex.test(a.data)||(b4(g=this._getOrReturnCtx(a,g),{validation:"regex",code:b0.invalid_string,message:i.message}),h.dirty())):"trim"===i.kind?a.data=a.data.trim():"includes"===i.kind?a.data.includes(i.value,i.position)||(b4(g=this._getOrReturnCtx(a,g),{code:b0.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),h.dirty()):"toLowerCase"===i.kind?a.data=a.data.toLowerCase():"toUpperCase"===i.kind?a.data=a.data.toUpperCase():"startsWith"===i.kind?a.data.startsWith(i.value)||(b4(g=this._getOrReturnCtx(a,g),{code:b0.invalid_string,validation:{startsWith:i.value},message:i.message}),h.dirty()):"endsWith"===i.kind?a.data.endsWith(i.value)||(b4(g=this._getOrReturnCtx(a,g),{code:b0.invalid_string,validation:{endsWith:i.value},message:i.message}),h.dirty()):"datetime"===i.kind?(function(a){let b=`${cs}T${cu(a)}`,c=[];return c.push(a.local?"Z?":"Z"),a.offset&&c.push("([+-]\\d{2}:?\\d{2})"),b=`${b}(${c.join("|")})`,RegExp(`^${b}$`)})(i).test(a.data)||(b4(g=this._getOrReturnCtx(a,g),{code:b0.invalid_string,validation:"datetime",message:i.message}),h.dirty()):"date"===i.kind?ct.test(a.data)||(b4(g=this._getOrReturnCtx(a,g),{code:b0.invalid_string,validation:"date",message:i.message}),h.dirty()):"time"===i.kind?RegExp(`^${cu(i)}$`).test(a.data)||(b4(g=this._getOrReturnCtx(a,g),{code:b0.invalid_string,validation:"time",message:i.message}),h.dirty()):"duration"===i.kind?ck.test(a.data)||(b4(g=this._getOrReturnCtx(a,g),{validation:"duration",code:b0.invalid_string,message:i.message}),h.dirty()):"ip"===i.kind?(b=a.data,!(("v4"===(c=i.version)||!c)&&cm.test(b)||("v6"===c||!c)&&co.test(b))&&1&&(b4(g=this._getOrReturnCtx(a,g),{validation:"ip",code:b0.invalid_string,message:i.message}),h.dirty())):"jwt"===i.kind?!function(a,b){if(!cj.test(a))return!1;try{let[c]=a.split(".");if(!c)return!1;let d=c.replace(/-/g,"+").replace(/_/g,"/").padEnd(c.length+(4-c.length%4)%4,"="),e=JSON.parse(atob(d));if("object"!=typeof e||null===e||"typ"in e&&e?.typ!=="JWT"||!e.alg||b&&e.alg!==b)return!1;return!0}catch{return!1}}(a.data,i.alg)&&(b4(g=this._getOrReturnCtx(a,g),{validation:"jwt",code:b0.invalid_string,message:i.message}),h.dirty()):"cidr"===i.kind?(e=a.data,!(("v4"===(f=i.version)||!f)&&cn.test(e)||("v6"===f||!f)&&cp.test(e))&&1&&(b4(g=this._getOrReturnCtx(a,g),{validation:"cidr",code:b0.invalid_string,message:i.message}),h.dirty())):"base64"===i.kind?cq.test(a.data)||(b4(g=this._getOrReturnCtx(a,g),{validation:"base64",code:b0.invalid_string,message:i.message}),h.dirty()):"base64url"===i.kind?cr.test(a.data)||(b4(g=this._getOrReturnCtx(a,g),{validation:"base64url",code:b0.invalid_string,message:i.message}),h.dirty()):q.assertNever(i);return{status:h.value,value:a.data}}_regex(a,b,c){return this.refinement(b=>a.test(b),{validation:b,code:b0.invalid_string,...s.errToObj(c)})}_addCheck(a){return new cv({...this._def,checks:[...this._def.checks,a]})}email(a){return this._addCheck({kind:"email",...s.errToObj(a)})}url(a){return this._addCheck({kind:"url",...s.errToObj(a)})}emoji(a){return this._addCheck({kind:"emoji",...s.errToObj(a)})}uuid(a){return this._addCheck({kind:"uuid",...s.errToObj(a)})}nanoid(a){return this._addCheck({kind:"nanoid",...s.errToObj(a)})}cuid(a){return this._addCheck({kind:"cuid",...s.errToObj(a)})}cuid2(a){return this._addCheck({kind:"cuid2",...s.errToObj(a)})}ulid(a){return this._addCheck({kind:"ulid",...s.errToObj(a)})}base64(a){return this._addCheck({kind:"base64",...s.errToObj(a)})}base64url(a){return this._addCheck({kind:"base64url",...s.errToObj(a)})}jwt(a){return this._addCheck({kind:"jwt",...s.errToObj(a)})}ip(a){return this._addCheck({kind:"ip",...s.errToObj(a)})}cidr(a){return this._addCheck({kind:"cidr",...s.errToObj(a)})}datetime(a){return"string"==typeof a?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:a}):this._addCheck({kind:"datetime",precision:void 0===a?.precision?null:a?.precision,offset:a?.offset??!1,local:a?.local??!1,...s.errToObj(a?.message)})}date(a){return this._addCheck({kind:"date",message:a})}time(a){return"string"==typeof a?this._addCheck({kind:"time",precision:null,message:a}):this._addCheck({kind:"time",precision:void 0===a?.precision?null:a?.precision,...s.errToObj(a?.message)})}duration(a){return this._addCheck({kind:"duration",...s.errToObj(a)})}regex(a,b){return this._addCheck({kind:"regex",regex:a,...s.errToObj(b)})}includes(a,b){return this._addCheck({kind:"includes",value:a,position:b?.position,...s.errToObj(b?.message)})}startsWith(a,b){return this._addCheck({kind:"startsWith",value:a,...s.errToObj(b)})}endsWith(a,b){return this._addCheck({kind:"endsWith",value:a,...s.errToObj(b)})}min(a,b){return this._addCheck({kind:"min",value:a,...s.errToObj(b)})}max(a,b){return this._addCheck({kind:"max",value:a,...s.errToObj(b)})}length(a,b){return this._addCheck({kind:"length",value:a,...s.errToObj(b)})}nonempty(a){return this.min(1,s.errToObj(a))}trim(){return new cv({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new cv({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new cv({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(a=>"datetime"===a.kind)}get isDate(){return!!this._def.checks.find(a=>"date"===a.kind)}get isTime(){return!!this._def.checks.find(a=>"time"===a.kind)}get isDuration(){return!!this._def.checks.find(a=>"duration"===a.kind)}get isEmail(){return!!this._def.checks.find(a=>"email"===a.kind)}get isURL(){return!!this._def.checks.find(a=>"url"===a.kind)}get isEmoji(){return!!this._def.checks.find(a=>"emoji"===a.kind)}get isUUID(){return!!this._def.checks.find(a=>"uuid"===a.kind)}get isNANOID(){return!!this._def.checks.find(a=>"nanoid"===a.kind)}get isCUID(){return!!this._def.checks.find(a=>"cuid"===a.kind)}get isCUID2(){return!!this._def.checks.find(a=>"cuid2"===a.kind)}get isULID(){return!!this._def.checks.find(a=>"ulid"===a.kind)}get isIP(){return!!this._def.checks.find(a=>"ip"===a.kind)}get isCIDR(){return!!this._def.checks.find(a=>"cidr"===a.kind)}get isBase64(){return!!this._def.checks.find(a=>"base64"===a.kind)}get isBase64url(){return!!this._def.checks.find(a=>"base64url"===a.kind)}get minLength(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxLength(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}}cv.create=a=>new cv({checks:[],typeName:t.ZodString,coerce:a?.coerce??!1,...cc(a)});class cw extends cd{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(a){let b;if(this._def.coerce&&(a.data=Number(a.data)),this._getType(a)!==b$.number){let b=this._getOrReturnCtx(a);return b4(b,{code:b0.invalid_type,expected:b$.number,received:b.parsedType}),b6}let c=new b5;for(let d of this._def.checks)"int"===d.kind?q.isInteger(a.data)||(b4(b=this._getOrReturnCtx(a,b),{code:b0.invalid_type,expected:"integer",received:"float",message:d.message}),c.dirty()):"min"===d.kind?(d.inclusive?a.data<d.value:a.data<=d.value)&&(b4(b=this._getOrReturnCtx(a,b),{code:b0.too_small,minimum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),c.dirty()):"max"===d.kind?(d.inclusive?a.data>d.value:a.data>=d.value)&&(b4(b=this._getOrReturnCtx(a,b),{code:b0.too_big,maximum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),c.dirty()):"multipleOf"===d.kind?0!==function(a,b){let c=(a.toString().split(".")[1]||"").length,d=(b.toString().split(".")[1]||"").length,e=c>d?c:d;return Number.parseInt(a.toFixed(e).replace(".",""))%Number.parseInt(b.toFixed(e).replace(".",""))/10**e}(a.data,d.value)&&(b4(b=this._getOrReturnCtx(a,b),{code:b0.not_multiple_of,multipleOf:d.value,message:d.message}),c.dirty()):"finite"===d.kind?Number.isFinite(a.data)||(b4(b=this._getOrReturnCtx(a,b),{code:b0.not_finite,message:d.message}),c.dirty()):q.assertNever(d);return{status:c.value,value:a.data}}gte(a,b){return this.setLimit("min",a,!0,s.toString(b))}gt(a,b){return this.setLimit("min",a,!1,s.toString(b))}lte(a,b){return this.setLimit("max",a,!0,s.toString(b))}lt(a,b){return this.setLimit("max",a,!1,s.toString(b))}setLimit(a,b,c,d){return new cw({...this._def,checks:[...this._def.checks,{kind:a,value:b,inclusive:c,message:s.toString(d)}]})}_addCheck(a){return new cw({...this._def,checks:[...this._def.checks,a]})}int(a){return this._addCheck({kind:"int",message:s.toString(a)})}positive(a){return this._addCheck({kind:"min",value:0,inclusive:!1,message:s.toString(a)})}negative(a){return this._addCheck({kind:"max",value:0,inclusive:!1,message:s.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:0,inclusive:!0,message:s.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:0,inclusive:!0,message:s.toString(a)})}multipleOf(a,b){return this._addCheck({kind:"multipleOf",value:a,message:s.toString(b)})}finite(a){return this._addCheck({kind:"finite",message:s.toString(a)})}safe(a){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:s.toString(a)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:s.toString(a)})}get minValue(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxValue(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}get isInt(){return!!this._def.checks.find(a=>"int"===a.kind||"multipleOf"===a.kind&&q.isInteger(a.value))}get isFinite(){let a=null,b=null;for(let c of this._def.checks)if("finite"===c.kind||"int"===c.kind||"multipleOf"===c.kind)return!0;else"min"===c.kind?(null===b||c.value>b)&&(b=c.value):"max"===c.kind&&(null===a||c.value<a)&&(a=c.value);return Number.isFinite(b)&&Number.isFinite(a)}}cw.create=a=>new cw({checks:[],typeName:t.ZodNumber,coerce:a?.coerce||!1,...cc(a)});class cx extends cd{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(a){let b;if(this._def.coerce)try{a.data=BigInt(a.data)}catch{return this._getInvalidInput(a)}if(this._getType(a)!==b$.bigint)return this._getInvalidInput(a);let c=new b5;for(let d of this._def.checks)"min"===d.kind?(d.inclusive?a.data<d.value:a.data<=d.value)&&(b4(b=this._getOrReturnCtx(a,b),{code:b0.too_small,type:"bigint",minimum:d.value,inclusive:d.inclusive,message:d.message}),c.dirty()):"max"===d.kind?(d.inclusive?a.data>d.value:a.data>=d.value)&&(b4(b=this._getOrReturnCtx(a,b),{code:b0.too_big,type:"bigint",maximum:d.value,inclusive:d.inclusive,message:d.message}),c.dirty()):"multipleOf"===d.kind?a.data%d.value!==BigInt(0)&&(b4(b=this._getOrReturnCtx(a,b),{code:b0.not_multiple_of,multipleOf:d.value,message:d.message}),c.dirty()):q.assertNever(d);return{status:c.value,value:a.data}}_getInvalidInput(a){let b=this._getOrReturnCtx(a);return b4(b,{code:b0.invalid_type,expected:b$.bigint,received:b.parsedType}),b6}gte(a,b){return this.setLimit("min",a,!0,s.toString(b))}gt(a,b){return this.setLimit("min",a,!1,s.toString(b))}lte(a,b){return this.setLimit("max",a,!0,s.toString(b))}lt(a,b){return this.setLimit("max",a,!1,s.toString(b))}setLimit(a,b,c,d){return new cx({...this._def,checks:[...this._def.checks,{kind:a,value:b,inclusive:c,message:s.toString(d)}]})}_addCheck(a){return new cx({...this._def,checks:[...this._def.checks,a]})}positive(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:s.toString(a)})}negative(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:s.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:s.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:s.toString(a)})}multipleOf(a,b){return this._addCheck({kind:"multipleOf",value:a,message:s.toString(b)})}get minValue(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxValue(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}}cx.create=a=>new cx({checks:[],typeName:t.ZodBigInt,coerce:a?.coerce??!1,...cc(a)});class cy extends cd{_parse(a){if(this._def.coerce&&(a.data=!!a.data),this._getType(a)!==b$.boolean){let b=this._getOrReturnCtx(a);return b4(b,{code:b0.invalid_type,expected:b$.boolean,received:b.parsedType}),b6}return b8(a.data)}}cy.create=a=>new cy({typeName:t.ZodBoolean,coerce:a?.coerce||!1,...cc(a)});class cz extends cd{_parse(a){let b;if(this._def.coerce&&(a.data=new Date(a.data)),this._getType(a)!==b$.date){let b=this._getOrReturnCtx(a);return b4(b,{code:b0.invalid_type,expected:b$.date,received:b.parsedType}),b6}if(Number.isNaN(a.data.getTime()))return b4(this._getOrReturnCtx(a),{code:b0.invalid_date}),b6;let c=new b5;for(let d of this._def.checks)"min"===d.kind?a.data.getTime()<d.value&&(b4(b=this._getOrReturnCtx(a,b),{code:b0.too_small,message:d.message,inclusive:!0,exact:!1,minimum:d.value,type:"date"}),c.dirty()):"max"===d.kind?a.data.getTime()>d.value&&(b4(b=this._getOrReturnCtx(a,b),{code:b0.too_big,message:d.message,inclusive:!0,exact:!1,maximum:d.value,type:"date"}),c.dirty()):q.assertNever(d);return{status:c.value,value:new Date(a.data.getTime())}}_addCheck(a){return new cz({...this._def,checks:[...this._def.checks,a]})}min(a,b){return this._addCheck({kind:"min",value:a.getTime(),message:s.toString(b)})}max(a,b){return this._addCheck({kind:"max",value:a.getTime(),message:s.toString(b)})}get minDate(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return null!=a?new Date(a):null}get maxDate(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return null!=a?new Date(a):null}}cz.create=a=>new cz({checks:[],coerce:a?.coerce||!1,typeName:t.ZodDate,...cc(a)});class cA extends cd{_parse(a){if(this._getType(a)!==b$.symbol){let b=this._getOrReturnCtx(a);return b4(b,{code:b0.invalid_type,expected:b$.symbol,received:b.parsedType}),b6}return b8(a.data)}}cA.create=a=>new cA({typeName:t.ZodSymbol,...cc(a)});class cB extends cd{_parse(a){if(this._getType(a)!==b$.undefined){let b=this._getOrReturnCtx(a);return b4(b,{code:b0.invalid_type,expected:b$.undefined,received:b.parsedType}),b6}return b8(a.data)}}cB.create=a=>new cB({typeName:t.ZodUndefined,...cc(a)});class cC extends cd{_parse(a){if(this._getType(a)!==b$.null){let b=this._getOrReturnCtx(a);return b4(b,{code:b0.invalid_type,expected:b$.null,received:b.parsedType}),b6}return b8(a.data)}}cC.create=a=>new cC({typeName:t.ZodNull,...cc(a)});class cD extends cd{constructor(){super(...arguments),this._any=!0}_parse(a){return b8(a.data)}}cD.create=a=>new cD({typeName:t.ZodAny,...cc(a)});class cE extends cd{constructor(){super(...arguments),this._unknown=!0}_parse(a){return b8(a.data)}}cE.create=a=>new cE({typeName:t.ZodUnknown,...cc(a)});class cF extends cd{_parse(a){let b=this._getOrReturnCtx(a);return b4(b,{code:b0.invalid_type,expected:b$.never,received:b.parsedType}),b6}}cF.create=a=>new cF({typeName:t.ZodNever,...cc(a)});class cG extends cd{_parse(a){if(this._getType(a)!==b$.undefined){let b=this._getOrReturnCtx(a);return b4(b,{code:b0.invalid_type,expected:b$.void,received:b.parsedType}),b6}return b8(a.data)}}cG.create=a=>new cG({typeName:t.ZodVoid,...cc(a)});class cH extends cd{_parse(a){let{ctx:b,status:c}=this._processInputParams(a),d=this._def;if(b.parsedType!==b$.array)return b4(b,{code:b0.invalid_type,expected:b$.array,received:b.parsedType}),b6;if(null!==d.exactLength){let a=b.data.length>d.exactLength.value,e=b.data.length<d.exactLength.value;(a||e)&&(b4(b,{code:a?b0.too_big:b0.too_small,minimum:e?d.exactLength.value:void 0,maximum:a?d.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:d.exactLength.message}),c.dirty())}if(null!==d.minLength&&b.data.length<d.minLength.value&&(b4(b,{code:b0.too_small,minimum:d.minLength.value,type:"array",inclusive:!0,exact:!1,message:d.minLength.message}),c.dirty()),null!==d.maxLength&&b.data.length>d.maxLength.value&&(b4(b,{code:b0.too_big,maximum:d.maxLength.value,type:"array",inclusive:!0,exact:!1,message:d.maxLength.message}),c.dirty()),b.common.async)return Promise.all([...b.data].map((a,c)=>d.type._parseAsync(new ca(b,a,b.path,c)))).then(a=>b5.mergeArray(c,a));let e=[...b.data].map((a,c)=>d.type._parseSync(new ca(b,a,b.path,c)));return b5.mergeArray(c,e)}get element(){return this._def.type}min(a,b){return new cH({...this._def,minLength:{value:a,message:s.toString(b)}})}max(a,b){return new cH({...this._def,maxLength:{value:a,message:s.toString(b)}})}length(a,b){return new cH({...this._def,exactLength:{value:a,message:s.toString(b)}})}nonempty(a){return this.min(1,a)}}cH.create=(a,b)=>new cH({type:a,minLength:null,maxLength:null,exactLength:null,typeName:t.ZodArray,...cc(b)});class cI extends cd{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let a=this._def.shape(),b=q.objectKeys(a);return this._cached={shape:a,keys:b},this._cached}_parse(a){if(this._getType(a)!==b$.object){let b=this._getOrReturnCtx(a);return b4(b,{code:b0.invalid_type,expected:b$.object,received:b.parsedType}),b6}let{status:b,ctx:c}=this._processInputParams(a),{shape:d,keys:e}=this._getCached(),f=[];if(!(this._def.catchall instanceof cF&&"strip"===this._def.unknownKeys))for(let a in c.data)e.includes(a)||f.push(a);let g=[];for(let a of e){let b=d[a],e=c.data[a];g.push({key:{status:"valid",value:a},value:b._parse(new ca(c,e,c.path,a)),alwaysSet:a in c.data})}if(this._def.catchall instanceof cF){let a=this._def.unknownKeys;if("passthrough"===a)for(let a of f)g.push({key:{status:"valid",value:a},value:{status:"valid",value:c.data[a]}});else if("strict"===a)f.length>0&&(b4(c,{code:b0.unrecognized_keys,keys:f}),b.dirty());else if("strip"===a);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let a=this._def.catchall;for(let b of f){let d=c.data[b];g.push({key:{status:"valid",value:b},value:a._parse(new ca(c,d,c.path,b)),alwaysSet:b in c.data})}}return c.common.async?Promise.resolve().then(async()=>{let a=[];for(let b of g){let c=await b.key,d=await b.value;a.push({key:c,value:d,alwaysSet:b.alwaysSet})}return a}).then(a=>b5.mergeObjectSync(b,a)):b5.mergeObjectSync(b,g)}get shape(){return this._def.shape()}strict(a){return s.errToObj,new cI({...this._def,unknownKeys:"strict",...void 0!==a?{errorMap:(b,c)=>{let d=this._def.errorMap?.(b,c).message??c.defaultError;return"unrecognized_keys"===b.code?{message:s.errToObj(a).message??d}:{message:d}}}:{}})}strip(){return new cI({...this._def,unknownKeys:"strip"})}passthrough(){return new cI({...this._def,unknownKeys:"passthrough"})}extend(a){return new cI({...this._def,shape:()=>({...this._def.shape(),...a})})}merge(a){return new cI({unknownKeys:a._def.unknownKeys,catchall:a._def.catchall,shape:()=>({...this._def.shape(),...a._def.shape()}),typeName:t.ZodObject})}setKey(a,b){return this.augment({[a]:b})}catchall(a){return new cI({...this._def,catchall:a})}pick(a){let b={};for(let c of q.objectKeys(a))a[c]&&this.shape[c]&&(b[c]=this.shape[c]);return new cI({...this._def,shape:()=>b})}omit(a){let b={};for(let c of q.objectKeys(this.shape))a[c]||(b[c]=this.shape[c]);return new cI({...this._def,shape:()=>b})}deepPartial(){return function a(b){if(b instanceof cI){let c={};for(let d in b.shape){let e=b.shape[d];c[d]=cZ.create(a(e))}return new cI({...b._def,shape:()=>c})}if(b instanceof cH)return new cH({...b._def,type:a(b.element)});if(b instanceof cZ)return cZ.create(a(b.unwrap()));if(b instanceof c$)return c$.create(a(b.unwrap()));if(b instanceof cN)return cN.create(b.items.map(b=>a(b)));else return b}(this)}partial(a){let b={};for(let c of q.objectKeys(this.shape)){let d=this.shape[c];a&&!a[c]?b[c]=d:b[c]=d.optional()}return new cI({...this._def,shape:()=>b})}required(a){let b={};for(let c of q.objectKeys(this.shape))if(a&&!a[c])b[c]=this.shape[c];else{let a=this.shape[c];for(;a instanceof cZ;)a=a._def.innerType;b[c]=a}return new cI({...this._def,shape:()=>b})}keyof(){return cU(q.objectKeys(this.shape))}}cI.create=(a,b)=>new cI({shape:()=>a,unknownKeys:"strip",catchall:cF.create(),typeName:t.ZodObject,...cc(b)}),cI.strictCreate=(a,b)=>new cI({shape:()=>a,unknownKeys:"strict",catchall:cF.create(),typeName:t.ZodObject,...cc(b)}),cI.lazycreate=(a,b)=>new cI({shape:a,unknownKeys:"strip",catchall:cF.create(),typeName:t.ZodObject,...cc(b)});class cJ extends cd{_parse(a){let{ctx:b}=this._processInputParams(a),c=this._def.options;if(b.common.async)return Promise.all(c.map(async a=>{let c={...b,common:{...b.common,issues:[]},parent:null};return{result:await a._parseAsync({data:b.data,path:b.path,parent:c}),ctx:c}})).then(function(a){for(let b of a)if("valid"===b.result.status)return b.result;for(let c of a)if("dirty"===c.result.status)return b.common.issues.push(...c.ctx.common.issues),c.result;let c=a.map(a=>new b1(a.ctx.common.issues));return b4(b,{code:b0.invalid_union,unionErrors:c}),b6});{let a,d=[];for(let e of c){let c={...b,common:{...b.common,issues:[]},parent:null},f=e._parseSync({data:b.data,path:b.path,parent:c});if("valid"===f.status)return f;"dirty"!==f.status||a||(a={result:f,ctx:c}),c.common.issues.length&&d.push(c.common.issues)}if(a)return b.common.issues.push(...a.ctx.common.issues),a.result;let e=d.map(a=>new b1(a));return b4(b,{code:b0.invalid_union,unionErrors:e}),b6}}get options(){return this._def.options}}cJ.create=(a,b)=>new cJ({options:a,typeName:t.ZodUnion,...cc(b)});let cK=a=>{if(a instanceof cS)return cK(a.schema);if(a instanceof cY)return cK(a.innerType());if(a instanceof cT)return[a.value];if(a instanceof cV)return a.options;if(a instanceof cW)return q.objectValues(a.enum);else if(a instanceof c_)return cK(a._def.innerType);else if(a instanceof cB)return[void 0];else if(a instanceof cC)return[null];else if(a instanceof cZ)return[void 0,...cK(a.unwrap())];else if(a instanceof c$)return[null,...cK(a.unwrap())];else if(a instanceof c2)return cK(a.unwrap());else if(a instanceof c4)return cK(a.unwrap());else if(a instanceof c0)return cK(a._def.innerType);else return[]};class cL extends cd{_parse(a){let{ctx:b}=this._processInputParams(a);if(b.parsedType!==b$.object)return b4(b,{code:b0.invalid_type,expected:b$.object,received:b.parsedType}),b6;let c=this.discriminator,d=b.data[c],e=this.optionsMap.get(d);return e?b.common.async?e._parseAsync({data:b.data,path:b.path,parent:b}):e._parseSync({data:b.data,path:b.path,parent:b}):(b4(b,{code:b0.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[c]}),b6)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(a,b,c){let d=new Map;for(let c of b){let b=cK(c.shape[a]);if(!b.length)throw Error(`A discriminator value for key \`${a}\` could not be extracted from all schema options`);for(let e of b){if(d.has(e))throw Error(`Discriminator property ${String(a)} has duplicate value ${String(e)}`);d.set(e,c)}}return new cL({typeName:t.ZodDiscriminatedUnion,discriminator:a,options:b,optionsMap:d,...cc(c)})}}class cM extends cd{_parse(a){let{status:b,ctx:c}=this._processInputParams(a),d=(a,d)=>{if("aborted"===a.status||"aborted"===d.status)return b6;let e=function a(b,c){let d=b_(b),e=b_(c);if(b===c)return{valid:!0,data:b};if(d===b$.object&&e===b$.object){let d=q.objectKeys(c),e=q.objectKeys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1};f[d]=e.data}return{valid:!0,data:f}}if(d===b$.array&&e===b$.array){if(b.length!==c.length)return{valid:!1};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1};d.push(f.data)}return{valid:!0,data:d}}if(d===b$.date&&e===b$.date&&+b==+c)return{valid:!0,data:b};return{valid:!1}}(a.value,d.value);return e.valid?(("dirty"===a.status||"dirty"===d.status)&&b.dirty(),{status:b.value,value:e.data}):(b4(c,{code:b0.invalid_intersection_types}),b6)};return c.common.async?Promise.all([this._def.left._parseAsync({data:c.data,path:c.path,parent:c}),this._def.right._parseAsync({data:c.data,path:c.path,parent:c})]).then(([a,b])=>d(a,b)):d(this._def.left._parseSync({data:c.data,path:c.path,parent:c}),this._def.right._parseSync({data:c.data,path:c.path,parent:c}))}}cM.create=(a,b,c)=>new cM({left:a,right:b,typeName:t.ZodIntersection,...cc(c)});class cN extends cd{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==b$.array)return b4(c,{code:b0.invalid_type,expected:b$.array,received:c.parsedType}),b6;if(c.data.length<this._def.items.length)return b4(c,{code:b0.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),b6;!this._def.rest&&c.data.length>this._def.items.length&&(b4(c,{code:b0.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),b.dirty());let d=[...c.data].map((a,b)=>{let d=this._def.items[b]||this._def.rest;return d?d._parse(new ca(c,a,c.path,b)):null}).filter(a=>!!a);return c.common.async?Promise.all(d).then(a=>b5.mergeArray(b,a)):b5.mergeArray(b,d)}get items(){return this._def.items}rest(a){return new cN({...this._def,rest:a})}}cN.create=(a,b)=>{if(!Array.isArray(a))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new cN({items:a,typeName:t.ZodTuple,rest:null,...cc(b)})};class cO extends cd{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==b$.object)return b4(c,{code:b0.invalid_type,expected:b$.object,received:c.parsedType}),b6;let d=[],e=this._def.keyType,f=this._def.valueType;for(let a in c.data)d.push({key:e._parse(new ca(c,a,c.path,a)),value:f._parse(new ca(c,c.data[a],c.path,a)),alwaysSet:a in c.data});return c.common.async?b5.mergeObjectAsync(b,d):b5.mergeObjectSync(b,d)}get element(){return this._def.valueType}static create(a,b,c){return new cO(b instanceof cd?{keyType:a,valueType:b,typeName:t.ZodRecord,...cc(c)}:{keyType:cv.create(),valueType:a,typeName:t.ZodRecord,...cc(b)})}}class cP extends cd{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==b$.map)return b4(c,{code:b0.invalid_type,expected:b$.map,received:c.parsedType}),b6;let d=this._def.keyType,e=this._def.valueType,f=[...c.data.entries()].map(([a,b],f)=>({key:d._parse(new ca(c,a,c.path,[f,"key"])),value:e._parse(new ca(c,b,c.path,[f,"value"]))}));if(c.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of f){let d=await c.key,e=await c.value;if("aborted"===d.status||"aborted"===e.status)return b6;("dirty"===d.status||"dirty"===e.status)&&b.dirty(),a.set(d.value,e.value)}return{status:b.value,value:a}})}{let a=new Map;for(let c of f){let d=c.key,e=c.value;if("aborted"===d.status||"aborted"===e.status)return b6;("dirty"===d.status||"dirty"===e.status)&&b.dirty(),a.set(d.value,e.value)}return{status:b.value,value:a}}}}cP.create=(a,b,c)=>new cP({valueType:b,keyType:a,typeName:t.ZodMap,...cc(c)});class cQ extends cd{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==b$.set)return b4(c,{code:b0.invalid_type,expected:b$.set,received:c.parsedType}),b6;let d=this._def;null!==d.minSize&&c.data.size<d.minSize.value&&(b4(c,{code:b0.too_small,minimum:d.minSize.value,type:"set",inclusive:!0,exact:!1,message:d.minSize.message}),b.dirty()),null!==d.maxSize&&c.data.size>d.maxSize.value&&(b4(c,{code:b0.too_big,maximum:d.maxSize.value,type:"set",inclusive:!0,exact:!1,message:d.maxSize.message}),b.dirty());let e=this._def.valueType;function f(a){let c=new Set;for(let d of a){if("aborted"===d.status)return b6;"dirty"===d.status&&b.dirty(),c.add(d.value)}return{status:b.value,value:c}}let g=[...c.data.values()].map((a,b)=>e._parse(new ca(c,a,c.path,b)));return c.common.async?Promise.all(g).then(a=>f(a)):f(g)}min(a,b){return new cQ({...this._def,minSize:{value:a,message:s.toString(b)}})}max(a,b){return new cQ({...this._def,maxSize:{value:a,message:s.toString(b)}})}size(a,b){return this.min(a,b).max(a,b)}nonempty(a){return this.min(1,a)}}cQ.create=(a,b)=>new cQ({valueType:a,minSize:null,maxSize:null,typeName:t.ZodSet,...cc(b)});class cR extends cd{constructor(){super(...arguments),this.validate=this.implement}_parse(a){let{ctx:b}=this._processInputParams(a);if(b.parsedType!==b$.function)return b4(b,{code:b0.invalid_type,expected:b$.function,received:b.parsedType}),b6;function c(a,c){return b3({data:a,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,b2,b2].filter(a=>!!a),issueData:{code:b0.invalid_arguments,argumentsError:c}})}function d(a,c){return b3({data:a,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,b2,b2].filter(a=>!!a),issueData:{code:b0.invalid_return_type,returnTypeError:c}})}let e={errorMap:b.common.contextualErrorMap},f=b.data;if(this._def.returns instanceof cX){let a=this;return b8(async function(...b){let g=new b1([]),h=await a._def.args.parseAsync(b,e).catch(a=>{throw g.addIssue(c(b,a)),g}),i=await Reflect.apply(f,this,h);return await a._def.returns._def.type.parseAsync(i,e).catch(a=>{throw g.addIssue(d(i,a)),g})})}{let a=this;return b8(function(...b){let g=a._def.args.safeParse(b,e);if(!g.success)throw new b1([c(b,g.error)]);let h=Reflect.apply(f,this,g.data),i=a._def.returns.safeParse(h,e);if(!i.success)throw new b1([d(h,i.error)]);return i.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...a){return new cR({...this._def,args:cN.create(a).rest(cE.create())})}returns(a){return new cR({...this._def,returns:a})}implement(a){return this.parse(a)}strictImplement(a){return this.parse(a)}static create(a,b,c){return new cR({args:a||cN.create([]).rest(cE.create()),returns:b||cE.create(),typeName:t.ZodFunction,...cc(c)})}}class cS extends cd{get schema(){return this._def.getter()}_parse(a){let{ctx:b}=this._processInputParams(a);return this._def.getter()._parse({data:b.data,path:b.path,parent:b})}}cS.create=(a,b)=>new cS({getter:a,typeName:t.ZodLazy,...cc(b)});class cT extends cd{_parse(a){if(a.data!==this._def.value){let b=this._getOrReturnCtx(a);return b4(b,{received:b.data,code:b0.invalid_literal,expected:this._def.value}),b6}return{status:"valid",value:a.data}}get value(){return this._def.value}}function cU(a,b){return new cV({values:a,typeName:t.ZodEnum,...cc(b)})}cT.create=(a,b)=>new cT({value:a,typeName:t.ZodLiteral,...cc(b)});class cV extends cd{_parse(a){if("string"!=typeof a.data){let b=this._getOrReturnCtx(a),c=this._def.values;return b4(b,{expected:q.joinValues(c),received:b.parsedType,code:b0.invalid_type}),b6}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(a.data)){let b=this._getOrReturnCtx(a),c=this._def.values;return b4(b,{received:b.data,code:b0.invalid_enum_value,options:c}),b6}return b8(a.data)}get options(){return this._def.values}get enum(){let a={};for(let b of this._def.values)a[b]=b;return a}get Values(){let a={};for(let b of this._def.values)a[b]=b;return a}get Enum(){let a={};for(let b of this._def.values)a[b]=b;return a}extract(a,b=this._def){return cV.create(a,{...this._def,...b})}exclude(a,b=this._def){return cV.create(this.options.filter(b=>!a.includes(b)),{...this._def,...b})}}cV.create=cU;class cW extends cd{_parse(a){let b=q.getValidEnumValues(this._def.values),c=this._getOrReturnCtx(a);if(c.parsedType!==b$.string&&c.parsedType!==b$.number){let a=q.objectValues(b);return b4(c,{expected:q.joinValues(a),received:c.parsedType,code:b0.invalid_type}),b6}if(this._cache||(this._cache=new Set(q.getValidEnumValues(this._def.values))),!this._cache.has(a.data)){let a=q.objectValues(b);return b4(c,{received:c.data,code:b0.invalid_enum_value,options:a}),b6}return b8(a.data)}get enum(){return this._def.values}}cW.create=(a,b)=>new cW({values:a,typeName:t.ZodNativeEnum,...cc(b)});class cX extends cd{unwrap(){return this._def.type}_parse(a){let{ctx:b}=this._processInputParams(a);return b.parsedType!==b$.promise&&!1===b.common.async?(b4(b,{code:b0.invalid_type,expected:b$.promise,received:b.parsedType}),b6):b8((b.parsedType===b$.promise?b.data:Promise.resolve(b.data)).then(a=>this._def.type.parseAsync(a,{path:b.path,errorMap:b.common.contextualErrorMap})))}}cX.create=(a,b)=>new cX({type:a,typeName:t.ZodPromise,...cc(b)});class cY extends cd{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===t.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(a){let{status:b,ctx:c}=this._processInputParams(a),d=this._def.effect||null,e={addIssue:a=>{b4(c,a),a.fatal?b.abort():b.dirty()},get path(){return c.path}};if(e.addIssue=e.addIssue.bind(e),"preprocess"===d.type){let a=d.transform(c.data,e);if(c.common.async)return Promise.resolve(a).then(async a=>{if("aborted"===b.value)return b6;let d=await this._def.schema._parseAsync({data:a,path:c.path,parent:c});return"aborted"===d.status?b6:"dirty"===d.status||"dirty"===b.value?b7(d.value):d});{if("aborted"===b.value)return b6;let d=this._def.schema._parseSync({data:a,path:c.path,parent:c});return"aborted"===d.status?b6:"dirty"===d.status||"dirty"===b.value?b7(d.value):d}}if("refinement"===d.type){let a=a=>{let b=d.refinement(a,e);if(c.common.async)return Promise.resolve(b);if(b instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(!1!==c.common.async)return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(c=>"aborted"===c.status?b6:("dirty"===c.status&&b.dirty(),a(c.value).then(()=>({status:b.value,value:c.value}))));{let d=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});return"aborted"===d.status?b6:("dirty"===d.status&&b.dirty(),a(d.value),{status:b.value,value:d.value})}}if("transform"===d.type)if(!1!==c.common.async)return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(a=>"valid"!==a.status?b6:Promise.resolve(d.transform(a.value,e)).then(a=>({status:b.value,value:a})));else{let a=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});if("valid"!==a.status)return b6;let f=d.transform(a.value,e);if(f instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:b.value,value:f}}q.assertNever(d)}}cY.create=(a,b,c)=>new cY({schema:a,typeName:t.ZodEffects,effect:b,...cc(c)}),cY.createWithPreprocess=(a,b,c)=>new cY({schema:b,effect:{type:"preprocess",transform:a},typeName:t.ZodEffects,...cc(c)});class cZ extends cd{_parse(a){return this._getType(a)===b$.undefined?b8(void 0):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}cZ.create=(a,b)=>new cZ({innerType:a,typeName:t.ZodOptional,...cc(b)});class c$ extends cd{_parse(a){return this._getType(a)===b$.null?b8(null):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}c$.create=(a,b)=>new c$({innerType:a,typeName:t.ZodNullable,...cc(b)});class c_ extends cd{_parse(a){let{ctx:b}=this._processInputParams(a),c=b.data;return b.parsedType===b$.undefined&&(c=this._def.defaultValue()),this._def.innerType._parse({data:c,path:b.path,parent:b})}removeDefault(){return this._def.innerType}}c_.create=(a,b)=>new c_({innerType:a,typeName:t.ZodDefault,defaultValue:"function"==typeof b.default?b.default:()=>b.default,...cc(b)});class c0 extends cd{_parse(a){let{ctx:b}=this._processInputParams(a),c={...b,common:{...b.common,issues:[]}},d=this._def.innerType._parse({data:c.data,path:c.path,parent:{...c}});return b9(d)?d.then(a=>({status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new b1(c.common.issues)},input:c.data})})):{status:"valid",value:"valid"===d.status?d.value:this._def.catchValue({get error(){return new b1(c.common.issues)},input:c.data})}}removeCatch(){return this._def.innerType}}c0.create=(a,b)=>new c0({innerType:a,typeName:t.ZodCatch,catchValue:"function"==typeof b.catch?b.catch:()=>b.catch,...cc(b)});class c1 extends cd{_parse(a){if(this._getType(a)!==b$.nan){let b=this._getOrReturnCtx(a);return b4(b,{code:b0.invalid_type,expected:b$.nan,received:b.parsedType}),b6}return{status:"valid",value:a.data}}}c1.create=a=>new c1({typeName:t.ZodNaN,...cc(a)}),Symbol("zod_brand");class c2 extends cd{_parse(a){let{ctx:b}=this._processInputParams(a),c=b.data;return this._def.type._parse({data:c,path:b.path,parent:b})}unwrap(){return this._def.type}}class c3 extends cd{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:c.data,path:c.path,parent:c});return"aborted"===a.status?b6:"dirty"===a.status?(b.dirty(),b7(a.value)):this._def.out._parseAsync({data:a.value,path:c.path,parent:c})})();{let a=this._def.in._parseSync({data:c.data,path:c.path,parent:c});return"aborted"===a.status?b6:"dirty"===a.status?(b.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:c.path,parent:c})}}static create(a,b){return new c3({in:a,out:b,typeName:t.ZodPipeline})}}class c4 extends cd{_parse(a){let b=this._def.innerType._parse(a),c=a=>("valid"===a.status&&(a.value=Object.freeze(a.value)),a);return b9(b)?b.then(a=>c(a)):c(b)}unwrap(){return this._def.innerType}}function c5(...a){return a.reduce((a,b)=>({...a,...null!=b?b:{}}),{})}async function c6(a,b){if(null==a)return Promise.resolve();let c=null==b?void 0:b.abortSignal;return new Promise((b,d)=>{if(null==c?void 0:c.aborted)return void d(c7());let e=setTimeout(()=>{f(),b()},a),f=()=>{clearTimeout(e),null==c||c.removeEventListener("abort",g)},g=()=>{f(),d(c7())};null==c||c.addEventListener("abort",g)})}function c7(){return new DOMException("Delay was aborted","AbortError")}function c8(a){return Object.fromEntries([...a.headers])}function c9(a=globalThis){var b,c,d;return a.window?"runtime/browser":(null==(b=a.navigator)?void 0:b.userAgent)?`runtime/${a.navigator.userAgent.toLowerCase()}`:(null==(d=null==(c=a.process)?void 0:c.versions)?void 0:d.node)?`runtime/node.js/${a.process.version.substring(0)}`:a.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function da(a,...b){let c=new Headers(Object.fromEntries(Object.entries(null!=a?a:{}).filter(([a,b])=>null!=b))),d=c.get("user-agent")||"";return c.set("user-agent",[d,...b].filter(Boolean).join(" ")),Object.fromEntries(c)}c4.create=(a,b)=>new c4({innerType:a,typeName:t.ZodReadonly,...cc(b)}),cI.lazycreate,function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"}(t||(t={})),cv.create,cw.create,c1.create,cx.create,cy.create,cz.create,cA.create,cB.create,cC.create,cD.create,cE.create,cF.create,cG.create,cH.create,cI.create,cI.strictCreate,cJ.create,cL.create,cM.create,cN.create,cO.create,cP.create,cQ.create,cR.create,cS.create,cT.create,cV.create,cW.create,cX.create,cY.create,cZ.create,c$.create,cY.createWithPreprocess,c3.create;var db=({prefix:a,size:b=16,alphabet:c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:d="-"}={})=>{let e=()=>{let a=c.length,d=Array(b);for(let e=0;e<b;e++)d[e]=c[Math.random()*a|0];return d.join("")};if(null==a)return e;if(c.includes(d))throw new aM({argument:"separator",message:`The separator "${d}" must not be part of the alphabet "${c}".`});return()=>`${a}${d}${e()}`},dc=db();function dd(a){return null==a?"unknown error":"string"==typeof a?a:a instanceof Error?a.message:JSON.stringify(a)}function de(a){return(a instanceof Error||a instanceof DOMException)&&("AbortError"===a.name||"ResponseAborted"===a.name||"TimeoutError"===a.name)}var df=["fetch failed","failed to fetch"];function dg({error:a,url:b,requestBodyValues:c}){if(de(a))return a;if(a instanceof TypeError&&df.includes(a.message.toLowerCase())){let d=a.cause;if(null!=d)return new aD({message:`Cannot connect to API: ${d.message}`,cause:d,url:b,requestBodyValues:c,isRetryable:!0})}return a}var dh="3.0.10",di=()=>globalThis.fetch,dj=async({url:a,headers:b={},successfulResponseHandler:c,failedResponseHandler:d,abortSignal:e,fetch:f=di()})=>{try{let g=await f(a,{method:"GET",headers:da(b,`ai-sdk/provider-utils/${dh}`,c9()),signal:e}),h=c8(g);if(!g.ok){let b;try{b=await d({response:g,url:a,requestBodyValues:{}})}catch(b){if(de(b)||aD.isInstance(b))throw b;throw new aD({message:"Failed to process error response",cause:b,statusCode:g.status,url:a,responseHeaders:h,requestBodyValues:{}})}throw b.value}try{return await c({response:g,url:a,requestBodyValues:{}})}catch(b){if(b instanceof Error&&(de(b)||aD.isInstance(b)))throw b;throw new aD({message:"Failed to process successful response",cause:b,statusCode:g.status,url:a,responseHeaders:h,requestBodyValues:{}})}}catch(b){throw dg({error:b,url:a,requestBodyValues:{}})}};function dk({settingValue:a,environmentVariableName:b}){return"string"==typeof a?a:null!=a||"undefined"==typeof process?void 0:null!=(a=process.env[b])&&"string"==typeof a?a:void 0}var dl=/"__proto__"\s*:/,dm=/"constructor"\s*:/;function dn(a){let{stackTraceLimit:b}=Error;Error.stackTraceLimit=0;try{let b=JSON.parse(a);return null===b||"object"!=typeof b||!1===dl.test(a)&&!1===dm.test(a)?b:function(a){let b=[a];for(;b.length;){let a=b;for(let c of(b=[],a)){if(Object.prototype.hasOwnProperty.call(c,"__proto__")||Object.prototype.hasOwnProperty.call(c,"constructor")&&Object.prototype.hasOwnProperty.call(c.constructor,"prototype"))throw SyntaxError("Object contains forbidden prototype property");for(let a in c){let d=c[a];d&&"object"==typeof d&&b.push(d)}}}return a}(b)}finally{Error.stackTraceLimit=b}}var dp=Symbol.for("vercel.ai.validator");async function dq({value:a,schema:b}){let c=await dr({value:a,schema:b});if(!c.success)throw bc.wrap({value:a,cause:c.error});return c.value}async function dr({value:a,schema:b}){var c;let d="object"==typeof b&&null!==b&&dp in b&&!0===b[dp]&&"validate"in b?b:(c=b,{[dp]:!0,validate:async a=>{let b=await c["~standard"].validate(a);return null==b.issues?{success:!0,value:b.value}:{success:!1,error:new bc({value:a,cause:b.issues})}}});try{if(null==d.validate)return{success:!0,value:a,rawValue:a};let b=await d.validate(a);if(b.success)return{success:!0,value:b.value,rawValue:a};return{success:!1,error:bc.wrap({value:a,cause:b.error}),rawValue:a}}catch(b){return{success:!1,error:bc.wrap({value:a,cause:b}),rawValue:a}}}async function ds({text:a,schema:b}){try{let c=dn(a);if(null==b)return c;return dq({value:c,schema:b})}catch(b){if(aY.isInstance(b)||bc.isInstance(b))throw b;throw new aY({text:a,cause:b})}}async function dt({text:a,schema:b}){try{let c=dn(a);if(null==b)return{success:!0,value:c,rawValue:c};return await dr({value:c,schema:b})}catch(b){return{success:!1,error:aY.isInstance(b)?b:new aY({text:a,cause:b}),rawValue:void 0}}}function du(a){try{return dn(a),!0}catch(a){return!1}}async function dv({provider:a,providerOptions:b,schema:c}){if((null==b?void 0:b[a])==null)return;let d=await dr({value:b[a],schema:c});if(!d.success)throw new aM({argument:"providerOptions",message:`invalid ${a} provider options`,cause:d.error});return d.value}var dw=()=>globalThis.fetch,dx=async({url:a,headers:b,body:c,failedResponseHandler:d,successfulResponseHandler:e,abortSignal:f,fetch:g})=>dz({url:a,headers:{"Content-Type":"application/json",...b},body:{content:JSON.stringify(c),values:c},failedResponseHandler:d,successfulResponseHandler:e,abortSignal:f,fetch:g}),dy=async({url:a,headers:b,formData:c,failedResponseHandler:d,successfulResponseHandler:e,abortSignal:f,fetch:g})=>dz({url:a,headers:b,body:{content:c,values:Object.fromEntries(c.entries())},failedResponseHandler:d,successfulResponseHandler:e,abortSignal:f,fetch:g}),dz=async({url:a,headers:b={},body:c,successfulResponseHandler:d,failedResponseHandler:e,abortSignal:f,fetch:g=dw()})=>{try{let h=await g(a,{method:"POST",headers:da(b,`ai-sdk/provider-utils/${dh}`,c9()),body:c.content,signal:f}),i=c8(h);if(!h.ok){let b;try{b=await e({response:h,url:a,requestBodyValues:c.values})}catch(b){if(de(b)||aD.isInstance(b))throw b;throw new aD({message:"Failed to process error response",cause:b,statusCode:h.status,url:a,responseHeaders:i,requestBodyValues:c.values})}throw b.value}try{return await d({response:h,url:a,requestBodyValues:c.values})}catch(b){if(b instanceof Error&&(de(b)||aD.isInstance(b)))throw b;throw new aD({message:"Failed to process successful response",cause:b,statusCode:h.status,url:a,responseHeaders:i,requestBodyValues:c.values})}}catch(b){throw dg({error:b,url:a,requestBodyValues:c.values})}};function dA({id:a,name:b,inputSchema:c}){return({execute:d,outputSchema:e,toModelOutput:f,onInputStart:g,onInputDelta:h,onInputAvailable:i,...j})=>({type:"provider-defined",id:a,name:b,args:j,inputSchema:c,outputSchema:e,execute:d,toModelOutput:f,onInputStart:g,onInputDelta:h,onInputAvailable:i})}function dB({id:a,name:b,inputSchema:c,outputSchema:d}){return({execute:e,toModelOutput:f,onInputStart:g,onInputDelta:h,onInputAvailable:i,...j})=>({type:"provider-defined",id:a,name:b,args:j,inputSchema:c,outputSchema:d,execute:e,toModelOutput:f,onInputStart:g,onInputDelta:h,onInputAvailable:i})}async function dC(a){return"function"==typeof a&&(a=a()),Promise.resolve(a)}var dD=({errorSchema:a,errorToMessage:b,isRetryable:c})=>async({response:d,url:e,requestBodyValues:f})=>{let g=await d.text(),h=c8(d);if(""===g.trim())return{responseHeaders:h,value:new aD({message:d.statusText,url:e,requestBodyValues:f,statusCode:d.status,responseHeaders:h,responseBody:g,isRetryable:null==c?void 0:c(d)})};try{let i=await ds({text:g,schema:a});return{responseHeaders:h,value:new aD({message:b(i),url:e,requestBodyValues:f,statusCode:d.status,responseHeaders:h,responseBody:g,data:i,isRetryable:null==c?void 0:c(d,i)})}}catch(a){return{responseHeaders:h,value:new aD({message:d.statusText,url:e,requestBodyValues:f,statusCode:d.status,responseHeaders:h,responseBody:g,isRetryable:null==c?void 0:c(d)})}}},dE=a=>async({response:b})=>{let c=c8(b);if(null==b.body)throw new aH({});return{responseHeaders:c,value:function({stream:a,schema:b}){return a.pipeThrough(new TextDecoderStream).pipeThrough(new bj).pipeThrough(new TransformStream({async transform({data:a},c){"[DONE]"!==a&&c.enqueue(await dt({text:a,schema:b}))}}))}({stream:b.body,schema:a})}},dF=a=>async({response:b,url:c,requestBodyValues:d})=>{let e=await b.text(),f=await dt({text:e,schema:a}),g=c8(b);if(!f.success)throw new aD({message:"Invalid JSON response",cause:f.error,statusCode:b.status,responseHeaders:g,responseBody:e,url:c,requestBodyValues:d});return{responseHeaders:g,value:f.value,rawValue:f.rawValue}},dG=Symbol("Let zodToJsonSchema decide on which parser to use"),dH={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"};function dI(a,b){return dT(a.type._def,b)}var dJ=void 0,dK={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===dJ&&(dJ=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),dJ),ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function dL(a,b){let c={type:"string"};if(a.checks)for(let d of a.checks)switch(d.kind){case"min":c.minLength="number"==typeof c.minLength?Math.max(c.minLength,d.value):d.value;break;case"max":c.maxLength="number"==typeof c.maxLength?Math.min(c.maxLength,d.value):d.value;break;case"email":switch(b.emailStrategy){case"format:email":dO(c,"email",d.message,b);break;case"format:idn-email":dO(c,"idn-email",d.message,b);break;case"pattern:zod":dP(c,dK.email,d.message,b)}break;case"url":dO(c,"uri",d.message,b);break;case"uuid":dO(c,"uuid",d.message,b);break;case"regex":dP(c,d.regex,d.message,b);break;case"cuid":dP(c,dK.cuid,d.message,b);break;case"cuid2":dP(c,dK.cuid2,d.message,b);break;case"startsWith":dP(c,RegExp(`^${dM(d.value,b)}`),d.message,b);break;case"endsWith":dP(c,RegExp(`${dM(d.value,b)}$`),d.message,b);break;case"datetime":dO(c,"date-time",d.message,b);break;case"date":dO(c,"date",d.message,b);break;case"time":dO(c,"time",d.message,b);break;case"duration":dO(c,"duration",d.message,b);break;case"length":c.minLength="number"==typeof c.minLength?Math.max(c.minLength,d.value):d.value,c.maxLength="number"==typeof c.maxLength?Math.min(c.maxLength,d.value):d.value;break;case"includes":dP(c,RegExp(dM(d.value,b)),d.message,b);break;case"ip":"v6"!==d.version&&dO(c,"ipv4",d.message,b),"v4"!==d.version&&dO(c,"ipv6",d.message,b);break;case"base64url":dP(c,dK.base64url,d.message,b);break;case"jwt":dP(c,dK.jwt,d.message,b);break;case"cidr":"v6"!==d.version&&dP(c,dK.ipv4Cidr,d.message,b),"v4"!==d.version&&dP(c,dK.ipv6Cidr,d.message,b);break;case"emoji":dP(c,dK.emoji(),d.message,b);break;case"ulid":dP(c,dK.ulid,d.message,b);break;case"base64":switch(b.base64Strategy){case"format:binary":dO(c,"binary",d.message,b);break;case"contentEncoding:base64":c.contentEncoding="base64";break;case"pattern:zod":dP(c,dK.base64,d.message,b)}break;case"nanoid":dP(c,dK.nanoid,d.message,b)}return c}function dM(a,b){return"escape"===b.patternStrategy?function(a){let b="";for(let c=0;c<a.length;c++)dN.has(a[c])||(b+="\\"),b+=a[c];return b}(a):a}var dN=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function dO(a,b,c,d){var e;a.format||(null==(e=a.anyOf)?void 0:e.some(a=>a.format))?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push({format:a.format}),delete a.format),a.anyOf.push({format:b,...c&&d.errorMessages&&{errorMessage:{format:c}}})):a.format=b}function dP(a,b,c,d){var e;a.pattern||(null==(e=a.allOf)?void 0:e.some(a=>a.pattern))?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push({pattern:a.pattern}),delete a.pattern),a.allOf.push({pattern:dQ(b,d),...c&&d.errorMessages&&{errorMessage:{pattern:c}}})):a.pattern=dQ(b,d)}function dQ(a,b){var c;if(!b.applyRegexFlags||!a.flags)return a.source;let d={i:a.flags.includes("i"),m:a.flags.includes("m"),s:a.flags.includes("s")},e=d.i?a.source.toLowerCase():a.source,f="",g=!1,h=!1,i=!1;for(let a=0;a<e.length;a++){if(g){f+=e[a],g=!1;continue}if(d.i){if(h){if(e[a].match(/[a-z]/)){i?(f+=e[a],f+=`${e[a-2]}-${e[a]}`.toUpperCase(),i=!1):"-"===e[a+1]&&(null==(c=e[a+2])?void 0:c.match(/[a-z]/))?(f+=e[a],i=!0):f+=`${e[a]}${e[a].toUpperCase()}`;continue}}else if(e[a].match(/[a-z]/)){f+=`[${e[a]}${e[a].toUpperCase()}]`;continue}}if(d.m){if("^"===e[a]){f+=`(^|(?<=[\r
]))`;continue}else if("$"===e[a]){f+=`($|(?=[\r
]))`;continue}}if(d.s&&"."===e[a]){f+=h?`${e[a]}\r
`:`[${e[a]}\r
]`;continue}f+=e[a],"\\"===e[a]?g=!0:h&&"]"===e[a]?h=!1:h||"["!==e[a]||(h=!0)}try{new RegExp(f)}catch(c){return console.warn(`Could not convert regex pattern at ${b.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),a.source}return f}function dR(a,b){var c,d,e,f,g,h;let i={type:"object",additionalProperties:null!=(c=dT(a.valueType._def,{...b,currentPath:[...b.currentPath,"additionalProperties"]}))?c:b.allowedAdditionalProperties};if((null==(d=a.keyType)?void 0:d._def.typeName)===t.ZodString&&(null==(e=a.keyType._def.checks)?void 0:e.length)){let{type:c,...d}=dL(a.keyType._def,b);return{...i,propertyNames:d}}if((null==(f=a.keyType)?void 0:f._def.typeName)===t.ZodEnum)return{...i,propertyNames:{enum:a.keyType._def.values}};if((null==(g=a.keyType)?void 0:g._def.typeName)===t.ZodBranded&&a.keyType._def.type._def.typeName===t.ZodString&&(null==(h=a.keyType._def.type._def.checks)?void 0:h.length)){let{type:c,...d}=dI(a.keyType._def,b);return{...i,propertyNames:d}}return i}var dS={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function dT(a,b,c=!1){var d;let e=b.seen.get(a);if(b.override){let f=null==(d=b.override)?void 0:d.call(b,a,b,e,c);if(f!==dG)return f}if(e&&!c){let a=dU(e,b);if(void 0!==a)return a}let f={def:a,path:b.currentPath,jsonSchema:void 0};b.seen.set(a,f);let g=((a,b,c)=>{switch(b){case t.ZodString:return dL(a,c);case t.ZodNumber:var d,e,f,g,h,i,j=a;let k={type:"number"};if(!j.checks)return k;for(let a of j.checks)switch(a.kind){case"int":k.type="integer";break;case"min":a.inclusive?k.minimum=a.value:k.exclusiveMinimum=a.value;break;case"max":a.inclusive?k.maximum=a.value:k.exclusiveMaximum=a.value;break;case"multipleOf":k.multipleOf=a.value}return k;case t.ZodObject:return function(a,b){let c={type:"object",properties:{}},d=[],e=a.shape();for(let a in e){let f=e[a];if(void 0===f||void 0===f._def)continue;let g=function(a){try{return a.isOptional()}catch(a){return!0}}(f),h=dT(f._def,{...b,currentPath:[...b.currentPath,"properties",a],propertyPath:[...b.currentPath,"properties",a]});void 0!==h&&(c.properties[a]=h,g||d.push(a))}d.length&&(c.required=d);let f=function(a,b){if("ZodNever"!==a.catchall._def.typeName)return dT(a.catchall._def,{...b,currentPath:[...b.currentPath,"additionalProperties"]});switch(a.unknownKeys){case"passthrough":return b.allowedAdditionalProperties;case"strict":return b.rejectedAdditionalProperties;case"strip":return"strict"===b.removeAdditionalStrategy?b.allowedAdditionalProperties:b.rejectedAdditionalProperties}}(a,b);return void 0!==f&&(c.additionalProperties=f),c}(a,c);case t.ZodBigInt:var l=a;let m={type:"integer",format:"int64"};if(!l.checks)return m;for(let a of l.checks)switch(a.kind){case"min":a.inclusive?m.minimum=a.value:m.exclusiveMinimum=a.value;break;case"max":a.inclusive?m.maximum=a.value:m.exclusiveMaximum=a.value;break;case"multipleOf":m.multipleOf=a.value}return m;case t.ZodBoolean:return{type:"boolean"};case t.ZodDate:return function a(b,c,d){let e=null!=d?d:c.dateStrategy;if(Array.isArray(e))return{anyOf:e.map((d,e)=>a(b,c,d))};switch(e){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":var f=b;let g={type:"integer",format:"unix-time"};for(let a of f.checks)switch(a.kind){case"min":g.minimum=a.value;break;case"max":g.maximum=a.value}return g}}(a,c);case t.ZodUndefined:return{not:{}};case t.ZodNull:return{type:"null"};case t.ZodArray:var n,o,p,q=a,r=c;let s={type:"array"};return(null==(n=q.type)?void 0:n._def)&&(null==(p=null==(o=q.type)?void 0:o._def)?void 0:p.typeName)!==t.ZodAny&&(s.items=dT(q.type._def,{...r,currentPath:[...r.currentPath,"items"]})),q.minLength&&(s.minItems=q.minLength.value),q.maxLength&&(s.maxItems=q.maxLength.value),q.exactLength&&(s.minItems=q.exactLength.value,s.maxItems=q.exactLength.value),s;case t.ZodUnion:case t.ZodDiscriminatedUnion:return function(a,b){let c=a.options instanceof Map?Array.from(a.options.values()):a.options;if(c.every(a=>a._def.typeName in dS&&(!a._def.checks||!a._def.checks.length))){let a=c.reduce((a,b)=>{let c=dS[b._def.typeName];return c&&!a.includes(c)?[...a,c]:a},[]);return{type:a.length>1?a:a[0]}}if(c.every(a=>"ZodLiteral"===a._def.typeName&&!a.description)){let a=c.reduce((a,b)=>{let c=typeof b._def.value;switch(c){case"string":case"number":case"boolean":return[...a,c];case"bigint":return[...a,"integer"];case"object":if(null===b._def.value)return[...a,"null"];default:return a}},[]);if(a.length===c.length){let b=a.filter((a,b,c)=>c.indexOf(a)===b);return{type:b.length>1?b:b[0],enum:c.reduce((a,b)=>a.includes(b._def.value)?a:[...a,b._def.value],[])}}}else if(c.every(a=>"ZodEnum"===a._def.typeName))return{type:"string",enum:c.reduce((a,b)=>[...a,...b._def.values.filter(b=>!a.includes(b))],[])};var d=a,e=b;let f=(d.options instanceof Map?Array.from(d.options.values()):d.options).map((a,b)=>dT(a._def,{...e,currentPath:[...e.currentPath,"anyOf",`${b}`]})).filter(a=>!!a&&(!e.strictUnions||"object"==typeof a&&Object.keys(a).length>0));return f.length?{anyOf:f}:void 0}(a,c);case t.ZodIntersection:var u=a,v=c;let w=[dT(u.left._def,{...v,currentPath:[...v.currentPath,"allOf","0"]}),dT(u.right._def,{...v,currentPath:[...v.currentPath,"allOf","1"]})].filter(a=>!!a),x=[];return w.forEach(a=>{if((!("type"in a)||"string"!==a.type)&&"allOf"in a)x.push(...a.allOf);else{let b=a;if("additionalProperties"in a&&!1===a.additionalProperties){let{additionalProperties:c,...d}=a;b=d}x.push(b)}}),x.length?{allOf:x}:void 0;case t.ZodTuple:return H=a,I=c,H.rest?{type:"array",minItems:H.items.length,items:H.items.map((a,b)=>dT(a._def,{...I,currentPath:[...I.currentPath,"items",`${b}`]})).reduce((a,b)=>void 0===b?a:[...a,b],[]),additionalItems:dT(H.rest._def,{...I,currentPath:[...I.currentPath,"additionalItems"]})}:{type:"array",minItems:H.items.length,maxItems:H.items.length,items:H.items.map((a,b)=>dT(a._def,{...I,currentPath:[...I.currentPath,"items",`${b}`]})).reduce((a,b)=>void 0===b?a:[...a,b],[])};case t.ZodRecord:return dR(a,c);case t.ZodLiteral:var y=a;let z=typeof y.value;return"bigint"!==z&&"number"!==z&&"boolean"!==z&&"string"!==z?{type:Array.isArray(y.value)?"array":"object"}:{type:"bigint"===z?"integer":z,const:y.value};case t.ZodEnum:return{type:"string",enum:Array.from(a.values)};case t.ZodNativeEnum:var A=a;let B=A.values,C=Object.keys(A.values).filter(a=>"number"!=typeof B[B[a]]).map(a=>B[a]),D=Array.from(new Set(C.map(a=>typeof a)));return{type:1===D.length?"string"===D[0]?"string":"number":["string","number"],enum:C};case t.ZodNullable:var E=a,F=c;if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(E.innerType._def.typeName)&&(!E.innerType._def.checks||!E.innerType._def.checks.length))return{type:[dS[E.innerType._def.typeName],"null"]};let G=dT(E.innerType._def,{...F,currentPath:[...F.currentPath,"anyOf","0"]});return G&&{anyOf:[G,{type:"null"}]};case t.ZodOptional:var H,I,J,K=a,L=c;if(L.currentPath.toString()===(null==(J=L.propertyPath)?void 0:J.toString()))return dT(K.innerType._def,L);let M=dT(K.innerType._def,{...L,currentPath:[...L.currentPath,"anyOf","1"]});return M?{anyOf:[{not:{}},M]}:{};case t.ZodMap:return d=a,"record"===(e=c).mapStrategy?dR(d,e):{type:"array",maxItems:125,items:{type:"array",items:[dT(d.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},dT(d.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}};case t.ZodSet:var N=a,O=c;let P={type:"array",uniqueItems:!0,items:dT(N.valueType._def,{...O,currentPath:[...O.currentPath,"items"]})};return N.minSize&&(P.minItems=N.minSize.value),N.maxSize&&(P.maxItems=N.maxSize.value),P;case t.ZodLazy:return()=>a.getter()._def;case t.ZodPromise:return dT(a.type._def,c);case t.ZodNaN:case t.ZodNever:return{not:{}};case t.ZodEffects:return f=a,"input"===(g=c).effectStrategy?dT(f.schema._def,g):{};case t.ZodAny:case t.ZodUnknown:return{};case t.ZodDefault:return h=a,i=c,{...dT(h.innerType._def,i),default:h.defaultValue()};case t.ZodBranded:return dI(a,c);case t.ZodReadonly:case t.ZodCatch:return dT(a.innerType._def,c);case t.ZodPipeline:var Q=a,R=c;if("input"===R.pipeStrategy)return dT(Q.in._def,R);if("output"===R.pipeStrategy)return dT(Q.out._def,R);let S=dT(Q.in._def,{...R,currentPath:[...R.currentPath,"allOf","0"]}),T=dT(Q.out._def,{...R,currentPath:[...R.currentPath,"allOf",S?"1":"0"]});return{allOf:[S,T].filter(a=>void 0!==a)};case t.ZodFunction:case t.ZodVoid:case t.ZodSymbol:default:return}})(a,a.typeName,b),h="function"==typeof g?dT(g(),b):g;if(h&&dV(a,b,h),b.postProcess){let c=b.postProcess(h,a,b);return f.jsonSchema=h,c}return f.jsonSchema=h,h}var dU=(a,b)=>{switch(b.$refStrategy){case"root":return{$ref:a.path.join("/")};case"relative":return{$ref:((a,b)=>{let c=0;for(;c<a.length&&c<b.length&&a[c]===b[c];c++);return[(a.length-c).toString(),...b.slice(c)].join("/")})(b.currentPath,a.path)};case"none":case"seen":if(a.path.length<b.currentPath.length&&a.path.every((a,c)=>b.currentPath[c]===a))return console.warn(`Recursive reference detected at ${b.currentPath.join("/")}! Defaulting to any`),{};return"seen"===b.$refStrategy?{}:void 0}},dV=(a,b,c)=>(a.description&&(c.description=a.description),c),dW=Symbol.for("vercel.ai.schema");function dX(a,{validate:b}={}){return{[dW]:!0,_type:void 0,[dp]:!0,jsonSchema:a,validate:b}}function dY(a){return null==a?dX({properties:{},additionalProperties:!1}):"object"==typeof a&&null!==a&&dW in a&&!0===a[dW]&&"jsonSchema"in a&&"validate"in a?a:function(a,b){var c;return"_zod"in a?dX(function(a,b){if(a instanceof bk){let c=new bI(b),d={};for(let b of a._idmap.entries()){let[a,d]=b;c.process(d)}let e={},f={registry:a,uri:b?.uri,defs:d};for(let d of a._idmap.entries()){let[a,g]=d;e[a]=c.emit(g,{...b,external:f})}return Object.keys(d).length>0&&(e.__shared={["draft-2020-12"===c.target?"$defs":"definitions"]:d}),{schemas:e}}let c=new bI(b);return c.process(a),c.emit(a,b)}(a,{target:"draft-7",io:"output",reused:"inline"}),{validate:async b=>{let c=await bZ(a,b);return c.success?{success:!0,value:c.data}:{success:!1,error:c.error}}}):dX(((a,b)=>{var c;let d=(a=>{let b,c="string"==typeof(b=a)?{...dH,name:b}:{...dH,...b},d=void 0!==c.name?[...c.basePath,c.definitionPath,c.name]:c.basePath;return{...c,currentPath:d,propertyPath:void 0,seen:new Map(Object.entries(c.definitions).map(([a,b])=>[b._def,{def:b._def,path:[...c.basePath,c.definitionPath,a],jsonSchema:void 0}]))}})(b),e="object"==typeof b&&b.definitions?Object.entries(b.definitions).reduce((a,[b,c])=>{var e;return{...a,[b]:null!=(e=dT(c._def,{...d,currentPath:[...d.basePath,d.definitionPath,b]},!0))?e:{}}},{}):void 0,f="string"==typeof b?b:(null==b?void 0:b.nameStrategy)==="title"||null==b?void 0:b.name,g=null!=(c=dT(a._def,void 0===f?d:{...d,currentPath:[...d.basePath,d.definitionPath,f]},!1))?c:{},h="object"==typeof b&&void 0!==b.name&&"title"===b.nameStrategy?b.name:void 0;void 0!==h&&(g.title=h);let i=void 0===f?e?{...g,[d.definitionPath]:e}:g:{$ref:[..."relative"===d.$refStrategy?[]:d.basePath,d.definitionPath,f].join("/"),[d.definitionPath]:{...e,[f]:g}};return i.$schema="http://json-schema.org/draft-07/schema#",i})(a,{$refStrategy:(c=void 0,"none")}),{validate:async b=>{let c=await a.safeParseAsync(b);return c.success?{success:!0,value:c.data}:{success:!1,error:c.error}}})}(a)}var{btoa:dZ,atob:d$}=globalThis;function d_(a){let b=d$(a.replace(/-/g,"+").replace(/_/g,"/"));return Uint8Array.from(b,a=>a.codePointAt(0))}function d0(a){let b="";for(let c=0;c<a.length;c++)b+=String.fromCodePoint(a[c]);return dZ(b)}function d1(a){return a instanceof Uint8Array?d0(a):a}function d2(a){return null==a?void 0:a.replace(/\/$/,"")}async function*d3({execute:a,input:b,options:c}){let d=a(b,c);if(null!=d&&"function"==typeof d[Symbol.asyncIterator]){let a;for await(let b of d)a=b,yield{type:"preliminary",output:b};yield{type:"final",output:a}}else yield{type:"final",output:await d}}let d4=/^[cC][^\s-]{8,}$/,d5=/^[0-9a-z]+$/,d6=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,d7=/^[0-9a-vA-V]{20}$/,d8=/^[A-Za-z0-9]{27}$/,d9=/^[a-zA-Z0-9_-]{21}$/,ea=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,eb=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ec=a=>a?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${a}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,ed=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,ee=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ef=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,eg=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,eh=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ei=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,ej=/^[A-Za-z0-9_-]*$/,ek=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,el=/^\+(?:[0-9]){6,14}[0-9]$/,em="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",en=RegExp(`^${em}$`);function eo(a){let b="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof a.precision?-1===a.precision?`${b}`:0===a.precision?`${b}:[0-5]\\d`:`${b}:[0-5]\\d\\.\\d{${a.precision}}`:`${b}(?::[0-5]\\d(?:\\.\\d+)?)?`}let ep=/^\d+$/,eq=/^-?\d+(?:\.\d+)?/i,er=/true|false/i,es=/null/i,et=/^[^A-Z]*$/,eu=/^[^a-z]*$/,ev=bJ("$ZodCheck",(a,b)=>{var c;a._zod??(a._zod={}),a._zod.def=b,(c=a._zod).onattach??(c.onattach=[])}),ew={number:"number",bigint:"bigint",object:"date"},ex=bJ("$ZodCheckLessThan",(a,b)=>{ev.init(a,b);let c=ew[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.maximum:c.exclusiveMaximum)??1/0;b.value<d&&(b.inclusive?c.maximum=b.value:c.exclusiveMaximum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value<=b.value:d.value<b.value)||d.issues.push({origin:c,code:"too_big",maximum:b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),ey=bJ("$ZodCheckGreaterThan",(a,b)=>{ev.init(a,b);let c=ew[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.minimum:c.exclusiveMinimum)??-1/0;b.value>d&&(b.inclusive?c.minimum=b.value:c.exclusiveMinimum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value>=b.value:d.value>b.value)||d.issues.push({origin:c,code:"too_small",minimum:b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),ez=bJ("$ZodCheckMultipleOf",(a,b)=>{ev.init(a,b),a._zod.onattach.push(a=>{var c;(c=a._zod.bag).multipleOf??(c.multipleOf=b.value)}),a._zod.check=c=>{if(typeof c.value!=typeof b.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof c.value?c.value%b.value===BigInt(0):0===function(a,b){let c=(a.toString().split(".")[1]||"").length,d=(b.toString().split(".")[1]||"").length,e=c>d?c:d;return Number.parseInt(a.toFixed(e).replace(".",""))%Number.parseInt(b.toFixed(e).replace(".",""))/10**e}(c.value,b.value))||c.issues.push({origin:typeof c.value,code:"not_multiple_of",divisor:b.value,input:c.value,inst:a,continue:!b.abort})}}),eA=bJ("$ZodCheckNumberFormat",(a,b)=>{ev.init(a,b),b.format=b.format||"float64";let c=b.format?.includes("int"),d=c?"int":"number",[e,f]=bB[b.format];a._zod.onattach.push(a=>{let d=a._zod.bag;d.format=b.format,d.minimum=e,d.maximum=f,c&&(d.pattern=ep)}),a._zod.check=g=>{let h=g.value;if(c){if(!Number.isInteger(h))return void g.issues.push({expected:d,format:b.format,code:"invalid_type",input:h,inst:a});if(!Number.isSafeInteger(h))return void(h>0?g.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,continue:!b.abort}):g.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,continue:!b.abort}))}h<e&&g.issues.push({origin:"number",input:h,code:"too_small",minimum:e,inclusive:!0,inst:a,continue:!b.abort}),h>f&&g.issues.push({origin:"number",input:h,code:"too_big",maximum:f,inst:a})}}),eB=bJ("$ZodCheckMaxLength",(a,b)=>{var c;ev.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return null!=b&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;if(d.length<=b.maximum)return;let e=bG(d);c.issues.push({origin:e,code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),eC=bJ("$ZodCheckMinLength",(a,b)=>{var c;ev.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return null!=b&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;if(d.length>=b.minimum)return;let e=bG(d);c.issues.push({origin:e,code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),eD=bJ("$ZodCheckLengthEquals",(a,b)=>{var c;ev.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return null!=b&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.length,c.maximum=b.length,c.length=b.length}),a._zod.check=c=>{let d=c.value,e=d.length;if(e===b.length)return;let f=bG(d),g=e>b.length;c.issues.push({origin:f,...g?{code:"too_big",maximum:b.length}:{code:"too_small",minimum:b.length},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),eE=bJ("$ZodCheckStringFormat",(a,b)=>{var c,d;ev.init(a,b),a._zod.onattach.push(a=>{let c=a._zod.bag;c.format=b.format,b.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(b.pattern))}),b.pattern?(c=a._zod).check??(c.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:b.format,input:c.value,...b.pattern?{pattern:b.pattern.toString()}:{},inst:a,continue:!b.abort})}):(d=a._zod).check??(d.check=()=>{})}),eF=bJ("$ZodCheckRegex",(a,b)=>{eE.init(a,b),a._zod.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:"regex",input:c.value,pattern:b.pattern.toString(),inst:a,continue:!b.abort})}}),eG=bJ("$ZodCheckLowerCase",(a,b)=>{b.pattern??(b.pattern=et),eE.init(a,b)}),eH=bJ("$ZodCheckUpperCase",(a,b)=>{b.pattern??(b.pattern=eu),eE.init(a,b)}),eI=bJ("$ZodCheckIncludes",(a,b)=>{ev.init(a,b);let c=by(b.includes),d=new RegExp("number"==typeof b.position?`^.{${b.position}}${c}`:c);b.pattern=d,a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(d)}),a._zod.check=c=>{c.value.includes(b.includes,b.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:b.includes,input:c.value,inst:a,continue:!b.abort})}}),eJ=bJ("$ZodCheckStartsWith",(a,b)=>{ev.init(a,b);let c=RegExp(`^${by(b.prefix)}.*`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.startsWith(b.prefix)||c.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:b.prefix,input:c.value,inst:a,continue:!b.abort})}}),eK=bJ("$ZodCheckEndsWith",(a,b)=>{ev.init(a,b);let c=RegExp(`.*${by(b.suffix)}$`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.endsWith(b.suffix)||c.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:b.suffix,input:c.value,inst:a,continue:!b.abort})}}),eL=bJ("$ZodCheckOverwrite",(a,b)=>{ev.init(a,b),a._zod.check=a=>{a.value=b.tx(a.value)}});class eM{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if("function"==typeof a){a(this,{execution:"sync"}),a(this,{execution:"async"});return}let b=a.split("\n").filter(a=>a),c=Math.min(...b.map(a=>a.length-a.trimStart().length));for(let a of b.map(a=>a.slice(c)).map(a=>" ".repeat(2*this.indent)+a))this.content.push(a)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(a=>`  ${a}`)].join("\n"))}}let eN={major:4,minor:0,patch:0},eO=bJ("$ZodType",(a,b)=>{var c;a??(a={}),a._zod.def=b,a._zod.bag=a._zod.bag||{},a._zod.version=eN;let d=[...a._zod.def.checks??[]];for(let b of(a._zod.traits.has("$ZodCheck")&&d.unshift(a),d))for(let c of b._zod.onattach)c(a);if(0===d.length)(c=a._zod).deferred??(c.deferred=[]),a._zod.deferred?.push(()=>{a._zod.run=a._zod.parse});else{let b=(a,b,c)=>{let d,e=bC(a);for(let f of b){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(e)continue;let b=a.issues.length,g=f._zod.check(a);if(g instanceof Promise&&c?.async===!1)throw new bK;if(d||g instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await g,a.issues.length!==b&&(e||(e=bC(a,b)))});else{if(a.issues.length===b)continue;e||(e=bC(a,b))}}return d?d.then(()=>a):a};a._zod.run=(c,e)=>{let f=a._zod.parse(c,e);if(f instanceof Promise){if(!1===e.async)throw new bK;return f.then(a=>b(a,d,e))}return b(f,d,e)}}a["~standard"]={validate:b=>{try{let c=bR(a,b);return c.success?{value:c.data}:{issues:c.error?.issues}}catch(c){return bT(a,b).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),eP=bJ("$ZodString",(a,b)=>{eO.init(a,b),a._zod.pattern=[...a?._zod.bag?.patterns??[]].pop()??(a=>{let b=a?`[\\s\\S]{${a?.minimum??0},${a?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${b}$`)})(a._zod.bag),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=String(c.value)}catch(a){}return"string"==typeof c.value||c.issues.push({expected:"string",code:"invalid_type",input:c.value,inst:a}),c}}),eQ=bJ("$ZodStringFormat",(a,b)=>{eE.init(a,b),eP.init(a,b)}),eR=bJ("$ZodGUID",(a,b)=>{b.pattern??(b.pattern=eb),eQ.init(a,b)}),eS=bJ("$ZodUUID",(a,b)=>{if(b.version){let a={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[b.version];if(void 0===a)throw Error(`Invalid UUID version: "${b.version}"`);b.pattern??(b.pattern=ec(a))}else b.pattern??(b.pattern=ec());eQ.init(a,b)}),eT=bJ("$ZodEmail",(a,b)=>{b.pattern??(b.pattern=ed),eQ.init(a,b)}),eU=bJ("$ZodURL",(a,b)=>{eQ.init(a,b),a._zod.check=c=>{try{let d=c.value,e=new URL(d),f=e.href;b.hostname&&(b.hostname.lastIndex=0,b.hostname.test(e.hostname)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:ek.source,input:c.value,inst:a,continue:!b.abort})),b.protocol&&(b.protocol.lastIndex=0,b.protocol.test(e.protocol.endsWith(":")?e.protocol.slice(0,-1):e.protocol)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:b.protocol.source,input:c.value,inst:a,continue:!b.abort})),!d.endsWith("/")&&f.endsWith("/")?c.value=f.slice(0,-1):c.value=f;return}catch(d){c.issues.push({code:"invalid_format",format:"url",input:c.value,inst:a,continue:!b.abort})}}}),eV=bJ("$ZodEmoji",(a,b)=>{b.pattern??(b.pattern=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),eQ.init(a,b)}),eW=bJ("$ZodNanoID",(a,b)=>{b.pattern??(b.pattern=d9),eQ.init(a,b)}),eX=bJ("$ZodCUID",(a,b)=>{b.pattern??(b.pattern=d4),eQ.init(a,b)}),eY=bJ("$ZodCUID2",(a,b)=>{b.pattern??(b.pattern=d5),eQ.init(a,b)}),eZ=bJ("$ZodULID",(a,b)=>{b.pattern??(b.pattern=d6),eQ.init(a,b)}),e$=bJ("$ZodXID",(a,b)=>{b.pattern??(b.pattern=d7),eQ.init(a,b)}),e_=bJ("$ZodKSUID",(a,b)=>{b.pattern??(b.pattern=d8),eQ.init(a,b)}),e0=bJ("$ZodISODateTime",(a,b)=>{b.pattern??(b.pattern=function(a){let b=eo({precision:a.precision}),c=["Z"];a.local&&c.push(""),a.offset&&c.push("([+-]\\d{2}:\\d{2})");let d=`${b}(?:${c.join("|")})`;return RegExp(`^${em}T(?:${d})$`)}(b)),eQ.init(a,b)}),e1=bJ("$ZodISODate",(a,b)=>{b.pattern??(b.pattern=en),eQ.init(a,b)}),e2=bJ("$ZodISOTime",(a,b)=>{b.pattern??(b.pattern=RegExp(`^${eo(b)}$`)),eQ.init(a,b)}),e3=bJ("$ZodISODuration",(a,b)=>{b.pattern??(b.pattern=ea),eQ.init(a,b)}),e4=bJ("$ZodIPv4",(a,b)=>{b.pattern??(b.pattern=ee),eQ.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.format="ipv4"})}),e5=bJ("$ZodIPv6",(a,b)=>{b.pattern??(b.pattern=ef),eQ.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.format="ipv6"}),a._zod.check=c=>{try{new URL(`http://[${c.value}]`)}catch{c.issues.push({code:"invalid_format",format:"ipv6",input:c.value,inst:a,continue:!b.abort})}}}),e6=bJ("$ZodCIDRv4",(a,b)=>{b.pattern??(b.pattern=eg),eQ.init(a,b)}),e7=bJ("$ZodCIDRv6",(a,b)=>{b.pattern??(b.pattern=eh),eQ.init(a,b),a._zod.check=c=>{let[d,e]=c.value.split("/");try{if(!e)throw Error();let a=Number(e);if(`${a}`!==e||a<0||a>128)throw Error();new URL(`http://[${d}]`)}catch{c.issues.push({code:"invalid_format",format:"cidrv6",input:c.value,inst:a,continue:!b.abort})}}});function e8(a){if(""===a)return!0;if(a.length%4!=0)return!1;try{return atob(a),!0}catch{return!1}}let e9=bJ("$ZodBase64",(a,b)=>{b.pattern??(b.pattern=ei),eQ.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.contentEncoding="base64"}),a._zod.check=c=>{e8(c.value)||c.issues.push({code:"invalid_format",format:"base64",input:c.value,inst:a,continue:!b.abort})}}),fa=bJ("$ZodBase64URL",(a,b)=>{b.pattern??(b.pattern=ej),eQ.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.contentEncoding="base64url"}),a._zod.check=c=>{!function(a){if(!ej.test(a))return!1;let b=a.replace(/[-_]/g,a=>"-"===a?"+":"/");return e8(b.padEnd(4*Math.ceil(b.length/4),"="))}(c.value)&&c.issues.push({code:"invalid_format",format:"base64url",input:c.value,inst:a,continue:!b.abort})}}),fb=bJ("$ZodE164",(a,b)=>{b.pattern??(b.pattern=el),eQ.init(a,b)}),fc=bJ("$ZodJWT",(a,b)=>{eQ.init(a,b),a._zod.check=c=>{!function(a,b=null){try{let c=a.split(".");if(3!==c.length)return!1;let[d]=c;if(!d)return!1;let e=JSON.parse(atob(d));if("typ"in e&&e?.typ!=="JWT"||!e.alg||b&&(!("alg"in e)||e.alg!==b))return!1;return!0}catch{return!1}}(c.value,b.alg)&&c.issues.push({code:"invalid_format",format:"jwt",input:c.value,inst:a,continue:!b.abort})}}),fd=bJ("$ZodNumber",(a,b)=>{eO.init(a,b),a._zod.pattern=a._zod.bag.pattern??eq,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=Number(c.value)}catch(a){}let e=c.value;if("number"==typeof e&&!Number.isNaN(e)&&Number.isFinite(e))return c;let f="number"==typeof e?Number.isNaN(e)?"NaN":Number.isFinite(e)?void 0:"Infinity":void 0;return c.issues.push({expected:"number",code:"invalid_type",input:e,inst:a,...f?{received:f}:{}}),c}}),fe=bJ("$ZodNumber",(a,b)=>{eA.init(a,b),fd.init(a,b)}),ff=bJ("$ZodBoolean",(a,b)=>{eO.init(a,b),a._zod.pattern=er,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=!!c.value}catch(a){}let e=c.value;return"boolean"==typeof e||c.issues.push({expected:"boolean",code:"invalid_type",input:e,inst:a}),c}}),fg=bJ("$ZodNull",(a,b)=>{eO.init(a,b),a._zod.pattern=es,a._zod.values=new Set([null]),a._zod.parse=(b,c)=>{let d=b.value;return null===d||b.issues.push({expected:"null",code:"invalid_type",input:d,inst:a}),b}}),fh=bJ("$ZodAny",(a,b)=>{eO.init(a,b),a._zod.parse=a=>a}),fi=bJ("$ZodUnknown",(a,b)=>{eO.init(a,b),a._zod.parse=a=>a}),fj=bJ("$ZodNever",(a,b)=>{eO.init(a,b),a._zod.parse=(b,c)=>(b.issues.push({expected:"never",code:"invalid_type",input:b.value,inst:a}),b)});function fk(a,b,c){a.issues.length&&b.issues.push(...bD(c,a.issues)),b.value[c]=a.value}let fl=bJ("$ZodArray",(a,b)=>{eO.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!Array.isArray(e))return c.issues.push({expected:"array",code:"invalid_type",input:e,inst:a}),c;c.value=Array(e.length);let f=[];for(let a=0;a<e.length;a++){let g=e[a],h=b.element._zod.run({value:g,issues:[]},d);h instanceof Promise?f.push(h.then(b=>fk(b,c,a))):fk(h,c,a)}return f.length?Promise.all(f).then(()=>c):c}});function fm(a,b,c){a.issues.length&&b.issues.push(...bD(c,a.issues)),b.value[c]=a.value}function fn(a,b,c,d){a.issues.length?void 0===d[c]?c in d?b.value[c]=void 0:b.value[c]=a.value:b.issues.push(...bD(c,a.issues)):void 0===a.value?c in d&&(b.value[c]=void 0):b.value[c]=a.value}let fo=bJ("$ZodObject",(a,b)=>{let c,d;eO.init(a,b);let e=bo(()=>{let a=Object.keys(b.shape);for(let c of a)if(!(b.shape[c]instanceof eO))throw Error(`Invalid element at key "${c}": expected a Zod schema`);let c=function(a){return Object.keys(a).filter(b=>"optional"===a[b]._zod.optin&&"optional"===a[b]._zod.optout)}(b.shape);return{shape:b.shape,keys:a,keySet:new Set(a),numKeys:a.length,optionalKeys:new Set(c)}});bq(a._zod,"propValues",()=>{let a=b.shape,c={};for(let b in a){let d=a[b]._zod;if(d.values)for(let a of(c[b]??(c[b]=new Set),d.values))c[b].add(a)}return c});let f=!bL.jitless,g=f&&bv.value,h=b.catchall;a._zod.parse=(i,j)=>{d??(d=e.value);let k=i.value;if(!bu(k))return i.issues.push({expected:"object",code:"invalid_type",input:k,inst:a}),i;let l=[];if(f&&g&&j?.async===!1&&!0!==j.jitless)c||(c=(a=>{let b=new eM(["shape","payload","ctx"]),c=e.value,d=a=>{let b=bs(a);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};b.write("const input = payload.value;");let f=Object.create(null),g=0;for(let a of c.keys)f[a]=`key_${g++}`;for(let a of(b.write("const newResult = {}"),c.keys))if(c.optionalKeys.has(a)){let c=f[a];b.write(`const ${c} = ${d(a)};`);let e=bs(a);b.write(`
        if (${c}.issues.length) {
          if (input[${e}] === undefined) {
            if (${e} in input) {
              newResult[${e}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${c}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${e}, ...iss.path] : [${e}],
              }))
            );
          }
        } else if (${c}.value === undefined) {
          if (${e} in input) newResult[${e}] = undefined;
        } else {
          newResult[${e}] = ${c}.value;
        }
        `)}else{let c=f[a];b.write(`const ${c} = ${d(a)};`),b.write(`
          if (${c}.issues.length) payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${bs(a)}, ...iss.path] : [${bs(a)}]
          })));`),b.write(`newResult[${bs(a)}] = ${c}.value`)}b.write("payload.value = newResult;"),b.write("return payload;");let h=b.compile();return(b,c)=>h(a,b,c)})(b.shape)),i=c(i,j);else{i.value={};let a=d.shape;for(let b of d.keys){let c=a[b],d=c._zod.run({value:k[b],issues:[]},j),e="optional"===c._zod.optin&&"optional"===c._zod.optout;d instanceof Promise?l.push(d.then(a=>e?fn(a,i,b,k):fm(a,i,b))):e?fn(d,i,b,k):fm(d,i,b)}}if(!h)return l.length?Promise.all(l).then(()=>i):i;let m=[],n=d.keySet,o=h._zod,p=o.def.type;for(let a of Object.keys(k)){if(n.has(a))continue;if("never"===p){m.push(a);continue}let b=o.run({value:k[a],issues:[]},j);b instanceof Promise?l.push(b.then(b=>fm(b,i,a))):fm(b,i,a)}return(m.length&&i.issues.push({code:"unrecognized_keys",keys:m,input:k,inst:a}),l.length)?Promise.all(l).then(()=>i):i}});function fp(a,b,c,d){for(let c of a)if(0===c.issues.length)return b.value=c.value,b;return b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>bF(a,d,bM())))}),b}let fq=bJ("$ZodUnion",(a,b)=>{eO.init(a,b),bq(a._zod,"optin",()=>b.options.some(a=>"optional"===a._zod.optin)?"optional":void 0),bq(a._zod,"optout",()=>b.options.some(a=>"optional"===a._zod.optout)?"optional":void 0),bq(a._zod,"values",()=>{if(b.options.every(a=>a._zod.values))return new Set(b.options.flatMap(a=>Array.from(a._zod.values)))}),bq(a._zod,"pattern",()=>{if(b.options.every(a=>a._zod.pattern)){let a=b.options.map(a=>a._zod.pattern);return RegExp(`^(${a.map(a=>bp(a.source)).join("|")})$`)}}),a._zod.parse=(c,d)=>{let e=!1,f=[];for(let a of b.options){let b=a._zod.run({value:c.value,issues:[]},d);if(b instanceof Promise)f.push(b),e=!0;else{if(0===b.issues.length)return b;f.push(b)}}return e?Promise.all(f).then(b=>fp(b,c,a,d)):fp(f,c,a,d)}}),fr=bJ("$ZodDiscriminatedUnion",(a,b)=>{fq.init(a,b);let c=a._zod.parse;bq(a._zod,"propValues",()=>{let a={};for(let c of b.options){let d=c._zod.propValues;if(!d||0===Object.keys(d).length)throw Error(`Invalid discriminated union option at index "${b.options.indexOf(c)}"`);for(let[b,c]of Object.entries(d))for(let d of(a[b]||(a[b]=new Set),c))a[b].add(d)}return a});let d=bo(()=>{let a=b.options,c=new Map;for(let d of a){let a=d._zod.propValues[b.discriminator];if(!a||0===a.size)throw Error(`Invalid discriminated union option at index "${b.options.indexOf(d)}"`);for(let b of a){if(c.has(b))throw Error(`Duplicate discriminator value "${String(b)}"`);c.set(b,d)}}return c});a._zod.parse=(e,f)=>{let g=e.value;if(!bu(g))return e.issues.push({code:"invalid_type",expected:"object",input:g,inst:a}),e;let h=d.value.get(g?.[b.discriminator]);return h?h._zod.run(e,f):b.unionFallback?c(e,f):(e.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:g,path:[b.discriminator],inst:a}),e)}}),fs=bJ("$ZodIntersection",(a,b)=>{eO.init(a,b),a._zod.parse=(a,c)=>{let d=a.value,e=b.left._zod.run({value:d,issues:[]},c),f=b.right._zod.run({value:d,issues:[]},c);return e instanceof Promise||f instanceof Promise?Promise.all([e,f]).then(([b,c])=>ft(a,b,c)):ft(a,e,f)}});function ft(a,b,c){if(b.issues.length&&a.issues.push(...b.issues),c.issues.length&&a.issues.push(...c.issues),bC(a))return a;let d=function a(b,c){if(b===c||b instanceof Date&&c instanceof Date&&+b==+c)return{valid:!0,data:b};if(bw(b)&&bw(c)){let d=Object.keys(c),e=Object.keys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1,mergeErrorPath:[d,...e.mergeErrorPath]};f[d]=e.data}return{valid:!0,data:f}}if(Array.isArray(b)&&Array.isArray(c)){if(b.length!==c.length)return{valid:!1,mergeErrorPath:[]};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1,mergeErrorPath:[e,...f.mergeErrorPath]};d.push(f.data)}return{valid:!0,data:d}}return{valid:!1,mergeErrorPath:[]}}(b.value,c.value);if(!d.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(d.mergeErrorPath)}`);return a.value=d.data,a}let fu=bJ("$ZodRecord",(a,b)=>{eO.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!bw(e))return c.issues.push({expected:"record",code:"invalid_type",input:e,inst:a}),c;let f=[];if(b.keyType._zod.values){let g,h=b.keyType._zod.values;for(let a of(c.value={},h))if("string"==typeof a||"number"==typeof a||"symbol"==typeof a){let g=b.valueType._zod.run({value:e[a],issues:[]},d);g instanceof Promise?f.push(g.then(b=>{b.issues.length&&c.issues.push(...bD(a,b.issues)),c.value[a]=b.value})):(g.issues.length&&c.issues.push(...bD(a,g.issues)),c.value[a]=g.value)}for(let a in e)h.has(a)||(g=g??[]).push(a);g&&g.length>0&&c.issues.push({code:"unrecognized_keys",input:e,inst:a,keys:g})}else for(let g of(c.value={},Reflect.ownKeys(e))){if("__proto__"===g)continue;let h=b.keyType._zod.run({value:g,issues:[]},d);if(h instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(h.issues.length){c.issues.push({origin:"record",code:"invalid_key",issues:h.issues.map(a=>bF(a,d,bM())),input:g,path:[g],inst:a}),c.value[h.value]=h.value;continue}let i=b.valueType._zod.run({value:e[g],issues:[]},d);i instanceof Promise?f.push(i.then(a=>{a.issues.length&&c.issues.push(...bD(g,a.issues)),c.value[h.value]=a.value})):(i.issues.length&&c.issues.push(...bD(g,i.issues)),c.value[h.value]=i.value)}return f.length?Promise.all(f).then(()=>c):c}}),fv=bJ("$ZodEnum",(a,b)=>{eO.init(a,b);let c=bm(b.entries);a._zod.values=new Set(c),a._zod.pattern=RegExp(`^(${c.filter(a=>bx.has(typeof a)).map(a=>"string"==typeof a?by(a):a.toString()).join("|")})$`),a._zod.parse=(b,d)=>{let e=b.value;return a._zod.values.has(e)||b.issues.push({code:"invalid_value",values:c,input:e,inst:a}),b}}),fw=bJ("$ZodLiteral",(a,b)=>{eO.init(a,b),a._zod.values=new Set(b.values),a._zod.pattern=RegExp(`^(${b.values.map(a=>"string"==typeof a?by(a):a?a.toString():String(a)).join("|")})$`),a._zod.parse=(c,d)=>{let e=c.value;return a._zod.values.has(e)||c.issues.push({code:"invalid_value",values:b.values,input:e,inst:a}),c}}),fx=bJ("$ZodTransform",(a,b)=>{eO.init(a,b),a._zod.parse=(a,c)=>{let d=b.transform(a.value,a);if(c.async)return(d instanceof Promise?d:Promise.resolve(d)).then(b=>(a.value=b,a));if(d instanceof Promise)throw new bK;return a.value=d,a}}),fy=bJ("$ZodOptional",(a,b)=>{eO.init(a,b),a._zod.optin="optional",a._zod.optout="optional",bq(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,void 0]):void 0),bq(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${bp(a.source)})?$`):void 0}),a._zod.parse=(a,c)=>"optional"===b.innerType._zod.optin?b.innerType._zod.run(a,c):void 0===a.value?a:b.innerType._zod.run(a,c)}),fz=bJ("$ZodNullable",(a,b)=>{eO.init(a,b),bq(a._zod,"optin",()=>b.innerType._zod.optin),bq(a._zod,"optout",()=>b.innerType._zod.optout),bq(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${bp(a.source)}|null)$`):void 0}),bq(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,null]):void 0),a._zod.parse=(a,c)=>null===a.value?a:b.innerType._zod.run(a,c)}),fA=bJ("$ZodDefault",(a,b)=>{eO.init(a,b),a._zod.optin="optional",bq(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if(void 0===a.value)return a.value=b.defaultValue,a;let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(a=>fB(a,b)):fB(d,b)}});function fB(a,b){return void 0===a.value&&(a.value=b.defaultValue),a}let fC=bJ("$ZodPrefault",(a,b)=>{eO.init(a,b),a._zod.optin="optional",bq(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>(void 0===a.value&&(a.value=b.defaultValue),b.innerType._zod.run(a,c))}),fD=bJ("$ZodNonOptional",(a,b)=>{eO.init(a,b),bq(a._zod,"values",()=>{let a=b.innerType._zod.values;return a?new Set([...a].filter(a=>void 0!==a)):void 0}),a._zod.parse=(c,d)=>{let e=b.innerType._zod.run(c,d);return e instanceof Promise?e.then(b=>fE(b,a)):fE(e,a)}});function fE(a,b){return a.issues.length||void 0!==a.value||a.issues.push({code:"invalid_type",expected:"nonoptional",input:a.value,inst:b}),a}let fF=bJ("$ZodCatch",(a,b)=>{eO.init(a,b),a._zod.optin="optional",bq(a._zod,"optout",()=>b.innerType._zod.optout),bq(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(d=>(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>bF(a,c,bM()))},input:a.value}),a.issues=[]),a)):(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>bF(a,c,bM()))},input:a.value}),a.issues=[]),a)}}),fG=bJ("$ZodPipe",(a,b)=>{eO.init(a,b),bq(a._zod,"values",()=>b.in._zod.values),bq(a._zod,"optin",()=>b.in._zod.optin),bq(a._zod,"optout",()=>b.out._zod.optout),a._zod.parse=(a,c)=>{let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>fH(a,b,c)):fH(d,b,c)}});function fH(a,b,c){return bC(a)?a:b.out._zod.run({value:a.value,issues:a.issues},c)}let fI=bJ("$ZodReadonly",(a,b)=>{eO.init(a,b),bq(a._zod,"propValues",()=>b.innerType._zod.propValues),bq(a._zod,"values",()=>b.innerType._zod.values),bq(a._zod,"optin",()=>b.innerType._zod.optin),bq(a._zod,"optout",()=>b.innerType._zod.optout),a._zod.parse=(a,c)=>{let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(fJ):fJ(d)}});function fJ(a){return a.value=Object.freeze(a.value),a}let fK=bJ("$ZodLazy",(a,b)=>{eO.init(a,b),bq(a._zod,"innerType",()=>b.getter()),bq(a._zod,"pattern",()=>a._zod.innerType._zod.pattern),bq(a._zod,"propValues",()=>a._zod.innerType._zod.propValues),bq(a._zod,"optin",()=>a._zod.innerType._zod.optin),bq(a._zod,"optout",()=>a._zod.innerType._zod.optout),a._zod.parse=(b,c)=>a._zod.innerType._zod.run(b,c)}),fL=bJ("$ZodCustom",(a,b)=>{ev.init(a,b),eO.init(a,b),a._zod.parse=(a,b)=>a,a._zod.check=c=>{let d=c.value,e=b.fn(d);if(e instanceof Promise)return e.then(b=>fM(b,c,d,a));fM(e,c,d,a)}});function fM(a,b,c,d){if(!a){let a={code:"custom",input:c,inst:d,path:[...d._zod.def.path??[]],continue:!d._zod.def.abort};d._zod.def.params&&(a.params=d._zod.def.params),b.issues.push(bH(a))}}function fN(a,b){return new a({type:"string",format:"guid",check:"string_format",abort:!1,...bA(b)})}function fO(a,b){return new a({type:"string",format:"base64",check:"string_format",abort:!1,...bA(b)})}function fP(a,b){return new ex({check:"less_than",...bA(b),value:a,inclusive:!1})}function fQ(a,b){return new ex({check:"less_than",...bA(b),value:a,inclusive:!0})}function fR(a,b){return new ey({check:"greater_than",...bA(b),value:a,inclusive:!1})}function fS(a,b){return new ey({check:"greater_than",...bA(b),value:a,inclusive:!0})}function fT(a,b){return new ez({check:"multiple_of",...bA(b),value:a})}function fU(a,b){return new eB({check:"max_length",...bA(b),maximum:a})}function fV(a,b){return new eC({check:"min_length",...bA(b),minimum:a})}function fW(a,b){return new eD({check:"length_equals",...bA(b),length:a})}function fX(a){return new eL({check:"overwrite",tx:a})}let fY=bJ("ZodISODateTime",(a,b)=>{e0.init(a,b),f4.init(a,b)}),fZ=bJ("ZodISODate",(a,b)=>{e1.init(a,b),f4.init(a,b)}),f$=bJ("ZodISOTime",(a,b)=>{e2.init(a,b),f4.init(a,b)}),f_=bJ("ZodISODuration",(a,b)=>{e3.init(a,b),f4.init(a,b)}),f0=bJ("ZodType",(a,b)=>(eO.init(a,b),a.def=b,Object.defineProperty(a,"_def",{value:b}),a.check=(...c)=>a.clone({...b,checks:[...b.checks??[],...c.map(a=>"function"==typeof a?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]}),a.clone=(b,c)=>bz(a,b,c),a.brand=()=>a,a.register=(b,c)=>(b.add(a,c),a),a.parse=(b,c)=>bW(a,b,c,{callee:a.parse}),a.safeParse=(b,c)=>bY(a,b,c),a.parseAsync=async(b,c)=>bX(a,b,c,{callee:a.parseAsync}),a.safeParseAsync=async(b,c)=>bZ(a,b,c),a.spa=a.safeParseAsync,a.refine=(b,c)=>a.check(function(a,b={}){return new g4({type:"custom",check:"custom",fn:a,...bA(b)})}(b,c)),a.superRefine=b=>a.check(function(a){let b=function(a){let b=new ev({check:"custom"});return b._zod.check=a,b}(c=>(c.addIssue=a=>{"string"==typeof a?c.issues.push(bH(a,c.value,b._zod.def)):(a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=c.value),a.inst??(a.inst=b),a.continue??(a.continue=!b._zod.def.abort),c.issues.push(bH(a)))},a(c.value,c)));return b}(b)),a.overwrite=b=>a.check(fX(b)),a.optional=()=>gU(a),a.nullable=()=>gW(a),a.nullish=()=>gU(gW(a)),a.nonoptional=b=>new gZ({type:"nonoptional",innerType:a,...bA(b)}),a.array=()=>gC(a),a.or=b=>gI([a,b]),a.and=b=>new gL({type:"intersection",left:a,right:b}),a.transform=b=>g0(a,new gS({type:"transform",transform:b})),a.default=b=>(function(a,b){return new gX({type:"default",innerType:a,get defaultValue(){return"function"==typeof b?b():b}})})(a,b),a.prefault=b=>(function(a,b){return new gY({type:"prefault",innerType:a,get defaultValue(){return"function"==typeof b?b():b}})})(a,b),a.catch=b=>(function(a,b){return new g$({type:"catch",innerType:a,catchValue:"function"==typeof b?b:()=>b})})(a,b),a.pipe=b=>g0(a,b),a.readonly=()=>new g1({type:"readonly",innerType:a}),a.describe=b=>{let c=a.clone();return bl.add(c,{description:b}),c},Object.defineProperty(a,"description",{get:()=>bl.get(a)?.description,configurable:!0}),a.meta=(...b)=>{if(0===b.length)return bl.get(a);let c=a.clone();return bl.add(c,b[0]),c},a.isOptional=()=>a.safeParse(void 0).success,a.isNullable=()=>a.safeParse(null).success,a)),f1=bJ("_ZodString",(a,b)=>{eP.init(a,b),f0.init(a,b);let c=a._zod.bag;a.format=c.format??null,a.minLength=c.minimum??null,a.maxLength=c.maximum??null,a.regex=(...b)=>a.check(function(a,b){return new eF({check:"string_format",format:"regex",...bA(b),pattern:a})}(...b)),a.includes=(...b)=>a.check(function(a,b){return new eI({check:"string_format",format:"includes",...bA(b),includes:a})}(...b)),a.startsWith=(...b)=>a.check(function(a,b){return new eJ({check:"string_format",format:"starts_with",...bA(b),prefix:a})}(...b)),a.endsWith=(...b)=>a.check(function(a,b){return new eK({check:"string_format",format:"ends_with",...bA(b),suffix:a})}(...b)),a.min=(...b)=>a.check(fV(...b)),a.max=(...b)=>a.check(fU(...b)),a.length=(...b)=>a.check(fW(...b)),a.nonempty=(...b)=>a.check(fV(1,...b)),a.lowercase=b=>a.check(new eG({check:"string_format",format:"lowercase",...bA(b)})),a.uppercase=b=>a.check(new eH({check:"string_format",format:"uppercase",...bA(b)})),a.trim=()=>a.check(fX(a=>a.trim())),a.normalize=(...b)=>a.check(function(a){return fX(b=>b.normalize(a))}(...b)),a.toLowerCase=()=>a.check(fX(a=>a.toLowerCase())),a.toUpperCase=()=>a.check(fX(a=>a.toUpperCase()))}),f2=bJ("ZodString",(a,b)=>{eP.init(a,b),f1.init(a,b),a.email=b=>a.check(new f5({type:"string",format:"email",check:"string_format",abort:!1,...bA(b)})),a.url=b=>a.check(new f8({type:"string",format:"url",check:"string_format",abort:!1,...bA(b)})),a.jwt=b=>a.check(new gn({type:"string",format:"jwt",check:"string_format",abort:!1,...bA(b)})),a.emoji=b=>a.check(new f9({type:"string",format:"emoji",check:"string_format",abort:!1,...bA(b)})),a.guid=b=>a.check(fN(f6,b)),a.uuid=b=>a.check(new f7({type:"string",format:"uuid",check:"string_format",abort:!1,...bA(b)})),a.uuidv4=b=>a.check(new f7({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...bA(b)})),a.uuidv6=b=>a.check(new f7({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...bA(b)})),a.uuidv7=b=>a.check(new f7({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...bA(b)})),a.nanoid=b=>a.check(new ga({type:"string",format:"nanoid",check:"string_format",abort:!1,...bA(b)})),a.guid=b=>a.check(fN(f6,b)),a.cuid=b=>a.check(new gb({type:"string",format:"cuid",check:"string_format",abort:!1,...bA(b)})),a.cuid2=b=>a.check(new gc({type:"string",format:"cuid2",check:"string_format",abort:!1,...bA(b)})),a.ulid=b=>a.check(new gd({type:"string",format:"ulid",check:"string_format",abort:!1,...bA(b)})),a.base64=b=>a.check(fO(gk,b)),a.base64url=b=>a.check(new gl({type:"string",format:"base64url",check:"string_format",abort:!1,...bA(b)})),a.xid=b=>a.check(new ge({type:"string",format:"xid",check:"string_format",abort:!1,...bA(b)})),a.ksuid=b=>a.check(new gf({type:"string",format:"ksuid",check:"string_format",abort:!1,...bA(b)})),a.ipv4=b=>a.check(new gg({type:"string",format:"ipv4",check:"string_format",abort:!1,...bA(b)})),a.ipv6=b=>a.check(new gh({type:"string",format:"ipv6",check:"string_format",abort:!1,...bA(b)})),a.cidrv4=b=>a.check(new gi({type:"string",format:"cidrv4",check:"string_format",abort:!1,...bA(b)})),a.cidrv6=b=>a.check(new gj({type:"string",format:"cidrv6",check:"string_format",abort:!1,...bA(b)})),a.e164=b=>a.check(new gm({type:"string",format:"e164",check:"string_format",abort:!1,...bA(b)})),a.datetime=b=>a.check(new fY({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...bA(b)})),a.date=b=>a.check(new fZ({type:"string",format:"date",check:"string_format",...bA(b)})),a.time=b=>a.check(new f$({type:"string",format:"time",check:"string_format",precision:null,...bA(b)})),a.duration=b=>a.check(new f_({type:"string",format:"duration",check:"string_format",...bA(b)}))});function f3(a){return new f2({type:"string",...bA(a)})}let f4=bJ("ZodStringFormat",(a,b)=>{eQ.init(a,b),f1.init(a,b)}),f5=bJ("ZodEmail",(a,b)=>{eT.init(a,b),f4.init(a,b)}),f6=bJ("ZodGUID",(a,b)=>{eR.init(a,b),f4.init(a,b)}),f7=bJ("ZodUUID",(a,b)=>{eS.init(a,b),f4.init(a,b)}),f8=bJ("ZodURL",(a,b)=>{eU.init(a,b),f4.init(a,b)}),f9=bJ("ZodEmoji",(a,b)=>{eV.init(a,b),f4.init(a,b)}),ga=bJ("ZodNanoID",(a,b)=>{eW.init(a,b),f4.init(a,b)}),gb=bJ("ZodCUID",(a,b)=>{eX.init(a,b),f4.init(a,b)}),gc=bJ("ZodCUID2",(a,b)=>{eY.init(a,b),f4.init(a,b)}),gd=bJ("ZodULID",(a,b)=>{eZ.init(a,b),f4.init(a,b)}),ge=bJ("ZodXID",(a,b)=>{e$.init(a,b),f4.init(a,b)}),gf=bJ("ZodKSUID",(a,b)=>{e_.init(a,b),f4.init(a,b)}),gg=bJ("ZodIPv4",(a,b)=>{e4.init(a,b),f4.init(a,b)}),gh=bJ("ZodIPv6",(a,b)=>{e5.init(a,b),f4.init(a,b)}),gi=bJ("ZodCIDRv4",(a,b)=>{e6.init(a,b),f4.init(a,b)}),gj=bJ("ZodCIDRv6",(a,b)=>{e7.init(a,b),f4.init(a,b)}),gk=bJ("ZodBase64",(a,b)=>{e9.init(a,b),f4.init(a,b)}),gl=bJ("ZodBase64URL",(a,b)=>{fa.init(a,b),f4.init(a,b)}),gm=bJ("ZodE164",(a,b)=>{fb.init(a,b),f4.init(a,b)}),gn=bJ("ZodJWT",(a,b)=>{fc.init(a,b),f4.init(a,b)}),go=bJ("ZodNumber",(a,b)=>{fd.init(a,b),f0.init(a,b),a.gt=(b,c)=>a.check(fR(b,c)),a.gte=(b,c)=>a.check(fS(b,c)),a.min=(b,c)=>a.check(fS(b,c)),a.lt=(b,c)=>a.check(fP(b,c)),a.lte=(b,c)=>a.check(fQ(b,c)),a.max=(b,c)=>a.check(fQ(b,c)),a.int=b=>a.check(gr(b)),a.safe=b=>a.check(gr(b)),a.positive=b=>a.check(fR(0,b)),a.nonnegative=b=>a.check(fS(0,b)),a.negative=b=>a.check(fP(0,b)),a.nonpositive=b=>a.check(fQ(0,b)),a.multipleOf=(b,c)=>a.check(fT(b,c)),a.step=(b,c)=>a.check(fT(b,c)),a.finite=()=>a;let c=a._zod.bag;a.minValue=Math.max(c.minimum??-1/0,c.exclusiveMinimum??-1/0)??null,a.maxValue=Math.min(c.maximum??1/0,c.exclusiveMaximum??1/0)??null,a.isInt=(c.format??"").includes("int")||Number.isSafeInteger(c.multipleOf??.5),a.isFinite=!0,a.format=c.format??null});function gp(a){return new go({type:"number",checks:[],...bA(a)})}let gq=bJ("ZodNumberFormat",(a,b)=>{fe.init(a,b),go.init(a,b)});function gr(a){return new gq({type:"number",check:"number_format",abort:!1,format:"safeint",...bA(a)})}let gs=bJ("ZodBoolean",(a,b)=>{ff.init(a,b),f0.init(a,b)});function gt(a){return new gs({type:"boolean",...bA(a)})}let gu=bJ("ZodNull",(a,b)=>{fg.init(a,b),f0.init(a,b)}),gv=bJ("ZodAny",(a,b)=>{fh.init(a,b),f0.init(a,b)});function gw(){return new gv({type:"any"})}let gx=bJ("ZodUnknown",(a,b)=>{fi.init(a,b),f0.init(a,b)});function gy(){return new gx({type:"unknown"})}let gz=bJ("ZodNever",(a,b)=>{fj.init(a,b),f0.init(a,b)});function gA(a){return new gz({type:"never",...bA(a)})}let gB=bJ("ZodArray",(a,b)=>{fl.init(a,b),f0.init(a,b),a.element=b.element,a.min=(b,c)=>a.check(fV(b,c)),a.nonempty=b=>a.check(fV(1,b)),a.max=(b,c)=>a.check(fU(b,c)),a.length=(b,c)=>a.check(fW(b,c)),a.unwrap=()=>a.element});function gC(a,b){return new gB({type:"array",element:a,...bA(b)})}let gD=bJ("ZodObject",(a,b)=>{fo.init(a,b),f0.init(a,b),bq(a,"shape",()=>b.shape),a.keyof=()=>gP(Object.keys(a._zod.def.shape)),a.catchall=b=>a.clone({...a._zod.def,catchall:b}),a.passthrough=()=>a.clone({...a._zod.def,catchall:gy()}),a.loose=()=>a.clone({...a._zod.def,catchall:gy()}),a.strict=()=>a.clone({...a._zod.def,catchall:gA()}),a.strip=()=>a.clone({...a._zod.def,catchall:void 0}),a.extend=b=>(function(a,b){if(!bw(b))throw Error("Invalid input to extend: expected a plain object");let c={...a._zod.def,get shape(){let c={...a._zod.def.shape,...b};return br(this,"shape",c),c},checks:[]};return bz(a,c)})(a,b),a.merge=b=>(function(a,b){return bz(a,{...a._zod.def,get shape(){let c={...a._zod.def.shape,...b._zod.def.shape};return br(this,"shape",c),c},catchall:b._zod.def.catchall,checks:[]})})(a,b),a.pick=b=>(function(a,b){let c={},d=a._zod.def;for(let a in b){if(!(a in d.shape))throw Error(`Unrecognized key: "${a}"`);b[a]&&(c[a]=d.shape[a])}return bz(a,{...a._zod.def,shape:c,checks:[]})})(a,b),a.omit=b=>(function(a,b){let c={...a._zod.def.shape},d=a._zod.def;for(let a in b){if(!(a in d.shape))throw Error(`Unrecognized key: "${a}"`);b[a]&&delete c[a]}return bz(a,{...a._zod.def,shape:c,checks:[]})})(a,b),a.partial=(...b)=>(function(a,b,c){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in d))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=a?new a({type:"optional",innerType:d[b]}):d[b])}else for(let b in d)e[b]=a?new a({type:"optional",innerType:d[b]}):d[b];return bz(b,{...b._zod.def,shape:e,checks:[]})})(gT,a,b[0]),a.required=(...b)=>(function(a,b,c){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in e))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=new a({type:"nonoptional",innerType:d[b]}))}else for(let b in d)e[b]=new a({type:"nonoptional",innerType:d[b]});return bz(b,{...b._zod.def,shape:e,checks:[]})})(gZ,a,b[0])});function gE(a,b){return new gD({type:"object",get shape(){return br(this,"shape",{...a}),this.shape},...bA(b)})}function gF(a,b){return new gD({type:"object",get shape(){return br(this,"shape",{...a}),this.shape},catchall:gA(),...bA(b)})}function gG(a,b){return new gD({type:"object",get shape(){return br(this,"shape",{...a}),this.shape},catchall:gy(),...bA(b)})}let gH=bJ("ZodUnion",(a,b)=>{fq.init(a,b),f0.init(a,b),a.options=b.options});function gI(a,b){return new gH({type:"union",options:a,...bA(b)})}let gJ=bJ("ZodDiscriminatedUnion",(a,b)=>{gH.init(a,b),fr.init(a,b)});function gK(a,b,c){return new gJ({type:"union",options:b,discriminator:a,...bA(c)})}let gL=bJ("ZodIntersection",(a,b)=>{fs.init(a,b),f0.init(a,b)}),gM=bJ("ZodRecord",(a,b)=>{fu.init(a,b),f0.init(a,b),a.keyType=b.keyType,a.valueType=b.valueType});function gN(a,b,c){return new gM({type:"record",keyType:a,valueType:b,...bA(c)})}let gO=bJ("ZodEnum",(a,b)=>{fv.init(a,b),f0.init(a,b),a.enum=b.entries,a.options=Object.values(b.entries);let c=new Set(Object.keys(b.entries));a.extract=(a,d)=>{let e={};for(let d of a)if(c.has(d))e[d]=b.entries[d];else throw Error(`Key ${d} not found in enum`);return new gO({...b,checks:[],...bA(d),entries:e})},a.exclude=(a,d)=>{let e={...b.entries};for(let b of a)if(c.has(b))delete e[b];else throw Error(`Key ${b} not found in enum`);return new gO({...b,checks:[],...bA(d),entries:e})}});function gP(a,b){return new gO({type:"enum",entries:Array.isArray(a)?Object.fromEntries(a.map(a=>[a,a])):a,...bA(b)})}let gQ=bJ("ZodLiteral",(a,b)=>{fw.init(a,b),f0.init(a,b),a.values=new Set(b.values),Object.defineProperty(a,"value",{get(){if(b.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return b.values[0]}})});function gR(a,b){return new gQ({type:"literal",values:Array.isArray(a)?a:[a],...bA(b)})}let gS=bJ("ZodTransform",(a,b)=>{fx.init(a,b),f0.init(a,b),a._zod.parse=(c,d)=>{c.addIssue=d=>{"string"==typeof d?c.issues.push(bH(d,c.value,b)):(d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=c.value),d.inst??(d.inst=a),d.continue??(d.continue=!0),c.issues.push(bH(d)))};let e=b.transform(c.value,c);return e instanceof Promise?e.then(a=>(c.value=a,c)):(c.value=e,c)}}),gT=bJ("ZodOptional",(a,b)=>{fy.init(a,b),f0.init(a,b),a.unwrap=()=>a._zod.def.innerType});function gU(a){return new gT({type:"optional",innerType:a})}let gV=bJ("ZodNullable",(a,b)=>{fz.init(a,b),f0.init(a,b),a.unwrap=()=>a._zod.def.innerType});function gW(a){return new gV({type:"nullable",innerType:a})}let gX=bJ("ZodDefault",(a,b)=>{fA.init(a,b),f0.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeDefault=a.unwrap}),gY=bJ("ZodPrefault",(a,b)=>{fC.init(a,b),f0.init(a,b),a.unwrap=()=>a._zod.def.innerType}),gZ=bJ("ZodNonOptional",(a,b)=>{fD.init(a,b),f0.init(a,b),a.unwrap=()=>a._zod.def.innerType}),g$=bJ("ZodCatch",(a,b)=>{fF.init(a,b),f0.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeCatch=a.unwrap}),g_=bJ("ZodPipe",(a,b)=>{fG.init(a,b),f0.init(a,b),a.in=b.in,a.out=b.out});function g0(a,b){return new g_({type:"pipe",in:a,out:b})}let g1=bJ("ZodReadonly",(a,b)=>{fI.init(a,b),f0.init(a,b)}),g2=bJ("ZodLazy",(a,b)=>{fK.init(a,b),f0.init(a,b),a.unwrap=()=>a._zod.def.getter()});function g3(a){return new g2({type:"lazy",getter:a})}let g4=bJ("ZodCustom",(a,b)=>{fL.init(a,b),f0.init(a,b)});function g5(a,b){let c=bA(b);return c.abort??(c.abort=!0),new g4({type:"custom",check:"custom",fn:a??(()=>!0),...c})}function g6(a,b={error:`Input not instance of ${a.name}`}){let c=new g4({type:"custom",check:"custom",fn:b=>b instanceof a,abort:!0,...bA(b)});return c._zod.bag.Class=a,c}var g7=Symbol.for("vercel.ai.gateway.error"),g8=class a extends(v=Error,u=g7,v){constructor({message:a,statusCode:b=500,cause:c}){super(a),this[u]=!0,this.statusCode=b,this.cause=c}static isInstance(b){return a.hasMarker(b)}static hasMarker(a){return"object"==typeof a&&null!==a&&g7 in a&&!0===a[g7]}},g9="GatewayAuthenticationError",ha=Symbol.for(`vercel.ai.gateway.error.${g9}`),hb=class a extends(x=g8,w=ha,x){constructor({message:a="Authentication failed",statusCode:b=401,cause:c}={}){super({message:a,statusCode:b,cause:c}),this[w]=!0,this.name=g9,this.type="authentication_error"}static isInstance(a){return g8.hasMarker(a)&&ha in a}static createContextualError({apiKeyProvided:b,oidcTokenProvided:c,message:d="Authentication failed",statusCode:e=401,cause:f}){return new a({message:b?`AI Gateway authentication failed: Invalid API key provided.

The token is expected to be provided via the 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:c?`AI Gateway authentication failed: Invalid OIDC token provided.

The token is expected to be provided via the 'VERCEL_OIDC_TOKEN' environment variable. It expires every 12 hours.
- make sure your Vercel project settings have OIDC enabled
- if running locally with 'vercel dev', the token is automatically obtained and refreshed
- if running locally with your own dev server, run 'vercel env pull' to fetch the token
- in production/preview, the token is automatically obtained and refreshed

Alternative: Provide an API key via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:`AI Gateway authentication failed: No authentication provided.

Provide either an API key or OIDC token.

API key instructions:

The token is expected to be provided via the 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

OIDC token instructions:

The token is expected to be provided via the 'VERCEL_OIDC_TOKEN' environment variable. It expires every 12 hours.
- make sure your Vercel project settings have OIDC enabled
- if running locally with 'vercel dev', the token is automatically obtained and refreshed
- if running locally with your own dev server, run 'vercel env pull' to fetch the token
- in production/preview, the token is automatically obtained and refreshed`,statusCode:e,cause:f})}},hc="GatewayInvalidRequestError",hd=Symbol.for(`vercel.ai.gateway.error.${hc}`),he=class extends(z=g8,y=hd,z){constructor({message:a="Invalid request",statusCode:b=400,cause:c}={}){super({message:a,statusCode:b,cause:c}),this[y]=!0,this.name=hc,this.type="invalid_request_error"}static isInstance(a){return g8.hasMarker(a)&&hd in a}},hf="GatewayRateLimitError",hg=Symbol.for(`vercel.ai.gateway.error.${hf}`),hh=class extends(B=g8,A=hg,B){constructor({message:a="Rate limit exceeded",statusCode:b=429,cause:c}={}){super({message:a,statusCode:b,cause:c}),this[A]=!0,this.name=hf,this.type="rate_limit_exceeded"}static isInstance(a){return g8.hasMarker(a)&&hg in a}},hi="GatewayModelNotFoundError",hj=Symbol.for(`vercel.ai.gateway.error.${hi}`),hk=gE({modelId:f3()}),hl=class extends(D=g8,C=hj,D){constructor({message:a="Model not found",statusCode:b=404,modelId:c,cause:d}={}){super({message:a,statusCode:b,cause:d}),this[C]=!0,this.name=hi,this.type="model_not_found",this.modelId=c}static isInstance(a){return g8.hasMarker(a)&&hj in a}},hm="GatewayInternalServerError",hn=Symbol.for(`vercel.ai.gateway.error.${hm}`),ho=class extends(F=g8,E=hn,F){constructor({message:a="Internal server error",statusCode:b=500,cause:c}={}){super({message:a,statusCode:b,cause:c}),this[E]=!0,this.name=hm,this.type="internal_server_error"}static isInstance(a){return g8.hasMarker(a)&&hn in a}},hp="GatewayResponseError",hq=Symbol.for(`vercel.ai.gateway.error.${hp}`),hr=class extends(H=g8,G=hq,H){constructor({message:a="Invalid response from Gateway",statusCode:b=502,response:c,validationError:d,cause:e}={}){super({message:a,statusCode:b,cause:e}),this[G]=!0,this.name=hp,this.type="response_error",this.response=c,this.validationError=d}static isInstance(a){return g8.hasMarker(a)&&hq in a}};function hs({response:a,statusCode:b,defaultMessage:c="Gateway request failed",cause:d,authMethod:e}){let f=ht.safeParse(a);if(!f.success)return new hr({message:`Invalid error response format: ${c}`,statusCode:b,response:a,validationError:f.error,cause:d});let g=f.data,h=g.error.type,i=g.error.message;switch(h){case"authentication_error":return hb.createContextualError({apiKeyProvided:"api-key"===e,oidcTokenProvided:"oidc"===e,statusCode:b,cause:d});case"invalid_request_error":return new he({message:i,statusCode:b,cause:d});case"rate_limit_exceeded":return new hh({message:i,statusCode:b,cause:d});case"model_not_found":{let a=hk.safeParse(g.error.param);return new hl({message:i,statusCode:b,modelId:a.success?a.data.modelId:void 0,cause:d})}default:return new ho({message:i,statusCode:b,cause:d})}}var ht=gE({error:gE({message:f3(),type:f3().nullish(),param:gy().nullish(),code:gI([f3(),gp()]).nullish()})});function hu(a,b){var c;return g8.isInstance(a)?a:aD.isInstance(a)?hs({response:function(a){if(void 0!==a.data)return a.data;if(null!=a.responseBody)try{return JSON.parse(a.responseBody)}catch(b){return a.responseBody}return{}}(a),statusCode:null!=(c=a.statusCode)?c:500,defaultMessage:"Gateway request failed",cause:a,authMethod:b}):hs({response:{},statusCode:500,defaultMessage:a instanceof Error?`Gateway request failed: ${a.message}`:"Unknown Gateway error",cause:a,authMethod:b})}var hv="ai-gateway-auth-method";function hw(a){let b=hx.safeParse(a[hv]);return b.success?b.data:void 0}var hx=gI([gR("api-key"),gR("oidc")]),hy=class{constructor(a){this.config=a}async getAvailableModels(){try{let{value:a}=await dj({url:`${this.config.baseURL}/config`,headers:await dC(this.config.headers()),successfulResponseHandler:dF(hC),failedResponseHandler:dD({errorSchema:gw(),errorToMessage:a=>a}),fetch:this.config.fetch});return a}catch(a){throw hu(a)}}async getCredits(){try{let a=new URL(this.config.baseURL),{value:b}=await dj({url:`${a.origin}/v1/credits`,headers:await dC(this.config.headers()),successfulResponseHandler:dF(hD),failedResponseHandler:dD({errorSchema:gw(),errorToMessage:a=>a}),fetch:this.config.fetch});return b}catch(a){throw hu(a)}}},hz=gE({specificationVersion:gR("v2"),provider:f3(),modelId:f3()}),hA=gE({input:f3(),output:f3(),input_cache_read:f3().nullish(),input_cache_write:f3().nullish()}).transform(({input:a,output:b,input_cache_read:c,input_cache_write:d})=>({input:a,output:b,...c?{cachedInputTokens:c}:{},...d?{cacheCreationInputTokens:d}:{}})),hB=gE({id:f3(),name:f3(),description:f3().nullish(),pricing:hA.nullish(),specification:hz,modelType:gP(["language","embedding","image"]).nullish()}),hC=gE({models:gC(hB)}),hD=gE({balance:f3(),total_used:f3()}).transform(({balance:a,total_used:b})=>({balance:a,totalUsed:b})),hE=class{constructor(a,b){this.modelId=a,this.config=b,this.specificationVersion="v2",this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(a){let{abortSignal:b,...c}=a;return{args:this.maybeEncodeFileParts(c),warnings:[]}}async doGenerate(a){let{args:b,warnings:c}=await this.getArgs(a),{abortSignal:d}=a,e=await dC(this.config.headers());try{let{responseHeaders:f,value:g,rawValue:h}=await dx({url:this.getUrl(),headers:c5(e,a.headers,this.getModelConfigHeaders(this.modelId,!1),await dC(this.config.o11yHeaders)),body:b,successfulResponseHandler:dF(gw()),failedResponseHandler:dD({errorSchema:gw(),errorToMessage:a=>a}),...d&&{abortSignal:d},fetch:this.config.fetch});return{...g,request:{body:b},response:{headers:f,body:h},warnings:c}}catch(a){throw hu(a,hw(e))}}async doStream(a){let{args:b,warnings:c}=await this.getArgs(a),{abortSignal:d}=a,e=await dC(this.config.headers());try{let{value:f,responseHeaders:g}=await dx({url:this.getUrl(),headers:c5(e,a.headers,this.getModelConfigHeaders(this.modelId,!0),await dC(this.config.o11yHeaders)),body:b,successfulResponseHandler:dE(gw()),failedResponseHandler:dD({errorSchema:gw(),errorToMessage:a=>a}),...d&&{abortSignal:d},fetch:this.config.fetch});return{stream:f.pipeThrough(new TransformStream({start(a){c.length>0&&a.enqueue({type:"stream-start",warnings:c})},transform(b,c){if(b.success){let d=b.value;("raw"!==d.type||a.includeRawChunks)&&("response-metadata"===d.type&&d.timestamp&&"string"==typeof d.timestamp&&(d.timestamp=new Date(d.timestamp)),c.enqueue(d))}else c.error(b.error)}})),request:{body:b},response:{headers:g}}}catch(a){throw hu(a,hw(e))}}isFilePart(a){return a&&"object"==typeof a&&"type"in a&&"file"===a.type}maybeEncodeFileParts(a){for(let b of a.prompt)for(let a of b.content)if(this.isFilePart(a)&&a.data instanceof Uint8Array){let b=Uint8Array.from(a.data),c=Buffer.from(b).toString("base64");a.data=new URL(`data:${a.mediaType||"application/octet-stream"};base64,${c}`)}return a}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(a,b){return{"ai-language-model-specification-version":"2","ai-language-model-id":a,"ai-language-model-streaming":String(b)}}},hF=class{constructor(a,b){this.modelId=a,this.config=b,this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:a,headers:b,abortSignal:c,providerOptions:d}){var e;let f=await dC(this.config.headers());try{let{responseHeaders:g,value:h,rawValue:i}=await dx({url:this.getUrl(),headers:c5(f,null!=b?b:{},this.getModelConfigHeaders(),await dC(this.config.o11yHeaders)),body:{input:1===a.length?a[0]:a,...d?{providerOptions:d}:{}},successfulResponseHandler:dF(hG),failedResponseHandler:dD({errorSchema:gw(),errorToMessage:a=>a}),...c&&{abortSignal:c},fetch:this.config.fetch});return{embeddings:h.embeddings,usage:null!=(e=h.usage)?e:void 0,providerMetadata:h.providerMetadata,response:{headers:g,body:i}}}catch(a){throw hu(a,hw(f))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"2","ai-model-id":this.modelId}}},hG=gE({embeddings:gC(gC(gp())),usage:gE({tokens:gp()}).nullish(),providerMetadata:gN(f3(),gN(f3(),gy())).optional()});async function hH(){var a,b;let c=null!=(b=null==(a=hK().headers)?void 0:a["x-vercel-oidc-token"])?b:process.env.VERCEL_OIDC_TOKEN;if(!c)throw new hb({message:"OIDC token not available",statusCode:401});return c}async function hI(){var a;return null==(a=hK().headers)?void 0:a["x-vercel-id"]}var hJ=Symbol.for("@vercel/request-context");function hK(){var a,b,c;return null!=(c=null==(b=null==(a=globalThis[hJ])?void 0:a.get)?void 0:b.call(a))?c:{}}var hL=function(a={}){var b,c;let d=null,e=null,f=null!=(b=a.metadataCacheRefreshMillis)?b:3e5,g=0,h=null!=(c=d2(a.baseURL))?c:"https://ai-gateway.vercel.sh/v1/ai",i=async()=>{let b=await hM(a);if(b)return da({Authorization:`Bearer ${b.token}`,"ai-gateway-protocol-version":"0.0.1",[hv]:b.authMethod,...a.headers},"ai-sdk/gateway/1.0.30");throw hb.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401})},j=()=>{let a=dk({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),b=dk({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),c=dk({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{let d=await hI();return{...a&&{"ai-o11y-deployment-id":a},...b&&{"ai-o11y-environment":b},...c&&{"ai-o11y-region":c},...d&&{"ai-o11y-request-id":d}}}},k=b=>new hE(b,{provider:"gateway",baseURL:h,headers:i,fetch:a.fetch,o11yHeaders:j()}),l=async()=>new hy({baseURL:h,headers:i,fetch:a.fetch}).getCredits().catch(async a=>{throw hu(a,hw(await i()))}),m=function(a){if(new.target)throw Error("The Gateway Provider model function cannot be called with the new keyword.");return k(a)};return m.getAvailableModels=async()=>{var b,c,j;let k=null!=(j=null==(c=null==(b=a._internal)?void 0:b.currentDate)?void 0:c.call(b).getTime())?j:Date.now();return(!d||k-g>f)&&(g=k,d=new hy({baseURL:h,headers:i,fetch:a.fetch}).getAvailableModels().then(a=>(e=a,a)).catch(async a=>{throw hu(a,hw(await i()))})),e?Promise.resolve(e):d},m.getCredits=l,m.imageModel=a=>{throw new a4({modelId:a,modelType:"imageModel"})},m.languageModel=k,m.textEmbeddingModel=b=>new hF(b,{provider:"gateway",baseURL:h,headers:i,fetch:a.fetch,o11yHeaders:j()}),m}();async function hM(a){let b=dk({settingValue:a.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});if(b)return{token:b,authMethod:"api-key"};try{return{token:await hH(),authMethod:"oidc"}}catch(a){return null}}var hN="object"==typeof globalThis?globalThis:global,hO="1.9.0",hP=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,hQ=function(a){var b=new Set([a]),c=new Set,d=a.match(hP);if(!d)return function(){return!1};var e={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};if(null!=e.prerelease)return function(b){return b===a};function f(a){return c.add(a),!1}return function(a){if(b.has(a))return!0;if(c.has(a))return!1;var d=a.match(hP);if(!d)return f(a);var g={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};if(null!=g.prerelease||e.major!==g.major)return f(a);if(0===e.major)return e.minor===g.minor&&e.patch<=g.patch?(b.add(a),!0):f(a);return e.minor<=g.minor?(b.add(a),!0):f(a)}}(hO),hR=Symbol.for("opentelemetry.js.api."+hO.split(".")[0]);function hS(a,b,c,d){void 0===d&&(d=!1);var e,f=hN[hR]=null!=(e=hN[hR])?e:{version:hO};if(!d&&f[a]){var g=Error("@opentelemetry/api: Attempted duplicate registration of API: "+a);return c.error(g.stack||g.message),!1}if(f.version!==hO){var g=Error("@opentelemetry/api: Registration of version v"+f.version+" for "+a+" does not match previously registered API v"+hO);return c.error(g.stack||g.message),!1}return f[a]=b,c.debug("@opentelemetry/api: Registered a global for "+a+" v"+hO+"."),!0}function hT(a){var b,c,d=null==(b=hN[hR])?void 0:b.version;if(d&&hQ(d))return null==(c=hN[hR])?void 0:c[a]}function hU(a,b){b.debug("@opentelemetry/api: Unregistering a global for "+a+" v"+hO+".");var c=hN[hR];c&&delete c[a]}var hV=new function a(b){var c=this;c._currentContext=b?new Map(b):new Map,c.getValue=function(a){return c._currentContext.get(a)},c.setValue=function(b,d){var e=new a(c._currentContext);return e._currentContext.set(b,d),e},c.deleteValue=function(b){var d=new a(c._currentContext);return d._currentContext.delete(b),d}},hW=function(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g},hX=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},hY=function(){function a(){}return a.prototype.active=function(){return hV},a.prototype.with=function(a,b,c){for(var d=[],e=3;e<arguments.length;e++)d[e-3]=arguments[e];return b.call.apply(b,hX([c],hW(d),!1))},a.prototype.bind=function(a,b){return b},a.prototype.enable=function(){return this},a.prototype.disable=function(){return this},a}(),hZ=function(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g},h$=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},h_=function(){function a(a){this._namespace=a.namespace||"DiagComponentLogger"}return a.prototype.debug=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return h0("debug",this._namespace,a)},a.prototype.error=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return h0("error",this._namespace,a)},a.prototype.info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return h0("info",this._namespace,a)},a.prototype.warn=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return h0("warn",this._namespace,a)},a.prototype.verbose=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return h0("verbose",this._namespace,a)},a}();function h0(a,b,c){var d=hT("diag");if(d)return c.unshift(b),d[a].apply(d,h$([],hZ(c),!1))}!function(a){a[a.NONE=0]="NONE",a[a.ERROR=30]="ERROR",a[a.WARN=50]="WARN",a[a.INFO=60]="INFO",a[a.DEBUG=70]="DEBUG",a[a.VERBOSE=80]="VERBOSE",a[a.ALL=9999]="ALL"}(I||(I={}));var h1=function(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g},h2=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},h3=function(){function a(){function a(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=hT("diag");if(d)return d[a].apply(d,h2([],h1(b),!1))}}var b=this;b.setLogger=function(a,c){if(void 0===c&&(c={logLevel:I.INFO}),a===b){var d,e,f,g=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return b.error(null!=(d=g.stack)?d:g.message),!1}"number"==typeof c&&(c={logLevel:c});var h=hT("diag"),i=function(a,b){function c(c,d){var e=b[c];return"function"==typeof e&&a>=d?e.bind(b):function(){}}return a<I.NONE?a=I.NONE:a>I.ALL&&(a=I.ALL),b=b||{},{error:c("error",I.ERROR),warn:c("warn",I.WARN),info:c("info",I.INFO),debug:c("debug",I.DEBUG),verbose:c("verbose",I.VERBOSE)}}(null!=(e=c.logLevel)?e:I.INFO,a);if(h&&!c.suppressOverrideMessage){var j=null!=(f=Error().stack)?f:"<failed to generate stacktrace>";h.warn("Current logger will be overwritten from "+j),i.warn("Current logger will overwrite one already registered from "+j)}return hS("diag",i,b,!0)},b.disable=function(){hU("diag",b)},b.createComponentLogger=function(a){return new h_(a)},b.verbose=a("verbose"),b.debug=a("debug"),b.info=a("info"),b.warn=a("warn"),b.error=a("error")}return a.instance=function(){return this._instance||(this._instance=new a),this._instance},a}(),h4=function(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g},h5=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},h6="context",h7=new hY,h8=function(){function a(){}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.setGlobalContextManager=function(a){return hS(h6,a,h3.instance())},a.prototype.active=function(){return this._getContextManager().active()},a.prototype.with=function(a,b,c){for(var d,e=[],f=3;f<arguments.length;f++)e[f-3]=arguments[f];return(d=this._getContextManager()).with.apply(d,h5([a,b,c],h4(e),!1))},a.prototype.bind=function(a,b){return this._getContextManager().bind(a,b)},a.prototype._getContextManager=function(){return hT(h6)||h7},a.prototype.disable=function(){this._getContextManager().disable(),hU(h6,h3.instance())},a}();!function(a){a[a.NONE=0]="NONE",a[a.SAMPLED=1]="SAMPLED"}(J||(J={}));var h9="0000000000000000",ia="00000000000000000000000000000000",ib={traceId:ia,spanId:h9,traceFlags:J.NONE},ic=function(){function a(a){void 0===a&&(a=ib),this._spanContext=a}return a.prototype.spanContext=function(){return this._spanContext},a.prototype.setAttribute=function(a,b){return this},a.prototype.setAttributes=function(a){return this},a.prototype.addEvent=function(a,b){return this},a.prototype.addLink=function(a){return this},a.prototype.addLinks=function(a){return this},a.prototype.setStatus=function(a){return this},a.prototype.updateName=function(a){return this},a.prototype.end=function(a){},a.prototype.isRecording=function(){return!1},a.prototype.recordException=function(a,b){},a}(),id=Symbol.for("OpenTelemetry Context Key SPAN");function ie(a){return a.getValue(id)||void 0}function ig(){return ie(h8.getInstance().active())}function ih(a,b){return a.setValue(id,b)}function ii(a){return a.deleteValue(id)}function ij(a,b){return ih(a,new ic(b))}function ik(a){var b;return null==(b=ie(a))?void 0:b.spanContext()}var il=/^([0-9a-f]{32})$/i,im=/^[0-9a-f]{16}$/i;function io(a){var b,c;return b=a.traceId,il.test(b)&&b!==ia&&(c=a.spanId,im.test(c)&&c!==h9)}function ip(a){return new ic(a)}var iq=h8.getInstance(),ir=function(){function a(){}return a.prototype.startSpan=function(a,b,c){if(void 0===c&&(c=iq.active()),null==b?void 0:b.root)return new ic;var d,e=c&&ik(c);return"object"==typeof(d=e)&&"string"==typeof d.spanId&&"string"==typeof d.traceId&&"number"==typeof d.traceFlags&&io(e)?new ic(e):new ic},a.prototype.startActiveSpan=function(a,b,c,d){if(!(arguments.length<2)){2==arguments.length?g=b:3==arguments.length?(e=b,g=c):(e=b,f=c,g=d);var e,f,g,h=null!=f?f:iq.active(),i=this.startSpan(a,e,h),j=ih(h,i);return iq.with(j,g,void 0,i)}},a}(),is=new ir,it=function(){function a(a,b,c,d){this._provider=a,this.name=b,this.version=c,this.options=d}return a.prototype.startSpan=function(a,b,c){return this._getTracer().startSpan(a,b,c)},a.prototype.startActiveSpan=function(a,b,c,d){var e=this._getTracer();return Reflect.apply(e.startActiveSpan,e,arguments)},a.prototype._getTracer=function(){if(this._delegate)return this._delegate;var a=this._provider.getDelegateTracer(this.name,this.version,this.options);return a?(this._delegate=a,this._delegate):is},a}(),iu=new(function(){function a(){}return a.prototype.getTracer=function(a,b,c){return new ir},a}()),iv=function(){function a(){}return a.prototype.getTracer=function(a,b,c){var d;return null!=(d=this.getDelegateTracer(a,b,c))?d:new it(this,a,b,c)},a.prototype.getDelegate=function(){var a;return null!=(a=this._delegate)?a:iu},a.prototype.setDelegate=function(a){this._delegate=a},a.prototype.getDelegateTracer=function(a,b,c){var d;return null==(d=this._delegate)?void 0:d.getTracer(a,b,c)},a}(),iw="trace",ix=(function(){function a(){this._proxyTracerProvider=new iv,this.wrapSpanContext=ip,this.isSpanContextValid=io,this.deleteSpan=ii,this.getSpan=ie,this.getActiveSpan=ig,this.getSpanContext=ik,this.setSpan=ih,this.setSpanContext=ij}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.setGlobalTracerProvider=function(a){var b=hS(iw,this._proxyTracerProvider,h3.instance());return b&&this._proxyTracerProvider.setDelegate(a),b},a.prototype.getTracerProvider=function(){return hT(iw)||this._proxyTracerProvider},a.prototype.getTracer=function(a,b){return this.getTracerProvider().getTracer(a,b)},a.prototype.disable=function(){hU(iw,h3.instance()),this._proxyTracerProvider=new iv},a})().getInstance();!function(a){a[a.UNSET=0]="UNSET",a[a.OK=1]="OK",a[a.ERROR=2]="ERROR"}(K||(K={}));var iy=Object.defineProperty,iz="AI_NoOutputSpecifiedError",iA=`vercel.ai.error.${iz}`,iB=Symbol.for(iA),iC=class extends az{constructor({message:a="No output specified."}={}){super({name:iz,message:a}),this[L]=!0}static isInstance(a){return az.hasMarker(a,iA)}};L=iB;var iD=!1,iE=a=>{if(0===a.length)return;let b=globalThis.AI_SDK_LOG_WARNINGS;if(!1!==b){if("function"==typeof b)return void b(a);for(let b of(iD||(iD=!0,console.info("AI SDK Warning System: To turn off warning logging, set the AI_SDK_LOG_WARNINGS global to false.")),a))console.warn(function(a){let b="AI SDK Warning:";switch(a.type){case"unsupported-setting":{let c=`${b} The "${a.setting}" setting is not supported by this model`;return a.details&&(c+=` - ${a.details}`),c}case"unsupported-tool":{let c="name"in a.tool?a.tool.name:"unknown tool",d=`${b} The tool "${c}" is not supported by this model`;return a.details&&(d+=` - ${a.details}`),d}case"other":return`${b} ${a.message}`;default:return`${b} ${JSON.stringify(a,null,2)}`}}(b))}},iF="AI_InvalidArgumentError",iG=`vercel.ai.error.${iF}`,iH=Symbol.for(iG),iI=class extends az{constructor({parameter:a,value:b,message:c}){super({name:iF,message:`Invalid argument for parameter ${a}: ${c}`}),this[M]=!0,this.parameter=a,this.value=b}static isInstance(a){return az.hasMarker(a,iG)}};M=iH,Symbol.for("vercel.ai.error.AI_InvalidStreamPartError");var iJ="AI_InvalidToolInputError",iK=`vercel.ai.error.${iJ}`,iL=Symbol.for(iK),iM=class extends az{constructor({toolInput:a,toolName:b,cause:c,message:d=`Invalid input for tool ${b}: ${aI(c)}`}){super({name:iJ,message:d,cause:c}),this[N]=!0,this.toolInput=a,this.toolName=b}static isInstance(a){return az.hasMarker(a,iK)}};N=iL,Symbol.for("vercel.ai.error.AI_MCPClientError"),Symbol.for("vercel.ai.error.AI_NoImageGeneratedError");var iN="AI_NoObjectGeneratedError",iO=`vercel.ai.error.${iN}`,iP=Symbol.for(iO),iQ=class extends az{constructor({message:a="No object generated.",cause:b,text:c,response:d,usage:e,finishReason:f}){super({name:iN,message:a,cause:b}),this[O]=!0,this.text=c,this.response=d,this.usage=e,this.finishReason=f}static isInstance(a){return az.hasMarker(a,iO)}};O=iP,Symbol.for("vercel.ai.error.AI_NoOutputGeneratedError");var iR="AI_NoSuchToolError",iS=`vercel.ai.error.${iR}`,iT=Symbol.for(iS),iU=class extends az{constructor({toolName:a,availableTools:b,message:c=`Model tried to call unavailable tool '${a}'. ${void 0===b?"No tools are available.":`Available tools: ${b.join(", ")}.`}`}){super({name:iR,message:c}),this[P]=!0,this.toolName=a,this.availableTools=b}static isInstance(a){return az.hasMarker(a,iS)}};P=iT;var iV="AI_ToolCallRepairError",iW=`vercel.ai.error.${iV}`,iX=Symbol.for(iW),iY=class extends az{constructor({cause:a,originalError:b,message:c=`Error repairing tool call: ${aI(a)}`}){super({name:iV,message:c,cause:a}),this[Q]=!0,this.originalError=b}static isInstance(a){return az.hasMarker(a,iW)}};Q=iX;var iZ=class extends az{constructor(a){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${a.version} for provider "${a.provider}" and model "${a.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=a.version,this.provider=a.provider,this.modelId=a.modelId}},i$=(Symbol.for("vercel.ai.error.AI_InvalidDataContentError"),"AI_InvalidMessageRoleError"),i_=`vercel.ai.error.${i$}`,i0=Symbol.for(i_),i1=class extends az{constructor({role:a,message:b=`Invalid message role: '${a}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:i$,message:b}),this[R]=!0,this.role=a}static isInstance(a){return az.hasMarker(a,i_)}};R=i0,Symbol.for("vercel.ai.error.AI_MessageConversionError");var i2="AI_DownloadError",i3=`vercel.ai.error.${i2}`,i4=Symbol.for(i3),i5=class extends az{constructor({url:a,statusCode:b,statusText:c,cause:d,message:e=null==d?`Failed to download ${a}: ${b} ${c}`:`Failed to download ${a}: ${d}`}){super({name:i2,message:e,cause:d}),this[S]=!0,this.url=a,this.statusCode=b,this.statusText=c}static isInstance(a){return az.hasMarker(a,i3)}};S=i4;var i6="AI_RetryError",i7=`vercel.ai.error.${i6}`,i8=Symbol.for(i7),i9=class extends az{constructor({message:a,reason:b,errors:c}){super({name:i6,message:a}),this[T]=!0,this.reason=b,this.errors=c,this.lastError=c[c.length-1]}static isInstance(a){return az.hasMarker(a,i7)}};function ja(a){var b;if("string"!=typeof a){if("v2"!==a.specificationVersion)throw new iZ({version:a.specificationVersion,provider:a.provider,modelId:a.modelId});return a}return(null!=(b=globalThis.AI_SDK_DEFAULT_PROVIDER)?b:hL).languageModel(a)}T=i8;var jb=[{mediaType:"image/gif",bytesPrefix:[71,73,70]},{mediaType:"image/png",bytesPrefix:[137,80,78,71]},{mediaType:"image/jpeg",bytesPrefix:[255,216]},{mediaType:"image/webp",bytesPrefix:[82,73,70,70,null,null,null,null,87,69,66,80]},{mediaType:"image/bmp",bytesPrefix:[66,77]},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0]},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42]},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102]},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99]}],jc="5.0.54",jd=async({url:a})=>{var b;let c=a.toString();try{let a=await fetch(c,{headers:da({},`ai-sdk/${jc}`,c9())});if(!a.ok)throw new i5({url:c,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mediaType:null!=(b=a.headers.get("content-type"))?b:void 0}}catch(a){if(i5.isInstance(a))throw a;throw new i5({url:c,cause:a})}},je=gI([f3(),g6(Uint8Array),g6(ArrayBuffer),g5(a=>{var b,c;return null!=(c=null==(b=globalThis.Buffer)?void 0:b.isBuffer(a))&&c},{message:"Must be a Buffer"})]);function jf(a){if(a instanceof Uint8Array)return{data:a,mediaType:void 0};if(a instanceof ArrayBuffer)return{data:new Uint8Array(a),mediaType:void 0};if("string"==typeof a)try{a=new URL(a)}catch(a){}if(a instanceof URL&&"data:"===a.protocol){let{mediaType:b,base64Content:c}=function(a){try{let[b,c]=a.split(",");return{mediaType:b.split(";")[0].split(":")[1],base64Content:c}}catch(a){return{mediaType:void 0,base64Content:void 0}}}(a.toString());if(null==b||null==c)throw new az({name:"InvalidDataContentError",message:`Invalid data URL format in content ${a.toString()}`});return{data:c,mediaType:b}}return{data:a,mediaType:void 0}}async function jg({prompt:a,supportedUrls:b,download:c=((a=jd)=>b=>Promise.all(b.map(async b=>b.isUrlSupportedByModel?null:a(b))))()}){let d=await jh(a.messages,c,b);return[...null!=a.system?[{role:"system",content:a.system}]:[],...a.messages.map(a=>(function({message:a,downloadedAssets:b}){let c=a.role;switch(c){case"system":return{role:"system",content:a.content,providerOptions:a.providerOptions};case"user":if("string"==typeof a.content)return{role:"user",content:[{type:"text",text:a.content}],providerOptions:a.providerOptions};return{role:"user",content:a.content.map(a=>(function(a,b){var c;let d;if("text"===a.type)return{type:"text",text:a.text,providerOptions:a.providerOptions};let e=a.type;switch(e){case"image":d=a.image;break;case"file":d=a.data;break;default:throw Error(`Unsupported part type: ${e}`)}let{data:f,mediaType:g}=jf(d),h=null!=g?g:a.mediaType,i=f;if(i instanceof URL){let a=b[i.toString()];a&&(i=a.data,null!=h||(h=a.mediaType))}switch(e){case"image":return(i instanceof Uint8Array||"string"==typeof i)&&(h=null!=(c=function({data:a,signatures:b}){let c="string"==typeof a&&a.startsWith("SUQz")||"string"!=typeof a&&a.length>10&&73===a[0]&&68===a[1]&&51===a[2]?(a=>{let b="string"==typeof a?d_(a):a,c=(127&b[6])<<21|(127&b[7])<<14|(127&b[8])<<7|127&b[9];return b.slice(c+10)})(a):a,d="string"==typeof c?d_(c.substring(0,Math.min(c.length,24))):c;for(let a of b)if(d.length>=a.bytesPrefix.length&&a.bytesPrefix.every((a,b)=>null===a||d[b]===a))return a.mediaType}({data:i,signatures:jb}))?c:h),{type:"file",mediaType:null!=h?h:"image/*",filename:void 0,data:i,providerOptions:a.providerOptions};case"file":if(null==h)throw Error("Media type is missing for file part");return{type:"file",mediaType:h,filename:a.filename,data:i,providerOptions:a.providerOptions}}})(a,b)).filter(a=>"text"!==a.type||""!==a.text),providerOptions:a.providerOptions};case"assistant":if("string"==typeof a.content)return{role:"assistant",content:[{type:"text",text:a.content}],providerOptions:a.providerOptions};return{role:"assistant",content:a.content.filter(a=>"text"!==a.type||""!==a.text||null!=a.providerOptions).map(a=>{let b=a.providerOptions;switch(a.type){case"file":{let{data:c,mediaType:d}=jf(a.data);return{type:"file",data:c,filename:a.filename,mediaType:null!=d?d:a.mediaType,providerOptions:b}}case"reasoning":return{type:"reasoning",text:a.text,providerOptions:b};case"text":return{type:"text",text:a.text,providerOptions:b};case"tool-call":return{type:"tool-call",toolCallId:a.toolCallId,toolName:a.toolName,input:a.input,providerExecuted:a.providerExecuted,providerOptions:b};case"tool-result":return{type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,output:a.output,providerOptions:b}}}),providerOptions:a.providerOptions};case"tool":return{role:"tool",content:a.content.map(a=>({type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,output:a.output,providerOptions:a.providerOptions})),providerOptions:a.providerOptions};default:throw new i1({role:c})}})({message:a,downloadedAssets:d}))]}async function jh(a,b,c){let d=a.filter(a=>"user"===a.role).map(a=>a.content).filter(a=>Array.isArray(a)).flat().filter(a=>"image"===a.type||"file"===a.type).map(a=>{var b;let c=null!=(b=a.mediaType)?b:"image"===a.type?"image/*":void 0,d="image"===a.type?a.image:a.data;if("string"==typeof d)try{d=new URL(d)}catch(a){}return{mediaType:c,data:d}}).filter(a=>a.data instanceof URL).map(a=>({url:a.data,isUrlSupportedByModel:null!=a.mediaType&&function({mediaType:a,url:b,supportedUrls:c}){return b=b.toLowerCase(),a=a.toLowerCase(),Object.entries(c).map(([a,b])=>{let c=a.toLowerCase();return"*"===c||"*/*"===c?{mediaTypePrefix:"",regexes:b}:{mediaTypePrefix:c.replace(/\*/,""),regexes:b}}).filter(({mediaTypePrefix:b})=>a.startsWith(b)).flatMap(({regexes:a})=>a).some(a=>a.test(b))}({url:a.data.toString(),mediaType:a.mediaType,supportedUrls:c})}));return Object.fromEntries((await b(d)).map((a,b)=>null==a?null:[d[b].url.toString(),{data:a.data,mediaType:a.mediaType}]).filter(a=>null!=a))}function ji({maxOutputTokens:a,temperature:b,topP:c,topK:d,presencePenalty:e,frequencyPenalty:f,seed:g,stopSequences:h}){if(null!=a){if(!Number.isInteger(a))throw new iI({parameter:"maxOutputTokens",value:a,message:"maxOutputTokens must be an integer"});if(a<1)throw new iI({parameter:"maxOutputTokens",value:a,message:"maxOutputTokens must be >= 1"})}if(null!=b&&"number"!=typeof b)throw new iI({parameter:"temperature",value:b,message:"temperature must be a number"});if(null!=c&&"number"!=typeof c)throw new iI({parameter:"topP",value:c,message:"topP must be a number"});if(null!=d&&"number"!=typeof d)throw new iI({parameter:"topK",value:d,message:"topK must be a number"});if(null!=e&&"number"!=typeof e)throw new iI({parameter:"presencePenalty",value:e,message:"presencePenalty must be a number"});if(null!=f&&"number"!=typeof f)throw new iI({parameter:"frequencyPenalty",value:f,message:"frequencyPenalty must be a number"});if(null!=g&&!Number.isInteger(g))throw new iI({parameter:"seed",value:g,message:"seed must be an integer"});return{maxOutputTokens:a,temperature:b,topP:c,topK:d,presencePenalty:e,frequencyPenalty:f,stopSequences:h,seed:g}}var jj=g3(()=>gI([new gu({type:"null",...bA(void 0)}),f3(),gp(),gt(),gN(f3(),jj),gC(jj)])),jk=gN(f3(),gN(f3(),jj)),jl=gE({type:gR("text"),text:f3(),providerOptions:jk.optional()}),jm=gE({type:gR("image"),image:gI([je,g6(URL)]),mediaType:f3().optional(),providerOptions:jk.optional()}),jn=gE({type:gR("file"),data:gI([je,g6(URL)]),filename:f3().optional(),mediaType:f3(),providerOptions:jk.optional()}),jo=gE({type:gR("reasoning"),text:f3(),providerOptions:jk.optional()}),jp=gE({type:gR("tool-call"),toolCallId:f3(),toolName:f3(),input:gy(),providerOptions:jk.optional(),providerExecuted:gt().optional()}),jq=gK("type",[gE({type:gR("text"),value:f3()}),gE({type:gR("json"),value:jj}),gE({type:gR("error-text"),value:f3()}),gE({type:gR("error-json"),value:jj}),gE({type:gR("content"),value:gC(gI([gE({type:gR("text"),text:f3()}),gE({type:gR("media"),data:f3(),mediaType:f3()})]))})]),jr=gE({type:gR("tool-result"),toolCallId:f3(),toolName:f3(),output:jq,providerOptions:jk.optional()}),js=gE({role:gR("system"),content:f3(),providerOptions:jk.optional()}),jt=gE({role:gR("user"),content:gI([f3(),gC(gI([jl,jm,jn]))]),providerOptions:jk.optional()}),ju=gE({role:gR("assistant"),content:gI([f3(),gC(gI([jl,jn,jo,jp,jr]))]),providerOptions:jk.optional()}),jv=gI([js,jt,ju,gE({role:gR("tool"),content:gC(jr),providerOptions:jk.optional()})]);async function jw(a){let b;if(null==a.prompt&&null==a.messages)throw new aQ({prompt:a,message:"prompt or messages must be defined"});if(null!=a.prompt&&null!=a.messages)throw new aQ({prompt:a,message:"prompt and messages cannot be defined at the same time"});if(null!=a.system&&"string"!=typeof a.system)throw new aQ({prompt:a,message:"system must be a string"});if(null!=a.prompt&&"string"==typeof a.prompt)b=[{role:"user",content:a.prompt}];else if(null!=a.prompt&&Array.isArray(a.prompt))b=a.prompt;else if(null!=a.messages)b=a.messages;else throw new aQ({prompt:a,message:"prompt or messages must be defined"});if(0===b.length)throw new aQ({prompt:a,message:"messages must not be empty"});let c=await dr({value:b,schema:gC(jv)});if(!c.success)throw new aQ({prompt:a,message:"The messages must be a ModelMessage[]. If you have passed a UIMessage[], you can use convertToModelMessages to convert them.",cause:c.error});return{messages:b,system:a.system}}function jx({operationId:a,telemetry:b}){return{"operation.name":`${a}${(null==b?void 0:b.functionId)!=null?` ${b.functionId}`:""}`,"resource.name":null==b?void 0:b.functionId,"ai.operationId":a,"ai.telemetry.functionId":null==b?void 0:b.functionId}}var jy={startSpan:()=>jz,startActiveSpan:(a,b,c,d)=>"function"==typeof b?b(jz):"function"==typeof c?c(jz):"function"==typeof d?d(jz):void 0},jz={spanContext:()=>jA,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},jA={traceId:"",spanId:"",traceFlags:0};function jB({name:a,tracer:b,attributes:c,fn:d,endWhenDone:e=!0}){return b.startActiveSpan(a,{attributes:c},async a=>{try{let b=await d(a);return e&&a.end(),b}catch(b){try{jC(a,b)}finally{a.end()}throw b}})}function jC(a,b){b instanceof Error?(a.recordException({name:b.name,message:b.message,stack:b.stack}),a.setStatus({code:K.ERROR,message:b.message})):a.setStatus({code:K.ERROR})}function jD({telemetry:a,attributes:b}){return(null==a?void 0:a.isEnabled)!==!0?{}:Object.entries(b).reduce((b,[c,d])=>{if(null==d)return b;if("object"==typeof d&&"input"in d&&"function"==typeof d.input){if((null==a?void 0:a.recordInputs)===!1)return b;let e=d.input();return null==e?b:{...b,[c]:e}}if("object"==typeof d&&"output"in d&&"function"==typeof d.output){if((null==a?void 0:a.recordOutputs)===!1)return b;let e=d.output();return null==e?b:{...b,[c]:e}}return{...b,[c]:d}},{})}function jE(a,b){return null==a&&null==b?void 0:(null!=a?a:0)+(null!=b?b:0)}async function jF(a,{maxRetries:b,delayInMs:c,backoffFactor:d,abortSignal:e},f=[]){try{return await a()}catch(j){if(de(j)||0===b)throw j;let g=dd(j),h=[...f,j],i=h.length;if(i>b)throw new i9({message:`Failed after ${i} attempts. Last error: ${g}`,reason:"maxRetriesExceeded",errors:h});if(j instanceof Error&&aD.isInstance(j)&&!0===j.isRetryable&&i<=b)return await c6(function({error:a,exponentialBackoffDelay:b}){let c,d=a.responseHeaders;if(!d)return b;let e=d["retry-after-ms"];if(e){let a=parseFloat(e);Number.isNaN(a)||(c=a)}let f=d["retry-after"];if(f&&void 0===c){let a=parseFloat(f);c=Number.isNaN(a)?Date.parse(f)-Date.now():1e3*a}return null!=c&&!Number.isNaN(c)&&0<=c&&(c<6e4||c<b)?c:b}({error:j,exponentialBackoffDelay:c}),{abortSignal:e}),jF(a,{maxRetries:b,delayInMs:d*c,backoffFactor:d,abortSignal:e},h);if(1===i)throw j;throw new i9({message:`Failed after ${i} attempts with non-retryable error: '${g}'`,reason:"errorNotRetryable",errors:h})}}function jG(a){let b=a.filter(a=>"text"===a.type);if(0!==b.length)return b.map(a=>a.text).join("")}var jH=class{constructor({data:a,mediaType:b}){let c=a instanceof Uint8Array;this.base64Data=c?void 0:a,this.uint8ArrayData=c?a:void 0,this.mediaType=b}get base64(){return null==this.base64Data&&(this.base64Data=d0(this.uint8ArrayData)),this.base64Data}get uint8Array(){return null==this.uint8ArrayData&&(this.uint8ArrayData=d_(this.base64Data)),this.uint8ArrayData}};async function jI({toolCall:a,tools:b,repairToolCall:c,system:d,messages:e}){try{if(null==b)throw new iU({toolName:a.toolName});try{return await jJ({toolCall:a,tools:b})}catch(g){if(null==c||!(iU.isInstance(g)||iM.isInstance(g)))throw g;let f=null;try{f=await c({toolCall:a,tools:b,inputSchema:({toolName:a})=>{let{inputSchema:c}=b[a];return dY(c).jsonSchema},system:d,messages:e,error:g})}catch(a){throw new iY({cause:a,originalError:g})}if(null==f)throw g;return await jJ({toolCall:f,tools:b})}}catch(d){let b=await dt({text:a.input}),c=b.success?b.value:a.input;return{type:"tool-call",toolCallId:a.toolCallId,toolName:a.toolName,input:c,dynamic:!0,invalid:!0,error:d}}}async function jJ({toolCall:a,tools:b}){let c=a.toolName,d=b[c];if(null==d)throw new iU({toolName:a.toolName,availableTools:Object.keys(b)});let e=dY(d.inputSchema),f=""===a.input.trim()?await dr({value:{},schema:e}):await dt({text:a.input,schema:e});if(!1===f.success)throw new iM({toolName:c,toolInput:a.input,cause:f.error});return"dynamic"===d.type?{type:"tool-call",toolCallId:a.toolCallId,toolName:a.toolName,input:f.value,providerExecuted:a.providerExecuted,providerMetadata:a.providerMetadata,dynamic:!0}:{type:"tool-call",toolCallId:a.toolCallId,toolName:c,input:f.value,providerExecuted:a.providerExecuted,providerMetadata:a.providerMetadata}}var jK=class{constructor({content:a,finishReason:b,usage:c,warnings:d,request:e,response:f,providerMetadata:g}){this.content=a,this.finishReason=b,this.usage=c,this.warnings=d,this.request=e,this.response=f,this.providerMetadata=g}get text(){return this.content.filter(a=>"text"===a.type).map(a=>a.text).join("")}get reasoning(){return this.content.filter(a=>"reasoning"===a.type)}get reasoningText(){return 0===this.reasoning.length?void 0:this.reasoning.map(a=>a.text).join("")}get files(){return this.content.filter(a=>"file"===a.type).map(a=>a.file)}get sources(){return this.content.filter(a=>"source"===a.type)}get toolCalls(){return this.content.filter(a=>"tool-call"===a.type)}get staticToolCalls(){return this.toolCalls.filter(a=>!0!==a.dynamic)}get dynamicToolCalls(){return this.toolCalls.filter(a=>!0===a.dynamic)}get toolResults(){return this.content.filter(a=>"tool-result"===a.type)}get staticToolResults(){return this.toolResults.filter(a=>!0!==a.dynamic)}get dynamicToolResults(){return this.toolResults.filter(a=>!0===a.dynamic)}};async function jL({stopConditions:a,steps:b}){return(await Promise.all(a.map(a=>a({steps:b})))).some(a=>a)}function jM({output:a,tool:b,errorMode:c}){return"text"===c?{type:"error-text",value:aI(a)}:"json"===c?{type:"error-json",value:jN(a)}:(null==b?void 0:b.toModelOutput)?b.toModelOutput(a):"string"==typeof a?{type:"text",value:a}:{type:"json",value:jN(a)}}function jN(a){return void 0===a?null:a}var jO=db({prefix:"aitxt",size:24});async function jP({model:a,tools:b,toolChoice:c,system:d,prompt:e,messages:f,maxRetries:g,abortSignal:h,headers:i,stopWhen:j=function(a){return({steps:a})=>1===a.length}(0),experimental_output:k,experimental_telemetry:l,providerOptions:m,experimental_activeTools:n,activeTools:o=n,experimental_prepareStep:p,prepareStep:q=p,experimental_repairToolCall:r,experimental_download:s,experimental_context:t,_internal:{generateId:u=jO,currentDate:v=()=>new Date}={},onStepFinish:w,...x}){let y=ja(a),z=void 0===j?[]:Array.isArray(j)?j:[j],{maxRetries:A,retry:B}=function({maxRetries:a,abortSignal:b}){if(null!=a){if(!Number.isInteger(a))throw new iI({parameter:"maxRetries",value:a,message:"maxRetries must be an integer"});if(a<0)throw new iI({parameter:"maxRetries",value:a,message:"maxRetries must be >= 0"})}let c=null!=a?a:2;return{maxRetries:c,retry:(({maxRetries:a=2,initialDelayInMs:b=2e3,backoffFactor:c=2,abortSignal:d}={})=>async e=>jF(e,{maxRetries:a,delayInMs:b,backoffFactor:c,abortSignal:d}))({maxRetries:c,abortSignal:b})}}({maxRetries:g,abortSignal:h}),C=ji(x),D=da(null!=i?i:{},`ai/${jc}`),E=function({model:a,settings:b,telemetry:c,headers:d}){var e;return{"ai.model.provider":a.provider,"ai.model.id":a.modelId,...Object.entries(b).reduce((a,[b,c])=>(a[`ai.settings.${b}`]=c,a),{}),...Object.entries(null!=(e=null==c?void 0:c.metadata)?e:{}).reduce((a,[b,c])=>(a[`ai.telemetry.metadata.${b}`]=c,a),{}),...Object.entries(null!=d?d:{}).reduce((a,[b,c])=>(void 0!==c&&(a[`ai.request.headers.${b}`]=c),a),{})}}({model:y,telemetry:l,headers:D,settings:{...C,maxRetries:A}}),F=await jw({system:d,prompt:e,messages:f}),G=function({isEnabled:a=!1,tracer:b}={}){return a?b||ix.getTracer("ai"):jy}(l);try{return await jB({name:"ai.generateText",attributes:jD({telemetry:l,attributes:{...jx({operationId:"ai.generateText",telemetry:l}),...E,"ai.model.provider":y.provider,"ai.model.id":y.modelId,"ai.prompt":{input:()=>JSON.stringify({system:d,prompt:e,messages:f})}}}),tracer:G,fn:async a=>{var e,f,g,i,j,n,p;let A,C=ji(x),H=[],I=[],J=[],K=[];do{let a=[...F.messages,...J],z=await (null==q?void 0:q({model:y,steps:K,stepNumber:K.length,messages:a})),L=await jg({prompt:{system:null!=(e=null==z?void 0:z.system)?e:F.system,messages:null!=(f=null==z?void 0:z.messages)?f:a},supportedUrls:await y.supportedUrls,download:s}),M=ja(null!=(g=null==z?void 0:z.model)?g:y),{toolChoice:N,tools:O}=function({tools:a,toolChoice:b,activeTools:c}){return null!=a&&Object.keys(a).length>0?{tools:(null!=c?Object.entries(a).filter(([a])=>c.includes(a)):Object.entries(a)).map(([a,b])=>{let c=b.type;switch(c){case void 0:case"dynamic":case"function":return{type:"function",name:a,description:b.description,inputSchema:dY(b.inputSchema).jsonSchema,providerOptions:b.providerOptions};case"provider-defined":return{type:"provider-defined",name:a,id:b.id,args:b.args};default:throw Error(`Unsupported tool type: ${c}`)}}),toolChoice:null==b?{type:"auto"}:"string"==typeof b?{type:b}:{type:"tool",toolName:b.toolName}}:{tools:void 0,toolChoice:void 0}}({tools:b,toolChoice:null!=(i=null==z?void 0:z.toolChoice)?i:c,activeTools:null!=(j=null==z?void 0:z.activeTools)?j:o});A=await B(()=>{var a;return jB({name:"ai.generateText.doGenerate",attributes:jD({telemetry:l,attributes:{...jx({operationId:"ai.generateText.doGenerate",telemetry:l}),...E,"ai.model.provider":M.provider,"ai.model.id":M.modelId,"ai.prompt.messages":{input:()=>JSON.stringify(L.map(a=>({...a,content:"string"==typeof a.content?a.content:a.content.map(a=>{var b;return"file"===a.type?{...a,data:a.data instanceof Uint8Array?"string"==typeof(b=a.data)?b:b instanceof ArrayBuffer?d0(new Uint8Array(b)):d0(b):a.data}:a})})))},"ai.prompt.tools":{input:()=>null==O?void 0:O.map(a=>JSON.stringify(a))},"ai.prompt.toolChoice":{input:()=>null!=N?JSON.stringify(N):void 0},"gen_ai.system":M.provider,"gen_ai.request.model":M.modelId,"gen_ai.request.frequency_penalty":x.frequencyPenalty,"gen_ai.request.max_tokens":x.maxOutputTokens,"gen_ai.request.presence_penalty":x.presencePenalty,"gen_ai.request.stop_sequences":x.stopSequences,"gen_ai.request.temperature":null!=(a=x.temperature)?a:void 0,"gen_ai.request.top_k":x.topK,"gen_ai.request.top_p":x.topP}}),tracer:G,fn:async a=>{var b,c,d,e,f,g,i,j;let n=await M.doGenerate({...C,tools:O,toolChoice:N,responseFormat:null==k?void 0:k.responseFormat,prompt:L,providerOptions:m,abortSignal:h,headers:D}),o={id:null!=(c=null==(b=n.response)?void 0:b.id)?c:u(),timestamp:null!=(e=null==(d=n.response)?void 0:d.timestamp)?e:v(),modelId:null!=(g=null==(f=n.response)?void 0:f.modelId)?g:M.modelId,headers:null==(i=n.response)?void 0:i.headers,body:null==(j=n.response)?void 0:j.body};return a.setAttributes(jD({telemetry:l,attributes:{"ai.response.finishReason":n.finishReason,"ai.response.text":{output:()=>jG(n.content)},"ai.response.toolCalls":{output:()=>{let a=jS(n.content);return null==a?void 0:JSON.stringify(a)}},"ai.response.id":o.id,"ai.response.model":o.modelId,"ai.response.timestamp":o.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(n.providerMetadata),"ai.usage.promptTokens":n.usage.inputTokens,"ai.usage.completionTokens":n.usage.outputTokens,"gen_ai.response.finish_reasons":[n.finishReason],"gen_ai.response.id":o.id,"gen_ai.response.model":o.modelId,"gen_ai.usage.input_tokens":n.usage.inputTokens,"gen_ai.usage.output_tokens":n.usage.outputTokens}})),{...n,response:o}}})});let P=await Promise.all(A.content.filter(a=>"tool-call"===a.type).map(c=>jI({toolCall:c,tools:b,repairToolCall:r,system:d,messages:a})));for(let c of P){if(c.invalid)continue;let d=b[c.toolName];(null==d?void 0:d.onInputAvailable)!=null&&await d.onInputAvailable({input:c.input,toolCallId:c.toolCallId,messages:a,abortSignal:h,experimental_context:t})}let Q=P.filter(a=>a.invalid&&a.dynamic);for(let a of(I=[],Q))I.push({type:"tool-error",toolCallId:a.toolCallId,toolName:a.toolName,input:a.input,error:dd(a.error),dynamic:!0});H=P.filter(a=>!a.providerExecuted),null!=b&&I.push(...await jQ({toolCalls:H.filter(a=>!a.invalid),tools:b,tracer:G,telemetry:l,messages:a,abortSignal:h,experimental_context:t}));let R=function({content:a,toolCalls:b,toolOutputs:c}){return[...a.map(a=>{switch(a.type){case"text":case"reasoning":case"source":return a;case"file":return{type:"file",file:new jH(a)};case"tool-call":return b.find(b=>b.toolCallId===a.toolCallId);case"tool-result":{let c=b.find(b=>b.toolCallId===a.toolCallId);if(null==c)throw Error(`Tool call ${a.toolCallId} not found.`);if(a.isError)return{type:"tool-error",toolCallId:a.toolCallId,toolName:a.toolName,input:c.input,error:a.result,providerExecuted:!0,dynamic:c.dynamic};return{type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,input:c.input,output:a.result,providerExecuted:!0,dynamic:c.dynamic}}}}),...c]}({content:A.content,toolCalls:P,toolOutputs:I});J.push(...function({content:a,tools:b}){let c=[],d=a.filter(a=>"source"!==a.type).filter(a=>("tool-result"!==a.type||a.providerExecuted)&&("tool-error"!==a.type||a.providerExecuted)).filter(a=>"text"!==a.type||a.text.length>0).map(a=>{switch(a.type){case"text":return{type:"text",text:a.text,providerOptions:a.providerMetadata};case"reasoning":return{type:"reasoning",text:a.text,providerOptions:a.providerMetadata};case"file":return{type:"file",data:a.file.base64,mediaType:a.file.mediaType,providerOptions:a.providerMetadata};case"tool-call":return{type:"tool-call",toolCallId:a.toolCallId,toolName:a.toolName,input:a.input,providerExecuted:a.providerExecuted,providerOptions:a.providerMetadata};case"tool-result":return{type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,output:jM({tool:null==b?void 0:b[a.toolName],output:a.output,errorMode:"none"}),providerExecuted:!0,providerOptions:a.providerMetadata};case"tool-error":return{type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,output:jM({tool:null==b?void 0:b[a.toolName],output:a.error,errorMode:"json"}),providerOptions:a.providerMetadata}}});d.length>0&&c.push({role:"assistant",content:d});let e=a.filter(a=>"tool-result"===a.type||"tool-error"===a.type).filter(a=>!a.providerExecuted).map(a=>({type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,output:jM({tool:null==b?void 0:b[a.toolName],output:"tool-result"===a.type?a.output:a.error,errorMode:"tool-error"===a.type?"text":"none"})}));return e.length>0&&c.push({role:"tool",content:e}),c}({content:R,tools:b}));let S=new jK({content:R,finishReason:A.finishReason,usage:A.usage,warnings:A.warnings,providerMetadata:A.providerMetadata,request:null!=(n=A.request)?n:{},response:{...A.response,messages:structuredClone(J)}});iE(null!=(p=A.warnings)?p:[]),K.push(S),await (null==w?void 0:w(S))}while(H.length>0&&I.length===H.length&&!await jL({stopConditions:z,steps:K}));a.setAttributes(jD({telemetry:l,attributes:{"ai.response.finishReason":A.finishReason,"ai.response.text":{output:()=>jG(A.content)},"ai.response.toolCalls":{output:()=>{let a=jS(A.content);return null==a?void 0:JSON.stringify(a)}},"ai.response.providerMetadata":JSON.stringify(A.providerMetadata),"ai.usage.promptTokens":A.usage.inputTokens,"ai.usage.completionTokens":A.usage.outputTokens}}));let L=K[K.length-1];return new jR({steps:K,resolvedOutput:await (null==k?void 0:k.parseOutput({text:L.text},{response:L.response,usage:L.usage,finishReason:L.finishReason}))})}})}catch(a){throw hb.isInstance(a)||hl.isInstance(a)?new az({name:"GatewayError",message:"Vercel AI Gateway access failed. If you want to use AI SDK providers directly, use the providers, e.g. @ai-sdk/openai, or register a different global default provider.",cause:a}):a}}async function jQ({toolCalls:a,tools:b,tracer:c,telemetry:d,messages:e,abortSignal:f,experimental_context:g}){return(await Promise.all(a.map(async({toolCallId:a,toolName:h,input:i})=>{let j=b[h];if((null==j?void 0:j.execute)!=null)return jB({name:"ai.toolCall",attributes:jD({telemetry:d,attributes:{...jx({operationId:"ai.toolCall",telemetry:d}),"ai.toolCall.name":h,"ai.toolCall.id":a,"ai.toolCall.args":{output:()=>JSON.stringify(i)}}}),tracer:c,fn:async b=>{try{let c;for await(let b of d3({execute:j.execute.bind(j),input:i,options:{toolCallId:a,messages:e,abortSignal:f,experimental_context:g}}))"final"===b.type&&(c=b.output);try{b.setAttributes(jD({telemetry:d,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(c)}}}))}catch(a){}return{type:"tool-result",toolCallId:a,toolName:h,input:i,output:c,dynamic:"dynamic"===j.type}}catch(c){return jC(b,c),{type:"tool-error",toolCallId:a,toolName:h,input:i,error:c,dynamic:"dynamic"===j.type}}}})}))).filter(a=>null!=a)}var jR=class{constructor(a){this.steps=a.steps,this.resolvedOutput=a.resolvedOutput}get finalStep(){return this.steps[this.steps.length-1]}get content(){return this.finalStep.content}get text(){return this.finalStep.text}get files(){return this.finalStep.files}get reasoningText(){return this.finalStep.reasoningText}get reasoning(){return this.finalStep.reasoning}get toolCalls(){return this.finalStep.toolCalls}get staticToolCalls(){return this.finalStep.staticToolCalls}get dynamicToolCalls(){return this.finalStep.dynamicToolCalls}get toolResults(){return this.finalStep.toolResults}get staticToolResults(){return this.finalStep.staticToolResults}get dynamicToolResults(){return this.finalStep.dynamicToolResults}get sources(){return this.finalStep.sources}get finishReason(){return this.finalStep.finishReason}get warnings(){return this.finalStep.warnings}get providerMetadata(){return this.finalStep.providerMetadata}get response(){return this.finalStep.response}get request(){return this.finalStep.request}get usage(){return this.finalStep.usage}get totalUsage(){return this.steps.reduce((a,b)=>{var c;return c=b.usage,{inputTokens:jE(a.inputTokens,c.inputTokens),outputTokens:jE(a.outputTokens,c.outputTokens),totalTokens:jE(a.totalTokens,c.totalTokens),reasoningTokens:jE(a.reasoningTokens,c.reasoningTokens),cachedInputTokens:jE(a.cachedInputTokens,c.cachedInputTokens)}},{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0,reasoningTokens:void 0,cachedInputTokens:void 0})}get experimental_output(){if(null==this.resolvedOutput)throw new iC;return this.resolvedOutput}};function jS(a){let b=a.filter(a=>"tool-call"===a.type);if(0!==b.length)return b.map(a=>({toolCallId:a.toolCallId,toolName:a.toolName,input:a.input}))}async function jT(a){if(void 0===a)return{value:void 0,state:"undefined-input"};let b=await dt({text:a});return b.success?{value:b.value,state:"successful-parse"}:(b=await dt({text:function(a){let b=["ROOT"],c=-1,d=null;function e(a,e,f){switch(a){case'"':c=e,b.pop(),b.push(f),b.push("INSIDE_STRING");break;case"f":case"t":case"n":c=e,d=e,b.pop(),b.push(f),b.push("INSIDE_LITERAL");break;case"-":b.pop(),b.push(f),b.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c=e,b.pop(),b.push(f),b.push("INSIDE_NUMBER");break;case"{":c=e,b.pop(),b.push(f),b.push("INSIDE_OBJECT_START");break;case"[":c=e,b.pop(),b.push(f),b.push("INSIDE_ARRAY_START")}}function f(a,d){switch(a){case",":b.pop(),b.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":c=d,b.pop()}}function g(a,d){switch(a){case",":b.pop(),b.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":c=d,b.pop()}}for(let h=0;h<a.length;h++){let i=a[h];switch(b[b.length-1]){case"ROOT":e(i,h,"FINISH");break;case"INSIDE_OBJECT_START":switch(i){case'"':b.pop(),b.push("INSIDE_OBJECT_KEY");break;case"}":c=h,b.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===i&&(b.pop(),b.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===i&&(b.pop(),b.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===i&&(b.pop(),b.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":e(i,h,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":f(i,h);break;case"INSIDE_STRING":switch(i){case'"':b.pop(),c=h;break;case"\\":b.push("INSIDE_STRING_ESCAPE");break;default:c=h}break;case"INSIDE_ARRAY_START":"]"===i?(c=h,b.pop()):(c=h,e(i,h,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(i){case",":b.pop(),b.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":c=h,b.pop();break;default:c=h}break;case"INSIDE_ARRAY_AFTER_COMMA":e(i,h,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":b.pop(),c=h;break;case"INSIDE_NUMBER":switch(i){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c=h;break;case"e":case"E":case"-":case".":break;case",":b.pop(),"INSIDE_ARRAY_AFTER_VALUE"===b[b.length-1]&&g(i,h),"INSIDE_OBJECT_AFTER_VALUE"===b[b.length-1]&&f(i,h);break;case"}":b.pop(),"INSIDE_OBJECT_AFTER_VALUE"===b[b.length-1]&&f(i,h);break;case"]":b.pop(),"INSIDE_ARRAY_AFTER_VALUE"===b[b.length-1]&&g(i,h);break;default:b.pop()}break;case"INSIDE_LITERAL":{let e=a.substring(d,h+1);"false".startsWith(e)||"true".startsWith(e)||"null".startsWith(e)?c=h:(b.pop(),"INSIDE_OBJECT_AFTER_VALUE"===b[b.length-1]?f(i,h):"INSIDE_ARRAY_AFTER_VALUE"===b[b.length-1]&&g(i,h))}}}let h=a.slice(0,c+1);for(let c=b.length-1;c>=0;c--)switch(b[c]){case"INSIDE_STRING":h+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":h+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":h+="]";break;case"INSIDE_LITERAL":{let b=a.substring(d,a.length);"true".startsWith(b)?h+="true".slice(b.length):"false".startsWith(b)?h+="false".slice(b.length):"null".startsWith(b)&&(h+="null".slice(b.length))}}return h}(a)})).success?{value:b.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}TransformStream,gI([gF({type:gR("text-start"),id:f3(),providerMetadata:jk.optional()}),gF({type:gR("text-delta"),id:f3(),delta:f3(),providerMetadata:jk.optional()}),gF({type:gR("text-end"),id:f3(),providerMetadata:jk.optional()}),gF({type:gR("error"),errorText:f3()}),gF({type:gR("tool-input-start"),toolCallId:f3(),toolName:f3(),providerExecuted:gt().optional(),dynamic:gt().optional()}),gF({type:gR("tool-input-delta"),toolCallId:f3(),inputTextDelta:f3()}),gF({type:gR("tool-input-available"),toolCallId:f3(),toolName:f3(),input:gy(),providerExecuted:gt().optional(),providerMetadata:jk.optional(),dynamic:gt().optional()}),gF({type:gR("tool-input-error"),toolCallId:f3(),toolName:f3(),input:gy(),providerExecuted:gt().optional(),providerMetadata:jk.optional(),dynamic:gt().optional(),errorText:f3()}),gF({type:gR("tool-output-available"),toolCallId:f3(),output:gy(),providerExecuted:gt().optional(),dynamic:gt().optional(),preliminary:gt().optional()}),gF({type:gR("tool-output-error"),toolCallId:f3(),errorText:f3(),providerExecuted:gt().optional(),dynamic:gt().optional()}),gF({type:gR("reasoning-start"),id:f3(),providerMetadata:jk.optional()}),gF({type:gR("reasoning-delta"),id:f3(),delta:f3(),providerMetadata:jk.optional()}),gF({type:gR("reasoning-end"),id:f3(),providerMetadata:jk.optional()}),gF({type:gR("source-url"),sourceId:f3(),url:f3(),title:f3().optional(),providerMetadata:jk.optional()}),gF({type:gR("source-document"),sourceId:f3(),mediaType:f3(),title:f3(),filename:f3().optional(),providerMetadata:jk.optional()}),gF({type:gR("file"),url:f3(),mediaType:f3(),providerMetadata:jk.optional()}),gF({type:g5(a=>"string"==typeof a&&a.startsWith("data-"),{message:'Type must start with "data-"'}),id:f3().optional(),data:gy(),transient:gt().optional()}),gF({type:gR("start-step")}),gF({type:gR("finish-step")}),gF({type:gR("start"),messageId:f3().optional(),messageMetadata:gy().optional()}),gF({type:gR("finish"),messageMetadata:gy().optional()}),gF({type:gR("abort")}),gF({type:gR("message-metadata"),messageMetadata:gy()})]),db({prefix:"aitxt",size:24}),db({prefix:"aiobj",size:24}),db({prefix:"aiobj",size:24}),((a,b)=>{for(var c in b)iy(a,c,{get:b[c],enumerable:!0})})({},{object:()=>jV,text:()=>jU});var jU=()=>({type:"text",responseFormat:{type:"text"},parsePartial:async({text:a})=>({partial:a}),parseOutput:async({text:a})=>a}),jV=({schema:a})=>{let b=dY(a);return{type:"object",responseFormat:{type:"json",schema:b.jsonSchema},async parsePartial({text:a}){let b=await jT(a);switch(b.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:b.value};default:{let a=b.state;throw Error(`Unsupported parse state: ${a}`)}}},async parseOutput({text:a},c){let d=await dt({text:a});if(!d.success)throw new iQ({message:"No object generated: could not parse the response.",cause:d.error,text:a,response:c.response,usage:c.usage,finishReason:c.finishReason});let e=await dr({value:d.value,schema:b});if(!e.success)throw new iQ({message:"No object generated: response did not match schema.",cause:e.error,text:a,response:c.response,usage:c.usage,finishReason:c.finishReason});return e.value}}},jW=(Symbol.for("vercel.ai.error.AI_NoSuchProviderError"),gG({name:f3(),version:f3()})),jX=gG({_meta:gU(gE({}).loose())}),jY=gE({method:f3(),params:gU(jX)}),jZ=gG({experimental:gU(gE({}).loose()),logging:gU(gE({}).loose()),prompts:gU(gG({listChanged:gU(gt())})),resources:gU(gG({subscribe:gU(gt()),listChanged:gU(gt())})),tools:gU(gG({listChanged:gU(gt())}))});jX.extend({protocolVersion:f3(),capabilities:jZ,serverInfo:jW,instructions:gU(f3())});var j$=jX.extend({nextCursor:gU(f3())}),j_=gE({name:f3(),description:gU(f3()),inputSchema:gE({type:gR("object"),properties:gU(gE({}).loose())}).loose()}).loose();j$.extend({tools:gC(j_)});var j0=gE({type:gR("text"),text:f3()}).loose(),j1=gE({type:gR("image"),data:fO(gk,void 0),mimeType:f3()}).loose(),j2=gE({uri:f3(),mimeType:gU(f3())}).loose(),j3=j2.extend({text:f3()}),j4=j2.extend({blob:fO(gk,void 0)}),j5=gE({type:gR("resource"),resource:gI([j3,j4])}).loose();jX.extend({content:gC(gI([j0,j1,j5])),isError:gt().default(!1).optional()}).or(jX.extend({toolResult:gy()}));var j6=gE({jsonrpc:gR("2.0"),id:gI([f3(),gp().int()])}).merge(jY).strict(),j7=gE({jsonrpc:gR("2.0"),id:gI([f3(),gp().int()]),result:jX}).strict(),j8=gE({jsonrpc:gR("2.0"),id:gI([f3(),gp().int()]),error:gE({code:gp().int(),message:f3(),data:gU(gy())})}).strict();gI([j6,gE({jsonrpc:gR("2.0")}).merge(gE({method:f3(),params:gU(jX)})).strict(),j7,j8]);var j9=gE({type:gR("text"),text:f3(),state:gP(["streaming","done"]).optional(),providerMetadata:jk.optional()}),ka=gE({type:gR("reasoning"),text:f3(),state:gP(["streaming","done"]).optional(),providerMetadata:jk.optional()}),kb=gE({type:gR("source-url"),sourceId:f3(),url:f3(),title:f3().optional(),providerMetadata:jk.optional()}),kc=gE({type:gR("source-document"),sourceId:f3(),mediaType:f3(),title:f3(),filename:f3().optional(),providerMetadata:jk.optional()}),kd=gE({type:gR("file"),mediaType:f3(),filename:f3().optional(),url:f3(),providerMetadata:jk.optional()}),ke=gE({type:gR("step-start")}),kf=gE({type:f3().startsWith("data-"),id:f3().optional(),data:gy()}),kg=[gE({type:gR("dynamic-tool"),toolName:f3(),toolCallId:f3(),state:gR("input-streaming"),input:gy().optional(),output:gA().optional(),errorText:gA().optional()}),gE({type:gR("dynamic-tool"),toolName:f3(),toolCallId:f3(),state:gR("input-available"),input:gy(),output:gA().optional(),errorText:gA().optional(),callProviderMetadata:jk.optional()}),gE({type:gR("dynamic-tool"),toolName:f3(),toolCallId:f3(),state:gR("output-available"),input:gy(),output:gy(),errorText:gA().optional(),callProviderMetadata:jk.optional(),preliminary:gt().optional()}),gE({type:gR("dynamic-tool"),toolName:f3(),toolCallId:f3(),state:gR("output-error"),input:gy(),output:gA().optional(),errorText:f3(),callProviderMetadata:jk.optional()})],kh=[gE({type:f3().startsWith("tool-"),toolCallId:f3(),state:gR("input-streaming"),providerExecuted:gt().optional(),input:gy().optional(),output:gA().optional(),errorText:gA().optional()}),gE({type:f3().startsWith("tool-"),toolCallId:f3(),state:gR("input-available"),providerExecuted:gt().optional(),input:gy(),output:gA().optional(),errorText:gA().optional(),callProviderMetadata:jk.optional()}),gE({type:f3().startsWith("tool-"),toolCallId:f3(),state:gR("output-available"),providerExecuted:gt().optional(),input:gy(),output:gy(),errorText:gA().optional(),callProviderMetadata:jk.optional(),preliminary:gt().optional()}),gE({type:f3().startsWith("tool-"),toolCallId:f3(),state:gR("output-error"),providerExecuted:gt().optional(),input:gy(),output:gA().optional(),errorText:f3(),callProviderMetadata:jk.optional()})];gE({id:f3(),role:gP(["system","user","assistant"]),metadata:gy().optional(),parts:gC(gI([j9,ka,kb,kc,kd,ke,kf,...kg,...kh]))});var ki=gE({error:gE({message:f3(),type:f3().nullish(),param:gw().nullish(),code:gI([f3(),gp()]).nullish()})}),kj=dD({errorSchema:ki,errorToMessage:a=>a.error.message});function kk({id:a,model:b,created:c}){return{id:null!=a?a:void 0,modelId:null!=b?b:void 0,timestamp:null!=c?new Date(1e3*c):void 0}}function kl(a){switch(a){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var km=gE({logitBias:gN(new go({type:"number",coerce:!0,checks:[],...bA(void 0)}),gp()).optional(),logprobs:gI([gt(),gp()]).optional(),parallelToolCalls:gt().optional(),user:f3().optional(),reasoningEffort:gP(["minimal","low","medium","high"]).optional(),maxCompletionTokens:gp().optional(),store:gt().optional(),metadata:gN(f3().max(64),f3().max(512)).optional(),prediction:gN(f3(),gw()).optional(),structuredOutputs:gt().optional(),serviceTier:gP(["auto","flex","priority"]).optional(),strictJsonSchema:gt().optional(),textVerbosity:gP(["low","medium","high"]).optional(),promptCacheKey:f3().optional(),safetyIdentifier:f3().optional()}),kn=class{constructor(a,b){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/]},this.modelId=a,this.config=b}get provider(){return this.config.provider}async getArgs({prompt:a,maxOutputTokens:b,temperature:c,topP:d,topK:e,frequencyPenalty:f,presencePenalty:g,stopSequences:h,responseFormat:i,seed:j,tools:k,toolChoice:l,providerOptions:m}){var n,o,p,q,r,s,t,u,v;let w=[],x=null!=(n=await dv({provider:"openai",providerOptions:m,schema:km}))?n:{},y=null==(o=x.structuredOutputs)||o;null!=e&&w.push({type:"unsupported-setting",setting:"topK"}),(null==i?void 0:i.type)!=="json"||null==i.schema||y||w.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let{messages:z,warnings:A}=function({prompt:a,systemMessageMode:b="system"}){let c=[],d=[];for(let{role:e,content:f}of a)switch(e){case"system":switch(b){case"system":c.push({role:"system",content:f});break;case"developer":c.push({role:"developer",content:f});break;case"remove":d.push({type:"other",message:"system messages are removed for this model"});break;default:throw Error(`Unsupported system message mode: ${b}`)}break;case"user":if(1===f.length&&"text"===f[0].type){c.push({role:"user",content:f[0].text});break}c.push({role:"user",content:f.map((a,b)=>{var c,d,e;switch(a.type){case"text":return{type:"text",text:a.text};case"file":if(a.mediaType.startsWith("image/")){let b="image/*"===a.mediaType?"image/jpeg":a.mediaType;return{type:"image_url",image_url:{url:a.data instanceof URL?a.data.toString():`data:${b};base64,${d1(a.data)}`,detail:null==(d=null==(c=a.providerOptions)?void 0:c.openai)?void 0:d.imageDetail}}}if(a.mediaType.startsWith("audio/")){if(a.data instanceof URL)throw new bg({functionality:"audio file parts with URLs"});switch(a.mediaType){case"audio/wav":return{type:"input_audio",input_audio:{data:d1(a.data),format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:d1(a.data),format:"mp3"}};default:throw new bg({functionality:`audio content parts with media type ${a.mediaType}`})}}if("application/pdf"===a.mediaType){if(a.data instanceof URL)throw new bg({functionality:"PDF file parts with URLs"});return{type:"file",file:"string"==typeof a.data&&a.data.startsWith("file-")?{file_id:a.data}:{filename:null!=(e=a.filename)?e:`part-${b}.pdf`,file_data:`data:application/pdf;base64,${d1(a.data)}`}}}else throw new bg({functionality:`file part media type ${a.mediaType}`})}})});break;case"assistant":{let a="",b=[];for(let c of f)switch(c.type){case"text":a+=c.text;break;case"tool-call":b.push({id:c.toolCallId,type:"function",function:{name:c.toolName,arguments:JSON.stringify(c.input)}})}c.push({role:"assistant",content:a,tool_calls:b.length>0?b:void 0});break}case"tool":for(let a of f){let b,d=a.output;switch(d.type){case"text":case"error-text":b=d.value;break;case"content":case"json":case"error-json":b=JSON.stringify(d.value)}c.push({role:"tool",tool_call_id:a.toolCallId,content:b})}break;default:throw Error(`Unsupported role: ${e}`)}return{messages:c,warnings:d}}({prompt:a,systemMessageMode:kr(r=this.modelId)?null!=(t=null==(s=ks[r])?void 0:s.systemMessageMode)?t:"developer":"system"});w.push(...A);let B=null!=(p=x.strictJsonSchema)&&p,C={model:this.modelId,logit_bias:x.logitBias,logprobs:!0===x.logprobs||"number"==typeof x.logprobs||void 0,top_logprobs:"number"==typeof x.logprobs?x.logprobs:"boolean"==typeof x.logprobs&&x.logprobs?0:void 0,user:x.user,parallel_tool_calls:x.parallelToolCalls,max_tokens:b,temperature:c,top_p:d,frequency_penalty:f,presence_penalty:g,response_format:(null==i?void 0:i.type)==="json"?y&&null!=i.schema?{type:"json_schema",json_schema:{schema:i.schema,strict:B,name:null!=(q=i.name)?q:"response",description:i.description}}:{type:"json_object"}:void 0,stop:h,seed:j,verbosity:x.textVerbosity,max_completion_tokens:x.maxCompletionTokens,store:x.store,metadata:x.metadata,prediction:x.prediction,reasoning_effort:x.reasoningEffort,service_tier:x.serviceTier,prompt_cache_key:x.promptCacheKey,safety_identifier:x.safetyIdentifier,messages:z};kr(this.modelId)?(null!=C.temperature&&(C.temperature=void 0,w.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),null!=C.top_p&&(C.top_p=void 0,w.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),null!=C.frequency_penalty&&(C.frequency_penalty=void 0,w.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),null!=C.presence_penalty&&(C.presence_penalty=void 0,w.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),null!=C.logit_bias&&(C.logit_bias=void 0,w.push({type:"other",message:"logitBias is not supported for reasoning models"})),null!=C.logprobs&&(C.logprobs=void 0,w.push({type:"other",message:"logprobs is not supported for reasoning models"})),null!=C.top_logprobs&&(C.top_logprobs=void 0,w.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),null!=C.max_tokens&&(null==C.max_completion_tokens&&(C.max_completion_tokens=C.max_tokens),C.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&null!=C.temperature&&(C.temperature=void 0,w.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),"flex"!==x.serviceTier||(u=this.modelId).startsWith("o3")||u.startsWith("o4-mini")||u.startsWith("gpt-5")&&!u.startsWith("gpt-5-chat")||(w.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),C.service_tier=void 0),"priority"!==x.serviceTier||(v=this.modelId).startsWith("gpt-4")||v.startsWith("gpt-5-mini")||v.startsWith("gpt-5")&&!v.startsWith("gpt-5-nano")&&!v.startsWith("gpt-5-chat")||v.startsWith("o3")||v.startsWith("o4-mini")||(w.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),C.service_tier=void 0);let{tools:D,toolChoice:E,toolWarnings:F}=function({tools:a,toolChoice:b,structuredOutputs:c,strictJsonSchema:d}){a=(null==a?void 0:a.length)?a:void 0;let e=[];if(null==a)return{tools:void 0,toolChoice:void 0,toolWarnings:e};let f=[];for(let b of a)"function"===b.type?f.push({type:"function",function:{name:b.name,description:b.description,parameters:b.inputSchema,strict:c?d:void 0}}):e.push({type:"unsupported-tool",tool:b});if(null==b)return{tools:f,toolChoice:void 0,toolWarnings:e};let g=b.type;switch(g){case"auto":case"none":case"required":return{tools:f,toolChoice:g,toolWarnings:e};case"tool":return{tools:f,toolChoice:{type:"function",function:{name:b.toolName}},toolWarnings:e};default:throw new bg({functionality:`tool choice type: ${g}`})}}({tools:k,toolChoice:l,structuredOutputs:y,strictJsonSchema:B});return{args:{...C,tools:D,tool_choice:E},warnings:[...w,...F]}}async doGenerate(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;let{args:p,warnings:q}=await this.getArgs(a),{responseHeaders:r,value:s,rawValue:t}=await dx({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:c5(this.config.headers(),a.headers),body:p,failedResponseHandler:kj,successfulResponseHandler:dF(kp),abortSignal:a.abortSignal,fetch:this.config.fetch}),u=s.choices[0],v=[],w=u.message.content;for(let a of(null!=w&&w.length>0&&v.push({type:"text",text:w}),null!=(b=u.message.tool_calls)?b:[]))v.push({type:"tool-call",toolCallId:null!=(c=a.id)?c:dc(),toolName:a.function.name,input:a.function.arguments});for(let a of null!=(d=u.message.annotations)?d:[])v.push({type:"source",sourceType:"url",id:dc(),url:a.url,title:a.title});let x=null==(e=s.usage)?void 0:e.completion_tokens_details,y=null==(f=s.usage)?void 0:f.prompt_tokens_details,z={openai:{}};return(null==x?void 0:x.accepted_prediction_tokens)!=null&&(z.openai.acceptedPredictionTokens=null==x?void 0:x.accepted_prediction_tokens),(null==x?void 0:x.rejected_prediction_tokens)!=null&&(z.openai.rejectedPredictionTokens=null==x?void 0:x.rejected_prediction_tokens),(null==(g=u.logprobs)?void 0:g.content)!=null&&(z.openai.logprobs=u.logprobs.content),{content:v,finishReason:kl(u.finish_reason),usage:{inputTokens:null!=(i=null==(h=s.usage)?void 0:h.prompt_tokens)?i:void 0,outputTokens:null!=(k=null==(j=s.usage)?void 0:j.completion_tokens)?k:void 0,totalTokens:null!=(m=null==(l=s.usage)?void 0:l.total_tokens)?m:void 0,reasoningTokens:null!=(n=null==x?void 0:x.reasoning_tokens)?n:void 0,cachedInputTokens:null!=(o=null==y?void 0:y.cached_tokens)?o:void 0},request:{body:p},response:{...kk(s),headers:r,body:t},warnings:q,providerMetadata:z}}async doStream(a){let{args:b,warnings:c}=await this.getArgs(a),d={...b,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:e,value:f}=await dx({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:c5(this.config.headers(),a.headers),body:d,failedResponseHandler:kj,successfulResponseHandler:dE(kq),abortSignal:a.abortSignal,fetch:this.config.fetch}),g=[],h="unknown",i={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},j=!0,k=!1,l={openai:{}};return{stream:f.pipeThrough(new TransformStream({start(a){a.enqueue({type:"stream-start",warnings:c})},transform(b,c){var d,e,f,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G;if(a.includeRawChunks&&c.enqueue({type:"raw",rawValue:b.rawValue}),!b.success){h="error",c.enqueue({type:"error",error:b.error});return}let H=b.value;if("error"in H){h="error",c.enqueue({type:"error",error:H.error});return}j&&(j=!1,c.enqueue({type:"response-metadata",...kk(H)})),null!=H.usage&&(i.inputTokens=null!=(d=H.usage.prompt_tokens)?d:void 0,i.outputTokens=null!=(e=H.usage.completion_tokens)?e:void 0,i.totalTokens=null!=(f=H.usage.total_tokens)?f:void 0,i.reasoningTokens=null!=(n=null==(m=H.usage.completion_tokens_details)?void 0:m.reasoning_tokens)?n:void 0,i.cachedInputTokens=null!=(p=null==(o=H.usage.prompt_tokens_details)?void 0:o.cached_tokens)?p:void 0,(null==(q=H.usage.completion_tokens_details)?void 0:q.accepted_prediction_tokens)!=null&&(l.openai.acceptedPredictionTokens=null==(r=H.usage.completion_tokens_details)?void 0:r.accepted_prediction_tokens),(null==(s=H.usage.completion_tokens_details)?void 0:s.rejected_prediction_tokens)!=null&&(l.openai.rejectedPredictionTokens=null==(t=H.usage.completion_tokens_details)?void 0:t.rejected_prediction_tokens));let I=H.choices[0];if((null==I?void 0:I.finish_reason)!=null&&(h=kl(I.finish_reason)),(null==(u=null==I?void 0:I.logprobs)?void 0:u.content)!=null&&(l.openai.logprobs=I.logprobs.content),(null==I?void 0:I.delta)==null)return;let J=I.delta;if(null!=J.content&&(k||(c.enqueue({type:"text-start",id:"0"}),k=!0),c.enqueue({type:"text-delta",id:"0",delta:J.content})),null!=J.tool_calls)for(let a of J.tool_calls){let b=a.index;if(null==g[b]){if("function"!==a.type)throw new aU({data:a,message:"Expected 'function' type."});if(null==a.id)throw new aU({data:a,message:"Expected 'id' to be a string."});if((null==(v=a.function)?void 0:v.name)==null)throw new aU({data:a,message:"Expected 'function.name' to be a string."});c.enqueue({type:"tool-input-start",id:a.id,toolName:a.function.name}),g[b]={id:a.id,type:"function",function:{name:a.function.name,arguments:null!=(w=a.function.arguments)?w:""},hasFinished:!1};let d=g[b];(null==(x=d.function)?void 0:x.name)!=null&&(null==(y=d.function)?void 0:y.arguments)!=null&&(d.function.arguments.length>0&&c.enqueue({type:"tool-input-delta",id:d.id,delta:d.function.arguments}),du(d.function.arguments)&&(c.enqueue({type:"tool-input-end",id:d.id}),c.enqueue({type:"tool-call",toolCallId:null!=(z=d.id)?z:dc(),toolName:d.function.name,input:d.function.arguments}),d.hasFinished=!0));continue}let d=g[b];!d.hasFinished&&((null==(A=a.function)?void 0:A.arguments)!=null&&(d.function.arguments+=null!=(C=null==(B=a.function)?void 0:B.arguments)?C:""),c.enqueue({type:"tool-input-delta",id:d.id,delta:null!=(D=a.function.arguments)?D:""}),(null==(E=d.function)?void 0:E.name)!=null&&(null==(F=d.function)?void 0:F.arguments)!=null&&du(d.function.arguments)&&(c.enqueue({type:"tool-input-end",id:d.id}),c.enqueue({type:"tool-call",toolCallId:null!=(G=d.id)?G:dc(),toolName:d.function.name,input:d.function.arguments}),d.hasFinished=!0))}if(null!=J.annotations)for(let a of J.annotations)c.enqueue({type:"source",sourceType:"url",id:dc(),url:a.url,title:a.title})},flush(a){k&&a.enqueue({type:"text-end",id:"0"}),a.enqueue({type:"finish",finishReason:h,usage:i,...null!=l?{providerMetadata:l}:{}})}})),request:{body:d},response:{headers:e}}}},ko=gE({prompt_tokens:gp().nullish(),completion_tokens:gp().nullish(),total_tokens:gp().nullish(),prompt_tokens_details:gE({cached_tokens:gp().nullish()}).nullish(),completion_tokens_details:gE({reasoning_tokens:gp().nullish(),accepted_prediction_tokens:gp().nullish(),rejected_prediction_tokens:gp().nullish()}).nullish()}).nullish(),kp=gE({id:f3().nullish(),created:gp().nullish(),model:f3().nullish(),choices:gC(gE({message:gE({role:gR("assistant").nullish(),content:f3().nullish(),tool_calls:gC(gE({id:f3().nullish(),type:gR("function"),function:gE({name:f3(),arguments:f3()})})).nullish(),annotations:gC(gE({type:gR("url_citation"),start_index:gp(),end_index:gp(),url:f3(),title:f3()})).nullish()}),index:gp(),logprobs:gE({content:gC(gE({token:f3(),logprob:gp(),top_logprobs:gC(gE({token:f3(),logprob:gp()}))})).nullish()}).nullish(),finish_reason:f3().nullish()})),usage:ko}),kq=gI([gE({id:f3().nullish(),created:gp().nullish(),model:f3().nullish(),choices:gC(gE({delta:gE({role:gP(["assistant"]).nullish(),content:f3().nullish(),tool_calls:gC(gE({index:gp(),id:f3().nullish(),type:gR("function").nullish(),function:gE({name:f3().nullish(),arguments:f3().nullish()})})).nullish(),annotations:gC(gE({type:gR("url_citation"),start_index:gp(),end_index:gp(),url:f3(),title:f3()})).nullish()}).nullish(),logprobs:gE({content:gC(gE({token:f3(),logprob:gp(),top_logprobs:gC(gE({token:f3(),logprob:gp()}))})).nullish()}).nullish(),finish_reason:f3().nullish(),index:gp()})),usage:ko}),ki]);function kr(a){return(a.startsWith("o")||a.startsWith("gpt-5"))&&!a.startsWith("gpt-5-chat")}var ks={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};function kt({id:a,model:b,created:c}){return{id:null!=a?a:void 0,modelId:null!=b?b:void 0,timestamp:null!=c?new Date(1e3*c):void 0}}function ku(a){switch(a){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var kv=gE({echo:gt().optional(),logitBias:gN(f3(),gp()).optional(),suffix:f3().optional(),user:f3().optional(),logprobs:gI([gt(),gp()]).optional()}),kw=class{constructor(a,b){this.specificationVersion="v2",this.supportedUrls={},this.modelId=a,this.config=b}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get provider(){return this.config.provider}async getArgs({prompt:a,maxOutputTokens:b,temperature:c,topP:d,topK:e,frequencyPenalty:f,presencePenalty:g,stopSequences:h,responseFormat:i,tools:j,toolChoice:k,seed:l,providerOptions:m}){let n=[],o={...await dv({provider:"openai",providerOptions:m,schema:kv}),...await dv({provider:this.providerOptionsName,providerOptions:m,schema:kv})};null!=e&&n.push({type:"unsupported-setting",setting:"topK"}),(null==j?void 0:j.length)&&n.push({type:"unsupported-setting",setting:"tools"}),null!=k&&n.push({type:"unsupported-setting",setting:"toolChoice"}),null!=i&&"text"!==i.type&&n.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:p,stopSequences:q}=function({prompt:a,user:b="user",assistant:c="assistant"}){let d="";for(let{role:e,content:f}of("system"===a[0].role&&(d+=`${a[0].content}

`,a=a.slice(1)),a))switch(e){case"system":throw new aQ({message:"Unexpected system message in prompt: ${content}",prompt:a});case"user":{let a=f.map(a=>{if("text"===a.type)return a.text}).filter(Boolean).join("");d+=`${b}:
${a}

`;break}case"assistant":{let a=f.map(a=>{switch(a.type){case"text":return a.text;case"tool-call":throw new bg({functionality:"tool-call messages"})}}).join("");d+=`${c}:
${a}

`;break}case"tool":throw new bg({functionality:"tool messages"});default:throw Error(`Unsupported role: ${e}`)}return{prompt:d+=`${c}:
`,stopSequences:[`
${b}:`]}}({prompt:a}),r=[...null!=q?q:[],...null!=h?h:[]];return{args:{model:this.modelId,echo:o.echo,logit_bias:o.logitBias,logprobs:(null==o?void 0:o.logprobs)===!0?0:(null==o?void 0:o.logprobs)===!1||null==o?void 0:o.logprobs,suffix:o.suffix,user:o.user,max_tokens:b,temperature:c,top_p:d,frequency_penalty:f,presence_penalty:g,seed:l,prompt:p,stop:r.length>0?r:void 0},warnings:n}}async doGenerate(a){var b,c,d;let{args:e,warnings:f}=await this.getArgs(a),{responseHeaders:g,value:h,rawValue:i}=await dx({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:c5(this.config.headers(),a.headers),body:e,failedResponseHandler:kj,successfulResponseHandler:dF(ky),abortSignal:a.abortSignal,fetch:this.config.fetch}),j=h.choices[0],k={openai:{}};return null!=j.logprobs&&(k.openai.logprobs=j.logprobs),{content:[{type:"text",text:j.text}],usage:{inputTokens:null==(b=h.usage)?void 0:b.prompt_tokens,outputTokens:null==(c=h.usage)?void 0:c.completion_tokens,totalTokens:null==(d=h.usage)?void 0:d.total_tokens},finishReason:ku(j.finish_reason),request:{body:e},response:{...kt(h),headers:g,body:i},providerMetadata:k,warnings:f}}async doStream(a){let{args:b,warnings:c}=await this.getArgs(a),d={...b,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:e,value:f}=await dx({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:c5(this.config.headers(),a.headers),body:d,failedResponseHandler:kj,successfulResponseHandler:dE(kz),abortSignal:a.abortSignal,fetch:this.config.fetch}),g="unknown",h={openai:{}},i={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},j=!0;return{stream:f.pipeThrough(new TransformStream({start(a){a.enqueue({type:"stream-start",warnings:c})},transform(b,c){if(a.includeRawChunks&&c.enqueue({type:"raw",rawValue:b.rawValue}),!b.success){g="error",c.enqueue({type:"error",error:b.error});return}let d=b.value;if("error"in d){g="error",c.enqueue({type:"error",error:d.error});return}j&&(j=!1,c.enqueue({type:"response-metadata",...kt(d)}),c.enqueue({type:"text-start",id:"0"})),null!=d.usage&&(i.inputTokens=d.usage.prompt_tokens,i.outputTokens=d.usage.completion_tokens,i.totalTokens=d.usage.total_tokens);let e=d.choices[0];(null==e?void 0:e.finish_reason)!=null&&(g=ku(e.finish_reason)),(null==e?void 0:e.logprobs)!=null&&(h.openai.logprobs=e.logprobs),(null==e?void 0:e.text)!=null&&e.text.length>0&&c.enqueue({type:"text-delta",id:"0",delta:e.text})},flush(a){j||a.enqueue({type:"text-end",id:"0"}),a.enqueue({type:"finish",finishReason:g,providerMetadata:h,usage:i})}})),request:{body:d},response:{headers:e}}}},kx=gE({prompt_tokens:gp(),completion_tokens:gp(),total_tokens:gp()}),ky=gE({id:f3().nullish(),created:gp().nullish(),model:f3().nullish(),choices:gC(gE({text:f3(),finish_reason:f3(),logprobs:gE({tokens:gC(f3()),token_logprobs:gC(gp()),top_logprobs:gC(gN(f3(),gp())).nullish()}).nullish()})),usage:kx.nullish()}),kz=gI([gE({id:f3().nullish(),created:gp().nullish(),model:f3().nullish(),choices:gC(gE({text:f3(),finish_reason:f3().nullish(),index:gp(),logprobs:gE({tokens:gC(f3()),token_logprobs:gC(gp()),top_logprobs:gC(gN(f3(),gp())).nullish()}).nullish()})),usage:kx.nullish()}),ki]),kA=gE({dimensions:gp().optional(),user:f3().optional()}),kB=class{constructor(a,b){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=a,this.config=b}get provider(){return this.config.provider}async doEmbed({values:a,headers:b,abortSignal:c,providerOptions:d}){var e;if(a.length>this.maxEmbeddingsPerCall)throw new a8({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:a});let f=null!=(e=await dv({provider:"openai",providerOptions:d,schema:kA}))?e:{},{responseHeaders:g,value:h,rawValue:i}=await dx({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:c5(this.config.headers(),b),body:{model:this.modelId,input:a,encoding_format:"float",dimensions:f.dimensions,user:f.user},failedResponseHandler:kj,successfulResponseHandler:dF(kC),abortSignal:c,fetch:this.config.fetch});return{embeddings:h.data.map(a=>a.embedding),usage:h.usage?{tokens:h.usage.prompt_tokens}:void 0,response:{headers:g,body:i}}}},kC=gE({data:gC(gE({embedding:gC(gp())})),usage:gE({prompt_tokens:gp()}).nullish()}),kD={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10},kE=new Set(["gpt-image-1"]),kF=class{constructor(a,b){this.modelId=a,this.config=b,this.specificationVersion="v2"}get maxImagesPerCall(){var a;return null!=(a=kD[this.modelId])?a:1}get provider(){return this.config.provider}async doGenerate({prompt:a,n:b,size:c,aspectRatio:d,seed:e,providerOptions:f,headers:g,abortSignal:h}){var i,j,k,l;let m=[];null!=d&&m.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),null!=e&&m.push({type:"unsupported-setting",setting:"seed"});let n=null!=(k=null==(j=null==(i=this.config._internal)?void 0:i.currentDate)?void 0:j.call(i))?k:new Date,{value:o,responseHeaders:p}=await dx({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:c5(this.config.headers(),g),body:{model:this.modelId,prompt:a,n:b,size:c,...null!=(l=f.openai)?l:{},...!kE.has(this.modelId)?{response_format:"b64_json"}:{}},failedResponseHandler:kj,successfulResponseHandler:dF(kG),abortSignal:h,fetch:this.config.fetch});return{images:o.data.map(a=>a.b64_json),warnings:m,response:{timestamp:n,modelId:this.modelId,headers:p},providerMetadata:{openai:{images:o.data.map(a=>a.revised_prompt?{revisedPrompt:a.revised_prompt}:null)}}}}},kG=gE({data:gC(gE({b64_json:f3(),revised_prompt:f3().optional()}))}),kH=gE({code:f3().nullish(),containerId:f3()}),kI=gE({outputs:gC(gK("type",[gE({type:gR("logs"),logs:f3()}),gE({type:gR("image"),url:f3()})])).nullish()}),kJ=gE({container:gI([f3(),gE({fileIds:gC(f3()).optional()})]).optional()}),kK=dB({id:"openai.code_interpreter",name:"code_interpreter",inputSchema:kH,outputSchema:kI}),kL=gE({key:f3(),type:gP(["eq","ne","gt","gte","lt","lte"]),value:gI([f3(),gp(),gt()])}),kM=gE({type:gP(["and","or"]),filters:gC(gI([kL,g3(()=>kM)]))}),kN=gE({vectorStoreIds:gC(f3()),maxNumResults:gp().optional(),ranking:gE({ranker:f3().optional(),scoreThreshold:gp().optional()}).optional(),filters:gI([kL,kM]).optional()}),kO=gE({queries:gC(f3()),results:gC(gE({attributes:gN(f3(),gy()),fileId:f3(),filename:f3(),score:gp(),text:f3()})).nullable()}),kP=dB({id:"openai.file_search",name:"file_search",inputSchema:gE({}),outputSchema:kO}),kQ=gE({background:gP(["auto","opaque","transparent"]).optional(),inputFidelity:gP(["low","high"]).optional(),inputImageMask:gE({fileId:f3().optional(),imageUrl:f3().optional()}).optional(),model:f3().optional(),moderation:gP(["auto"]).optional(),outputCompression:gp().int().min(0).max(100).optional(),outputFormat:gP(["png","jpeg","webp"]).optional(),quality:gP(["auto","low","medium","high"]).optional(),size:gP(["1024x1024","1024x1536","1536x1024","auto"]).optional()}).strict(),kR=gE({result:f3()}),kS=dB({id:"openai.image_generation",name:"image_generation",inputSchema:gE({}),outputSchema:kR}),kT=gE({filters:gE({allowedDomains:gC(f3()).optional()}).optional(),searchContextSize:gP(["low","medium","high"]).optional(),userLocation:gE({type:gR("approximate"),country:f3().optional(),city:f3().optional(),region:f3().optional(),timezone:f3().optional()}).optional()}),kU=dA({id:"openai.web_search",name:"web_search",inputSchema:gE({action:gK("type",[gE({type:gR("search"),query:f3().nullish()}),gE({type:gR("open_page"),url:f3()}),gE({type:gR("find"),url:f3(),pattern:f3()})]).nullish()})}),kV=gE({searchContextSize:gP(["low","medium","high"]).optional(),userLocation:gE({type:gR("approximate"),country:f3().optional(),city:f3().optional(),region:f3().optional(),timezone:f3().optional()}).optional()}),kW={codeInterpreter:(a={})=>kK(a),fileSearch:kP,imageGeneration:(a={})=>kS(a),webSearchPreview:dA({id:"openai.web_search_preview",name:"web_search_preview",inputSchema:gE({action:gK("type",[gE({type:gR("search"),query:f3().nullish()}),gE({type:gR("open_page"),url:f3()}),gE({type:gR("find"),url:f3(),pattern:f3()})]).nullish()})}),webSearch:(a={})=>kU(a)};function kX(a,b){return!!b&&b.some(b=>a.startsWith(b))}async function kY({prompt:a,systemMessageMode:b,fileIdPrefixes:c,store:d}){var e,f,g,h,i,j;let k=[],l=[];for(let{role:m,content:n}of a)switch(m){case"system":switch(b){case"system":k.push({role:"system",content:n});break;case"developer":k.push({role:"developer",content:n});break;case"remove":l.push({type:"other",message:"system messages are removed for this model"});break;default:throw Error(`Unsupported system message mode: ${b}`)}break;case"user":k.push({role:"user",content:n.map((a,b)=>{var d,e,f;switch(a.type){case"text":return{type:"input_text",text:a.text};case"file":if(a.mediaType.startsWith("image/")){let b="image/*"===a.mediaType?"image/jpeg":a.mediaType;return{type:"input_image",...a.data instanceof URL?{image_url:a.data.toString()}:"string"==typeof a.data&&kX(a.data,c)?{file_id:a.data}:{image_url:`data:${b};base64,${d1(a.data)}`},detail:null==(e=null==(d=a.providerOptions)?void 0:d.openai)?void 0:e.imageDetail}}if("application/pdf"===a.mediaType){if(a.data instanceof URL)return{type:"input_file",file_url:a.data.toString()};return{type:"input_file",..."string"==typeof a.data&&kX(a.data,c)?{file_id:a.data}:{filename:null!=(f=a.filename)?f:`part-${b}.pdf`,file_data:`data:application/pdf;base64,${d1(a.data)}`}}}throw new bg({functionality:`file part media type ${a.mediaType}`})}})});break;case"assistant":{let a={},b={};for(let c of n)switch(c.type){case"text":k.push({role:"assistant",content:[{type:"output_text",text:c.text}],id:null!=(g=null==(f=null==(e=c.providerOptions)?void 0:e.openai)?void 0:f.itemId)?g:void 0});break;case"tool-call":if(b[c.toolCallId]=c,c.providerExecuted)break;k.push({type:"function_call",call_id:c.toolCallId,name:c.toolName,arguments:JSON.stringify(c.input),id:null!=(j=null==(i=null==(h=c.providerOptions)?void 0:h.openai)?void 0:i.itemId)?j:void 0});break;case"tool-result":d?k.push({type:"item_reference",id:c.toolCallId}):l.push({type:"other",message:`Results for OpenAI tool ${c.toolName} are not sent to the API when store is false`});break;case"reasoning":{let b=await dv({provider:"openai",providerOptions:c.providerOptions,schema:kZ}),d=null==b?void 0:b.itemId;if(null!=d){let e=a[d],f=[];c.text.length>0?f.push({type:"summary_text",text:c.text}):void 0!==e&&l.push({type:"other",message:`Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ${JSON.stringify(c)}.`}),void 0===e?(a[d]={type:"reasoning",id:d,encrypted_content:null==b?void 0:b.reasoningEncryptedContent,summary:f},k.push(a[d])):e.summary.push(...f)}else l.push({type:"other",message:`Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ${JSON.stringify(c)}.`})}}break}case"tool":for(let a of n){let b,c=a.output;switch(c.type){case"text":case"error-text":b=c.value;break;case"content":case"json":case"error-json":b=JSON.stringify(c.value)}k.push({type:"function_call_output",call_id:a.toolCallId,output:b})}break;default:throw Error(`Unsupported role: ${m}`)}return{input:k,warnings:l}}var kZ=gE({itemId:f3().nullish(),reasoningEncryptedContent:f3().nullish()});function k$({finishReason:a,hasFunctionCall:b}){switch(a){case void 0:case null:return b?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return b?"tool-calls":"unknown"}}var k_=gE({type:gR("web_search_call"),id:f3(),status:f3(),action:gK("type",[gE({type:gR("search"),query:f3().nullish()}),gE({type:gR("open_page"),url:f3()}),gE({type:gR("find"),url:f3(),pattern:f3()})]).nullish()}),k0=gE({type:gR("file_search_call"),id:f3(),queries:gC(f3()),results:gC(gE({attributes:gN(f3(),gy()),file_id:f3(),filename:f3(),score:gp(),text:f3()})).nullish()}),k1=gE({type:gR("code_interpreter_call"),id:f3(),code:f3().nullable(),container_id:f3(),outputs:gC(gK("type",[gE({type:gR("logs"),logs:f3()}),gE({type:gR("image"),url:f3()})])).nullable()}),k2=gE({type:gR("image_generation_call"),id:f3(),result:f3()}),k3=gC(gE({token:f3(),logprob:gp(),top_logprobs:gC(gE({token:f3(),logprob:gp()}))})),k4=class{constructor(a,b){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/],"application/pdf":[/^https?:\/\/.*$/]},this.modelId=a,this.config=b}get provider(){return this.config.provider}async getArgs({maxOutputTokens:a,temperature:b,stopSequences:c,topP:d,topK:e,presencePenalty:f,frequencyPenalty:g,seed:h,prompt:i,providerOptions:j,tools:k,toolChoice:l,responseFormat:m}){var n,o,p,q;let r=[],s=function(a){let b={requiredAutoTruncation:!1,systemMessageMode:"system",supportsFlexProcessing:a.startsWith("o3")||a.startsWith("o4-mini")||a.startsWith("gpt-5")&&!a.startsWith("gpt-5-chat"),supportsPriorityProcessing:a.startsWith("gpt-4")||a.startsWith("gpt-5-mini")||a.startsWith("gpt-5")&&!a.startsWith("gpt-5-nano")&&!a.startsWith("gpt-5-chat")||a.startsWith("o3")||a.startsWith("o4-mini")};return a.startsWith("gpt-5-chat")?{...b,isReasoningModel:!1}:a.startsWith("o")||a.startsWith("gpt-5")||a.startsWith("codex-")||a.startsWith("computer-use")?a.startsWith("o1-mini")||a.startsWith("o1-preview")?{...b,isReasoningModel:!0,systemMessageMode:"remove"}:{...b,isReasoningModel:!0,systemMessageMode:"developer"}:{...b,isReasoningModel:!1}}(this.modelId);null!=e&&r.push({type:"unsupported-setting",setting:"topK"}),null!=h&&r.push({type:"unsupported-setting",setting:"seed"}),null!=f&&r.push({type:"unsupported-setting",setting:"presencePenalty"}),null!=g&&r.push({type:"unsupported-setting",setting:"frequencyPenalty"}),null!=c&&r.push({type:"unsupported-setting",setting:"stopSequences"});let t=await dv({provider:"openai",providerOptions:j,schema:lb}),{input:u,warnings:v}=await kY({prompt:i,systemMessageMode:s.systemMessageMode,fileIdPrefixes:this.config.fileIdPrefixes,store:null==(n=null==t?void 0:t.store)||n});r.push(...v);let w=null!=(o=null==t?void 0:t.strictJsonSchema)&&o,x=null==t?void 0:t.include;function y(a){x=null!=x?[...x,a]:[a]}let z="number"==typeof(null==t?void 0:t.logprobs)?null==t?void 0:t.logprobs:(null==t?void 0:t.logprobs)===!0?20:void 0;z&&y("message.output_text.logprobs");let A=null==(p=null==k?void 0:k.find(a=>"provider-defined"===a.type&&("openai.web_search"===a.id||"openai.web_search_preview"===a.id)))?void 0:p.name;A&&y("web_search_call.action.sources"),(null==k?void 0:k.find(a=>"provider-defined"===a.type&&"openai.code_interpreter"===a.id))!=null&&y("code_interpreter_call.outputs");let B={model:this.modelId,input:u,temperature:b,top_p:d,max_output_tokens:a,...((null==m?void 0:m.type)==="json"||(null==t?void 0:t.textVerbosity))&&{text:{...(null==m?void 0:m.type)==="json"&&{format:null!=m.schema?{type:"json_schema",strict:w,name:null!=(q=m.name)?q:"response",description:m.description,schema:m.schema}:{type:"json_object"}},...(null==t?void 0:t.textVerbosity)&&{verbosity:t.textVerbosity}}},max_tool_calls:null==t?void 0:t.maxToolCalls,metadata:null==t?void 0:t.metadata,parallel_tool_calls:null==t?void 0:t.parallelToolCalls,previous_response_id:null==t?void 0:t.previousResponseId,store:null==t?void 0:t.store,user:null==t?void 0:t.user,instructions:null==t?void 0:t.instructions,service_tier:null==t?void 0:t.serviceTier,include:x,prompt_cache_key:null==t?void 0:t.promptCacheKey,safety_identifier:null==t?void 0:t.safetyIdentifier,top_logprobs:z,...s.isReasoningModel&&((null==t?void 0:t.reasoningEffort)!=null||(null==t?void 0:t.reasoningSummary)!=null)&&{reasoning:{...(null==t?void 0:t.reasoningEffort)!=null&&{effort:t.reasoningEffort},...(null==t?void 0:t.reasoningSummary)!=null&&{summary:t.reasoningSummary}}},...s.requiredAutoTruncation&&{truncation:"auto"}};s.isReasoningModel?(null!=B.temperature&&(B.temperature=void 0,r.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),null!=B.top_p&&(B.top_p=void 0,r.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))):((null==t?void 0:t.reasoningEffort)!=null&&r.push({type:"unsupported-setting",setting:"reasoningEffort",details:"reasoningEffort is not supported for non-reasoning models"}),(null==t?void 0:t.reasoningSummary)!=null&&r.push({type:"unsupported-setting",setting:"reasoningSummary",details:"reasoningSummary is not supported for non-reasoning models"})),(null==t?void 0:t.serviceTier)!=="flex"||s.supportsFlexProcessing||(r.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),delete B.service_tier),(null==t?void 0:t.serviceTier)!=="priority"||s.supportsPriorityProcessing||(r.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),delete B.service_tier);let{tools:C,toolChoice:D,toolWarnings:E}=function({tools:a,toolChoice:b,strictJsonSchema:c}){a=(null==a?void 0:a.length)?a:void 0;let d=[];if(null==a)return{tools:void 0,toolChoice:void 0,toolWarnings:d};let e=[];for(let b of a)switch(b.type){case"function":e.push({type:"function",name:b.name,description:b.description,parameters:b.inputSchema,strict:c});break;case"provider-defined":switch(b.id){case"openai.file_search":{let a=kN.parse(b.args);e.push({type:"file_search",vector_store_ids:a.vectorStoreIds,max_num_results:a.maxNumResults,ranking_options:a.ranking?{ranker:a.ranking.ranker,score_threshold:a.ranking.scoreThreshold}:void 0,filters:a.filters});break}case"openai.web_search_preview":{let a=kV.parse(b.args);e.push({type:"web_search_preview",search_context_size:a.searchContextSize,user_location:a.userLocation});break}case"openai.web_search":{let a=kT.parse(b.args);e.push({type:"web_search",filters:null!=a.filters?{allowed_domains:a.filters.allowedDomains}:void 0,search_context_size:a.searchContextSize,user_location:a.userLocation});break}case"openai.code_interpreter":{let a=kJ.parse(b.args);e.push({type:"code_interpreter",container:null==a.container?{type:"auto",file_ids:void 0}:"string"==typeof a.container?a.container:{type:"auto",file_ids:a.container.fileIds}});break}case"openai.image_generation":{let a=kQ.parse(b.args);e.push({type:"image_generation",background:a.background,input_fidelity:a.inputFidelity,input_image_mask:a.inputImageMask?{file_id:a.inputImageMask.fileId,image_url:a.inputImageMask.imageUrl}:void 0,model:a.model,size:a.size,quality:a.quality,moderation:a.moderation,output_format:a.outputFormat,output_compression:a.outputCompression})}}break;default:d.push({type:"unsupported-tool",tool:b})}if(null==b)return{tools:e,toolChoice:void 0,toolWarnings:d};let f=b.type;switch(f){case"auto":case"none":case"required":return{tools:e,toolChoice:f,toolWarnings:d};case"tool":return{tools:e,toolChoice:"code_interpreter"===b.toolName||"file_search"===b.toolName||"image_generation"===b.toolName||"web_search_preview"===b.toolName||"web_search"===b.toolName?{type:b.toolName}:{type:"function",name:b.toolName},toolWarnings:d};default:throw new bg({functionality:`tool choice type: ${f}`})}}({tools:k,toolChoice:l,strictJsonSchema:w});return{webSearchToolName:A,args:{...B,tools:C,tool_choice:D},warnings:[...r,...E]}}async doGenerate(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;let{args:u,warnings:v,webSearchToolName:w}=await this.getArgs(a),x=this.config.url({path:"/responses",modelId:this.modelId}),{responseHeaders:y,value:z,rawValue:A}=await dx({url:x,headers:c5(this.config.headers(),a.headers),body:u,failedResponseHandler:kj,successfulResponseHandler:dF(gE({id:f3(),created_at:gp(),error:gE({code:f3(),message:f3()}).nullish(),model:f3(),output:gC(gK("type",[gE({type:gR("message"),role:gR("assistant"),id:f3(),content:gC(gE({type:gR("output_text"),text:f3(),logprobs:k3.nullish(),annotations:gC(gK("type",[gE({type:gR("url_citation"),start_index:gp(),end_index:gp(),url:f3(),title:f3()}),gE({type:gR("file_citation"),file_id:f3(),filename:f3().nullish(),index:gp().nullish(),start_index:gp().nullish(),end_index:gp().nullish(),quote:f3().nullish()}),gE({type:gR("container_file_citation")})]))}))}),k_,k0,k1,k2,gE({type:gR("function_call"),call_id:f3(),name:f3(),arguments:f3(),id:f3()}),gE({type:gR("computer_call"),id:f3(),status:f3().optional()}),gE({type:gR("reasoning"),id:f3(),encrypted_content:f3().nullish(),summary:gC(gE({type:gR("summary_text"),text:f3()}))})])),service_tier:f3().nullish(),incomplete_details:gE({reason:f3()}).nullish(),usage:k5})),abortSignal:a.abortSignal,fetch:this.config.fetch});if(z.error)throw new aD({message:z.error.message,url:x,requestBodyValues:u,statusCode:400,responseHeaders:y,responseBody:A,isRetryable:!1});let B=[],C=[],D=!1;for(let p of z.output)switch(p.type){case"reasoning":for(let a of(0===p.summary.length&&p.summary.push({type:"summary_text",text:""}),p.summary))B.push({type:"reasoning",text:a.text,providerMetadata:{openai:{itemId:p.id,reasoningEncryptedContent:null!=(b=p.encrypted_content)?b:null}}});break;case"image_generation_call":B.push({type:"tool-call",toolCallId:p.id,toolName:"image_generation",input:"{}",providerExecuted:!0}),B.push({type:"tool-result",toolCallId:p.id,toolName:"image_generation",result:{result:p.result},providerExecuted:!0});break;case"message":for(let b of p.content)for(let n of((null==(d=null==(c=a.providerOptions)?void 0:c.openai)?void 0:d.logprobs)&&b.logprobs&&C.push(b.logprobs),B.push({type:"text",text:b.text,providerMetadata:{openai:{itemId:p.id}}}),b.annotations))"url_citation"===n.type?B.push({type:"source",sourceType:"url",id:null!=(g=null==(f=(e=this.config).generateId)?void 0:f.call(e))?g:dc(),url:n.url,title:n.title}):"file_citation"===n.type&&B.push({type:"source",sourceType:"document",id:null!=(j=null==(i=(h=this.config).generateId)?void 0:i.call(h))?j:dc(),mediaType:"text/plain",title:null!=(l=null!=(k=n.quote)?k:n.filename)?l:"Document",filename:null!=(m=n.filename)?m:n.file_id});break;case"function_call":D=!0,B.push({type:"tool-call",toolCallId:p.call_id,toolName:p.name,input:p.arguments,providerMetadata:{openai:{itemId:p.id}}});break;case"web_search_call":B.push({type:"tool-call",toolCallId:p.id,toolName:null!=w?w:"web_search",input:JSON.stringify({action:p.action}),providerExecuted:!0}),B.push({type:"tool-result",toolCallId:p.id,toolName:null!=w?w:"web_search",result:{status:p.status},providerExecuted:!0});break;case"computer_call":B.push({type:"tool-call",toolCallId:p.id,toolName:"computer_use",input:"",providerExecuted:!0}),B.push({type:"tool-result",toolCallId:p.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:p.status||"completed"},providerExecuted:!0});break;case"file_search_call":B.push({type:"tool-call",toolCallId:p.id,toolName:"file_search",input:"{}",providerExecuted:!0}),B.push({type:"tool-result",toolCallId:p.id,toolName:"file_search",result:{queries:p.queries,results:null!=(o=null==(n=p.results)?void 0:n.map(a=>({attributes:a.attributes,fileId:a.file_id,filename:a.filename,score:a.score,text:a.text})))?o:null},providerExecuted:!0});break;case"code_interpreter_call":B.push({type:"tool-call",toolCallId:p.id,toolName:"code_interpreter",input:JSON.stringify({code:p.code,containerId:p.container_id}),providerExecuted:!0}),B.push({type:"tool-result",toolCallId:p.id,toolName:"code_interpreter",result:{outputs:p.outputs},providerExecuted:!0})}let E={openai:{responseId:z.id}};return C.length>0&&(E.openai.logprobs=C),"string"==typeof z.service_tier&&(E.openai.serviceTier=z.service_tier),{content:B,finishReason:k$({finishReason:null==(p=z.incomplete_details)?void 0:p.reason,hasFunctionCall:D}),usage:{inputTokens:z.usage.input_tokens,outputTokens:z.usage.output_tokens,totalTokens:z.usage.input_tokens+z.usage.output_tokens,reasoningTokens:null!=(r=null==(q=z.usage.output_tokens_details)?void 0:q.reasoning_tokens)?r:void 0,cachedInputTokens:null!=(t=null==(s=z.usage.input_tokens_details)?void 0:s.cached_tokens)?t:void 0},request:{body:u},response:{id:z.id,timestamp:new Date(1e3*z.created_at),modelId:z.model,headers:y,body:A},providerMetadata:E,warnings:v}}async doStream(a){let b,{args:c,warnings:d,webSearchToolName:e}=await this.getArgs(a),{responseHeaders:f,value:g}=await dx({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:c5(this.config.headers(),a.headers),body:{...c,stream:!0},failedResponseHandler:kj,successfulResponseHandler:dE(k8),abortSignal:a.abortSignal,fetch:this.config.fetch}),h=this,i="unknown",j={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},k=[],l=null,m={},n=!1,o={};return{stream:g.pipeThrough(new TransformStream({start(a){a.enqueue({type:"stream-start",warnings:d})},transform(c,d){var f,g,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M;if(a.includeRawChunks&&d.enqueue({type:"raw",rawValue:c.rawValue}),!c.success){i="error",d.enqueue({type:"error",error:c.error});return}let N=c.value;if(la(N)){"function_call"===N.item.type?(m[N.output_index]={toolName:N.item.name,toolCallId:N.item.call_id},d.enqueue({type:"tool-input-start",id:N.item.call_id,toolName:N.item.name})):"web_search_call"===N.item.type?(m[N.output_index]={toolName:null!=e?e:"web_search",toolCallId:N.item.id},d.enqueue({type:"tool-input-start",id:N.item.id,toolName:null!=e?e:"web_search"})):"computer_call"===N.item.type?(m[N.output_index]={toolName:"computer_use",toolCallId:N.item.id},d.enqueue({type:"tool-input-start",id:N.item.id,toolName:"computer_use"})):"file_search_call"===N.item.type?d.enqueue({type:"tool-call",toolCallId:N.item.id,toolName:"file_search",input:"{}",providerExecuted:!0}):"image_generation_call"===N.item.type?d.enqueue({type:"tool-call",toolCallId:N.item.id,toolName:"image_generation",input:"{}",providerExecuted:!0}):"message"===N.item.type?d.enqueue({type:"text-start",id:N.item.id,providerMetadata:{openai:{itemId:N.item.id}}}):la(K=N)&&"reasoning"===K.item.type&&(o[N.item.id]={encryptedContent:N.item.encrypted_content,summaryParts:[0]},d.enqueue({type:"reasoning-start",id:`${N.item.id}:0`,providerMetadata:{openai:{itemId:N.item.id,reasoningEncryptedContent:null!=(f=N.item.encrypted_content)?f:null}}}))}else if(k9(N))if("function_call"===N.item.type)m[N.output_index]=void 0,n=!0,d.enqueue({type:"tool-input-end",id:N.item.call_id}),d.enqueue({type:"tool-call",toolCallId:N.item.call_id,toolName:N.item.name,input:N.item.arguments,providerMetadata:{openai:{itemId:N.item.id}}});else if("web_search_call"===N.item.type)m[N.output_index]=void 0,d.enqueue({type:"tool-input-end",id:N.item.id}),d.enqueue({type:"tool-call",toolCallId:N.item.id,toolName:"web_search",input:JSON.stringify({action:N.item.action}),providerExecuted:!0}),d.enqueue({type:"tool-result",toolCallId:N.item.id,toolName:"web_search",result:{status:N.item.status},providerExecuted:!0});else if("computer_call"===N.item.type)m[N.output_index]=void 0,d.enqueue({type:"tool-input-end",id:N.item.id}),d.enqueue({type:"tool-call",toolCallId:N.item.id,toolName:"computer_use",input:"",providerExecuted:!0}),d.enqueue({type:"tool-result",toolCallId:N.item.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:N.item.status||"completed"},providerExecuted:!0});else if("file_search_call"===N.item.type)m[N.output_index]=void 0,d.enqueue({type:"tool-result",toolCallId:N.item.id,toolName:"file_search",result:{queries:N.item.queries,results:null!=(p=null==(g=N.item.results)?void 0:g.map(a=>({attributes:a.attributes,fileId:a.file_id,filename:a.filename,score:a.score,text:a.text})))?p:null},providerExecuted:!0});else if("code_interpreter_call"===N.item.type)d.enqueue({type:"tool-call",toolCallId:N.item.id,toolName:"code_interpreter",input:JSON.stringify({code:N.item.code,containerId:N.item.container_id}),providerExecuted:!0}),d.enqueue({type:"tool-result",toolCallId:N.item.id,toolName:"code_interpreter",result:{outputs:N.item.outputs},providerExecuted:!0});else if("image_generation_call"===N.item.type)d.enqueue({type:"tool-result",toolCallId:N.item.id,toolName:"image_generation",result:{result:N.item.result},providerExecuted:!0});else if("message"===N.item.type)d.enqueue({type:"text-end",id:N.item.id});else{if(k9(L=N)&&"reasoning"===L.item.type){for(let a of o[N.item.id].summaryParts)d.enqueue({type:"reasoning-end",id:`${N.item.id}:${a}`,providerMetadata:{openai:{itemId:N.item.id,reasoningEncryptedContent:null!=(q=N.item.encrypted_content)?q:null}}});delete o[N.item.id]}}else if("response.function_call_arguments.delta"===N.type){let a=m[N.output_index];null!=a&&d.enqueue({type:"tool-input-delta",id:a.toolCallId,delta:N.delta})}else{"response.created"===N.type?(l=N.response.id,d.enqueue({type:"response-metadata",id:N.response.id,timestamp:new Date(1e3*N.response.created_at),modelId:N.response.model})):"response.output_text.delta"===N.type?(d.enqueue({type:"text-delta",id:N.item_id,delta:N.delta}),(null==(s=null==(r=a.providerOptions)?void 0:r.openai)?void 0:s.logprobs)&&N.logprobs&&k.push(N.logprobs)):"response.reasoning_summary_part.added"===N.type?N.summary_index>0&&(null==(t=o[N.item_id])||t.summaryParts.push(N.summary_index),d.enqueue({type:"reasoning-start",id:`${N.item_id}:${N.summary_index}`,providerMetadata:{openai:{itemId:N.item_id,reasoningEncryptedContent:null!=(v=null==(u=o[N.item_id])?void 0:u.encryptedContent)?v:null}}})):"response.reasoning_summary_text.delta"===N.type?d.enqueue({type:"reasoning-delta",id:`${N.item_id}:${N.summary_index}`,delta:N.delta,providerMetadata:{openai:{itemId:N.item_id}}}):"response.completed"===(M=N).type||"response.incomplete"===M.type?(i=k$({finishReason:null==(w=N.response.incomplete_details)?void 0:w.reason,hasFunctionCall:n}),j.inputTokens=N.response.usage.input_tokens,j.outputTokens=N.response.usage.output_tokens,j.totalTokens=N.response.usage.input_tokens+N.response.usage.output_tokens,j.reasoningTokens=null!=(y=null==(x=N.response.usage.output_tokens_details)?void 0:x.reasoning_tokens)?y:void 0,j.cachedInputTokens=null!=(A=null==(z=N.response.usage.input_tokens_details)?void 0:z.cached_tokens)?A:void 0,"string"==typeof N.response.service_tier&&(b=N.response.service_tier)):"response.output_text.annotation.added"===N.type?"url_citation"===N.annotation.type?d.enqueue({type:"source",sourceType:"url",id:null!=(D=null==(C=(B=h.config).generateId)?void 0:C.call(B))?D:dc(),url:N.annotation.url,title:N.annotation.title}):"file_citation"===N.annotation.type&&d.enqueue({type:"source",sourceType:"document",id:null!=(G=null==(F=(E=h.config).generateId)?void 0:F.call(E))?G:dc(),mediaType:"text/plain",title:null!=(I=null!=(H=N.annotation.quote)?H:N.annotation.filename)?I:"Document",filename:null!=(J=N.annotation.filename)?J:N.annotation.file_id}):"error"===N.type&&d.enqueue({type:"error",error:N})}},flush(a){let c={openai:{responseId:l}};k.length>0&&(c.openai.logprobs=k),void 0!==b&&(c.openai.serviceTier=b),a.enqueue({type:"finish",finishReason:i,usage:j,providerMetadata:c})}})),request:{body:c},response:{headers:f}}}},k5=gE({input_tokens:gp(),input_tokens_details:gE({cached_tokens:gp().nullish()}).nullish(),output_tokens:gp(),output_tokens_details:gE({reasoning_tokens:gp().nullish()}).nullish()}),k6=gE({type:gR("response.output_text.delta"),item_id:f3(),delta:f3(),logprobs:k3.nullish()}),k7=gE({type:gR("error"),code:f3(),message:f3(),param:f3().nullish(),sequence_number:gp()}),k8=gI([k6,gE({type:gP(["response.completed","response.incomplete"]),response:gE({incomplete_details:gE({reason:f3()}).nullish(),usage:k5,service_tier:f3().nullish()})}),gE({type:gR("response.created"),response:gE({id:f3(),created_at:gp(),model:f3(),service_tier:f3().nullish()})}),gE({type:gR("response.output_item.added"),output_index:gp(),item:gK("type",[gE({type:gR("message"),id:f3()}),gE({type:gR("reasoning"),id:f3(),encrypted_content:f3().nullish()}),gE({type:gR("function_call"),id:f3(),call_id:f3(),name:f3(),arguments:f3()}),gE({type:gR("web_search_call"),id:f3(),status:f3(),action:gE({type:gR("search"),query:f3().optional()}).nullish()}),gE({type:gR("computer_call"),id:f3(),status:f3()}),gE({type:gR("file_search_call"),id:f3()}),gE({type:gR("image_generation_call"),id:f3()})])}),gE({type:gR("response.output_item.done"),output_index:gp(),item:gK("type",[gE({type:gR("message"),id:f3()}),gE({type:gR("reasoning"),id:f3(),encrypted_content:f3().nullish()}),gE({type:gR("function_call"),id:f3(),call_id:f3(),name:f3(),arguments:f3(),status:gR("completed")}),k1,k2,k_,k0,gE({type:gR("computer_call"),id:f3(),status:gR("completed")})])}),gE({type:gR("response.function_call_arguments.delta"),item_id:f3(),output_index:gp(),delta:f3()}),gE({type:gR("response.output_text.annotation.added"),annotation:gK("type",[gE({type:gR("url_citation"),url:f3(),title:f3()}),gE({type:gR("file_citation"),file_id:f3(),filename:f3().nullish(),index:gp().nullish(),start_index:gp().nullish(),end_index:gp().nullish(),quote:f3().nullish()})])}),gE({type:gR("response.reasoning_summary_part.added"),item_id:f3(),summary_index:gp()}),gE({type:gR("response.reasoning_summary_text.delta"),item_id:f3(),summary_index:gp(),delta:f3()}),k7,gE({type:f3()}).loose()]);function k9(a){return"response.output_item.done"===a.type}function la(a){return"response.output_item.added"===a.type}var lb=gE({include:gC(gP(["reasoning.encrypted_content","file_search_call.results","message.output_text.logprobs"])).nullish(),instructions:f3().nullish(),logprobs:gI([gt(),gp().min(1).max(20)]).optional(),maxToolCalls:gp().nullish(),metadata:gw().nullish(),parallelToolCalls:gt().nullish(),previousResponseId:f3().nullish(),promptCacheKey:f3().nullish(),reasoningEffort:f3().nullish(),reasoningSummary:f3().nullish(),safetyIdentifier:f3().nullish(),serviceTier:gP(["auto","flex","priority"]).nullish(),store:gt().nullish(),strictJsonSchema:gt().nullish(),textVerbosity:gP(["low","medium","high"]).nullish(),user:f3().nullish()}),lc=gE({instructions:f3().nullish(),speed:gp().min(.25).max(4).default(1).nullish()}),ld=class{constructor(a,b){this.modelId=a,this.config=b,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({text:a,voice:b="alloy",outputFormat:c="mp3",speed:d,instructions:e,language:f,providerOptions:g}){let h=[],i=await dv({provider:"openai",providerOptions:g,schema:lc}),j={model:this.modelId,input:a,voice:b,response_format:"mp3",speed:d,instructions:e};if(c&&(["mp3","opus","aac","flac","wav","pcm"].includes(c)?j.response_format=c:h.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${c}. Using mp3 instead.`})),i){let a={};for(let b in a){let c=a[b];void 0!==c&&(j[b]=c)}}return f&&h.push({type:"unsupported-setting",setting:"language",details:`OpenAI speech models do not support language selection. Language parameter "${f}" was ignored.`}),{requestBody:j,warnings:h}}async doGenerate(a){var b,c,d;let e=null!=(d=null==(c=null==(b=this.config._internal)?void 0:b.currentDate)?void 0:c.call(b))?d:new Date,{requestBody:f,warnings:g}=await this.getArgs(a),{value:h,responseHeaders:i,rawValue:j}=await dx({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:c5(this.config.headers(),a.headers),body:f,failedResponseHandler:kj,successfulResponseHandler:async({response:a,url:b,requestBodyValues:c})=>{let d=c8(a);if(!a.body)throw new aD({message:"Response body is empty",url:b,requestBodyValues:c,statusCode:a.status,responseHeaders:d,responseBody:void 0});try{let b=await a.arrayBuffer();return{responseHeaders:d,value:new Uint8Array(b)}}catch(e){throw new aD({message:"Failed to read response as array buffer",url:b,requestBodyValues:c,statusCode:a.status,responseHeaders:d,responseBody:void 0,cause:e})}},abortSignal:a.abortSignal,fetch:this.config.fetch});return{audio:h,warnings:g,request:{body:JSON.stringify(f)},response:{timestamp:e,modelId:this.modelId,headers:i,body:j}}}},le=gE({include:gC(f3()).optional(),language:f3().optional(),prompt:f3().optional(),temperature:gp().min(0).max(1).default(0).optional(),timestampGranularities:gC(gP(["word","segment"])).default(["segment"]).optional()}),lf={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},lg=class{constructor(a,b){this.modelId=a,this.config=b,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({audio:a,mediaType:b,providerOptions:c}){let d=await dv({provider:"openai",providerOptions:c,schema:le}),e=new FormData,f=a instanceof Uint8Array?new Blob([a]):new Blob([d_(a)]);e.append("model",this.modelId);let g=function(a){var b;let[c,d=""]=a.toLowerCase().split("/");return null!=(b=({mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"})[d])?b:d}(b);if(e.append("file",new File([f],"audio",{type:b}),`audio.${g}`),d){for(let[a,b]of Object.entries({include:d.include,language:d.language,prompt:d.prompt,response_format:["gpt-4o-transcribe","gpt-4o-mini-transcribe"].includes(this.modelId)?"json":"verbose_json",temperature:d.temperature,timestamp_granularities:d.timestampGranularities}))if(null!=b)if(Array.isArray(b))for(let c of b)e.append(`${a}[]`,String(c));else e.append(a,String(b))}return{formData:e,warnings:[]}}async doGenerate(a){var b,c,d,e,f,g,h,i;let j=null!=(d=null==(c=null==(b=this.config._internal)?void 0:b.currentDate)?void 0:c.call(b))?d:new Date,{formData:k,warnings:l}=await this.getArgs(a),{value:m,responseHeaders:n,rawValue:o}=await dy({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:c5(this.config.headers(),a.headers),formData:k,failedResponseHandler:kj,successfulResponseHandler:dF(lh),abortSignal:a.abortSignal,fetch:this.config.fetch}),p=null!=m.language&&m.language in lf?lf[m.language]:void 0;return{text:m.text,segments:null!=(h=null!=(g=null==(e=m.segments)?void 0:e.map(a=>({text:a.text,startSecond:a.start,endSecond:a.end})))?g:null==(f=m.words)?void 0:f.map(a=>({text:a.word,startSecond:a.start,endSecond:a.end})))?h:[],language:p,durationInSeconds:null!=(i=m.duration)?i:void 0,warnings:l,response:{timestamp:j,modelId:this.modelId,headers:n,body:o}}}},lh=gE({text:f3(),language:f3().nullish(),duration:gp().nullish(),words:gC(gE({word:f3(),start:gp(),end:gp()})).nullish(),segments:gC(gE({id:gp(),seek:gp(),start:gp(),end:gp(),text:f3(),tokens:gC(gp()),temperature:gp(),avg_logprob:gp(),compression_ratio:gp(),no_speech_prob:gp()})).nullish()}),li=function(a={}){var b,c;let d=null!=(b=d2(a.baseURL))?b:"https://api.openai.com/v1",e=null!=(c=a.name)?c:"openai",f=()=>da({Authorization:`Bearer ${function({apiKey:a,environmentVariableName:b,apiKeyParameterName:c="apiKey",description:d}){if("string"==typeof a)return a;if(null!=a)throw new a0({message:`${d} API key must be a string.`});if("undefined"==typeof process)throw new a0({message:`${d} API key is missing. Pass it using the '${c}' parameter. Environment variables is not supported in this environment.`});if(null==(a=process.env[b]))throw new a0({message:`${d} API key is missing. Pass it using the '${c}' parameter or the ${b} environment variable.`});if("string"!=typeof a)throw new a0({message:`${d} API key must be a string. The value of the ${b} environment variable is not a string.`});return a}({apiKey:a.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":a.organization,"OpenAI-Project":a.project,...a.headers},"ai-sdk/openai/2.0.36"),g=b=>new kB(b,{provider:`${e}.embedding`,url:({path:a})=>`${d}${a}`,headers:f,fetch:a.fetch}),h=b=>new kF(b,{provider:`${e}.image`,url:({path:a})=>`${d}${a}`,headers:f,fetch:a.fetch}),i=b=>new lg(b,{provider:`${e}.transcription`,url:({path:a})=>`${d}${a}`,headers:f,fetch:a.fetch}),j=b=>new ld(b,{provider:`${e}.speech`,url:({path:a})=>`${d}${a}`,headers:f,fetch:a.fetch}),k=a=>{if(new.target)throw Error("The OpenAI model function cannot be called with the new keyword.");return l(a)},l=b=>new k4(b,{provider:`${e}.responses`,url:({path:a})=>`${d}${a}`,headers:f,fetch:a.fetch,fileIdPrefixes:["file-"]}),m=function(a){return k(a)};return m.languageModel=k,m.chat=b=>new kn(b,{provider:`${e}.chat`,url:({path:a})=>`${d}${a}`,headers:f,fetch:a.fetch}),m.completion=b=>new kw(b,{provider:`${e}.completion`,url:({path:a})=>`${d}${a}`,headers:f,fetch:a.fetch}),m.responses=l,m.embedding=g,m.textEmbedding=g,m.textEmbeddingModel=g,m.image=h,m.imageModel=h,m.transcription=i,m.transcriptionModel=i,m.speech=j,m.speechModel=j,m.tools=kW,m}();class lj{constructor(a){this.userContext={workStyle:"focused",preferredWorkHours:{start:"09:00",end:"17:00"},energyPatterns:{morning:.8,afternoon:.6,evening:.4},currentWorkload:0,goals:[],...a}}async optimizeTaskList(a){try{let b=a.filter(a=>"completed"!==a.status);if(0===b.length)return{optimizedOrder:[],workloadAnalysis:this.createEmptyWorkloadAnalysis(),suggestions:[],productivityTips:["No active tasks to optimize!"]};let c=await Promise.all(b.map(a=>this.generateTaskSuggestion(a,b))),d=this.createOptimizedOrder(b,c),e=this.analyzeWorkload(b,c),f=await this.generateProductivityTips(b,e);return{optimizedOrder:d,workloadAnalysis:e,suggestions:c,productivityTips:f}}catch(a){throw(0,V.vV)("Error optimizing task list:",a),Error("Failed to optimize task list")}}async generateTaskSuggestion(a,b){try{let c=this.buildTaskAnalysisPrompt(a,b),d=await jP({model:li("gpt-4-turbo"),prompt:c,temperature:.3,maxOutputTokens:500});return this.parseTaskSuggestion(d.text,a.id)}catch(b){return(0,V.vV)("Error generating task suggestion:",b),this.createDefaultSuggestion(a)}}createOptimizedOrder(a,b){let c=new Map(b.map(a=>[a.taskId,a])),d=a.map(a=>{let b=c.get(a.id),d=this.calculateTaskScore(a,b);return{taskId:a.id,score:d}});return d.sort((a,b)=>b.score-a.score),d.map(a=>a.taskId)}calculateTaskScore(a,b){let c;if(c=0+10*({low:1,medium:2,high:3,urgent:4})[a.priority],a.due_date){let b=new Date(a.due_date),d=new Date,e=Math.ceil((b.getTime()-d.getTime())/864e5);e<0?c+=50:0===e?c+=40:1===e?c+=30:e<=3?c+=20:e<=7&&(c+=10)}return b&&(c+=5*b.confidence+(3*({low:1,medium:2,high:3})[b.impact]+3*({low:1,medium:2,high:3})[b.urgency])),a.estimated_minutes&&(a.estimated_minutes<=30?c+=5:a.estimated_minutes<=120&&(c+=2)),c}analyzeWorkload(a,b){let c=a.length,d=a.reduce((a,b)=>a+(b.estimated_minutes||0),0),e=a.filter(a=>"high"===a.priority||"urgent"===a.priority).length,f=a.filter(a=>!!a.due_date&&new Date(a.due_date)<new Date).length,g=Math.min(100,Math.max(0,5*c+d/60*2+10*e+15*f)),h=this.generateWorkloadRecommendations(c,d,e,f,g);return{totalTasks:c,estimatedTotalTime:d,highPriorityTasks:e,overdueTasks:f,workloadScore:g,recommendations:h,suggestedSchedule:this.createSuggestedSchedule(a,b)}}generateWorkloadRecommendations(a,b,c,d,e){let f=[];return e>80?f.push("\uD83D\uDEA8 High workload detected! Consider delegating or postponing non-urgent tasks."):e>60?f.push(" Moderate workload. Focus on high-priority items first."):f.push(" Manageable workload. You can take on additional tasks if needed."),d>0&&f.push(` You have ${d} overdue task(s). Address these immediately.`),c>5&&f.push(` You have ${c} high-priority tasks. Consider breaking them down.`),b>480&&f.push(" Estimated work time exceeds 8 hours. Consider spreading tasks across multiple days."),f}createSuggestedSchedule(a,b){let c=[],d=[],e=[];return this.createOptimizedOrder(a,b).map(b=>a.find(a=>a.id===b)).filter(Boolean).forEach(a=>{let f=b.find(b=>b.taskId===a.id),g=f?.difficulty==="easy"||a.estimated_minutes<=60,h=f?.difficulty==="medium"||a.estimated_minutes>60&&a.estimated_minutes<=180,i=f?.difficulty==="hard"||a.estimated_minutes>180;g&&c.length<3?c.push(a.id):h&&d.length<4?d.push(a.id):i&&e.length<2?e.push(a.id):c.length<3?c.push(a.id):d.length<4?d.push(a.id):e.length<2&&e.push(a.id)}),{morning:c,afternoon:d,evening:e}}async generateProductivityTips(a,b){try{let a=`Based on this workload analysis, provide 3-5 actionable productivity tips:

Workload Score: ${b.workloadScore}/100
Total Tasks: ${b.totalTasks}
Estimated Time: ${Math.round(b.estimatedTotalTime/60)} hours
High Priority Tasks: ${b.highPriorityTasks}
Overdue Tasks: ${b.overdueTasks}

Provide specific, actionable tips that would help improve productivity and task management. Keep each tip under 100 characters.`;return(await jP({model:li("gpt-4-turbo"),prompt:a,temperature:.7,maxOutputTokens:300})).text.split("\n").filter(a=>a.trim().length>0).slice(0,5)}catch(a){return(0,V.vV)("Error generating productivity tips:",a),["\uD83C\uDFAF Focus on one task at a time for better results"," Use time blocking to structure your day"," Celebrate small wins to maintain momentum"]}}buildTaskAnalysisPrompt(a,b){return`Analyze this task and provide intelligent suggestions:

TASK: ${a.title}
DESCRIPTION: ${a.description||"No description"}
PRIORITY: ${a.priority}
DUE DATE: ${a.due_date||"No due date"}
ESTIMATED TIME: ${a.estimated_minutes||"Unknown"} minutes
CATEGORY: ${a.category||"Uncategorized"}
TAGS: ${a.tags?.join(", ")||"None"}

CONTEXT:
- Total active tasks: ${b.length}
- User work style: ${this.userContext.workStyle}
- Preferred hours: ${this.userContext.preferredWorkHours.start} - ${this.userContext.preferredWorkHours.end}

Provide a JSON response with:
{
  "suggestedPriority": "low|medium|high|urgent",
  "suggestedDeadline": "YYYY-MM-DD or null",
  "suggestedCategory": "category name",
  "suggestedTags": ["tag1", "tag2"],
  "confidence": 0.0-1.0,
  "reasoning": "brief explanation",
  "estimatedCompletionTime": minutes,
  "dependencies": ["task_id1", "task_id2"],
  "difficulty": "easy|medium|hard",
  "impact": "low|medium|high",
  "urgency": "low|medium|high"
}`}parseTaskSuggestion(a,b){try{let c=a.match(/\{[\s\S]*\}/);if(!c)throw Error("No JSON found in response");let d=JSON.parse(c[0]);return{taskId:b,suggestedPriority:d.suggestedPriority||"medium",suggestedDeadline:d.suggestedDeadline,suggestedCategory:d.suggestedCategory,suggestedTags:d.suggestedTags||[],confidence:d.confidence||.5,reasoning:d.reasoning||"AI analysis completed",estimatedCompletionTime:d.estimatedCompletionTime,dependencies:d.dependencies||[],difficulty:d.difficulty||"medium",impact:d.impact||"medium",urgency:d.urgency||"medium"}}catch(a){return(0,V.vV)("Error parsing task suggestion:",a),this.createDefaultSuggestion({id:b})}}createDefaultSuggestion(a){return{taskId:a.id,suggestedPriority:a.priority,suggestedDeadline:a.due_date,suggestedCategory:a.category,suggestedTags:a.tags||[],confidence:.5,reasoning:"Default suggestion - AI analysis unavailable",estimatedCompletionTime:a.estimated_minutes,dependencies:[],difficulty:"medium",impact:"medium",urgency:"medium"}}createEmptyWorkloadAnalysis(){return{totalTasks:0,estimatedTotalTime:0,highPriorityTasks:0,overdueTasks:0,workloadScore:0,recommendations:["No tasks to analyze"],suggestedSchedule:{morning:[],afternoon:[],evening:[]}}}updateUserContext(a){this.userContext={...this.userContext,...a}}}function lk({tasks:a,onApplySuggestion:b,onReorderTasks:c,className:d=""}){let[e,f]=(0,W.useState)(!1),[g,h]=(0,W.useState)(new Set),{optimizeTasks:i,getOptimizedOrder:j,getWorkloadAnalysis:k,getProductivityTips:l,getTaskSuggestions:m,getSuggestionForTask:n,loading:o,error:p,lastOptimized:q,optimizationResult:r}=function(a={}){let{user:b}=(0,av.A)(),[c]=(0,W.useState)(()=>new lj),[d,e]=(0,W.useState)(null),[f,g]=(0,W.useState)(!1),[h,i]=(0,W.useState)(null),[j,k]=(0,W.useState)(null),{autoOptimize:l=!0,refreshInterval:m=3e5,enableAI:n=!0}=a,o=(0,W.useCallback)(async a=>{if(!b||!n)return i("User not authenticated or AI disabled"),null;try{g(!0),i(null);let b=await c.optimizeTaskList(a);return e(b),k(new Date),b}catch(a){return i(a instanceof Error?a.message:"Failed to optimize tasks"),(0,V.vV)("Task optimization error:",a),null}finally{g(!1)}},[b,n,c]),p=(0,W.useCallback)(async(a,d)=>{if(!b||!n)return null;try{return await c.generateTaskSuggestion(a,d)}catch(a){return(0,V.vV)("Error getting task suggestion:",a),null}},[b,n,c]),q=(0,W.useCallback)(async(a,b)=>{try{return{taskId:a,applied:!0,changes:{priority:b.suggestedPriority,due_date:b.suggestedDeadline,category:b.suggestedCategory,tags:b.suggestedTags,estimated_minutes:b.estimatedCompletionTime}}}catch(a){return(0,V.vV)("Error applying task suggestion:",a),null}},[]),r=(0,W.useCallback)(()=>d?.optimizedOrder||[],[d]),s=(0,W.useCallback)(()=>d?.workloadAnalysis||null,[d]),t=(0,W.useCallback)(()=>d?.productivityTips||[],[d]),u=(0,W.useCallback)(()=>d?.suggestions||[],[d]),v=(0,W.useCallback)(a=>d?.suggestions.find(b=>b.taskId===a)||null,[d]),w=(0,W.useCallback)(a=>{c.updateUserContext(a)},[c]),x=(0,W.useCallback)(()=>d?.workloadAnalysis.suggestedSchedule||{morning:[],afternoon:[],evening:[]},[d]),y=(0,W.useCallback)(()=>{let a=s();return!a||a.workloadScore<80},[s]),z=(0,W.useCallback)(a=>{let b=u().filter(a=>"high"===a.urgency||"urgent"===a.suggestedPriority).map(a=>a.taskId);return a.filter(a=>b.includes(a.id))},[u]),A=(0,W.useCallback)(a=>{let b=u().filter(a=>"easy"===a.difficulty&&30>=(a.estimatedCompletionTime||0)).map(a=>a.taskId);return a.filter(a=>b.includes(a.id))},[u]),B=(0,W.useCallback)(a=>{let b=u().filter(a=>"high"===a.impact).map(a=>a.taskId);return a.filter(a=>b.includes(a.id))},[u]),C=(0,W.useCallback)(async a=>await o(a),[o]),D=(0,W.useCallback)(()=>({loading:f,error:h,lastOptimized:j,hasResults:!!d,isWorkloadManageable:y(),totalSuggestions:u().length}),[f,h,j,d,y,u]);return{optimizeTasks:o,getTaskSuggestion:p,applyTaskSuggestion:q,refreshOptimization:C,getOptimizedOrder:r,getWorkloadAnalysis:s,getProductivityTips:t,getTaskSuggestions:u,getSuggestionForTask:v,getSuggestedSchedule:x,getUrgentTasks:z,getQuickWins:A,getHighImpactTasks:B,getOptimizationStatus:D,updateUserContext:w,isWorkloadManageable:y,loading:f,error:h,lastOptimized:j,optimizationResult:d}}({autoOptimize:!1,enableAI:!0}),s=async()=>{f(!0);try{await i(a)}catch(a){(0,V.vV)("Failed to optimize tasks:",a)}finally{f(!1)}},t=async a=>{let c=n(a);if(c)try{await b(a,c),h(b=>new Set([...b,a]))}catch(a){(0,V.vV)("Failed to apply suggestion:",a)}},u=async()=>{let a=j();if(0!==a.length)try{await c(a)}catch(a){(0,V.vV)("Failed to apply optimized order:",a)}},v=k(),w=m(),x=l(),y=j();return 0===a.length?(0,U.jsx)(X.Zp,{className:d,children:(0,U.jsx)(X.Wu,{className:"p-6",children:(0,U.jsxs)("div",{className:"text-center text-gray-500",children:[(0,U.jsx)(ao.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,U.jsx)("p",{children:"Add tasks to see AI-powered insights"})]})})}):(0,U.jsxs)(X.Zp,{className:d,children:[(0,U.jsx)(X.aR,{children:(0,U.jsxs)("div",{className:"flex items-center justify-between",children:[(0,U.jsxs)("div",{className:"flex items-center gap-2",children:[(0,U.jsx)(ao.A,{className:"w-5 h-5 text-purple-600"}),(0,U.jsxs)("div",{children:[(0,U.jsx)(X.ZB,{children:"AI Task Intelligence"}),(0,U.jsx)(X.BT,{children:q?`Last optimized ${q.toLocaleTimeString()}`:"Click optimize for AI insights"})]})]}),(0,U.jsxs)(Y.$,{onClick:s,disabled:o||e,size:"sm",variant:"outline",children:[(0,U.jsx)(ap.A,{className:`w-4 h-4 mr-2 ${o||e?"animate-spin":""}`}),"Optimize"]})]})}),(0,U.jsxs)(X.Wu,{children:[p&&(0,U.jsxs)(am.Fc,{className:"mb-4",variant:"destructive",children:[(0,U.jsx)(aq.A,{className:"h-4 w-4"}),(0,U.jsx)(am.XL,{children:"AI Analysis Failed"}),(0,U.jsx)(am.TN,{children:p})]}),r&&(0,U.jsxs)(an.tU,{defaultValue:"workload",className:"w-full",children:[(0,U.jsxs)(an.j7,{className:"grid w-full grid-cols-4",children:[(0,U.jsx)(an.Xi,{value:"workload",children:"Workload"}),(0,U.jsx)(an.Xi,{value:"suggestions",children:"Suggestions"}),(0,U.jsx)(an.Xi,{value:"schedule",children:"Schedule"}),(0,U.jsx)(an.Xi,{value:"tips",children:"Tips"})]}),(0,U.jsx)(an.av,{value:"workload",className:"space-y-4",children:v&&(0,U.jsxs)("div",{children:[(0,U.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,U.jsx)("h3",{className:"font-medium",children:"Workload Score"}),(0,U.jsxs)(Z.E,{variant:v.workloadScore>80?"destructive":v.workloadScore>60?"default":"secondary",children:[v.workloadScore,"/100"]})]}),(0,U.jsx)($.k,{value:v.workloadScore,className:"h-3 mb-4"}),(0,U.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,U.jsxs)("div",{className:"text-center",children:[(0,U.jsx)("div",{className:"text-2xl font-bold",children:v.totalTasks}),(0,U.jsx)("div",{className:"text-xs text-gray-600",children:"Total Tasks"})]}),(0,U.jsxs)("div",{className:"text-center",children:[(0,U.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(v.estimatedTotalTime/60),"h"]}),(0,U.jsx)("div",{className:"text-xs text-gray-600",children:"Est. Time"})]}),(0,U.jsxs)("div",{className:"text-center",children:[(0,U.jsx)("div",{className:"text-2xl font-bold",children:v.highPriorityTasks}),(0,U.jsx)("div",{className:"text-xs text-gray-600",children:"High Priority"})]}),(0,U.jsxs)("div",{className:"text-center",children:[(0,U.jsx)("div",{className:"text-2xl font-bold text-red-600",children:v.overdueTasks}),(0,U.jsx)("div",{className:"text-xs text-gray-600",children:"Overdue"})]})]}),(0,U.jsx)("div",{className:"space-y-2",children:v.recommendations.map((a,b)=>(0,U.jsx)(am.Fc,{className:"py-2",children:(0,U.jsx)(am.TN,{className:"text-sm",children:a})},b))})]})}),(0,U.jsx)(an.av,{value:"suggestions",className:"space-y-3",children:w.length>0?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)("div",{className:"flex items-center justify-between",children:[(0,U.jsxs)("span",{className:"text-sm font-medium",children:[w.length," AI Suggestions"]}),y.length>0&&(0,U.jsxs)(Y.$,{onClick:u,size:"sm",children:[(0,U.jsx)(ar.A,{className:"w-4 h-4 mr-2"}),"Apply Order"]})]}),w.slice(0,5).map(b=>{let c=a.find(a=>a.id===b.taskId),d=g.has(b.taskId);return c?(0,U.jsx)(X.Zp,{className:"p-3",children:(0,U.jsxs)("div",{className:"flex items-start justify-between",children:[(0,U.jsxs)("div",{className:"flex-1",children:[(0,U.jsx)("div",{className:"font-medium text-sm mb-1",children:c.title}),(0,U.jsx)("div",{className:"text-xs text-gray-600 mb-2",children:b.reasoning}),(0,U.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,U.jsx)(Z.E,{variant:"outline",className:"text-xs py-0",children:b.suggestedPriority}),(0,U.jsx)(Z.E,{variant:"outline",className:"text-xs py-0",children:b.difficulty}),(0,U.jsxs)(Z.E,{variant:"outline",className:"text-xs py-0",children:[b.impact," impact"]})]})]}),(0,U.jsxs)("div",{className:"flex items-center gap-2 ml-2",children:[(0,U.jsxs)("div",{className:"text-xs text-gray-500",children:[Math.round(100*b.confidence),"%"]}),d?(0,U.jsx)(as.A,{className:"w-4 h-4 text-green-600"}):(0,U.jsx)(Y.$,{onClick:()=>t(b.taskId),size:"sm",variant:"outline",children:"Apply"})]})]})},b.taskId):null})]}):(0,U.jsxs)("div",{className:"text-center py-6 text-gray-500",children:[(0,U.jsx)(ag.A,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),(0,U.jsx)("p",{className:"text-sm",children:"No suggestions available"})]})}),(0,U.jsx)(an.av,{value:"schedule",className:"space-y-4",children:v?.suggestedSchedule&&(0,U.jsx)("div",{children:Object.entries(v.suggestedSchedule).map(([b,c])=>(0,U.jsxs)("div",{className:"mb-4",children:[(0,U.jsxs)("h4",{className:"font-medium text-sm mb-2 capitalize flex items-center gap-2",children:[(0,U.jsx)(al.A,{className:"w-4 h-4"}),b," (",c.length," tasks)"]}),(0,U.jsx)("div",{className:"space-y-1",children:c.map(b=>{let c=a.find(a=>a.id===b);return c?(0,U.jsxs)("div",{className:"text-xs p-2 bg-gray-50 rounded flex items-center justify-between",children:[(0,U.jsx)("span",{children:c.title}),(0,U.jsxs)(Z.E,{variant:"outline",className:"text-xs",children:[c.estimated_minutes||30,"m"]})]},b):null})})]},b))})}),(0,U.jsx)(an.av,{value:"tips",className:"space-y-3",children:x.length>0?x.map((a,b)=>(0,U.jsxs)(am.Fc,{children:[(0,U.jsx)(at.A,{className:"h-4 w-4"}),(0,U.jsx)(am.TN,{children:a})]},b)):(0,U.jsxs)("div",{className:"text-center py-6 text-gray-500",children:[(0,U.jsx)(at.A,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),(0,U.jsx)("p",{className:"text-sm",children:"No tips available yet"})]})})]}),!r&&!o&&(0,U.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,U.jsx)(au.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,U.jsx)("p",{children:'Click "Optimize" to get AI-powered insights'})]})]})]})}var ll=c(60882);function lm(){let[a,b]=(0,W.useState)([]),[c,d]=(0,W.useState)([]),[e,f]=(0,W.useState)(!0),[g,h]=(0,W.useState)(!1),[i,j]=(0,W.useState)(!1),[k,l]=(0,W.useState)(!1),[m,n]=(0,W.useState)(null),[o,p]=(0,W.useState)({title:"",description:"",priority:"medium",target_date:"",category:"general"}),[q,r]=(0,W.useState)({title:"",description:"",priority:"medium",due_date:"",goal_id:"",estimated_minutes:30}),s=async()=>{try{let a=await fetch("/api/goals");if(a.ok){let c=await a.json();b(c.goals||[])}}catch(a){(0,V.vV)("Error fetching goals:",a)}},t=async()=>{try{let a=await fetch("/api/tasks");if(a.ok){let b=await a.json();d(b.tasks||[])}}catch(a){(0,V.vV)("Error fetching tasks:",a)}finally{f(!1)}},u=async()=>{try{(await fetch("/api/goals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok&&(await s(),h(!1),p({title:"",description:"",priority:"medium",target_date:"",category:"general"}))}catch(a){(0,V.vV)("Error creating goal:",a)}},v=async()=>{try{(await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)})).ok&&(await t(),j(!1),r({title:"",description:"",priority:"medium",due_date:"",goal_id:"",estimated_minutes:30}))}catch(a){(0,V.vV)("Error creating task:",a)}},w=async a=>{try{if((await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)await t();else throw Error("Failed to create task")}catch(a){throw(0,V.vV)("Error creating voice task:",a),a}},x=async(a,b)=>{try{(await fetch(`/api/tasks/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:b})})).ok&&(await t(),await s())}catch(a){(0,V.vV)("Error updating task:",a)}},y=async(a,b)=>{try{(await fetch(`/api/tasks/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({priority:b.suggestedPriority,due_date:b.suggestedDeadline,category:b.suggestedCategory,estimated_minutes:b.estimatedCompletionTime})})).ok&&await t()}catch(a){(0,V.vV)("Error applying AI suggestion:",a)}},z=async a=>{try{let b=a.map((a,b)=>({id:a,sort_order:b}));(await fetch("/api/tasks/bulk-update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:b})})).ok&&await t()}catch(a){(0,V.vV)("Error reordering tasks:",a)}},A=a=>{switch(a){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return e?(0,U.jsx)("div",{className:"p-6 space-y-6",children:(0,U.jsxs)("div",{className:"animate-pulse",children:[(0,U.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),(0,U.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4].map(a=>(0,U.jsx)("div",{className:"h-32 bg-gray-200 rounded"},a))})]})}):(0,U.jsxs)("div",{className:"p-6 space-y-6",children:[(0,U.jsxs)("div",{className:"flex items-center justify-between",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"SlayList"}),(0,U.jsx)("p",{className:"text-gray-600",children:"Manage your goals and tasks to dominate your empire"})]}),(0,U.jsxs)("div",{className:"flex gap-2",children:[(0,U.jsxs)(Y.$,{onClick:()=>l(!0),className:"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white",children:[(0,U.jsx)(ae.A,{className:"w-4 h-4 mr-2"}),"Voice Task"]}),(0,U.jsxs)(ad.lG,{open:g,onOpenChange:h,children:[(0,U.jsx)(ad.zM,{asChild:!0,children:(0,U.jsxs)(Y.$,{className:"bg-purple-600 hover:bg-purple-700",children:[(0,U.jsx)(af.A,{className:"w-4 h-4 mr-2"}),"New Goal"]})}),(0,U.jsxs)(ad.Cf,{children:[(0,U.jsxs)(ad.c7,{children:[(0,U.jsx)(ad.L3,{children:"Create New Goal"}),(0,U.jsx)(ad.rr,{children:"Set a new goal to work towards your empire"})]}),(0,U.jsxs)("div",{className:"space-y-4",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)(ab.J,{htmlFor:"goal-title",children:"Title"}),(0,U.jsx)(_.p,{id:"goal-title",value:o.title,onChange:a=>p({...o,title:a.target.value}),placeholder:"Enter goal title"})]}),(0,U.jsxs)("div",{children:[(0,U.jsx)(ab.J,{htmlFor:"goal-description",children:"Description"}),(0,U.jsx)(aa.T,{id:"goal-description",value:o.description,onChange:a=>p({...o,description:a.target.value}),placeholder:"Describe your goal"})]}),(0,U.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)(ab.J,{htmlFor:"goal-priority",children:"Priority"}),(0,U.jsxs)(ac.l6,{value:o.priority,onValueChange:a=>p({...o,priority:a}),children:[(0,U.jsx)(ac.bq,{children:(0,U.jsx)(ac.yv,{})}),(0,U.jsxs)(ac.gC,{children:[(0,U.jsx)(ac.eb,{value:"low",children:"Low"}),(0,U.jsx)(ac.eb,{value:"medium",children:"Medium"}),(0,U.jsx)(ac.eb,{value:"high",children:"High"})]})]})]}),(0,U.jsxs)("div",{children:[(0,U.jsx)(ab.J,{htmlFor:"goal-category",children:"Category"}),(0,U.jsxs)(ac.l6,{value:o.category,onValueChange:a=>p({...o,category:a}),children:[(0,U.jsx)(ac.bq,{children:(0,U.jsx)(ac.yv,{})}),(0,U.jsxs)(ac.gC,{children:[(0,U.jsx)(ac.eb,{value:"general",children:"General"}),(0,U.jsx)(ac.eb,{value:"business",children:"Business"}),(0,U.jsx)(ac.eb,{value:"personal",children:"Personal"}),(0,U.jsx)(ac.eb,{value:"health",children:"Health"})]})]})]})]}),(0,U.jsxs)("div",{children:[(0,U.jsx)(ab.J,{htmlFor:"goal-date",children:"Target Date"}),(0,U.jsx)(_.p,{id:"goal-date",type:"date",value:o.target_date,onChange:a=>p({...o,target_date:a.target.value})})]}),(0,U.jsx)(Y.$,{onClick:u,className:"w-full",children:"Create Goal"})]})]})]}),(0,U.jsxs)(ad.lG,{open:i,onOpenChange:j,children:[(0,U.jsx)(ad.zM,{asChild:!0,children:(0,U.jsxs)(Y.$,{variant:"outline",children:[(0,U.jsx)(af.A,{className:"w-4 h-4 mr-2"}),"New Task"]})}),(0,U.jsxs)(ad.Cf,{children:[(0,U.jsxs)(ad.c7,{children:[(0,U.jsx)(ad.L3,{children:"Create New Task"}),(0,U.jsx)(ad.rr,{children:"Add a new task to work on"})]}),(0,U.jsxs)("div",{className:"space-y-4",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)(ab.J,{htmlFor:"task-title",children:"Title"}),(0,U.jsx)(_.p,{id:"task-title",value:q.title,onChange:a=>r({...q,title:a.target.value}),placeholder:"Enter task title"})]}),(0,U.jsxs)("div",{children:[(0,U.jsx)(ab.J,{htmlFor:"task-description",children:"Description"}),(0,U.jsx)(aa.T,{id:"task-description",value:q.description,onChange:a=>r({...q,description:a.target.value}),placeholder:"Describe your task"})]}),(0,U.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)(ab.J,{htmlFor:"task-priority",children:"Priority"}),(0,U.jsxs)(ac.l6,{value:q.priority,onValueChange:a=>r({...q,priority:a}),children:[(0,U.jsx)(ac.bq,{children:(0,U.jsx)(ac.yv,{})}),(0,U.jsxs)(ac.gC,{children:[(0,U.jsx)(ac.eb,{value:"low",children:"Low"}),(0,U.jsx)(ac.eb,{value:"medium",children:"Medium"}),(0,U.jsx)(ac.eb,{value:"high",children:"High"})]})]})]}),(0,U.jsxs)("div",{children:[(0,U.jsx)(ab.J,{htmlFor:"task-goal",children:"Goal (Optional)"}),(0,U.jsxs)(ac.l6,{value:q.goal_id,onValueChange:a=>r({...q,goal_id:a}),children:[(0,U.jsx)(ac.bq,{children:(0,U.jsx)(ac.yv,{placeholder:"Select a goal"})}),(0,U.jsx)(ac.gC,{children:a.map(a=>(0,U.jsx)(ac.eb,{value:a.id,children:a.title},a.id))})]})]})]}),(0,U.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)(ab.J,{htmlFor:"task-date",children:"Due Date"}),(0,U.jsx)(_.p,{id:"task-date",type:"date",value:q.due_date,onChange:a=>r({...q,due_date:a.target.value})})]}),(0,U.jsxs)("div",{children:[(0,U.jsx)(ab.J,{htmlFor:"task-time",children:"Estimated Time (min)"}),(0,U.jsx)(_.p,{id:"task-time",type:"number",value:q.estimated_minutes,onChange:a=>r({...q,estimated_minutes:parseInt(a.target.value)})})]})]}),(0,U.jsx)(Y.$,{onClick:v,className:"w-full",children:"Create Task"})]})]})]})]})]}),(0,U.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,U.jsx)(X.Zp,{children:(0,U.jsx)(X.Wu,{className:"p-6",children:(0,U.jsxs)("div",{className:"flex items-center justify-between",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Goals"}),(0,U.jsx)("p",{className:"text-2xl font-bold",children:a.length})]}),(0,U.jsx)(ag.A,{className:"w-8 h-8 text-purple-600"})]})})}),(0,U.jsx)(X.Zp,{children:(0,U.jsx)(X.Wu,{className:"p-6",children:(0,U.jsxs)("div",{className:"flex items-center justify-between",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Tasks"}),(0,U.jsx)("p",{className:"text-2xl font-bold",children:c.length})]}),(0,U.jsx)(ah.A,{className:"w-8 h-8 text-blue-600"})]})})}),(0,U.jsx)(X.Zp,{children:(0,U.jsx)(X.Wu,{className:"p-6",children:(0,U.jsxs)("div",{className:"flex items-center justify-between",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed Today"}),(0,U.jsx)("p",{className:"text-2xl font-bold",children:c.filter(a=>"completed"===a.status&&new Date(a.created_at).toDateString()===new Date().toDateString()).length})]}),(0,U.jsx)(ai.A,{className:"w-8 h-8 text-green-600"})]})})}),(0,U.jsx)(X.Zp,{children:(0,U.jsx)(X.Wu,{className:"p-6",children:(0,U.jsxs)("div",{className:"flex items-center justify-between",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Goals"}),(0,U.jsx)("p",{className:"text-2xl font-bold",children:a.filter(a=>"active"===a.status).length})]}),(0,U.jsx)(aj,{className:"w-8 h-8 text-orange-600"})]})})})]}),c.length>0&&(0,U.jsx)("div",{className:"mb-6",children:(0,U.jsx)(lk,{tasks:c,onApplySuggestion:y,onReorderTasks:z})}),(0,U.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,U.jsxs)(X.Zp,{children:[(0,U.jsxs)(X.aR,{children:[(0,U.jsxs)(X.ZB,{className:"flex items-center gap-2",children:[(0,U.jsx)(ag.A,{className:"w-5 h-5"}),"Goals"]}),(0,U.jsx)(X.BT,{children:"Your empire-building objectives"})]}),(0,U.jsx)(X.Wu,{children:0===a.length?(0,U.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,U.jsx)(ag.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,U.jsx)("p",{children:"No goals yet"}),(0,U.jsx)(Y.$,{onClick:()=>h(!0),className:"mt-4",variant:"outline",children:"Create Your First Goal"})]}):(0,U.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,U.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,U.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,U.jsxs)("div",{className:"flex-1",children:[(0,U.jsx)("h3",{className:"font-medium",children:a.title}),(0,U.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:a.description})]}),(0,U.jsx)(Z.E,{className:A(a.priority),children:a.priority})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,U.jsx)("span",{children:"Progress"}),(0,U.jsxs)("span",{children:[a.progress_percentage,"%"]})]}),(0,U.jsx)($.k,{value:a.progress_percentage,className:"h-2"}),(0,U.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,U.jsxs)("span",{className:"flex items-center gap-1",children:[(0,U.jsx)(ak.A,{className:"w-3 h-3"}),a.target_date?new Date(a.target_date).toLocaleDateString():"No deadline"]}),(0,U.jsxs)("span",{className:"flex items-center gap-1",children:[(0,U.jsx)(aj,{className:"w-3 h-3"}),a.category]})]})]})]},a.id))})})]}),(0,U.jsxs)(X.Zp,{children:[(0,U.jsxs)(X.aR,{children:[(0,U.jsxs)(X.ZB,{className:"flex items-center gap-2",children:[(0,U.jsx)(ah.A,{className:"w-5 h-5"}),"Tasks"]}),(0,U.jsx)(X.BT,{children:"Your actionable items"})]}),(0,U.jsx)(X.Wu,{children:0===c.length?(0,U.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,U.jsx)(ah.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,U.jsx)("p",{children:"No tasks yet"}),(0,U.jsx)(Y.$,{onClick:()=>j(!0),className:"mt-4",variant:"outline",children:"Create Your First Task"})]}):(0,U.jsx)("div",{className:"space-y-3",children:c.map(a=>(0,U.jsx)("div",{className:"border rounded-lg p-3",children:(0,U.jsxs)("div",{className:"flex items-start justify-between",children:[(0,U.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,U.jsx)("input",{type:"checkbox",checked:"completed"===a.status,onChange:b=>x(a.id,b.target.checked?"completed":"todo"),className:"mt-1","aria-label":`Mark task "${a.title}" as ${"completed"===a.status?"incomplete":"completed"}`}),(0,U.jsxs)("div",{className:"flex-1",children:[(0,U.jsx)("h4",{className:`font-medium ${"completed"===a.status?"line-through text-gray-500":""}`,children:a.title}),(0,U.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:a.description}),(0,U.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[(0,U.jsxs)("span",{className:"flex items-center gap-1",children:[(0,U.jsx)(ak.A,{className:"w-3 h-3"}),a.due_date?new Date(a.due_date).toLocaleDateString():"No due date"]}),(0,U.jsxs)("span",{className:"flex items-center gap-1",children:[(0,U.jsx)(al.A,{className:"w-3 h-3"}),a.estimated_minutes,"m"]})]})]})]}),(0,U.jsxs)("div",{className:"flex items-center gap-2",children:[(0,U.jsx)(Z.E,{className:A(a.priority),children:a.priority}),(0,U.jsx)(Z.E,{className:(a=>{switch(a){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(a.status),children:a.status})]})]})},a.id))})})]})]}),(0,U.jsx)(ll.A,{open:k,onOpenChange:l,onCreateTask:w,goals:a.map(a=>({id:a.id,title:a.title,category:a.category||"general"}))})]})}},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:a=>{"use strict";a.exports=require("path")},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},47485:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\prett\\\\Desktop\\\\SoloSuccess AI\\\\app\\\\dashboard\\\\slaylist\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\prett\\Desktop\\SoloSuccess AI\\app\\dashboard\\slaylist\\page.tsx","default")},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71016:(a,b,c)=>{Promise.resolve().then(c.bind(c,29112))},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")}};var b=require("../../../webpack-runtime.js");b.C(a);var c=b.X(0,[5873,1428,9961,8343,4925,6273,8280,3239,5881,5604],()=>b(b.s=5052));module.exports=c})();