# Template Save Feature

## Overview

The templates now have save functionality that allows users to save their work to the briefcase. This feature enables users to:

- Save their template data with custom titles
- View saved templates in the briefcase
- Export template data
- Organize their work across different template types

## Features Implemented

### 1. Save Functionality

- **Save Button**: Each interactive template now has a "Save to Briefcase" button
- **Custom Titles**: Users can provide custom titles for their saved work
- **Auto-titles**: If no custom title is provided, the system generates a descriptive title
- **Toast Notifications**: Success/error feedback when saving

### 2. Enhanced Templates

The following templates now have save functionality:

- **Decision Dashboard** üéØ
  - Saves decision, pros/cons, impact, and confidence levels
  - Auto-title: "Decision: [decision text]"
  
- **Delegation List Builder** üìã
  - Saves task list with completion status
  - Auto-title: "Delegation List (X tasks)"
  
- **"I Hate This" Tracker** ‚ö†Ô∏è
  - Saves energy-draining activities list
  - Auto-title: "Energy Drainers (X items)"
  
- **Quarterly Business Review** üìä
  - Saves wins, misses, growth, and lessons
  - Auto-title: "Q[X] Business Review"

### 3. Briefcase Integration

- **New Tab**: "Templates" tab in the briefcase
- **Template Cards**: Visual cards showing saved templates with icons
- **View Data**: Click "View" to see the saved template data
- **Export**: Export functionality (ready for implementation)
- **Delete**: Delete saved templates (ready for implementation)

### 4. Database Schema

New table: `user_templates`

```sql
CREATE TABLE user_templates (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  template_slug TEXT NOT NULL,
  template_data JSONB NOT NULL,
  title TEXT NOT NULL,
  description TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### 5. API Endpoints

- `POST /api/templates` - Save template data
- `GET /api/templates` - Retrieve user's saved templates

## How to Use

### Saving a Template

1. Navigate to any interactive template (e.g., `/templates/decision-dashboard`)
2. Fill out the template with your data
3. Optionally enter a custom title in the "Save as..." field
4. Click "Save to Briefcase" or the save button
5. You'll see a success toast notification

### Viewing Saved Templates

1. Go to the Dashboard ‚Üí Briefcase
2. Click the "Templates" tab
3. View your saved templates in card format
4. Click "View" to see the detailed data
5. Use "Export" to download the data (coming soon)

## Technical Implementation

### Files Created/Modified

- `app/api/templates/route.ts` - API endpoints
- `hooks/use-template-save.ts` - Custom hook for save functionality
- `components/templates/saved-templates-list.tsx` - Briefcase template viewer
- `scripts/templates-schema.sql` - Database schema
- Updated template components with save functionality

### Dependencies

- Uses existing Supabase setup
- Integrates with existing briefcase UI
- Uses existing toast notification system

## Future Enhancements

1. **Load Functionality**: Load saved templates back into the form
2. **Template Versioning**: Track changes and versions
3. **Sharing**: Share templates with team members
4. **Export Formats**: PDF, CSV, JSON export options
5. **Template Categories**: Organize saved templates by category
6. **Search & Filter**: Search through saved templates

## Security

- Row Level Security (RLS) enabled
- Users can only access their own templates
- Template data stored as JSONB for flexibility
- Proper authentication required for all operations
